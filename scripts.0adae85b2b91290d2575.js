(function(){var t,e,n,i,o,r,a,s,l,c,u,d,h,f,p,g,m,v,y,x,b,_,w,S,C,M,T,k,A,I,D,P,E,N,L,R,O,B,z,V,F,H,W,G,U,j,$,q,Y=[].slice,X={}.hasOwnProperty,Z=function(t,e){function n(){this.constructor=t}for(var i in e)X.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},K=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};for(b={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},A=function(){var t;return null!=(t="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?t:+new Date},D=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,x=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==D&&(D=function(t){return setTimeout(t,50)},x=function(t){return clearTimeout(t)}),E=function(t){var e,n;return e=A(),(n=function(){var i;return(i=A()-e)>=33?(e=A(),t(i,function(){return D(n)})):setTimeout(n,33-i)})()},P=function(){var t,e,n;return n=arguments[0],e=arguments[1],t=3<=arguments.length?Y.call(arguments,2):[],"function"==typeof n[e]?n[e].apply(n,t):n[e]},_=function(){var t,e,n,i,o,r,a;for(e=arguments[0],r=0,a=(i=2<=arguments.length?Y.call(arguments,1):[]).length;a>r;r++)if(n=i[r])for(t in n)X.call(n,t)&&(o=n[t],null!=e[t]&&"object"==typeof e[t]&&null!=o&&"object"==typeof o?_(e[t],o):e[t]=o);return e},m=function(t){var e,n,i,o;for(n=e=0,i=0,o=t.length;o>i;i++)n+=Math.abs(t[i]),e++;return n/e},S=function(t,e){var n,i;if(null==t&&(t="options"),null==e&&(e=!0),i=document.querySelector("[data-pace-"+t+"]")){if(n=i.getAttribute("data-pace-"+t),!e)return n;try{return JSON.parse(n)}catch(r){return"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",r):void 0}}},a=function(){function t(){}return t.prototype.on=function(t,e,n,i){var o;return null==i&&(i=!1),null==this.bindings&&(this.bindings={}),null==(o=this.bindings)[t]&&(o[t]=[]),this.bindings[t].push({handler:e,ctx:n,once:i})},t.prototype.once=function(t,e,n){return this.on(t,e,n,!0)},t.prototype.off=function(t,e){var n,i,o;if(null!=(null!=(i=this.bindings)?i[t]:void 0)){if(null==e)return delete this.bindings[t];for(n=0,o=[];n<this.bindings[t].length;)o.push(this.bindings[t][n].handler===e?this.bindings[t].splice(n,1):n++);return o}},t.prototype.trigger=function(){var t,e,n,i,o,r,a,s;if(n=arguments[0],t=2<=arguments.length?Y.call(arguments,1):[],null!=(r=this.bindings)?r[n]:void 0){for(i=0,s=[];i<this.bindings[n].length;)o=(a=this.bindings[n][i]).once,a.handler.apply(null!=(e=a.ctx)?e:this,t),s.push(o?this.bindings[n].splice(i,1):i++);return s}},t}(),c=window.Pace||{},window.Pace=c,_(c,a.prototype),I=c.options=_({},b,window.paceOptions,S()),W=0,U=($=["ajax","document","eventLag","elements"]).length;U>W;W++)!0===I[O=$[W]]&&(I[O]=b[O]);l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Z(e,t),e}(Error),e=function(){function t(){this.progress=0}return t.prototype.getElement=function(){var t;if(null==this.el){if(!(t=document.querySelector(I.target)))throw new l;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=t.firstChild?t.insertBefore(this.el,t.firstChild):t.appendChild(this.el)}return this.el},t.prototype.finish=function(){var t;return(t=this.getElement()).className=t.className.replace("pace-active",""),t.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},t.prototype.update=function(t){return this.progress=t,this.render()},t.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(t){l=t}return this.el=void 0},t.prototype.render=function(){var t,e,n,i,o,r;if(null==document.querySelector(I.target))return!1;for(t=this.getElement(),n="translate3d("+this.progress+"%, 0, 0)",i=0,o=(r=["webkitTransform","msTransform","transform"]).length;o>i;i++)t.children[0].style[r[i]]=n;return(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(t.children[0].setAttribute("data-progress-text",(0|this.progress)+"%"),this.progress>=100?e="99":(e=this.progress<10?"0":"",e+=0|this.progress),t.children[0].setAttribute("data-progress",""+e)),this.lastRenderedProgress=this.progress},t.prototype.done=function(){return this.progress>=100},t}(),s=function(){function t(){this.bindings={}}return t.prototype.trigger=function(t,e){var n,i,o,r;if(null!=this.bindings[t]){for(r=[],n=0,i=(o=this.bindings[t]).length;i>n;n++)r.push(o[n].call(this,e));return r}},t.prototype.on=function(t,e){var n;return null==(n=this.bindings)[t]&&(n[t]=[]),this.bindings[t].push(e)},t}(),H=window.XMLHttpRequest,F=window.XDomainRequest,V=window.WebSocket,w=function(t,e){var n,i;for(n in i=[],e.prototype)try{i.push(null==t[n]&&"function"!=typeof e[n]?"function"==typeof Object.defineProperty?Object.defineProperty(t,n,{get:function(){return e.prototype[n]},configurable:!0,enumerable:!0}):t[n]=e.prototype[n]:void 0)}catch(r){}return i},T=[],c.ignore=function(){var t,e,n;return e=arguments[0],t=2<=arguments.length?Y.call(arguments,1):[],T.unshift("ignore"),n=e.apply(null,t),T.shift(),n},c.track=function(){var t,e,n;return e=arguments[0],t=2<=arguments.length?Y.call(arguments,1):[],T.unshift("track"),n=e.apply(null,t),T.shift(),n},R=function(t){var e;if(null==t&&(t="GET"),"track"===T[0])return"force";if(!T.length&&I.ajax){if("socket"===t&&I.ajax.trackWebSockets)return!0;if(e=t.toUpperCase(),K.call(I.ajax.trackMethods,e)>=0)return!0}return!1},u=function(t){function e(){var t,n=this;e.__super__.constructor.apply(this,arguments),t=function(t){var e;return e=t.open,t.open=function(i,o,r){return R(i)&&n.trigger("request",{type:i,url:o,request:t}),e.apply(t,arguments)}},window.XMLHttpRequest=function(e){var n;return n=new H(e),t(n),n};try{w(window.XMLHttpRequest,H)}catch(i){}if(null!=F){window.XDomainRequest=function(){var e;return e=new F,t(e),e};try{w(window.XDomainRequest,F)}catch(i){}}if(null!=V&&I.ajax.trackWebSockets){window.WebSocket=function(t,e){var i;return i=null!=e?new V(t,e):new V(t),R("socket")&&n.trigger("request",{type:"socket",url:t,protocols:e,request:i}),i};try{w(window.WebSocket,V)}catch(i){}}}return Z(e,t),e}(s),G=null,L=function(t){var e,n,i,o;for(n=0,i=(o=I.ajax.ignoreURLs).length;i>n;n++)if("string"==typeof(e=o[n])){if(-1!==t.indexOf(e))return!0}else if(e.test(t))return!0;return!1},(C=function(){return null==G&&(G=new u),G})().on("request",function(e){var n,i,o,r;return r=e.type,o=e.request,L(e.url)||c.running||!1===I.restartOnRequestAfter&&"force"!==R(r)?void 0:(i=arguments,"boolean"==typeof(n=I.restartOnRequestAfter||0)&&(n=0),setTimeout(function(){var e,n,a,s,l;if("socket"===r?o.readyState<2:0<(a=o.readyState)&&4>a){for(c.restart(),l=[],e=0,n=(s=c.sources).length;n>e;e++){if((O=s[e])instanceof t){O.watch.apply(O,i);break}l.push(void 0)}return l}},n))}),t=function(){function t(){var t=this;this.elements=[],C().on("request",function(){return t.watch.apply(t,arguments)})}return t.prototype.watch=function(t){var e,n,i;return i=t.type,e=t.request,L(t.url)?void 0:(n="socket"===i?new f(e):new p(e),this.elements.push(n))},t}(),p=function(t){var e,n,i,o,r=this;if(this.progress=0,null!=window.ProgressEvent)for(t.addEventListener("progress",function(t){return r.progress=t.lengthComputable?100*t.loaded/t.total:r.progress+(100-r.progress)/2},!1),e=0,n=(o=["load","abort","timeout","error"]).length;n>e;e++)t.addEventListener(o[e],function(){return r.progress=100},!1);else i=t.onreadystatechange,t.onreadystatechange=function(){var e;return 0===(e=t.readyState)||4===e?r.progress=100:3===t.readyState&&(r.progress=50),"function"==typeof i?i.apply(null,arguments):void 0}},f=function(t){var e,n,i,o=this;for(this.progress=0,e=0,n=(i=["error","open"]).length;n>e;e++)t.addEventListener(i[e],function(){return o.progress=100},!1)},i=function(t){var e,n,i;for(null==t&&(t={}),this.elements=[],null==t.selectors&&(t.selectors=[]),e=0,n=(i=t.selectors).length;n>e;e++)this.elements.push(new o(i[e]))},o=function(){function t(t){this.selector=t,this.progress=0,this.check()}return t.prototype.check=function(){var t=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return t.check()},I.elements.checkInterval)},t.prototype.done=function(){return this.progress=100},t}(),n=function(){function t(){var t,e,n=this;this.progress=null!=(e=this.states[document.readyState])?e:100,t=document.onreadystatechange,document.onreadystatechange=function(){return null!=n.states[document.readyState]&&(n.progress=n.states[document.readyState]),"function"==typeof t?t.apply(null,arguments):void 0}}return t.prototype.states={loading:0,interactive:50,complete:100},t}(),r=function(){var t,e,n,i,o,r=this;this.progress=0,t=0,o=[],i=0,n=A(),e=setInterval(function(){var a;return a=A()-n-50,n=A(),o.push(a),o.length>I.eventLag.sampleCount&&o.shift(),t=m(o),++i>=I.eventLag.minSamples&&t<I.eventLag.lagThreshold?(r.progress=100,clearInterval(e)):r.progress=3/(t+3)*100},50)},h=function(){function t(t){this.source=t,this.last=this.sinceLastUpdate=0,this.rate=I.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=P(this.source,"progress"))}return t.prototype.tick=function(t,e){var n;return null==e&&(e=P(this.source,"progress")),e>=100&&(this.done=!0),e===this.last?this.sinceLastUpdate+=t:(this.sinceLastUpdate&&(this.rate=(e-this.last)/this.sinceLastUpdate),this.catchup=(e-this.progress)/I.catchupTime,this.sinceLastUpdate=0,this.last=e),e>this.progress&&(this.progress+=this.catchup*t),n=1-Math.pow(this.progress/100,I.easeFactor),this.progress+=n*this.rate*t,this.progress=Math.min(this.lastProgress+I.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},t}(),B=null,N=null,v=null,z=null,g=null,y=null,c.running=!1,M=function(){return I.restartOnPushState?c.restart():void 0},null!=window.history.pushState&&(j=window.history.pushState,window.history.pushState=function(){return M(),j.apply(window.history,arguments)}),null!=window.history.replaceState&&(q=window.history.replaceState,window.history.replaceState=function(){return M(),q.apply(window.history,arguments)}),d={ajax:t,elements:i,document:n,eventLag:r},(k=function(){var t,n,i,o,r,a,s,l;for(c.sources=B=[],n=0,o=(a=["ajax","elements","document","eventLag"]).length;o>n;n++)!1!==I[t=a[n]]&&B.push(new d[t](I[t]));for(i=0,r=(l=null!=(s=I.extraSources)?s:[]).length;r>i;i++)B.push(new(O=l[i])(I));return c.bar=v=new e,N=[],z=new h})(),c.stop=function(){return c.trigger("stop"),c.running=!1,v.destroy(),y=!0,null!=g&&("function"==typeof x&&x(g),g=null),k()},c.restart=function(){return c.trigger("restart"),c.stop(),c.start()},c.go=function(){var t;return c.running=!0,v.render(),t=A(),y=!1,g=E(function(e,n){var i,o,r,a,s,l,u,d,f,p,g,m,x;for(i=d=0,o=!0,a=f=0,g=B.length;g>f;a=++f)for(O=B[a],u=null!=N[a]?N[a]:N[a]=[],s=p=0,m=(r=null!=(x=O.elements)?x:[O]).length;m>p;s=++p)o&=(l=null!=u[s]?u[s]:u[s]=new h(r[s])).done,l.done||(i++,d+=l.tick(e));return v.update(z.tick(e,d/i)),v.done()||o||y?(v.update(100),c.trigger("done"),setTimeout(function(){return v.finish(),c.running=!1,c.trigger("hide")},Math.max(I.ghostTime,Math.max(I.minTime-(A()-t),0)))):n()})},c.start=function(t){_(I,t),c.running=!0;try{v.render()}catch(e){l=e}return document.querySelector(".pace")?(c.trigger("start"),c.go()):setTimeout(c.start,50)},"function"==typeof define&&define.amd?define(["pace"],function(){return c}):"object"==typeof exports?module.exports=c:I.startOnPageLoad&&c.start()}).call(this),function(t,e){"use strict";function n(t,n,r){if("string"!=typeof t)throw"invalid module definition, module id must be defined and be a string";if(n===e)throw"invalid module definition, dependencies must be specified";if(r===e)throw"invalid module definition, definition function must be specified";!function(t,e){for(var n,r=[],a=0;a<t.length;++a){if(!(n=o[t[a]]||i(t[a])))throw"module definition dependecy not found: "+t[a];r.push(n)}e.apply(null,r)}(n,function(){o[t]=r.apply(null,arguments)})}function i(e){for(var n=t,i=e.split(/[.\/]/),o=0;o<i.length;++o){if(!n[i[o]])return;n=n[i[o]]}return n}var o={},r="tinymce/geom/Rect",a="tinymce/util/Promise",s="tinymce/util/Delay",l="tinymce/Env",c="tinymce/dom/EventUtils",u="tinymce/dom/Sizzle",d="tinymce/util/Arr",h="tinymce/util/Tools",f="tinymce/dom/DomQuery",p="tinymce/html/Styles",g="tinymce/dom/TreeWalker",m="tinymce/dom/Range",v="tinymce/html/Entities",y="tinymce/dom/StyleSheetLoader",x="tinymce/dom/DOMUtils",b="tinymce/dom/ScriptLoader",_="tinymce/AddOnManager",w="tinymce/dom/NodeType",S="tinymce/text/Zwsp",C="tinymce/caret/CaretContainer",M="tinymce/dom/RangeUtils",T="tinymce/NodeChange",k="tinymce/html/Node",A="tinymce/html/Schema",I="tinymce/html/SaxParser",D="tinymce/html/DomParser",P="tinymce/html/Writer",E="tinymce/html/Serializer",N="tinymce/dom/Serializer",L="tinymce/dom/TridentSelection",R="tinymce/util/VK",O="tinymce/dom/ControlSelection",B="tinymce/util/Fun",z="tinymce/caret/CaretCandidate",V="tinymce/geom/ClientRect",F="tinymce/text/ExtendingChar",H="tinymce/caret/CaretPosition",W="tinymce/caret/CaretBookmark",G="tinymce/dom/BookmarkManager",U="tinymce/dom/Selection",j="tinymce/dom/ElementUtils",$="tinymce/fmt/Preview",q="tinymce/fmt/Hooks",Y="tinymce/Formatter",X="tinymce/undo/Diff",Z="tinymce/undo/Fragments",K="tinymce/undo/Levels",J="tinymce/UndoManager",Q="tinymce/EnterKey",tt="tinymce/ForceBlocks",et="tinymce/caret/CaretUtils",nt="tinymce/caret/CaretWalker",it="tinymce/InsertList",ot="tinymce/InsertContent",rt="tinymce/EditorCommands",at="tinymce/util/URI",st="tinymce/util/Class",lt="tinymce/util/EventDispatcher",ct="tinymce/data/Binding",ut="tinymce/util/Observable",dt="tinymce/data/ObservableObject",ht="tinymce/ui/Selector",ft="tinymce/ui/Collection",pt="tinymce/ui/DomUtils",gt="tinymce/ui/BoxUtils",mt="tinymce/ui/ClassList",vt="tinymce/ui/ReflowQueue",yt="tinymce/ui/Control",xt="tinymce/ui/Factory",bt="tinymce/ui/KeyboardNavigation",_t="tinymce/ui/Container",wt="tinymce/ui/DragHelper",St="tinymce/ui/Scrollable",Ct="tinymce/ui/Panel",Mt="tinymce/ui/Movable",Tt="tinymce/ui/Resizable",kt="tinymce/ui/FloatPanel",At="tinymce/ui/Window",It="tinymce/ui/MessageBox",Dt="tinymce/WindowManager",Pt="tinymce/ui/Tooltip",Et="tinymce/ui/Widget",Nt="tinymce/ui/Progress",Lt="tinymce/ui/Notification",Rt="tinymce/NotificationManager",Ot="tinymce/dom/NodePath",Bt="tinymce/util/Quirks",zt="tinymce/EditorObservable",Vt="tinymce/Mode",Ft="tinymce/Shortcuts",Ht="tinymce/file/Uploader",Wt="tinymce/file/Conversions",Gt="tinymce/file/ImageScanner",Ut="tinymce/file/BlobCache",jt="tinymce/file/UploadStatus",$t="tinymce/ErrorReporter",qt="tinymce/EditorUpload",Yt="tinymce/caret/FakeCaret",Xt="tinymce/dom/Dimensions",Zt="tinymce/caret/LineWalker",Kt="tinymce/caret/LineUtils",Jt="tinymce/dom/MousePosition",Qt="tinymce/DragDropOverrides",te="tinymce/SelectionOverrides",ee="tinymce/util/Uuid",ne="tinymce/ui/Sidebar",ie="tinymce/Editor",oe="tinymce/util/I18n",re="tinymce/FocusManager",ae="tinymce/EditorManager",se="tinymce/util/XHR",le="tinymce/util/JSON",ce="tinymce/util/JSONRequest",ue="tinymce/util/JSONP",de="tinymce/util/LocalStorage",he="tinymce/Compat",fe="tinymce/ui/Layout",pe="tinymce/ui/AbsoluteLayout",ge="tinymce/ui/Button",me="tinymce/ui/ButtonGroup",ve="tinymce/ui/Checkbox",ye="tinymce/ui/ComboBox",xe="tinymce/ui/ColorBox",be="tinymce/ui/PanelButton",_e="tinymce/ui/ColorButton",we="tinymce/util/Color",Se="tinymce/ui/ColorPicker",Ce="tinymce/ui/Path",Me="tinymce/ui/ElementPath",Te="tinymce/ui/FormItem",ke="tinymce/ui/Form",Ae="tinymce/ui/FieldSet",Ie="tinymce/content/LinkTargets",De="tinymce/ui/FilePicker",Pe="tinymce/ui/FitLayout",Ee="tinymce/ui/FlexLayout",Ne="tinymce/ui/FlowLayout",Le="tinymce/fmt/FontInfo",Re="tinymce/ui/FormatControls",Oe="tinymce/ui/GridLayout",Be="tinymce/ui/Iframe",ze="tinymce/ui/InfoBox",Ve="tinymce/ui/Label",Fe="tinymce/ui/Toolbar",He="tinymce/ui/MenuBar",We="tinymce/ui/MenuButton",Ge="tinymce/ui/MenuItem",Ue="tinymce/ui/Throbber",je="tinymce/ui/Menu",$e="tinymce/ui/ListBox",qe="tinymce/ui/Radio",Ye="tinymce/ui/ResizeHandle",Xe="tinymce/ui/SelectBox",Ze="tinymce/ui/Slider",Ke="tinymce/ui/Spacer",Je="tinymce/ui/SplitButton",Qe="tinymce/ui/StackLayout",tn="tinymce/ui/TabPanel",en="tinymce/ui/TextBox";n(r,[],function(){function t(t,n,i){var r,a,s,l,c,u;return r=n.x,a=n.y,s=t.w,l=t.h,c=n.w,u=n.h,"b"===(i=(i||"").split(""))[0]&&(a+=u),"r"===i[1]&&(r+=c),"c"===i[0]&&(a+=o(u/2)),"c"===i[1]&&(r+=o(c/2)),"b"===i[3]&&(a-=l),"r"===i[4]&&(r-=s),"c"===i[3]&&(a-=o(l/2)),"c"===i[4]&&(r-=o(s/2)),e(r,a,s,l)}function e(t,e,n,i){return{x:t,y:e,w:n,h:i}}var n=Math.min,i=Math.max,o=Math.round;return{inflate:function(t,n,i){return e(t.x-n,t.y-i,t.w+2*n,t.h+2*i)},relativePosition:t,findBestRelativePosition:function(e,n,i,o){var r,a;for(a=0;a<o.length;a++)if((r=t(e,n,o[a])).x>=i.x&&r.x+r.w<=i.w+i.x&&r.y>=i.y&&r.y+r.h<=i.h+i.y)return o[a];return null},intersect:function(t,o){var r,a,s,l;return r=i(t.x,o.x),a=i(t.y,o.y),s=n(t.x+t.w,o.x+o.w),l=n(t.y+t.h,o.y+o.h),s-r<0||l-a<0?null:e(r,a,s-r,l-a)},clamp:function(t,n,o){var r,a,s,l,c,u,d,h,f,p;return u=t.y,d=t.x+t.w,h=t.y+t.h,f=n.x+n.w,p=n.y+n.h,r=i(0,n.x-(c=t.x)),a=i(0,n.y-u),s=i(0,d-f),l=i(0,h-p),c+=r,u+=a,o&&(d+=r,h+=a,c-=s,u-=l),e(c,u,(d-=s)-c,(h-=l)-u)},create:e,fromClientRect:function(t){return e(t.left,t.top,t.width,t.height)}}}),n(a,[],function(){function t(t,e){return function(){t.apply(e,arguments)}}function e(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],s(e,t(i,this),t(o,this))}function n(t){var e=this;return null===this._state?void this._deferreds.push(t):void l(function(){var n=e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(o){return void t.reject(o)}t.resolve(i)}else(e._state?t.resolve:t.reject)(e._value)})}function i(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void s(t(n,e),t(i,this),t(o,this))}this._state=!0,this._value=e,r.call(this)}catch(a){o.call(this,a)}}function o(t){this._state=!1,this._value=t,r.call(this)}function r(){for(var t=0,e=this._deferreds.length;t<e;t++)n.call(this,this._deferreds[t]);this._deferreds=null}function a(t,e,n,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=i}function s(t,e,n){var i=!1;try{t(function(t){i||(i=!0,e(t))},function(t){i||(i=!0,n(t))})}catch(o){if(i)return;i=!0,n(o)}}if(window.Promise)return window.Promise;var l=e.immediateFn||"function"==typeof setImmediate&&setImmediate||function(t){setTimeout(t,1)},c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.then=function(t,i){var o=this;return new e(function(e,r){n.call(o,new a(t,i,e,r))})},e.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&c(arguments[0])?arguments[0]:arguments);return new e(function(e,n){function i(r,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(t){i(r,t)},n)}t[r]=a,0==--o&&e(t)}catch(l){n(l)}}if(0===t.length)return e([]);for(var o=t.length,r=0;r<t.length;r++)i(r,t[r])})},e.resolve=function(t){return t&&"object"==typeof t&&t.constructor===e?t:new e(function(e){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var i=0,o=t.length;i<o;i++)t[i].then(e,n)})},e}),n(s,[a],function(t){function e(t,e){return"number"!=typeof e&&(e=0),setTimeout(t,e)}function n(t,e){return"number"!=typeof e&&(e=1),setInterval(t,e)}function i(t,n){var i,o;return(o=function(){var o=arguments;clearTimeout(i),i=e(function(){t.apply(this,o)},n)}).stop=function(){clearTimeout(i)},o}var o;return{requestAnimationFrame:function(e,n){return o?void o.then(e):void(o=new t(function(t){n||(n=document.body),function(t,e){var n,i=window.requestAnimationFrame,o=["ms","moz","webkit"];for(n=0;n<o.length&&!i;n++)i=window[o[n]+"RequestAnimationFrame"];i||(i=function(t){window.setTimeout(t,0)}),i(t,e)}(t,n)}).then(e))},setTimeout:e,setInterval:n,setEditorTimeout:function(t,n,i){return e(function(){t.removed||n()},i)},setEditorInterval:function(t,e,i){var o;return o=n(function(){t.removed?clearInterval(o):e()},i)},debounce:i,throttle:i,clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)}}}),n(l,[],function(){function t(t){return"matchMedia"in window&&matchMedia(t).matches}var e,n,i,o,r,a,s,l,c,u,d,h,f,p=navigator,g=p.userAgent;return e=window.opera&&window.opera.buildNumber,c=/Android/.test(g),i=(i=!(n=/WebKit/.test(g))&&!e&&/MSIE/gi.test(g)&&/Explorer/gi.test(p.appName))&&/MSIE (\w+)\./.exec(g)[1],o=-1!=g.indexOf("Trident/")&&(-1!=g.indexOf("rv:")||-1!=p.appName.indexOf("Netscape"))&&11,r=-1!=g.indexOf("Edge/")&&!i&&!o&&12,i=i||o||r,a=!n&&!o&&/Gecko/.test(g),s=-1!=g.indexOf("Mac"),l=/(iPad|iPhone)/.test(g),u="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,d=t("only screen and (max-device-width: 480px)")&&(c||l),h=t("only screen and (min-width: 800px)")&&(c||l),f=-1!=g.indexOf("Windows Phone"),r&&(n=!1),{opera:e,webkit:n,ie:i,gecko:a,mac:s,iOS:l,android:c,contentEditable:!l||u||g.match(/AppleWebKit\/(\d*)/)[1]>=534,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=i,range:window.getSelection&&"Range"in window,documentMode:i&&!r?document.documentMode||7:10,fileApi:u,ceFalse:!1===i||i>8,canHaveCSP:!1===i||i>11,desktop:!d&&!h,windowsPhone:f}}),n(c,[s,l],function(t,e){function n(t,e,n,i){t.addEventListener?t.addEventListener(e,n,i||!1):t.attachEvent&&t.attachEvent("on"+e,n)}function i(t,e,n,i){t.removeEventListener?t.removeEventListener(e,n,i||!1):t.detachEvent&&t.detachEvent("on"+e,n)}function o(t,n){function i(){return!1}function o(){return!0}var r,a,s=n||{};for(r in t)c[r]||(s[r]=t[r]);if(s.target||(s.target=s.srcElement||document),e.experimentalShadowDom&&(s.target=function(t,e){var n,i=e;return(n=t.path)&&n.length>0&&(i=n[0]),t.deepPath&&(n=t.deepPath())&&n.length>0&&(i=n[0]),i}(t,s.target)),t&&l.test(t.type)&&t.pageX===a&&t.clientX!==a){var u=s.target.ownerDocument||document,d=u.documentElement,h=u.body;s.pageX=t.clientX+(d&&d.scrollLeft||h&&h.scrollLeft||0)-(d&&d.clientLeft||h&&h.clientLeft||0),s.pageY=t.clientY+(d&&d.scrollTop||h&&h.scrollTop||0)-(d&&d.clientTop||h&&h.clientTop||0)}return s.preventDefault=function(){s.isDefaultPrevented=o,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},s.stopPropagation=function(){s.isPropagationStopped=o,t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)},s.stopImmediatePropagation=function(){s.isImmediatePropagationStopped=o,s.stopPropagation()},s.isDefaultPrevented||(s.isDefaultPrevented=i,s.isPropagationStopped=i,s.isImmediatePropagationStopped=i),void 0===s.metaKey&&(s.metaKey=!1),s}function r(e,o,r){function a(){r.domLoaded||(r.domLoaded=!0,o(l))}var s=e.document,l={type:"ready"};return r.domLoaded?void o(l):(s.addEventListener?"complete"===s.readyState?a():n(e,"DOMContentLoaded",a):(n(s,"readystatechange",function t(){("complete"===s.readyState||"interactive"===s.readyState&&s.body)&&(i(s,"readystatechange",t),a())}),s.documentElement.doScroll&&e.self===e.top&&function n(){try{s.documentElement.doScroll("left")}catch(e){return void t.setTimeout(n)}a()}()),void n(e,"load",a))}function a(){function t(t,e){var n,i,o,r,a=h[e];if(n=a&&a[t.type])for(i=0,o=n.length;i<o;i++)if((r=n[i])&&!1===r.func.call(r.scope,t)&&t.preventDefault(),t.isImmediatePropagationStopped())return}var e,a,l,c,u,d=this,h={};a=s+(+new Date).toString(32),c="onmouseenter"in document.documentElement,l="onfocusin"in document.documentElement,u={mouseenter:"mouseover",mouseleave:"mouseout"},e=1,d.domLoaded=!1,d.events=h,d.bind=function(i,s,f,p){function g(e){t(o(e||S.event),m)}var m,v,y,x,b,_,w,S=window;if(i&&3!==i.nodeType&&8!==i.nodeType){for(i[a]?m=i[a]:(m=e++,i[a]=m,h[m]={}),p=p||i,y=(s=s.split(" ")).length;y--;)_=g,b=w=!1,"DOMContentLoaded"===(x=s[y])&&(x="ready"),d.domLoaded&&"ready"===x&&"complete"==i.readyState?f.call(p,o({type:x})):(c||(b=u[x])&&(_=function(e){var n,i;if(n=e.currentTarget,(i=e.relatedTarget)&&n.contains)i=n.contains(i);else for(;i&&i!==n;)i=i.parentNode;i||((e=o(e||S.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=n,t(e,m))}),l||"focusin"!==x&&"focusout"!==x||(w=!0,b="focusin"===x?"focus":"blur",_=function(e){(e=o(e||S.event)).type="focus"===e.type?"focusin":"focusout",t(e,m)}),(v=h[m][x])?"ready"===x&&d.domLoaded?f({type:x}):v.push({func:f,scope:p}):(h[m][x]=v=[{func:f,scope:p}],v.fakeName=b,v.capture=w,v.nativeHandler=_,"ready"===x?r(i,_,d):n(i,b||x,_,w)));return i=v=0,f}},d.unbind=function(t,e,n){var o,r,s,l,c,u;if(!t||3===t.nodeType||8===t.nodeType)return d;if(o=t[a]){if(u=h[o],e){for(s=(e=e.split(" ")).length;s--;)if(r=u[c=e[s]]){if(n)for(l=r.length;l--;)if(r[l].func===n){var p=r.nativeHandler,g=r.fakeName,m=r.capture;(r=r.slice(0,l).concat(r.slice(l+1))).nativeHandler=p,r.fakeName=g,r.capture=m,u[c]=r}n&&0!==r.length||(delete u[c],i(t,r.fakeName||c,r.nativeHandler,r.capture))}}else{for(c in u)i(t,(r=u[c]).fakeName||c,r.nativeHandler,r.capture);u={}}for(c in u)return d;delete h[o];try{delete t[a]}catch(f){t[a]=null}}return d},d.fire=function(e,n,i){var r;if(!e||3===e.nodeType||8===e.nodeType)return d;(i=o(null,i)).type=n,i.target=e;do{(r=e[a])&&t(i,r),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!i.isPropagationStopped());return d},d.clean=function(t){var e,n,i=d.unbind;if(!t||3===t.nodeType||8===t.nodeType)return d;if(t[a]&&i(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName)for(i(t),e=(n=t.getElementsByTagName("*")).length;e--;)(t=n[e])[a]&&i(t);return d},d.destroy=function(){h={}},d.cancel=function(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}}var s="mce-data-",l=/^(?:mouse|contextmenu)|click/,c={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1};return(a.Event=new a).bind(window,"ready",function(){}),a}),n(u,[],function(){function t(t,e,n,i){var o,r,a,s,l,c,d,f,p,g;if((e?e.ownerDocument||e:F)!==E&&P(e),n=n||[],!t||"string"!=typeof t)return n;if(1!==(s=(e=e||E).nodeType)&&9!==s)return[];if(L&&!i){if(o=vt.exec(t))if(a=o[1]){if(9===s){if(!(r=e.getElementById(a))||!r.parentNode)return n;if(r.id===a)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(a))&&z(e,r)&&r.id===a)return n.push(r),n}else{if(o[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((a=o[3])&&_.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(a)),n}if(_.qsa&&(!R||!R.test(t))){if(f=d=V,p=e,g=9===s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(c=M(t),(d=e.getAttribute("id"))?f=d.replace(bt,"\\$&"):e.setAttribute("id",f),f="[id='"+f+"'] ",l=c.length;l--;)c[l]=f+h(c[l]);p=yt.test(t)&&u(e.parentNode)||e,g=c.join(",")}if(g)try{return Q.apply(n,p.querySelectorAll(g)),n}catch(m){}finally{d||e.removeAttribute("id")}}}return k(t.replace(st,"$1"),e,n,i)}function n(){var t=[];return function e(n,i){return t.push(n+" ")>w.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function i(t){return t[V]=!0,t}function o(t){var e=E.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var n=t.split("|"),i=t.length;i--;)w.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Y)-(~t.sourceIndex||Y);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return i(function(e){return e=+e,i(function(n,i){for(var o,r=t([],n.length,e),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))})})}function u(t){return t&&typeof t.getElementsByTagName!==q&&t}function d(){}function h(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function f(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=W++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,a){var s,l,c=[H,r];if(a){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,a))return!0}else for(;e=e[i];)if(1===e.nodeType||o){if((s=(l=e[V]||(e[V]={}))[i])&&s[0]===H&&s[1]===r)return c[2]=s[2];if(l[i]=c,c[2]=t(e,n,a))return!0}}}function p(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function g(e,n,i){for(var o=0,r=n.length;o<r;o++)t(e,n[o],i);return i}function m(t,e,n,i,o){for(var r,a=[],s=0,l=t.length,c=null!=e;s<l;s++)(r=t[s])&&(n&&!n(r,i,o)||(a.push(r),c&&e.push(s)));return a}function v(t,e,n,o,r,a){return o&&!o[V]&&(o=v(o)),r&&!r[V]&&(r=v(r,a)),i(function(i,a,s,l){var c,u,d,h=[],f=[],p=a.length,v=i||g(e||"*",s.nodeType?[s]:s,[]),y=!t||!i&&e?v:m(v,h,t,s,l),x=n?r||(i?t:p||o)?[]:a:y;if(n&&n(y,x,s,l),o)for(c=m(x,f),o(c,[],s,l),u=c.length;u--;)(d=c[u])&&(x[f[u]]=!(y[f[u]]=d));if(i){if(r||t){if(r){for(c=[],u=x.length;u--;)(d=x[u])&&c.push(y[u]=d);r(null,x=[],c,l)}for(u=x.length;u--;)(d=x[u])&&(c=r?et.call(i,d):h[u])>-1&&(i[c]=!(a[c]=d))}}else x=m(x===a?x.splice(p,x.length):x),r?r(null,a,x,l):Q.apply(a,x)})}function y(t){for(var e,n,i,o=t.length,r=w.relative[t[0].type],a=r||w.relative[" "],s=r?1:0,l=f(function(t){return t===e},a,!0),c=f(function(t){return et.call(e,t)>-1},a,!0),u=[function(t,n,i){return!r&&(i||n!==A)||((e=n).nodeType?l(t,n,i):c(t,n,i))}];s<o;s++)if(n=w.relative[t[s].type])u=[f(p(u),n)];else{if((n=w.filter[t[s].type].apply(null,t[s].matches))[V]){for(i=++s;i<o&&!w.relative[t[i].type];i++);return v(s>1&&p(u),s>1&&h(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(st,"$1"),n,s<i&&y(t.slice(s,i)),i<o&&y(t=t.slice(i)),i<o&&h(t))}u.push(n)}return p(u)}function x(e,n){var o=n.length>0,r=e.length>0,a=function(i,a,s,l,c){var u,d,h,f=0,p="0",g=i&&[],v=[],y=A,x=i||r&&w.find.TAG("*",c),b=H+=null==y?1:Math.random()||.1,_=x.length;for(c&&(A=a!==E&&a);p!==_&&null!=(u=x[p]);p++){if(r&&u){for(d=0;h=e[d++];)if(h(u,a,s)){l.push(u);break}c&&(H=b)}o&&((u=!h&&u)&&f--,i&&g.push(u))}if(f+=p,o&&p!==f){for(d=0;h=n[d++];)h(g,v,a,s);if(i){if(f>0)for(;p--;)g[p]||v[p]||(v[p]=K.call(l));v=m(v)}Q.apply(l,v),c&&!i&&v.length>0&&f+n.length>1&&t.uniqueSort(l)}return c&&(H=b,A=y),g};return o?i(a):a}var b,_,w,S,C,M,T,k,A,I,D,P,E,N,L,R,O,B,z,V="sizzle"+-new Date,F=window.document,H=0,W=0,G=n(),U=n(),j=n(),$=function(t,e){return t===e&&(D=!0),0},q=typeof e,Y=1<<31,X={}.hasOwnProperty,Z=[],K=Z.pop,J=Z.push,Q=Z.push,tt=Z.slice,et=Z.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]===t)return e;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",ot="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt="\\["+it+"*("+ot+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+it+"*\\]",at=":("+ot+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",st=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),lt=new RegExp("^"+it+"*,"+it+"*"),ct=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ut=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),dt=new RegExp(at),ht=new RegExp("^"+ot+"$"),ft={ID:new RegExp("^#("+ot+")"),CLASS:new RegExp("^\\.("+ot+")"),TAG:new RegExp("^("+ot+"|[*])"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},pt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,bt=/'|\\/g,_t=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),wt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Q.apply(Z=tt.call(F.childNodes),F.childNodes)}catch(xt){Q={apply:Z.length?function(t,e){J.apply(t,tt.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}for(b in _=t.support={},C=t.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},P=t.setDocument=function(t){var n,i=t?t.ownerDocument||t:F,r=i.defaultView;return i!==E&&9===i.nodeType&&i.documentElement?(E=i,N=i.documentElement,L=!C(i),r&&r!==function(t){try{return t.top}catch(e){}return null}(r)&&(r.addEventListener?r.addEventListener("unload",function(){P()},!1):r.attachEvent&&r.attachEvent("onunload",function(){P()})),_.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),_.getElementsByTagName=o(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),_.getElementsByClassName=mt.test(i.getElementsByClassName),_.getById=o(function(t){return N.appendChild(t).id=V,!i.getElementsByName||!i.getElementsByName(V).length}),_.getById?(w.find.ID=function(t,e){if(typeof e.getElementById!==q&&L){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},w.filter.ID=function(t){var e=t.replace(_t,wt);return function(t){return t.getAttribute("id")===e}}):(delete w.find.ID,w.filter.ID=function(t){var e=t.replace(_t,wt);return function(t){var n=typeof t.getAttributeNode!==q&&t.getAttributeNode("id");return n&&n.value===e}}),w.find.TAG=_.getElementsByTagName?function(t,e){if(typeof e.getElementsByTagName!==q)return e.getElementsByTagName(t)}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},w.find.CLASS=_.getElementsByClassName&&function(t,e){if(L)return e.getElementsByClassName(t)},O=[],R=[],(_.qsa=mt.test(i.querySelectorAll))&&(o(function(t){t.innerHTML="<select msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+it+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||R.push("\\["+it+"*(?:value|"+nt+")"),t.querySelectorAll(":checked").length||R.push(":checked")}),o(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&R.push("name"+it+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),R.push(",.*:")})),(_.matchesSelector=mt.test(B=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&o(function(t){_.disconnectedMatch=B.call(t,"div"),B.call(t,"[s!='']:x"),O.push("!=",at)}),R=R.length&&new RegExp(R.join("|")),O=O.length&&new RegExp(O.join("|")),n=mt.test(N.compareDocumentPosition),z=n||mt.test(N.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},$=n?function(t,e){if(t===e)return D=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!_.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===F&&z(F,t)?-1:e===i||e.ownerDocument===F&&z(F,e)?1:I?et.call(I,t)-et.call(I,e):0:4&n?-1:1)}:function(t,e){if(t===e)return D=!0,0;var n,o=0,r=t.parentNode,s=e.parentNode,l=[t],c=[e];if(!r||!s)return t===i?-1:e===i?1:r?-1:s?1:I?et.call(I,t)-et.call(I,e):0;if(r===s)return a(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;l[o]===c[o];)o++;return o?a(l[o],c[o]):l[o]===F?-1:c[o]===F?1:0},i):E},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==E&&P(e),n=n.replace(ut,"='$1']"),_.matchesSelector&&L&&(!O||!O.test(n))&&(!R||!R.test(n)))try{var i=B.call(e,n);if(i||_.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(o){}return t(n,E,null,[e]).length>0},t.contains=function(t,e){return(t.ownerDocument||t)!==E&&P(t),z(t,e)},t.attr=function(t,n){(t.ownerDocument||t)!==E&&P(t);var i=w.attrHandle[n.toLowerCase()],o=i&&X.call(w.attrHandle,n.toLowerCase())?i(t,n,!L):e;return o!==e?o:_.attributes||!L?t.getAttribute(n):(o=t.getAttributeNode(n))&&o.specified?o.value:null},t.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},t.uniqueSort=function(t){var e,n=[],i=0,o=0;if(D=!_.detectDuplicates,I=!_.sortStable&&t.slice(0),t.sort($),D){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return I=null,t},S=t.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=S(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=S(e);return n},(w=t.selectors={cacheLength:50,createPseudo:i,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_t,wt),t[3]=(t[3]||t[4]||t[5]||"").replace(_t,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&dt.test(n)&&(e=M(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_t,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=G[t+" "];return e||(e=new RegExp("(^|"+it+")"+t+"("+it+"|$)"))&&G(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==q&&t.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(o){var r=t.attr(o,e);return null==r?"!="===n:!n||(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r+" ").indexOf(i)>-1:"|="===n&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var c,u,d,h,f,p,g=r!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s;if(m){if(r){for(;g;){for(d=e;d=d[g];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&y){for(h=(c=(u=m[V]||(m[V]={}))[t]||[])[0]===H&&c[2],d=(f=c[0]===H&&c[1])&&m.childNodes[f];d=++f&&d&&d[g]||(h=f=0)||p.pop();)if(1===d.nodeType&&++h&&d===e){u[t]=[H,f,h];break}}else if(y&&(c=(e[V]||(e[V]={}))[t])&&c[0]===H)h=c[1];else for(;(d=++f&&d&&d[g]||(h=f=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(y&&((d[V]||(d[V]={}))[t]=[H,h]),d!==e)););return(h-=o)===i||h%i==0&&h/i>=0}}},PSEUDO:function(e,n){var o,r=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return r[V]?r(n):r.length>1?(o=[e,e,"",n],w.setFilters.hasOwnProperty(e.toLowerCase())?i(function(t,e){for(var i,o=r(t,n),a=o.length;a--;)t[i=et.call(t,o[a])]=!(e[i]=o[a])}):function(t){return r(t,0,o)}):r}},pseudos:{not:i(function(t){var e=[],n=[],o=T(t.replace(st,"$1"));return o[V]?i(function(t,e,n,i){for(var r,a=o(t,null,i,[]),s=t.length;s--;)(r=a[s])&&(t[s]=!(e[s]=r))}):function(t,i,r){return e[0]=t,o(e,null,r,n),!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(t){return t=t.replace(_t,wt),function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:i(function(e){return ht.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(_t,wt).toLowerCase(),function(t){var n;do{if(n=L?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=window.location&&window.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===N},focus:function(t){return t===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return pt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[n<0?n+e:n]}),even:c(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:c(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})w.pseudos[b]=l(b);return d.prototype=w.filters=w.pseudos,w.setFilters=new d,M=t.tokenize=function(e,n){var i,o,r,a,s,l,c,u=U[e+" "];if(u)return n?0:u.slice(0);for(s=e,l=[],c=w.preFilter;s;){for(a in i&&!(o=lt.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(r=[])),i=!1,(o=ct.exec(s))&&(i=o.shift(),r.push({value:i,type:o[0].replace(st," ")}),s=s.slice(i.length)),w.filter)!(o=ft[a].exec(s))||c[a]&&!(o=c[a](o))||(i=o.shift(),r.push({value:i,type:a,matches:o}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):U(e,l).slice(0)},T=t.compile=function(t,e){var n,i=[],o=[],r=j[t+" "];if(!r){for(e||(e=M(t)),n=e.length;n--;)(r=y(e[n]))[V]?i.push(r):o.push(r);(r=j(t,x(o,i))).selector=t}return r},k=t.select=function(t,e,n,i){var o,r,a,s,l,c="function"==typeof t&&t,d=!i&&M(t=c.selector||t);if(n=n||[],1===d.length){if((r=d[0]=d[0].slice(0)).length>2&&"ID"===(a=r[0]).type&&_.getById&&9===e.nodeType&&L&&w.relative[r[1].type]){if(!(e=(w.find.ID(a.matches[0].replace(_t,wt),e)||[])[0]))return n;c&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=ft.needsContext.test(t)?0:r.length;o--&&!w.relative[s=(a=r[o]).type];)if((l=w.find[s])&&(i=l(a.matches[0].replace(_t,wt),yt.test(r[0].type)&&u(e.parentNode)||e))){if(r.splice(o,1),!(t=i.length&&h(r)))return Q.apply(n,i),n;break}}return(c||T(t,d))(i,e,!L,n,yt.test(t)&&u(e.parentNode)||e),n},_.sortStable=V.split("").sort($).join("")===V,_.detectDuplicates=!!D,P(),_.sortDetached=o(function(t){return 1&t.compareDocumentPosition(E.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),_.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||r(nt,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),t}),n(d,[],function(){function t(t,n,i){var o,r;if(!t)return 0;if(i=i||t,t.length!==e){for(o=0,r=t.length;o<r;o++)if(!1===n.call(i,t[o],o,t))return 0}else for(o in t)if(t.hasOwnProperty(o)&&!1===n.call(i,t[o],o,t))return 0;return 1}function n(t,e,n){var i,o;for(i=0,o=t.length;i<o;i++)if(e.call(n,t[i],i,t))return i;return-1}var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};return{isArray:i,toArray:function(t){var e,n,o=t;if(!i(t))for(o=[],e=0,n=t.length;e<n;e++)o[e]=t[e];return o},each:t,map:function(e,n){var i=[];return t(e,function(t,o){i.push(n(t,o,e))}),i},filter:function(e,n){var i=[];return t(e,function(t,o){n&&!n(t,o,e)||i.push(t)}),i},indexOf:function(t,e){var n,i;if(t)for(n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},reduce:function(t,e,n,i){var o=0;for(arguments.length<3&&(n=t[0]);o<t.length;o++)n=e.call(i,n,t[o],o);return n},findIndex:n,find:function(t,i,o){var r=n(t,i,o);return-1!==r?t[r]:e},last:function(t){return t[t.length-1]}}}),n(h,[l,d],function(t,n){function i(t){return null===t||t===e?"":(""+t).replace(r,"")}function o(t,i){return i?!("array"!=i||!n.isArray(t))||typeof t==i:t!==e}var r=/^\s*|\s*$/g;return{trim:i,isArray:n.isArray,is:o,toArray:n.toArray,makeMap:function(t,e,n){var i;for(e=e||",","string"==typeof(t=t||[])&&(t=t.split(e)),n=n||{},i=t.length;i--;)n[t[i]]={};return n},each:n.each,map:n.map,grep:n.filter,inArray:n.indexOf,hasOwn:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},extend:function(t,n){var i,o,r,a,s=arguments;for(i=1,o=s.length;i<o;i++)for(r in n=s[i])n.hasOwnProperty(r)&&(a=n[r])!==e&&(t[r]=a);return t},create:function(t,e,n){var i,o,r,a,s,l=this,c=0;if(t=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(t),r=t[3].match(/(^|\.)(\w+)$/i)[2],!(o=l.createNS(t[3].replace(/\.\w+$/,""),n))[r]){if("static"==t[2])return o[r]=e,void(this.onCreate&&this.onCreate(t[2],t[3],o[r]));e[r]||(e[r]=function(){},c=1),o[r]=e[r],l.extend(o[r].prototype,e),t[5]&&(i=l.resolve(t[5]).prototype,a=t[5].match(/\.(\w+)$/i)[1],s=o[r],o[r]=c?function(){return i[a].apply(this,arguments)}:function(){return this.parent=i[a],s.apply(this,arguments)},o[r].prototype[r]=o[r],l.each(i,function(t,e){o[r].prototype[e]=i[e]}),l.each(e,function(t,e){i[e]?o[r].prototype[e]=function(){return this.parent=i[e],t.apply(this,arguments)}:e!=r&&(o[r].prototype[e]=t)})),l.each(e.static,function(t,e){o[r][e]=t})}},walk:function t(e,i,o,r){r=r||this,e&&(o&&(e=e[o]),n.each(e,function(e,n){return!1!==i.call(r,e,n,o)&&void t(e,i,o,r)}))},createNS:function(t,e){var n,i;for(e=e||window,t=t.split("."),n=0;n<t.length;n++)e[i=t[n]]||(e[i]={}),e=e[i];return e},resolve:function(t,e){var n,i;for(e=e||window,n=0,i=(t=t.split(".")).length;n<i&&(e=e[t[n]]);n++);return e},explode:function(t,e){return!t||o(t,"array")?t:n.map(t.split(e||","),i)},_addCacheSuffix:function(e){var n=t.cacheSuffix;return n&&(e+=(-1===e.indexOf("?")?"?":"&")+n),e}}}),n(f,[c,u,h,l],function(t,n,i,o){function r(t){return void 0!==t}function a(t){return"string"==typeof t}function s(t,e){var n,i,o;for(o=(e=e||_).createElement("div"),n=e.createDocumentFragment(),o.innerHTML=t;i=o.firstChild;)n.appendChild(i);return n}function l(t,e,n,i){var o;if(a(e))e=s(e,g(t[0]));else if(e.length&&!e.nodeType){if(e=d.makeArray(e),i)for(o=e.length-1;o>=0;o--)l(t,e[o],n,i);else for(o=0;o<e.length;o++)l(t,e[o],n,i);return t}if(e.nodeType)for(o=t.length;o--;)n.call(t[o],e);return t}function c(t,e){return t&&e&&-1!==(" "+t.className+" ").indexOf(" "+e+" ")}function u(t,e,n){var i,o;return e=d(e)[0],t.each(function(){var t=this;n&&i==t.parentNode||(i=t.parentNode,o=e.cloneNode(!1),t.parentNode.insertBefore(o,t)),o.appendChild(t)}),t}function d(t,e){return new d.fn.init(t,e)}function h(t){return null===t||t===b?"":(""+t).replace(N,"")}function f(t,e){var n,i,o,r;if(t)if(void 0===(n=t.length)){for(i in t)if(t.hasOwnProperty(i)&&!1===e.call(r=t[i],i,r))break}else for(o=0;o<n&&!1!==e.call(r=t[o],o,r);o++);return t}function p(t,e){var n=[];return f(t,function(t,i){e(i,t)&&n.push(i)}),n}function g(t){return t?9==t.nodeType?t:t.ownerDocument:_}function m(t,n,i){var o=[],r=t[n];for("string"!=typeof i&&i instanceof d&&(i=i[0]);r&&9!==r.nodeType;){if(i!==e){if(r===i)break;if("string"==typeof i&&d(r).is(i))break}1===r.nodeType&&o.push(r),r=r[n]}return o}function v(t,n,i,o){var r=[];for(o instanceof d&&(o=o[0]);t;t=t[n])if(!i||t.nodeType===i){if(o!==e){if(t===o)break;if("string"==typeof o&&d(t).is(o))break}r.push(t)}return r}function y(t,e,n){for(t=t[e];t;t=t[e])if(t.nodeType==n)return t;return null}function x(t,e,n){f(n,function(n,i){t[n]=t[n]||{},t[n][e]=i})}var b,_=document,w=Array.prototype.push,S=Array.prototype.slice,C=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,M=t.Event,T=i.makeMap("children,contents,next,prev"),k=i.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),A=i.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),I={for:"htmlFor",class:"className",readonly:"readOnly"},D={float:"cssFloat"},P={},E={},N=/^\s*|\s*$/g;return d.fn=d.prototype={constructor:d,selector:"",context:null,length:0,init:function(t,e){var n,i,o=this;if(!t)return o;if(t.nodeType)return o.context=o[0]=t,o.length=1,o;if(e&&e.nodeType)o.context=e;else{if(e)return d(t).attr(e);o.context=e=document}if(a(t)){if(o.selector=t,!(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:C.exec(t)))return d(e).find(t);if(n[1])for(i=s(t,g(e)).firstChild;i;)w.call(o,i),i=i.nextSibling;else{if(!(i=g(e).getElementById(n[2])))return o;if(i.id!==n[2])return o.find(t);o.length=1,o[0]=i}}else this.add(t,!1);return o},toArray:function(){return i.toArray(this)},add:function(t,e){var n,i,o=this;if(a(t))return o.add(d(t));if(!1!==e)for(n=d.unique(o.toArray().concat(d.makeArray(t))),o.length=n.length,i=0;i<n.length;i++)o[i]=n[i];else w.apply(o,d.makeArray(t));return o},attr:function(t,e){var n,i=this;if("object"==typeof t)f(t,function(t,e){i.attr(t,e)});else{if(!r(e)){if(i[0]&&1===i[0].nodeType){if((n=P[t])&&n.get)return n.get(i[0],t);if(A[t])return i.prop(t)?t:b;null===(e=i[0].getAttribute(t,2))&&(e=b)}return e}this.each(function(){var n;if(1===this.nodeType){if((n=P[t])&&n.set)return void n.set(this,e);null===e?this.removeAttribute(t,2):this.setAttribute(t,e,2)}})}return i},removeAttr:function(t){return this.attr(t,null)},prop:function(t,e){var n=this;if("object"==typeof(t=I[t]||t))f(t,function(t,e){n.prop(t,e)});else{if(!r(e))return n[0]&&n[0].nodeType&&t in n[0]?n[0][t]:e;this.each(function(){1==this.nodeType&&(this[t]=e)})}return n},css:function(t,e){function n(t){return t.replace(/-(\D)/g,function(t,e){return e.toUpperCase()})}function i(t){return t.replace(/[A-Z]/g,function(t){return"-"+t})}var o,a,l=this;if("object"==typeof t)f(t,function(t,e){l.css(t,e)});else if(r(e))t=n(t),"number"!=typeof e||k[t]||(e+="px"),l.each(function(){var n=this.style;if((a=E[t])&&a.set)a.set(this,e);else{try{this.style[D[t]||t]=e}catch(l){}null!==e&&""!==e||(n.removeProperty?n.removeProperty(i(t)):n.removeAttribute(t))}});else{if(o=l[0],(a=E[t])&&a.get)return a.get(o);if(o.ownerDocument.defaultView)try{return o.ownerDocument.defaultView.getComputedStyle(o,null).getPropertyValue(i(t))}catch(s){return b}else if(o.currentStyle)return o.currentStyle[n(t)]}return l},remove:function(){for(var t,e=this.length;e--;)M.clean(t=this[e]),t.parentNode&&t.parentNode.removeChild(t);return this},empty:function(){for(var t,e=this.length;e--;)for(t=this[e];t.firstChild;)t.removeChild(t.firstChild);return this},html:function(t){var e,n=this;if(r(t)){e=n.length;try{for(;e--;)n[e].innerHTML=t}catch(i){d(n[e]).empty().append(t)}return n}return n[0]?n[0].innerHTML:""},text:function(t){var e,n=this;if(r(t)){for(e=n.length;e--;)"innerText"in n[e]?n[e].innerText=t:n[0].textContent=t;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return l(this,arguments,function(t){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(t)})},prepend:function(){return l(this,arguments,function(t){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(t,this.firstChild)},!0)},before:function(){var t=this;return t[0]&&t[0].parentNode?l(t,arguments,function(t){this.parentNode.insertBefore(t,this)}):t},after:function(){var t=this;return t[0]&&t[0].parentNode?l(t,arguments,function(t){this.parentNode.insertBefore(t,this.nextSibling)},!0):t},appendTo:function(t){return d(t).append(this),this},prependTo:function(t){return d(t).prepend(this),this},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){return u(this,t)},wrapAll:function(t){return u(this,t,!0)},wrapInner:function(t){return this.each(function(){d(this).contents().wrapAll(t)}),this},unwrap:function(){return this.parent().each(function(){d(this).replaceWith(this.childNodes)})},clone:function(){var t=[];return this.each(function(){t.push(this.cloneNode(!0))}),d(t)},addClass:function(t){return this.toggleClass(t,!0)},removeClass:function(t){return this.toggleClass(t,!1)},toggleClass:function(t,e){var n=this;return"string"!=typeof t||(-1!==t.indexOf(" ")?f(t.split(" "),function(){n.toggleClass(this,e)}):n.each(function(n,i){var o,r;(r=c(i,t))!==e&&(o=i.className,r?i.className=h((" "+o+" ").replace(" "+t+" "," ")):i.className+=o?" "+t:t)})),n},hasClass:function(t){return c(this[0],t)},each:function(t){return f(this,t)},on:function(t,e){return this.each(function(){M.bind(this,t,e)})},off:function(t,e){return this.each(function(){M.unbind(this,t,e)})},trigger:function(t){return this.each(function(){"object"==typeof t?M.fire(this,t.type,t):M.fire(this,t)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new d(S.apply(this,arguments))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(t){var e,n,i=[];for(e=0,n=this.length;e<n;e++)d.find(t,this[e],i);return d(i)},filter:function(t){return d("function"==typeof t?p(this.toArray(),function(e,n){return t(n,e)}):d.filter(t,this.toArray()))},closest:function(t){var e=[];return t instanceof d&&(t=t[0]),this.each(function(n,i){for(;i;){if("string"==typeof t&&d(i).is(t)){e.push(i);break}if(i==t){e.push(i);break}i=i.parentNode}}),d(e)},offset:function(t){var e,n,i,o,r=0,a=0;return t?this.css(t):((e=this[0])&&(i=(n=e.ownerDocument).documentElement,e.getBoundingClientRect&&(r=(o=e.getBoundingClientRect()).left+(i.scrollLeft||n.body.scrollLeft)-i.clientLeft,a=o.top+(i.scrollTop||n.body.scrollTop)-i.clientTop)),{left:r,top:a})},push:w,sort:[].sort,splice:[].splice},i.extend(d,{extend:i.extend,makeArray:function(t){return function(t){return t&&t==t.window}(t)||t.nodeType?[t]:i.toArray(t)},inArray:function(t,e){var n;if(e.indexOf)return e.indexOf(t);for(n=e.length;n--;)if(e[n]===t)return n;return-1},isArray:i.isArray,each:f,trim:h,grep:p,find:n,expr:n.selectors,unique:n.uniqueSort,text:n.getText,contains:n.contains,filter:function(t,e,n){var i=e.length;for(n&&(t=":not("+t+")");i--;)1!=e[i].nodeType&&e.splice(i,1);return 1===e.length?d.find.matchesSelector(e[0],t)?[e[0]]:[]:d.find.matches(t,e)}}),f({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return m(t,"parentNode")},next:function(t){return y(t,"nextSibling",1)},prev:function(t){return y(t,"previousSibling",1)},children:function(t){return v(t.firstChild,"nextSibling",1)},contents:function(t){return i.toArray(("iframe"===t.nodeName?t.contentDocument||t.contentWindow.document:t).childNodes)}},function(t,e){d.fn[t]=function(n){var i=[];return this.each(function(){var t=e.call(i,this,n,i);t&&(d.isArray(t)?i.push.apply(i,t):i.push(t))}),this.length>1&&(T[t]||(i=d.unique(i)),0===t.indexOf("parents")&&(i=i.reverse())),i=d(i),n?i.filter(n):i}}),f({parentsUntil:function(t,e){return m(t,"parentNode",e)},nextUntil:function(t,e){return v(t,"nextSibling",1,e).slice(1)},prevUntil:function(t,e){return v(t,"previousSibling",1,e).slice(1)}},function(t,e){d.fn[t]=function(n,i){var o=[];return this.each(function(){var t=e.call(o,this,n,o);t&&(d.isArray(t)?o.push.apply(o,t):o.push(t))}),this.length>1&&(o=d.unique(o),0!==t.indexOf("parents")&&"prevUntil"!==t||(o=o.reverse())),o=d(o),i?o.filter(i):o}}),d.fn.is=function(t){return!!t&&this.filter(t).length>0},d.fn.init.prototype=d.fn,d.overrideDefaults=function(t){function e(i,o){return n=n||t(),0===arguments.length&&(i=n.element),o||(o=n.context),new e.fn.init(i,o)}var n;return d.extend(e,this),e},o.ie&&o.ie<8&&(x(P,"get",{maxlength:function(t){var e=t.maxLength;return 2147483647===e?b:e},size:function(t){var e=t.size;return 20===e?b:e},class:function(t){return t.className},style:function(t){var e=t.style.cssText;return 0===e.length?b:e}}),x(P,"set",{class:function(t,e){t.className=e},style:function(t,e){t.style.cssText=e}})),o.ie&&o.ie<9&&(D.float="styleFloat",x(E,"set",{opacity:function(t,e){var n=t.style;null===e||""===e?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*e+")")}})),d.attrHooks=P,d.cssHooks=E,d}),n(p,[],function(){return function(t,e){function n(t,e,n,i){function o(t){return(t=parseInt(t,10).toString(16)).length>1?t:"0"+t}return"#"+o(e)+o(n)+o(i)}var i,o,r,a,s=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,l=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,c=/\s*([^:]+):\s*([^;]+);?/g,u=/\s+$/,d={};for(t=t||{},e&&(r=e.getValidStyles(),a=e.getInvalidStyles()),o="\\\" \\' \\; \\: ; : \ufeff".split(" "),i=0;i<o.length;i++)d[o[i]]="\ufeff"+i,d["\ufeff"+i]=o[i];return{toHex:function(t){return t.replace(s,n)},parse:function(e){function o(t,e,n){var o,r,a,s;if((o=b[t+"-top"+e])&&(r=b[t+"-right"+e])&&(a=b[t+"-bottom"+e])&&(s=b[t+"-left"+e])){var l=[o,r,a,s];for(i=l.length-1;i--&&l[i]===l[i+1];);i>-1&&n||(b[t+e]=-1==i?l[0]:l.join(" "),delete b[t+"-top"+e],delete b[t+"-right"+e],delete b[t+"-bottom"+e],delete b[t+"-left"+e])}}function r(t){var e,n=b[t];if(n){for(e=(n=n.split(" ")).length;e--;)if(n[e]!==n[0])return!1;return b[t]=n[0],!0}}function a(t){return x=!0,d[t]}function h(t,e){return x&&(t=t.replace(/\uFEFF[0-9]/g,function(t){return d[t]})),e||(t=t.replace(/\\([\'\";:])/g,"$1")),t}function f(t){return String.fromCharCode(parseInt(t.slice(1),16))}function p(t){return t.replace(/\\[0-9a-f]+/gi,f)}function g(e,n,i,o,r,a){if(r=r||a)return"'"+(r=h(r)).replace(/\'/g,"\\'")+"'";if(n=h(n||i||o),!t.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!t.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return _&&(n=_.call(w,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"}var m,v,y,x,b={},_=t.url_converter,w=t.url_converter_scope||this;if(e){for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,a).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(t){return t.replace(/[;:]/g,a)});m=c.exec(e);)if(c.lastIndex=m.index+m[0].length,v=m[1].replace(u,"").toLowerCase(),y=m[2].replace(u,""),v&&y){if(v=p(v),y=p(y),-1!==v.indexOf("\ufeff")||-1!==v.indexOf('"'))continue;if(!t.allow_script_urls&&("behavior"==v||/expression\s*\(|\/\*|\*\//.test(y)))continue;"font-weight"===v&&"700"===y?y="bold":"color"!==v&&"background-color"!==v||(y=y.toLowerCase()),y=(y=y.replace(s,n)).replace(l,g),b[v]=x?h(y,!0):y}o("border","",!0),o("border","-width"),o("border","-color"),o("border","-style"),o("padding",""),o("margin",""),function(t,e,n,i){r(e)&&r(n)&&r(i)&&(b.border=b[e]+" "+b[n]+" "+b[i],delete b[e],delete b[n],delete b[i])}(0,"border-width","border-style","border-color"),"medium none"===b.border&&delete b.border,"none"===b["border-image"]&&delete b["border-image"]}return b},serialize:function(t,e){function n(e){var n,i,o,a;if(n=r[e])for(i=0,o=n.length;i<o;i++)(a=t[e=n[i]])&&(l+=(l.length>0?" ":"")+e+": "+a+";")}function i(t,e){var n;return!((n=a["*"])&&n[t]||(n=a[e],n&&n[t]))}var o,s,l="";if(e&&r)n("*"),n(e);else for(o in t)!(s=t[o])||a&&!i(o,e)||(l+=(l.length>0?" ":"")+o+": "+s+";");return l}}}}),n(g,[],function(){return function(t,e){function n(t,n,i,o){var r,a;if(t){if(!o&&t[n])return t[n];if(t!=e){if(r=t[i])return r;for(a=t.parentNode;a&&a!=e;a=a.parentNode)if(r=a[i])return r}}}var i=t;this.current=function(){return i},this.next=function(t){return i=n(i,"firstChild","nextSibling",t)},this.prev=function(t){return i=n(i,"lastChild","previousSibling",t)},this.prev2=function(t){return i=function(t,n,i,o){var r,a,s;if(t){if(r=t.previousSibling,e&&r===e)return;if(r){if(!o)for(s=r[n];s;s=s[n])if(!s[n])return s;return r}if((a=t.parentNode)&&a!==e)return a}}(i,"lastChild",0,t)}}}),n(m,[h],function(t){function e(n){function i(){return w.createDocumentFragment()}function o(t,e){d(M,t,e)}function r(t,e){d(T,t,e)}function a(t){o(t.parentNode,E(t))}function s(t){r(t.parentNode,E(t)+1)}function l(){return h(S)}function c(t,e){var n;if(3==t.nodeType)return t;if(e<0)return t;for(n=t.firstChild;n&&e>0;)--e,n=n.nextSibling;return n||t}function u(t,e,i,o){var r,a,s,l,c,u;if(t==i)return e==o?0:e<o?-1:1;for(r=i;r&&r.parentNode!=t;)r=r.parentNode;if(r){for(a=0,s=t.firstChild;s!=r&&a<e;)a++,s=s.nextSibling;return e<=a?-1:1}for(r=t;r&&r.parentNode!=i;)r=r.parentNode;if(r){for(a=0,s=i.firstChild;s!=r&&a<o;)a++,s=s.nextSibling;return a<o?-1:1}for(l=n.findCommonAncestor(t,i),c=t;c&&c.parentNode!=l;)c=c.parentNode;for(c||(c=l),u=i;u&&u.parentNode!=l;)u=u.parentNode;if(u||(u=l),c==u)return 0;for(s=l.firstChild;s;){if(s==c)return-1;if(s==u)return 1;s=s.nextSibling}}function d(t,e,i){var o,r;for(t?(_[A]=e,_[k]=i):(_[I]=e,_[D]=i),o=_[I];o.parentNode;)o=o.parentNode;for(r=_[A];r.parentNode;)r=r.parentNode;r==o?u(_[A],_[k],_[I],_[D])>0&&_.collapse(t):_.collapse(t),_.collapsed=_[A]==_[I]&&_[k]==_[D],_.commonAncestorContainer=n.findCommonAncestor(_[A],_[I])}function h(t){var e,n,i,o,r,a,s,l=0,c=0;if(_[A]==_[I])return f(t);for(n=(e=_[I]).parentNode;n;e=n,n=n.parentNode){if(n==_[A])return p(e,t);++l}for(n=(e=_[A]).parentNode;n;e=n,n=n.parentNode){if(n==_[I])return g(e,t);++c}for(i=c-l,o=_[A];i>0;)o=o.parentNode,i--;for(r=_[I];i<0;)r=r.parentNode,i++;for(a=o.parentNode,s=r.parentNode;a!=s;a=a.parentNode,s=s.parentNode)o=a,r=s;return m(o,r,t)}function f(t){var e,n,o,r,a,s,l,u;if(t!=C&&(e=i()),_[k]==_[D])return e;if(3==_[A].nodeType){if(n=_[A].nodeValue.substring(_[k],_[D]),t!=S&&(o=_[A],u=_[D]-_[k],0===(l=_[k])&&u>=o.nodeValue.length-1?o.parentNode.removeChild(o):o.deleteData(l,u),_.collapse(M)),t==C)return;return n.length>0&&e.appendChild(w.createTextNode(n)),e}for(o=c(_[A],_[k]),r=_[D]-_[k];o&&r>0;)a=o.nextSibling,s=b(o,t),e&&e.appendChild(s),--r,o=a;return t!=S&&_.collapse(M),e}function p(t,e){var n,o,r,a,s;if(e!=C&&(n=i()),o=v(t,e),n&&n.appendChild(o),(r=E(t)-_[k])<=0)return e!=S&&(_.setEndBefore(t),_.collapse(T)),n;for(o=t.previousSibling;r>0;)a=o.previousSibling,s=b(o,e),n&&n.insertBefore(s,n.firstChild),--r,o=a;return e!=S&&(_.setEndBefore(t),_.collapse(T)),n}function g(t,e){var n,o,r,a,s,l;for(e!=C&&(n=i()),r=y(t,e),n&&n.appendChild(r),o=E(t),++o,a=_[D]-o,r=t.nextSibling;r&&a>0;)s=r.nextSibling,l=b(r,e),n&&n.appendChild(l),--a,r=s;return e!=S&&(_.setStartAfter(t),_.collapse(M)),n}function m(t,e,n){var o,r,a,s,l,c;for(n!=C&&(r=i()),o=y(t,n),r&&r.appendChild(o),a=E(t),s=E(e)-++a,l=t.nextSibling;s>0;)c=l.nextSibling,o=b(l,n),r&&r.appendChild(o),l=c,--s;return o=v(e,n),r&&r.appendChild(o),n!=S&&(_.setStartAfter(t),_.collapse(M)),r}function v(t,e){var n,i,o,r,a,s=c(_[I],_[D]-1),l=s!=_[I];if(s==t)return x(s,l,T,e);for(i=x(n=s.parentNode,T,T,e);n;){for(;s;)o=s.previousSibling,r=x(s,l,T,e),e!=C&&i.insertBefore(r,i.firstChild),l=M,s=o;if(n==t)return i;s=n.previousSibling,a=x(n=n.parentNode,T,T,e),e!=C&&a.appendChild(i),i=a}}function y(t,e){var n,i,o,r,a,s=c(_[A],_[k]),l=s!=_[A];if(s==t)return x(s,l,M,e);for(i=x(n=s.parentNode,T,M,e);n;){for(;s;)o=s.nextSibling,r=x(s,l,M,e),e!=C&&i.appendChild(r),l=M,s=o;if(n==t)return i;s=n.nextSibling,a=x(n=n.parentNode,T,M,e),e!=C&&a.appendChild(i),i=a}}function x(t,e,i,o){var r,a,s,l,c;if(e)return b(t,o);if(3==t.nodeType){if(r=t.nodeValue,i?(a=r.substring(l=_[k]),s=r.substring(0,l)):(a=r.substring(0,l=_[D]),s=r.substring(l)),o!=S&&(t.nodeValue=s),o==C)return;return(c=n.clone(t,T)).nodeValue=a,c}return o!=C?n.clone(t,T):void 0}function b(t,e){return e!=C?e==S?n.clone(t,M):t:void t.parentNode.removeChild(t)}var _=this,w=n.doc,S=1,C=2,M=!0,T=!1,k="startOffset",A="startContainer",I="endContainer",D="endOffset",P=t.extend,E=n.nodeIndex;return P(_,{startContainer:w,startOffset:0,endContainer:w,endOffset:0,collapsed:M,commonAncestorContainer:w,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:o,setEnd:r,setStartBefore:a,setStartAfter:function(t){o(t.parentNode,E(t)+1)},setEndBefore:function(t){r(t.parentNode,E(t))},setEndAfter:s,collapse:function(t){t?(_[I]=_[A],_[D]=_[k]):(_[A]=_[I],_[k]=_[D]),_.collapsed=M},selectNode:function(t){a(t),s(t)},selectNodeContents:function(t){o(t,0),r(t,1===t.nodeType?t.childNodes.length:t.nodeValue.length)},compareBoundaryPoints:function(t,e){var n=_[A],i=_[k],o=_[I],r=_[D],a=e.startContainer,s=e.startOffset,l=e.endContainer,c=e.endOffset;return 0===t?u(n,i,a,s):1===t?u(o,r,a,s):2===t?u(o,r,l,c):3===t?u(n,i,l,c):void 0},deleteContents:function(){h(C)},extractContents:function(){return h(0)},cloneContents:l,insertNode:function(t){var e,i,o=this[A],r=this[k];3!==o.nodeType&&4!==o.nodeType||!o.nodeValue?(o.childNodes.length>0&&(i=o.childNodes[r]),i?o.insertBefore(t,i):3==o.nodeType?n.insertAfter(t,o):o.appendChild(t)):r?r>=o.nodeValue.length?n.insertAfter(t,o):(e=o.splitText(r),o.parentNode.insertBefore(t,e)):o.parentNode.insertBefore(t,o)},surroundContents:function(t){var e=_.extractContents();_.insertNode(t),t.appendChild(e),_.selectNode(t)},cloneRange:function(){return P(new e(n),{startContainer:_[A],startOffset:_[k],endContainer:_[I],endOffset:_[D],collapsed:_.collapsed,commonAncestorContainer:_.commonAncestorContainer})},toStringIE:function(){return n.create("body",null,l()).outerText}}),_}return e.prototype.toString=function(){return this.toStringIE()},e}),n(v,[h],function(t){function e(t,e){var n,o,r,a={};if(t){for(t=t.split(","),e=e||10,n=0;n<t.length;n+=2)o=String.fromCharCode(parseInt(t[n],e)),i[o]||(a[o]=r="&"+t[n+1]+";",a[r]=o);return a}}var n,i,o,r=t.makeMap,a=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,s=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[<>&\"\']/g,c=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,u={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};i={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},o={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},n=e("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var d={encodeRaw:function(t,e){return t.replace(e?a:s,function(t){return i[t]||t})},encodeAllRaw:function(t){return(""+t).replace(l,function(t){return i[t]||t})},encodeNumeric:function(t,e){return t.replace(e?a:s,function(t){return t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":i[t]||"&#"+t.charCodeAt(0)+";"})},encodeNamed:function(t,e,o){return o=o||n,t.replace(e?a:s,function(t){return i[t]||o[t]||t})},getEncodeFunc:function(t,o){return o=e(o)||n,(t=r(t.replace(/\+/g,","))).named&&t.numeric?function(t,e){return t.replace(e?a:s,function(t){return i[t]||o[t]||"&#"+t.charCodeAt(0)+";"||t})}:t.named?o?function(t,e){return d.encodeNamed(t,e,o)}:d.encodeNamed:t.numeric?d.encodeNumeric:d.encodeRaw},decode:function(t){return t.replace(c,function(t,e){return e?(e="x"===e.charAt(0).toLowerCase()?parseInt(e.substr(1),16):parseInt(e,10))>65535?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e))):u[e]||String.fromCharCode(e):o[t]||n[t]||function(t){var e;return(e=document.createElement("div")).innerHTML=t,e.textContent||e.innerText||t}(t)})}};return d}),n(y,[h,s],function(t,e){return function(n,i){function o(t){n.getElementsByTagName("head")[0].appendChild(t)}var r,a=0,s={};r=(i=i||{}).maxLoadTime||5e3,this.load=function(i,l,c){function u(){for(var t=v.passed,e=t.length;e--;)t[e]();v.status=2,v.passed=[],v.failed=[]}function d(){for(var t=v.failed,e=t.length;e--;)t[e]();v.status=3,v.passed=[],v.failed=[]}function h(t,n){t()||((new Date).getTime()-m<r?e.setTimeout(n):d())}function f(){h(function(){for(var t,e,i=n.styleSheets,o=i.length;o--;)if((e=(t=i[o]).ownerNode?t.ownerNode:t.owningElement)&&e.id===p.id)return u(),!0},f)}var p,g,m,v;if(i=t._addCacheSuffix(i),s[i]?v=s[i]:s[i]=v={passed:[],failed:[]},l&&v.passed.push(l),c&&v.failed.push(c),1!=v.status){if(2==v.status)return void u();if(3==v.status)return void d();if(v.status=1,(p=n.createElement("link")).rel="stylesheet",p.type="text/css",p.id="u"+a++,p.async=!1,p.defer=!1,m=(new Date).getTime(),"onload"in p&&!function(){var t=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(t&&t[1]<536)}())p.onload=f,p.onerror=d;else{if(navigator.userAgent.indexOf("Firefox")>0)return(g=n.createElement("style")).textContent='@import "'+i+'"',function t(){h(function(){try{var t=g.sheet.cssRules;return u(),!!t}catch(e){}},t)}(),void o(g);f()}o(p),p.href=i}}}}),n(x,[u,f,p,c,g,m,v,l,h,y],function(t,n,i,o,r,a,s,l,c,u){function d(t,e){var n=e.attr("style");(n=t.serializeStyle(t.parseStyle(n),e[0].nodeName))||(n=null),e.attr("data-mce-style",n)}function h(t,e){var n,i,o=0;if(t)for(n=t.nodeType,t=t.previousSibling;t;t=t.previousSibling)i=t.nodeType,(!e||3!=i||i!=n&&t.nodeValue.length)&&(o++,n=i);return o}function f(t,e){var r,a=this;a.doc=t,a.win=window,a.files={},a.counter=0,a.stdMode=!y||t.documentMode>=8,a.boxModel=!y||"CSS1Compat"==t.compatMode||a.stdMode,a.styleSheetLoader=new u(t),a.boundEvents=[],a.settings=e=e||{},a.schema=e.schema,a.styles=new i({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),a.fixDoc(t),a.events=e.ownEvents?new o(e.proxy):o.Event,a.attrHooks=function(t,e){var n,i={},o=e.keep_values;return n={set:function(n,i,o){e.url_converter&&(i=e.url_converter.call(e.url_converter_scope||t,i,o,n[0])),n.attr("data-mce-"+o,i).attr(o,i)},get:function(t,e){return t.attr("data-mce-"+e)||t.attr(e)}},i={style:{set:function(t,e){return null!==e&&"object"==typeof e?void t.css(e):(o&&t.attr("data-mce-style",e),void t.attr("style",e))},get:function(e){var n=e.attr("data-mce-style")||e.attr("style");return t.serializeStyle(t.parseStyle(n),e[0].nodeName)}}},o&&(i.href=i.src=n),i}(a,e),r=e.schema?e.schema.getBlockElements():{},a.$=n.overrideDefaults(function(){return{context:t,element:a.getRoot()}}),a.isBlock=function(t){if(!t)return!1;var e=t.nodeType;return e?!(1!==e||!r[t.nodeName]):!!r[t]}}var p=c.each,g=c.is,m=c.grep,v=c.trim,y=l.ie,x=/^([a-z0-9],?)+$/i,b=/^[ \t\r\n]*$/;return f.prototype={$$:function(t){return"string"==typeof t&&(t=this.get(t)),this.$(t)},root:null,fixDoc:function(t){var e,n=this.settings;if(y&&n.schema)for(e in"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(e){t.createElement(e)}),n.schema.getCustomElements())t.createElement(e)},clone:function(t,e){var n,i=this;return!y||1!==t.nodeType||e?t.cloneNode(e):e?n.firstChild:(n=i.doc.createElement(t.nodeName),p(i.getAttribs(t),function(e){i.setAttrib(n,e.nodeName,i.getAttrib(t,e.nodeName))}),n)},getRoot:function(){return this.settings.root_element||this.doc.body},getViewPort:function(t){var e,n;return e=(t=t||this.win).document,n=this.boxModel?e.documentElement:e.body,{x:t.pageXOffset||n.scrollLeft,y:t.pageYOffset||n.scrollTop,w:t.innerWidth||n.clientWidth,h:t.innerHeight||n.clientHeight}},getRect:function(t){var e,n,i=this;return t=i.get(t),e=i.getPos(t),n=i.getSize(t),{x:e.x,y:e.y,w:n.w,h:n.h}},getSize:function(t){var e,n,i=this;return t=i.get(t),e=i.getStyle(t,"width"),n=i.getStyle(t,"height"),-1===e.indexOf("px")&&(e=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(e,10)||t.offsetWidth||t.clientWidth,h:parseInt(n,10)||t.offsetHeight||t.clientHeight}},getParent:function(t,e,n){return this.getParents(t,e,n,!1)},getParents:function(t,n,i,o){var r,a=this,s=[];for(t=a.get(t),o=o===e,i=i||("BODY"!=a.getRoot().nodeName?a.getRoot().parentNode:null),g(n,"string")&&(r=n,n="*"===n?function(t){return 1==t.nodeType}:function(t){return a.is(t,r)});t&&t!=i&&t.nodeType&&9!==t.nodeType;){if(!n||n(t)){if(!o)return t;s.push(t)}t=t.parentNode}return o?s:null},get:function(t){var e;return t&&this.doc&&"string"==typeof t&&(e=t,(t=this.doc.getElementById(t))&&t.id!==e)?this.doc.getElementsByName(e)[1]:t},getNext:function(t,e){return this._findSib(t,e,"nextSibling")},getPrev:function(t,e){return this._findSib(t,e,"previousSibling")},select:function(e,n){var i=this;return t(e,i.get(n)||i.settings.root_element||i.doc,[])},is:function(n,i){var o;if(n.length===e){if("*"===i)return 1==n.nodeType;if(x.test(i)){for(i=i.toLowerCase().split(/,/),n=n.nodeName.toLowerCase(),o=i.length-1;o>=0;o--)if(i[o]==n)return!0;return!1}}if(n.nodeType&&1!=n.nodeType)return!1;var r=n.nodeType?[n]:n;return t(i,r[0].ownerDocument||r[0],null,r).length>0},add:function(t,e,n,i,o){var r=this;return this.run(t,function(t){var a;return a=g(e,"string")?r.doc.createElement(e):e,r.setAttribs(a,n),i&&(i.nodeType?a.appendChild(i):r.setHTML(a,i)),o?a:t.appendChild(a)})},create:function(t,e,n){return this.add(this.doc.createElement(t),t,e,n,1)},createHTML:function(t,e,n){var i,o="";for(i in o+="<"+t,e)e.hasOwnProperty(i)&&null!=e[i]&&(o+=" "+i+'="'+this.encode(e[i])+'"');return void 0!==n?o+">"+n+"</"+t+">":o+" />"},createFragment:function(t){var e,n,i,o=this.doc;for(i=o.createElement("div"),e=o.createDocumentFragment(),t&&(i.innerHTML=t);n=i.firstChild;)e.appendChild(n);return e},remove:function(t,e){return t=this.$$(t),e?t.each(function(){for(var t;t=this.firstChild;)3==t.nodeType&&0===t.data.length?this.removeChild(t):this.parentNode.insertBefore(t,this)}).remove():t.remove(),t.length>1?t.toArray():t[0]},setStyle:function(t,e,n){t=this.$$(t).css(e,n),this.settings.update_styles&&d(this,t)},getStyle:function(t,n,i){return t=this.$$(t),i?t.css(n):("float"==(n=n.replace(/-(\D)/g,function(t,e){return e.toUpperCase()}))&&(n=l.ie&&l.ie<12?"styleFloat":"cssFloat"),t[0]&&t[0].style?t[0].style[n]:e)},setStyles:function(t,e){t=this.$$(t).css(e),this.settings.update_styles&&d(this,t)},removeAllAttribs:function(t){return this.run(t,function(t){var e,n=t.attributes;for(e=n.length-1;e>=0;e--)t.removeAttributeNode(n.item(e))})},setAttrib:function(t,e,n){var i,o,r=this,a=r.settings;""===n&&(n=null),i=(t=r.$$(t)).attr(e),t.length&&((o=r.attrHooks[e])&&o.set?o.set(t,n,e):t.attr(e,n),i!=n&&a.onSetAttrib&&a.onSetAttrib({attrElm:t,attrName:e,attrValue:n}))},setAttribs:function(t,e){var n=this;n.$$(t).each(function(t,i){p(e,function(t,e){n.setAttrib(i,e,t)})})},getAttrib:function(t,e,n){var i,o;return(t=this.$$(t)).length&&(o=(i=this.attrHooks[e])&&i.get?i.get(t,e):t.attr(e)),void 0===o&&(o=n||""),o},getPos:function(t,e){var i,o,r=this,a=0,s=0,l=r.doc,c=l.body;if(e=e||c,t=r.get(t)){if(e===c&&t.getBoundingClientRect&&"static"===n(c).css("position"))return{x:a=(o=t.getBoundingClientRect()).left+(l.documentElement.scrollLeft||c.scrollLeft)-(e=r.boxModel?l.documentElement:c).clientLeft,y:s=o.top+(l.documentElement.scrollTop||c.scrollTop)-e.clientTop};for(i=t;i&&i!=e&&i.nodeType;)a+=i.offsetLeft||0,s+=i.offsetTop||0,i=i.offsetParent;for(i=t.parentNode;i&&i!=e&&i.nodeType;)a-=i.scrollLeft||0,s-=i.scrollTop||0,i=i.parentNode}return{x:a,y:s}},parseStyle:function(t){return this.styles.parse(t)},serializeStyle:function(t,e){return this.styles.serialize(t,e)},addStyle:function(t){var e,n,i=this.doc;if(this!==f.DOM&&i===document){var o=f.DOM.addedStyles;if((o=o||[])[t])return;o[t]=!0,f.DOM.addedStyles=o}(n=i.getElementById("mceDefaultStyles"))||((n=i.createElement("style")).id="mceDefaultStyles",n.type="text/css",(e=i.getElementsByTagName("head")[0]).firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=t:n.appendChild(i.createTextNode(t))},loadCSS:function(t){var e,n=this,i=n.doc;return n!==f.DOM&&i===document?void f.DOM.loadCSS(t):(t||(t=""),e=i.getElementsByTagName("head")[0],void p(t.split(","),function(t){var o;t=c._addCacheSuffix(t),n.files[t]||(n.files[t]=!0,o=n.create("link",{rel:"stylesheet",href:t}),y&&i.documentMode&&i.recalc&&(o.onload=function(){i.recalc&&i.recalc(),o.onload=null}),e.appendChild(o))}))},addClass:function(t,e){this.$$(t).addClass(e)},removeClass:function(t,e){this.toggleClass(t,e,!1)},hasClass:function(t,e){return this.$$(t).hasClass(e)},toggleClass:function(t,e,i){this.$$(t).toggleClass(e,i).each(function(){""===this.className&&n(this).attr("class",null)})},show:function(t){this.$$(t).show()},hide:function(t){this.$$(t).hide()},isHidden:function(t){return"none"==this.$$(t).css("display")},uniqueId:function(t){return(t||"mce_")+this.counter++},setHTML:function(t,e){t=this.$$(t),y?t.each(function(t,i){if(!1!==i.canHaveHTML){for(;i.firstChild;)i.removeChild(i.firstChild);try{i.innerHTML="<br>"+e,i.removeChild(i.firstChild)}catch(o){n("<div></div>").html("<br>"+e).contents().slice(1).appendTo(i)}return e}}):t.html(e)},getOuterHTML:function(t){return 1==(t=this.get(t)).nodeType&&"outerHTML"in t?t.outerHTML:n("<div></div>").append(n(t).clone()).html()},setOuterHTML:function(t,e){var i=this;i.$$(t).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=e)}catch(t){}i.remove(n(this).html(e),!0)})},decode:s.decode,encode:s.encodeAllRaw,insertAfter:function(t,e){return e=this.get(e),this.run(t,function(t){var n,i;return n=e.parentNode,(i=e.nextSibling)?n.insertBefore(t,i):n.appendChild(t),t})},replace:function(t,e,n){return this.run(e,function(e){return g(e,"array")&&(t=t.cloneNode(!0)),n&&p(m(e.childNodes),function(e){t.appendChild(e)}),e.parentNode.replaceChild(t,e)})},rename:function(t,e){var n,i=this;return t.nodeName!=e.toUpperCase()&&(n=i.create(e),p(i.getAttribs(t),function(e){i.setAttrib(n,e.nodeName,i.getAttrib(t,e.nodeName))}),i.replace(n,t,1)),n||t},findCommonAncestor:function(t,e){for(var n,i=t;i;){for(n=e;n&&i!=n;)n=n.parentNode;if(i==n)break;i=i.parentNode}return!i&&t.ownerDocument?t.ownerDocument.documentElement:i},toHex:function(t){return this.styles.toHex(c.trim(t))},run:function(t,e,n){var i,o=this;return"string"==typeof t&&(t=o.get(t)),!!t&&(n=n||this,t.nodeType||!t.length&&0!==t.length?e.call(n,t):(i=[],p(t,function(t,r){t&&("string"==typeof t&&(t=o.get(t)),i.push(e.call(n,t,r)))}),i))},getAttribs:function(t){var e;return(t=this.get(t))?y?(e=[],"OBJECT"==t.nodeName?t.attributes:("OPTION"===t.nodeName&&this.getAttrib(t,"selected")&&e.push({specified:1,nodeName:"selected"}),t.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(t){e.push({specified:1,nodeName:t})}),e)):t.attributes:[]},isEmpty:function(t,e){var n,i,o,a,s,l,c=this,u=0;if(t=t.firstChild){s=new r(t,t.parentNode),e=e||(c.schema?c.schema.getNonEmptyElements():null),a=c.schema?c.schema.getWhiteSpaceElements():{};do{if(1===(o=t.nodeType)){var d=t.getAttribute("data-mce-bogus");if(d){t=s.next("all"===d);continue}if(l=t.nodeName.toLowerCase(),e&&e[l]){if("br"===l){u++,t=s.next();continue}return!1}for(n=(i=c.getAttribs(t)).length;n--;)if("name"===(l=i[n].nodeName)||"data-mce-bookmark"===l)return!1}if(8==o)return!1;if(3===o&&!b.test(t.nodeValue))return!1;if(3===o&&t.parentNode&&a[t.parentNode.nodeName]&&b.test(t.nodeValue))return!1;t=s.next()}while(t)}return u<=1},createRng:function(){var t=this.doc;return t.createRange?t.createRange():new a(this)},nodeIndex:h,split:function(t,e,n){function i(t){var e,n=t.childNodes,o=t.nodeType;if(1!=o||"bookmark"!=t.getAttribute("data-mce-type")){for(e=n.length-1;e>=0;e--)i(n[e]);if(9!=o){if(3==o&&t.nodeValue.length>0){var r=v(t.nodeValue).length;if(!s.isBlock(t.parentNode)||r>0||0===r&&function(t){return t.previousSibling&&"SPAN"==t.previousSibling.nodeName&&t.nextSibling&&"SPAN"==t.nextSibling.nodeName}(t))return}else if(1==o&&(1==(n=t.childNodes).length&&n[0]&&1==n[0].nodeType&&"bookmark"==n[0].getAttribute("data-mce-type")&&t.parentNode.insertBefore(n[0],t),n.length||/^(br|hr|input|img)$/i.test(t.nodeName)))return;s.remove(t)}return t}}var o,r,a,s=this,l=s.createRng();if(t&&e)return l.setStart(t.parentNode,s.nodeIndex(t)),l.setEnd(e.parentNode,s.nodeIndex(e)),o=l.extractContents(),(l=s.createRng()).setStart(e.parentNode,s.nodeIndex(e)+1),l.setEnd(t.parentNode,s.nodeIndex(t)+1),r=l.extractContents(),(a=t.parentNode).insertBefore(i(o),t),a.insertBefore(n||e,t),a.insertBefore(i(r),t),s.remove(t),n||e},bind:function(t,e,n,i){var o=this;if(c.isArray(t)){for(var r=t.length;r--;)t[r]=o.bind(t[r],e,n,i);return t}return!o.settings.collect||t!==o.doc&&t!==o.win||o.boundEvents.push([t,e,n,i]),o.events.bind(t,e,n,i||o)},unbind:function(t,e,n){var i,o=this;if(c.isArray(t)){for(i=t.length;i--;)t[i]=o.unbind(t[i],e,n);return t}if(o.boundEvents&&(t===o.doc||t===o.win))for(i=o.boundEvents.length;i--;){var r=o.boundEvents[i];t!=r[0]||e&&e!=r[1]||n&&n!=r[2]||this.events.unbind(r[0],r[1],r[2])}return this.events.unbind(t,e,n)},fire:function(t,e,n){return this.events.fire(t,e,n)},getContentEditable:function(t){var e;return t&&1==t.nodeType?(e=t.getAttribute("data-mce-contenteditable"))&&"inherit"!==e?e:"inherit"!==t.contentEditable?t.contentEditable:null:null},getContentEditableParent:function(t){for(var e=this.getRoot(),n=null;t&&t!==e&&null===(n=this.getContentEditable(t));t=t.parentNode);return n},destroy:function(){var e=this;if(e.boundEvents){for(var n=e.boundEvents.length;n--;){var i=e.boundEvents[n];this.events.unbind(i[0],i[1],i[2])}e.boundEvents=null}t.setDocument&&t.setDocument(),e.win=e.doc=e.root=e.events=e.frag=null},isChildOf:function(t,e){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},dumpRng:function(t){return"startContainer: "+t.startContainer.nodeName+", startOffset: "+t.startOffset+", endContainer: "+t.endContainer.nodeName+", endOffset: "+t.endOffset},_findSib:function(t,e,n){var i=this,o=e;if(t)for("string"==typeof o&&(o=function(t){return i.is(t,e)}),t=t[n];t;t=t[n])if(o(t))return t;return null}},f.DOM=new f(document),f.nodeIndex=h,f}),n(b,[x,h],function(t,e){function n(){function t(t,n,o){function r(){c.remove(l),s&&(s.onreadystatechange=s.onload=s=null),n()}var s,l,c=i;l=c.uniqueId(),(s=document.createElement("script")).id=l,s.type="text/javascript",s.src=e._addCacheSuffix(t),"onreadystatechange"in s?s.onreadystatechange=function(){/loaded|complete/.test(s.readyState)&&r()}:s.onload=r,s.onerror=function(){a(o)?o():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)}var n,s={},l=[],c={},u=[],d=0;this.isDone=function(t){return 2==s[t]},this.markDone=function(t){s[t]=2},this.add=this.load=function(t,e,i,o){s[t]==n&&(l.push(t),s[t]=0),e&&(c[t]||(c[t]=[]),c[t].push({success:e,failure:o,scope:i||this}))},this.remove=function(t){delete s[t],delete c[t]},this.loadQueue=function(t,e,n){this.loadScripts(l,t,e,n)},this.loadScripts=function(e,i,l,h){function f(t,e){o(c[e],function(e){a(e[t])&&e[t].call(e.scope)}),c[e]=n}var p,g=[];u.push({success:i,failure:h,scope:l||this}),(p=function(){var n=r(e);e.length=0,o(n,function(e){return 2===s[e]?void f("success",e):3===s[e]?void f("failure",e):void(1!==s[e]&&(s[e]=1,d++,t(e,function(){s[e]=2,d--,f("success",e),p()},function(){s[e]=3,d--,g.push(e),f("failure",e),p()})))}),d||(o(u,function(t){0===g.length?a(t.success)&&t.success.call(t.scope):a(t.failure)&&t.failure.call(t.scope,g)}),u.length=0)})()}}var i=t.DOM,o=e.each,r=e.grep,a=function(t){return"function"==typeof t};return n.ScriptLoader=new n,n}),n(_,[b,h],function(t,n){function i(){var t=this;t.items=[],t.urls={},t.lookup={}}var o=n.each;return i.prototype={get:function(t){return this.lookup[t]?this.lookup[t].instance:e},dependencies:function(t){var e;return this.lookup[t]&&(e=this.lookup[t].dependencies),e||[]},requireLangPack:function(e,n){var o=i.language;if(o&&!1!==i.languageLoad){if(n)if(-1!=(n=","+n+",").indexOf(","+o.substr(0,2)+","))o=o.substr(0,2);else if(-1==n.indexOf(","+o+","))return;t.ScriptLoader.add(this.urls[e]+"/langs/"+o+".js")}},add:function(t,e,n){return this.items.push(e),this.lookup[t]={instance:e,dependencies:n},e},remove:function(t){delete this.urls[t],delete this.lookup[t]},createUrl:function(t,e){return"object"==typeof e?e:{prefix:t.prefix,resource:e,suffix:t.suffix}},addComponents:function(e,n){var i=this.urls[e];o(n,function(e){t.ScriptLoader.add(i+"/"+e)})},load:function(n,r,a,s,l){function c(){var i=u.dependencies(n);o(i,function(t){var n=u.createUrl(r,t);u.load(n.resource,n,e,e)}),a&&a.call(s||t)}var u=this,d=r;u.urls[n]||("object"==typeof r&&(d=r.prefix+r.resource+r.suffix),0!==d.indexOf("/")&&-1==d.indexOf("://")&&(d=i.baseURL+"/"+d),u.urls[n]=d.substring(0,d.lastIndexOf("/")),u.lookup[n]?c():t.ScriptLoader.add(d,c,s,l))}},i.PluginManager=new i,i.ThemeManager=new i,i}),n(w,[],function(){function t(t){return function(e){return!!e&&e.nodeType==t}}function e(t){return t=t.toLowerCase().split(" "),function(e){var n,i;if(e&&e.nodeType)for(i=e.nodeName.toLowerCase(),n=0;n<t.length;n++)if(i===t[n])return!0;return!1}}function n(t){return function(e){if(i(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}}var i=t(1);return{isText:t(3),isElement:i,isComment:t(8),isBr:e("br"),isContentEditableTrue:n("true"),isContentEditableFalse:n("false"),matchNodeNames:e,hasPropValue:function(t,e){return function(n){return i(n)&&n[t]===e}},hasAttributeValue:function(t,e){return function(n){return i(n)&&n.getAttribute(t)===e}},matchStyleValues:function(t,e){return e=e.toLowerCase().split(" "),function(n){var o;if(i(n))for(o=0;o<e.length;o++)if(getComputedStyle(n,null).getPropertyValue(t)===e[o])return!0;return!1}},isBogus:function(t){return i(t)&&t.hasAttribute("data-mce-bogus")}}}),n(S,[],function(){return{isZwsp:function(t){return"\ufeff"==t},ZWSP:"\ufeff",trim:function(t){return t.replace(new RegExp("\ufeff","g"),"")}}}),n(C,[w,S],function(t,e){function n(t){return d(t)&&(t=t.parentNode),u(t)&&t.hasAttribute("data-mce-caret")}function i(t){return d(t)&&e.isZwsp(t.data)}function o(t){return n(t)||i(t)}function r(t){var e=t.parentNode;e&&e.removeChild(t)}function a(e){return e.firstChild!==e.lastChild||!t.isBr(e.firstChild)}function s(t){return d(t)&&t.data[0]==e.ZWSP}function l(t){return d(t)&&t.data[t.data.length-1]==e.ZWSP}function c(e){var n=e.getElementsByTagName("br"),i=n[n.length-1];t.isBogus(i)&&i.parentNode.removeChild(i)}var u=t.isElement,d=t.isText;return{isCaretContainer:o,isCaretContainerBlock:n,isCaretContainerInline:i,showCaretContainerBlock:function(t){return t&&t.hasAttribute("data-mce-caret")?(c(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("_moz_abspos"),t):null},insertInline:function(t,n){var i,r,a;if(r=t.ownerDocument.createTextNode(e.ZWSP),a=t.parentNode,n){if(d(i=t.previousSibling)){if(o(i))return i;if(l(i))return i.splitText(i.data.length-1)}a.insertBefore(r,t)}else{if(d(i=t.nextSibling)){if(o(i))return i;if(s(i))return i.splitText(1),i}t.nextSibling?a.insertBefore(r,t.nextSibling):a.appendChild(r)}return r},insertBlock:function(t,e,n){var i,o;return(i=e.ownerDocument.createElement(t)).setAttribute("data-mce-caret",n?"before":"after"),i.setAttribute("data-mce-bogus","all"),i.appendChild(function(){var t=document.createElement("br");return t.setAttribute("data-mce-bogus","1"),t}()),o=e.parentNode,n?o.insertBefore(i,e):e.nextSibling?o.insertBefore(i,e.nextSibling):o.appendChild(i),i},hasContent:a,remove:function(t){u(t)&&o(t)&&(a(t)?t.removeAttribute("data-mce-caret"):r(t)),d(t)&&function(t,e){0===e.length?r(t):t.nodeValue=e}(t,e.trim(function(t){try{return t.nodeValue}catch(e){return""}}(t)))},startsWithCaretContainer:s,endsWithCaretContainer:l}}),n(M,[h,g,w,m,C],function(t,e,n,i,o){function r(t){return h(t)||f(t)}function a(t,e,n){for(;t&&t!==e;){if(n(t))return t;t=t.parentNode}return null}function s(t){return"_mce_caret"===t.id}function l(t,e){return p(t)&&!1===function(t,e,n){return null!==a(t,e,n)}(t,e,s)}function c(t){this.walk=function(e,n){function i(t){var e;return 3===(e=t[0]).nodeType&&e===g&&m>=e.nodeValue.length&&t.splice(0,1),e=t[t.length-1],0===y&&t.length>0&&e===v&&3===e.nodeType&&t.splice(t.length-1,1),t}function o(t,e,n){for(var i=[];t&&t!=n;t=t[e])i.push(t);return i}function r(t,e){do{if(t.parentNode==e)return t;t=t.parentNode}while(t)}function a(t,e,r){var a=r?"nextSibling":"previousSibling";for(h=(u=t).parentNode;u&&u!=e;u=h)h=u.parentNode,(f=o(u==t?u:u[a],a)).length&&(r||f.reverse(),n(i(f)))}var s,l,c,u,h,f,p,g=e.startContainer,m=e.startOffset,v=e.endContainer,y=e.endOffset;if((p=t.select("td[data-mce-selected],th[data-mce-selected]")).length>0)d(p,function(t){n([t])});else{if(1==g.nodeType&&g.hasChildNodes()&&(g=g.childNodes[m]),1==v.nodeType&&v.hasChildNodes()&&(v=function(t,e){var n=t.childNodes;return--e>n.length-1?e=n.length-1:e<0&&(e=0),n[e]||t}(v,y)),g==v)return n(i([g]));for(s=t.findCommonAncestor(g,v),u=g;u;u=u.parentNode){if(u===v)return a(g,s,!0);if(u===s)break}for(u=v;u;u=u.parentNode){if(u===g)return a(v,s);if(u===s)break}l=r(g,s)||g,c=r(v,s)||v,a(g,l,!0),(f=o(l==g?l:l.nextSibling,"nextSibling",c==v?c.nextSibling:c)).length&&n(i(f)),a(v,c)}},this.split=function(t){function e(t,e){return t.splitText(e)}var n=t.startContainer,i=t.startOffset,o=t.endContainer,r=t.endOffset;return n==o&&3==n.nodeType?i>0&&i<n.nodeValue.length&&(n=(o=e(n,i)).previousSibling,r>i?(n=o=e(o,r-=i).previousSibling,r=o.nodeValue.length,i=0):r=0):(3==n.nodeType&&i>0&&i<n.nodeValue.length&&(n=e(n,i),i=0),3==o.nodeType&&r>0&&r<o.nodeValue.length&&(r=(o=e(o,r).previousSibling).nodeValue.length)),{startContainer:n,startOffset:i,endContainer:o,endOffset:r}},this.normalize=function(n){function i(i){function a(t){return t&&/^(TD|TH|CAPTION)$/.test(t.nodeName)}function s(n,i){for(var o=new e(n,t.getParent(n.parentNode,t.isBlock)||x);n=o[i?"prev":"next"]();)if("BR"===n.nodeName)return!0}function c(n,i){var a,s,c;if(c=t.getParent((i=i||u).parentNode,t.isBlock)||x,n&&"BR"==i.nodeName&&y&&t.isEmpty(c))return u=i.parentNode,d=t.nodeIndex(i),void(o=!0);for(a=new e(i,c);g=a[n?"prev":"next"]();){if("false"===t.getContentEditableParent(g)||l(g,t.getRoot()))return;if(3===g.nodeType&&g.nodeValue.length>0)return u=g,d=n?g.nodeValue.length:0,void(o=!0);if(t.isBlock(g)||m[g.nodeName.toLowerCase()])return;s=g}r&&s&&(u=s,o=!0,d=0)}var u,d,h,g,m,v,y,x=t.getRoot();if(d=n[(i?"start":"end")+"Offset"],y=1==(u=n[(i?"start":"end")+"Container"]).nodeType&&d===u.childNodes.length,m=t.schema.getNonEmptyElements(),v=i,!p(u)){if(1==u.nodeType&&d>u.childNodes.length-1&&(v=!1),9===u.nodeType&&(u=t.getRoot(),d=0),u===x){if(v&&(g=u.childNodes[d>0?d-1:0])){if(p(g))return;if(m[g.nodeName]||"TABLE"==g.nodeName)return}if(u.hasChildNodes()){if(d=Math.min(!v&&d>0?d-1:d,u.childNodes.length-1),u=u.childNodes[d],d=0,!r&&u===x.lastChild&&"TABLE"===u.nodeName)return;if(function(t){for(;t&&t!=x;){if(f(t))return!0;t=t.parentNode}return!1}(u)||p(u))return;if(u.hasChildNodes()&&!/TABLE/.test(u.nodeName)){g=u,h=new e(u,x);do{if(f(g)||p(g)){o=!1;break}if(3===g.nodeType&&g.nodeValue.length>0){d=v?0:g.nodeValue.length,u=g,o=!0;break}if(m[g.nodeName.toLowerCase()]&&!a(g)){d=t.nodeIndex(g),u=g.parentNode,"IMG"!=g.nodeName||v||d++,o=!0;break}}while(g=v?h.next():h.prev())}}}r&&(3===u.nodeType&&0===d&&c(!0),1===u.nodeType&&((g=u.childNodes[d])||(g=u.childNodes[d-1]),!g||"BR"!==g.nodeName||function(t,e){return t.previousSibling&&"A"==t.previousSibling.nodeName}(g)||s(g)||s(g,!0)||c(!0,g))),v&&!r&&3===u.nodeType&&d===u.nodeValue.length&&c(!1),o&&n["set"+(i?"Start":"End")](u,d)}}var o,r;return r=n.collapsed,i(!0),r||i(),o&&r&&n.collapse(!0),o}}function u(e,n,i){var o,r,s;if(o=i.elementFromPoint(e,n),r=i.body.createTextRange(),o&&"HTML"!=o.tagName||(o=i.body),r.moveToElementText(o),(s=(s=t.toArray(r.getClientRects())).sort(function(t,e){return(t=Math.abs(Math.max(t.top-n,t.bottom-n)))-Math.abs(Math.max(e.top-n,e.bottom-n))})).length>0){n=(s[0].bottom+s[0].top)/2;try{return r.moveToPoint(e,n),r.collapse(!0),r}catch(a){}}return null}var d=t.each,h=n.isContentEditableTrue,f=n.isContentEditableFalse,p=o.isCaretContainer;return c.compareRanges=function(t,e){if(t&&e){if(!t.item&&!t.duplicate)return t.startContainer==e.startContainer&&t.startOffset==e.startOffset;if(t.item&&e.item&&t.item(0)===e.item(0))return!0;if(t.isEqual&&e.isEqual&&e.isEqual(t))return!0}return!1},c.getCaretRangeFromPoint=function(t,e,n){var i,o;if(n.caretPositionFromPoint)o=n.caretPositionFromPoint(t,e),(i=n.createRange()).setStart(o.offsetNode,o.offset),i.collapse(!0);else if(n.caretRangeFromPoint)i=n.caretRangeFromPoint(t,e);else if(n.body.createTextRange){i=n.body.createTextRange();try{i.moveToPoint(t,e),i.collapse(!0)}catch(r){i=u(t,e,n)}return function(t,e){var n=t&&t.parentElement?t.parentElement():null;return f(a(n,e,r))?null:t}(i,n.body)}return i},c.getSelectedNode=function(t){var e=t.startContainer,n=t.startOffset;return e.hasChildNodes()&&t.endOffset==n+1?e.childNodes[n]:null},c.getNode=function(t,e){return 1==t.nodeType&&t.hasChildNodes()&&(e>=t.childNodes.length&&(e=t.childNodes.length-1),t=t.childNodes[e]),t},c}),n(T,[M,l,s],function(t,e,n){return function(i){var o,r=[];"onselectionchange"in i.getDoc()||i.on("NodeChange Click MouseUp KeyUp Focus",function(e){var n,r;r={startContainer:(n=i.selection.getRng()).startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset},"nodechange"!=e.type&&t.compareRanges(r,o)||i.fire("SelectionChange"),o=r}),i.on("contextmenu",function(){i.fire("SelectionChange")}),i.on("SelectionChange",function(){var t=i.selection.getStart(!0);!e.range&&i.selection.isCollapsed()||!function(t){var e,n;if((n=i.$(t).parentsUntil(i.getBody()).add(t)).length===r.length){for(e=n.length;e>=0&&n[e]===r[e];e--);if(-1===e)return r=n,!0}return r=n,!1}(t)&&i.dom.isChildOf(t,i.getBody())&&i.nodeChanged({selectionChange:!0})}),i.on("MouseUp",function(t){t.isDefaultPrevented()||("IMG"==i.selection.getNode().nodeName?n.setEditorTimeout(i,function(){i.nodeChanged()}):i.nodeChanged())}),this.nodeChanged=function(t){var e,n,o,r=i.selection;i.initialized&&r&&!i.settings.disable_nodechange&&!i.readonly&&(o=i.getBody(),(e=r.getStart()||o).ownerDocument==i.getDoc()&&i.dom.isChildOf(e,o)||(e=o),"IMG"==e.nodeName&&r.isCollapsed()&&(e=e.parentNode),n=[],i.dom.getParent(e,function(t){return t===o||void n.push(t)}),(t=t||{}).element=e,t.parents=n,i.fire("NodeChange",t))}}}),n(k,[],function(){function t(t,e,n){var i,o,r=n?"lastChild":"firstChild",a=n?"prev":"next";if(t[r])return t[r];if(t!==e){if(i=t[a])return i;for(o=t.parent;o&&o!==e;o=o.parent)if(i=o[a])return i}}function e(t,e){this.name=t,this.type=e,1===e&&(this.attributes=[],this.attributes.map={})}var n=/^[ \t\r\n]*$/,i={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return e.prototype={replace:function(t){var e=this;return t.parent&&t.remove(),e.insert(t,e),e.remove(),e},attr:function(t,e){var n,i,o=this;if("string"!=typeof t){for(i in t)o.attr(i,t[i]);return o}if(n=o.attributes){if(void 0!==e){if(null===e){if(t in n.map)for(delete n.map[t],i=n.length;i--;)if(n[i].name===t)return n=n.splice(i,1),o;return o}if(t in n.map){for(i=n.length;i--;)if(n[i].name===t){n[i].value=e;break}}else n.push({name:t,value:e});return n.map[t]=e,o}return n.map[t]}},clone:function(){var t,n,i,o,r,a=this,s=new e(a.name,a.type);if(i=a.attributes){for((r=[]).map={},t=0,n=i.length;t<n;t++)"id"!==(o=i[t]).name&&(r[r.length]={name:o.name,value:o.value},r.map[o.name]=o.value);s.attributes=r}return s.value=a.value,s.shortEnded=a.shortEnded,s},wrap:function(t){var e=this;return e.parent.insert(t,e),t.append(e),e},unwrap:function(){var t,e,n=this;for(t=n.firstChild;t;)e=t.next,n.insert(t,n,!0),t=e;n.remove()},remove:function(){var t=this,e=t.parent,n=t.next,i=t.prev;return e&&(e.firstChild===t?(e.firstChild=n,n&&(n.prev=null)):i.next=n,e.lastChild===t?(e.lastChild=i,i&&(i.next=null)):n.prev=i,t.parent=t.next=t.prev=null),t},append:function(t){var e,n=this;return t.parent&&t.remove(),(e=n.lastChild)?(e.next=t,t.prev=e,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t},insert:function(t,e,n){var i;return t.parent&&t.remove(),i=e.parent||this,n?(e===i.firstChild?i.firstChild=t:e.prev.next=t,t.prev=e.prev,t.next=e,e.prev=t):(e===i.lastChild?i.lastChild=t:e.next.prev=t,t.next=e.next,t.prev=e,e.next=t),t.parent=i,t},getAll:function(e){var n,i=[];for(n=this.firstChild;n;n=t(n,this))n.name===e&&i.push(n);return i},empty:function(){var e,n,i,o=this;if(o.firstChild){for(e=[],i=o.firstChild;i;i=t(i,o))e.push(i);for(n=e.length;n--;)(i=e[n]).parent=i.firstChild=i.lastChild=i.next=i.prev=null}return o.firstChild=o.lastChild=null,o},isEmpty:function(e,i){var o,r,a=this.firstChild;if(i=i||{},a)do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(e[a.name])return!1;for(o=a.attributes.length;o--;)if("name"===(r=a.attributes[o].name)||0===r.indexOf("data-mce-bookmark"))return!1}if(8===a.type)return!1;if(3===a.type&&!n.test(a.value))return!1;if(3===a.type&&a.parent&&i[a.parent.name]&&n.test(a.value))return!1}while(a=t(a,this));return!0},walk:function(e){return t(this,null,e)}},e.create=function(t,n){var o,r;if(o=new e(t,i[t]||1),n)for(r in n)o.attr(r,n[r]);return o},e}),n(A,[h],function(t){function e(e,n){return(e=t.trim(e))?e.split(n||" "):[]}function n(t){function n(t,n,i){function o(t,e){var n,i,o={};for(n=0,i=t.length;n<i;n++)o[t[n]]=e||{};return o}var s,l,c;for(n=n||"","string"==typeof(i=i||[])&&(i=e(i)),s=(t=e(t)).length;s--;)c={attributes:o(l=e([a,n].join(" "))),attributesOrder:l,children:o(i,r)},f[t[s]]=c}function i(t,n){var i,o,r,a;for(i=(t=e(t)).length,n=e(n);i--;)for(o=f[t[i]],r=0,a=n.length;r<a;r++)o.attributes[n[r]]={},o.attributesOrder.push(n[r])}var a,l,c,u,d,h,f={};return o[t]?o[t]:(a="id accesskey class dir lang style tabindex title",l="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",c="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!=t&&(a+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",l+=" article aside details dialog figure header footer hgroup section nav",c+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!=t&&(a+=" xml:lang",c=[c,h="acronym applet basefont big font strike tt"].join(" "),s(e(h),function(t){n(t,"",c)}),l=[l,d="center dir isindex noframes"].join(" "),u=[l,c].join(" "),s(e(d),function(t){n(t,"",u)})),u=u||[l,c].join(" "),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),n("address dt dd div caption","",u),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",c),n("blockquote","cite",u),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",u),n("dl","","dt dd"),n("a","href target rel media hreflang type",c),n("q","cite",c),n("ins del","cite datetime",u),n("img","src sizes srcset alt usemap ismap width height"),n("iframe","src name width height",u),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",[u,"param"].join(" ")),n("param","name value"),n("map","name",[u,"area"].join(" ")),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"==t?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",u),n("th","colspan rowspan headers scope abbr",u),n("form","accept-charset action autocomplete enctype method name novalidate target",u),n("fieldset","disabled form name",[u,"legend"].join(" ")),n("label","form for",c),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==t?u:c),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",[u,"li"].join(" ")),n("noscript","",u),"html4"!=t&&(n("wbr"),n("ruby","",[c,"rt rp"].join(" ")),n("figcaption","",u),n("mark rt rp summary bdi","",c),n("canvas","width height",u),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[u,"track source"].join(" ")),n("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[u,"track source"].join(" ")),n("picture","","img source"),n("source","src srcset type media sizes"),n("track","kind src srclang label default"),n("datalist","",[c,"option"].join(" ")),n("article section nav aside header footer","",u),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",[u,"figcaption"].join(" ")),n("time","datetime",c),n("dialog","open",u),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",c),n("progress","value max",c),n("meter","value min max low high optimum",c),n("details","open",[u,"summary"].join(" ")),n("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=t&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select","onchange"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!=t&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("iframe","sandbox seamless allowfullscreen")),s(e("a form meter progress dfn"),function(t){f[t]&&delete f[t].children[t]}),delete f.caption.children.table,delete f.script,o[t]=f,f)}function i(t,e){var n;return t&&(n={},"string"==typeof t&&(t={"*":t}),s(t,function(t,i){n[i]=n[i.toUpperCase()]="map"==e?a(t,/[, ]/):c(t,/[, ]/)})),n}var o={},r={},a=t.makeMap,s=t.each,l=t.extend,c=t.explode,u=t.inArray;return function(t){function r(e,n,i){var r=t[e];return r?r=a(r,/[, ]/,a(r.toUpperCase(),/[, ]/)):(r=o[e])||(r=a(n," ",a(n.toUpperCase()," ")),r=l(r,i),o[e]=r),r}function d(t){return new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$")}function h(t){var n,i,o,r,s,l,c,h,f,p,g,m,v,y,x,b,_,w,S,C=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,M=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,T=/[*?+]/;if(t)for(t=e(t,","),P["@"]&&(b=P["@"].attributes,_=P["@"].attributesOrder),n=0,i=t.length;n<i;n++)if(s=C.exec(t[n])){if(f=s[2],x=s[3],h=s[5],l={attributes:m={},attributesOrder:v=[]},"#"===(y=s[1])&&(l.paddEmpty=!0),"-"===y&&(l.removeEmpty=!0),"!"===s[4]&&(l.removeEmptyAttrs=!0),b){for(w in b)m[w]=b[w];v.push.apply(v,_)}if(h)for(o=0,r=(h=e(h,"|")).length;o<r;o++)if(s=M.exec(h[o])){if(c={},g=s[1],p=s[2].replace(/::/g,":"),y=s[3],S=s[4],"!"===g&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(p),c.required=!0),"-"===g){delete m[p],v.splice(u(v,p),1);continue}y&&("="===y&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:p,value:S}),c.defaultValue=S),":"===y&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:p,value:S}),c.forcedValue=S),"<"===y&&(c.validValues=a(S,"?"))),T.test(p)?(l.attributePatterns=l.attributePatterns||[],c.pattern=d(p),l.attributePatterns.push(c)):(m[p]||v.push(p),m[p]=c)}b||"@"!=f||(b=m,_=v),x&&(l.outputName=f,P[x]=l),T.test(f)?(l.pattern=d(f),N.push(l)):P[f]=l}}function f(t){P={},N=[],h(t),s(x,function(t,e){E[e]=t.children})}function p(t){var n=/^(~)?(.+)$/;t&&(o.text_block_elements=o.block_elements=null,s(e(t,","),function(t){var e=n.exec(t),i="~"===e[1],o=i?"span":"div",r=e[2];if(E[r]=E[o],L[r]=o,i||(M[r.toUpperCase()]={},M[r]={}),!P[r]){var a=P[o];delete(a=l({},a)).removeEmptyAttrs,delete a.removeEmpty,P[r]=a}s(E,function(t,e){t[o]&&(E[e]=t=l({},E[e]),t[r]=t[o])})}))}function g(n){var i=/^([+\-]?)(\w+)\[([^\]]+)\]$/;o[t.schema]=null,n&&s(e(n,","),function(t){var n,o,r=i.exec(t);r&&(n=(o=r[1])?E[r[2]]:E[r[2]]={"#comment":{}},n=E[r[2]],s(e(r[3],"|"),function(t){"-"===o?delete n[t]:n[t]={}}))})}function m(t){var e,n=P[t];if(n)return n;for(e=N.length;e--;)if((n=N[e]).pattern.test(t))return n}var v,y,x,b,_,w,S,C,M,T,k,A,I,D=this,P={},E={},N=[],L={},R={};x=n((t=t||{}).schema),!1===t.verify_html&&(t.valid_elements="*[*]"),v=i(t.valid_styles),y=i(t.invalid_styles,"map"),C=i(t.valid_classes,"map"),b=r("whitespace_elements","pre script noscript style textarea video audio iframe object code"),_=r("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),w=r("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),S=r("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),T=r("non_empty_elements","td th iframe video audio object script pre code",w),k=r("move_caret_before_on_enter_elements","table",T),A=r("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),M=r("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",A),I=r("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),s((t.special||"script noscript style textarea").split(" "),function(t){R[t]=new RegExp("</"+t+"[^>]*>","gi")}),t.valid_elements?f(t.valid_elements):(s(x,function(t,e){P[e]={attributes:t.attributes,attributesOrder:t.attributesOrder},E[e]=t.children}),"html5"!=t.schema&&s(e("strong/b em/i"),function(t){t=e(t,"/"),P[t[1]].outputName=t[0]}),s(e("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(t){P[t]&&(P[t].removeEmpty=!0)}),s(e("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(t){P[t].paddEmpty=!0}),s(e("span"),function(t){P[t].removeEmptyAttrs=!0})),p(t.custom_elements),g(t.valid_children),h(t.extended_valid_elements),g("+ol[ul|ol],+ul[ul|ol]"),s({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(t,n){P[n]&&(P[n].parentsRequired=e(t))}),t.invalid_elements&&s(c(t.invalid_elements),function(t){P[t]&&delete P[t]}),m("span")||h("span[!data-mce-type|*]"),D.children=E,D.getValidStyles=function(){return v},D.getInvalidStyles=function(){return y},D.getValidClasses=function(){return C},D.getBoolAttrs=function(){return S},D.getBlockElements=function(){return M},D.getTextBlockElements=function(){return A},D.getTextInlineElements=function(){return I},D.getShortEndedElements=function(){return w},D.getSelfClosingElements=function(){return _},D.getNonEmptyElements=function(){return T},D.getMoveCaretBeforeOnEnterElements=function(){return k},D.getWhiteSpaceElements=function(){return b},D.getSpecialElements=function(){return R},D.isValidChild=function(t,e){var n=E[t];return!(!n||!n[e])},D.isValid=function(t,e){var n,i,o=m(t);if(o){if(!e)return!0;if(o.attributes[e])return!0;if(n=o.attributePatterns)for(i=n.length;i--;)if(n[i].pattern.test(t))return!0}return!1},D.getElementRule=m,D.getCustomElements=function(){return L},D.addValidElements=h,D.setValidElements=f,D.addCustomElements=p,D.addValidChildren=g,D.elements=P}}),n(I,[A,v,h],function(t,e,n){function i(t,e,n){var i,o,r,a,s=1;for(a=t.getShortEndedElements(),(r=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=i=n;o=r.exec(e);){if(i=r.lastIndex,"/"===o[1])s--;else if(!o[1]){if(o[2]in a)continue;s++}if(0===s)break}return i}function o(o,a){function s(){}var l=this;o=o||{},l.schema=a=a||new t,!1!==o.fix_self_closing&&(o.fix_self_closing=!0),r("comment cdata text start end pi doctype".split(" "),function(t){t&&(l[t]=o[t]||s)}),l.parse=function(t){function r(t){var e,n;for(e=z.length;e--&&z[e].name!==t;);if(e>=0){for(n=z.length-1;n>=e;n--)(t=z[n]).valid&&O.end(t.name);z.length=e}}function s(t,e,n,i,r){var a,s;if(n=(e=e.toLowerCase())in y?e:F(n||i||r||""),b&&!g&&0!==e.indexOf("data-")){if(!(a=M[e])&&T){for(s=T.length;s--&&!(a=T[s]).pattern.test(e););-1===s&&(a=null)}if(!a)return;if(a.validValues&&!(n in a.validValues))return}if(H[e]&&!o.allow_script_urls){var l=n.replace(/[\s\u0000-\u001F]+/g,"");try{l=decodeURIComponent(l)}catch(B){l=unescape(l)}if(W.test(l))return;if(!o.allow_html_data_urls&&G.test(l)&&!/^data:image\//i.test(l))return}d.map[e]=n,d.push({name:e,value:n})}var l,c,u,d,h,f,p,g,m,v,y,x,b,_,w,S,C,M,T,k,A,I,D,P,E,N,L,R,O=this,B=0,z=[],V=0,F=e.decode,H=n.makeMap("src,href,data,background,formaction,poster"),W=/((java|vb)script|mhtml):/i,G=/^data:/i;for(P=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),E=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,v=a.getShortEndedElements(),D=o.self_closing_elements||a.getSelfClosingElements(),y=a.getBoolAttrs(),b=o.validate,m=o.remove_internals,R=o.fix_self_closing,N=a.getSpecialElements();l=P.exec(t);){if(B<l.index&&O.text(F(t.substr(B,l.index-B))),c=l[6])":"===(c=c.toLowerCase()).charAt(0)&&(c=c.substr(1)),r(c);else if(c=l[7]){if(":"===(c=c.toLowerCase()).charAt(0)&&(c=c.substr(1)),x=c in v,R&&D[c]&&z.length>0&&z[z.length-1].name===c&&r(c),!b||(_=a.getElementRule(c))){if(w=!0,b&&(M=_.attributes,T=_.attributePatterns),(C=l[8])?((g=-1!==C.indexOf("data-mce-type"))&&m&&(w=!1),(d=[]).map={},C.replace(E,s)):(d=[]).map={},b&&!g){if(k=_.attributesRequired,A=_.attributesDefault,_.removeEmptyAttrs&&!d.length&&(w=!1),I=_.attributesForced)for(h=I.length;h--;)"{$uid}"===(L=(S=I[h]).value)&&(L="mce_"+V++),d.map[p=S.name]=L,d.push({name:p,value:L});if(A)for(h=A.length;h--;)(p=(S=A[h]).name)in d.map||("{$uid}"===(L=S.value)&&(L="mce_"+V++),d.map[p]=L,d.push({name:p,value:L}));if(k){for(h=k.length;h--&&!(k[h]in d.map););-1===h&&(w=!1)}if(S=d.map["data-mce-bogus"]){if("all"===S){B=i(a,t,P.lastIndex),P.lastIndex=B;continue}w=!1}}w&&O.start(c,d,x)}else w=!1;if(u=N[c]){u.lastIndex=B=l.index+l[0].length,(l=u.exec(t))?(w&&(f=t.substr(B,l.index-B)),B=l.index+l[0].length):(f=t.substr(B),B=t.length),w&&(f.length>0&&O.text(f,!0),O.end(c)),P.lastIndex=B;continue}x||(C&&C.indexOf("/")==C.length-1?w&&O.end(c):z.push({name:c,valid:w}))}else(c=l[1])?(">"===c.charAt(0)&&(c=" "+c),o.allow_conditional_comments||"[if"!==c.substr(0,3).toLowerCase()||(c=" "+c),O.comment(c)):(c=l[2])?O.cdata(c):(c=l[3])?O.doctype(c):(c=l[4])&&O.pi(c,l[5]);B=l.index+l[0].length}for(B<t.length&&O.text(F(t.substr(B))),h=z.length-1;h>=0;h--)(c=z[h]).valid&&O.end(c.name)}}var r=n.each;return o.findEndTag=i,o}),n(D,[k,A,I,h],function(t,e,n,i){var o=i.makeMap,r=i.each,a=i.explode,s=i.extend,l=function(e,n){e.padd_empty_with_br?n.empty().append(new t("br","1")).shortEnded=!0:n.empty().append(new t("#text","3")).value=" "},c=function(t,e){return t&&t.firstChild===t.lastChild&&t.firstChild.name===e};return function(u,d){function h(e){var n,i,r,a,s,l,u,h,p,g,m,v,y,x,b,_;for(v=o("tr,td,th,tbody,thead,tfoot,table"),g=d.getNonEmptyElements(),m=d.getWhiteSpaceElements(),y=d.getTextBlockElements(),x=d.getSpecialElements(),n=0;n<e.length;n++)if((i=e[n]).parent&&!i.fixed)if(y[i.name]&&"li"==i.parent.name){for(b=i.next;b&&y[b.name];)b.name="li",b.fixed=!0,i.parent.insert(b,i.parent),b=b.next;i.unwrap(i)}else{for(a=[i],r=i.parent;r&&!d.isValidChild(r.name,i.name)&&!v[r.name];r=r.parent)a.push(r);if(r&&a.length>1){for(a.reverse(),s=l=f.filterNode(a[0].clone()),p=0;p<a.length-1;p++){for(d.isValidChild(l.name,a[p].name)?(u=f.filterNode(a[p].clone()),l.append(u)):u=l,h=a[p].firstChild;h&&h!=a[p+1];)_=h.next,u.append(h),h=_;l=u}s.isEmpty(g,m)?r.insert(i,a[0],!0):(r.insert(s,a[0],!0),r.insert(i,s)),((r=a[0]).isEmpty(g,m)||c(r,"br"))&&r.empty().remove()}else if(i.parent){if("li"===i.name){if((b=i.prev)&&("ul"===b.name||"ul"===b.name)){b.append(i);continue}if((b=i.next)&&("ul"===b.name||"ul"===b.name)){b.insert(i,b.firstChild,!0);continue}i.wrap(f.filterNode(new t("ul",1)));continue}d.isValidChild(i.parent.name,"div")&&d.isValidChild("div",i.name)?i.wrap(f.filterNode(new t("div",1))):x[i.name]?i.empty().remove():i.unwrap()}}}var f=this,p={},g=[],m={},v={};(u=u||{}).validate=!("validate"in u)||u.validate,u.root_name=u.root_name||"body",f.schema=d=d||new e,f.filterNode=function(t){var e,n,i;n in p&&((i=m[n])?i.push(t):m[n]=[t]),e=g.length;for(;e--;)(n=g[e].name)in t.attributes.map&&((i=v[n])?i.push(t):v[n]=[t]);return t},f.addNodeFilter=function(t,e){r(a(t),function(t){var n=p[t];n||(p[t]=n=[]),n.push(e)})},f.addAttributeFilter=function(t,e){r(a(t),function(t){var n;for(n=0;n<g.length;n++)if(g[n].name===t)return void g[n].callbacks.push(e);g.push({name:t,callbacks:[e]})})},f.parse=function(e,i){function r(e,n){var i,o=new t(e,n);return e in p&&((i=m[e])?i.push(o):m[e]=[o]),o}function a(t){var e,n,i,o,r=d.getBlockElements();for(e=t.prev;e&&3===e.type;){if((i=e.value.replace(D,"")).length>0)return void(e.value=i);if(n=e.next){if(3==n.type&&n.value.length){e=e.prev;continue}if(!r[n.name]&&"script"!=n.name&&"style"!=n.name){e=e.prev;continue}}o=e.prev,e.remove(),e=o}}var c,f,y,x,b,_,w,S,C,M,T,k,A,I,D,P,E,N,L,R,O,B=[];if(i=i||{},m={},v={},k=s(o("script,style,head,html,body,title,meta,param"),d.getBlockElements()),R=d.getNonEmptyElements(),L=d.children,T=u.validate,O="forced_root_block"in i?i.forced_root_block:u.forced_root_block,N=d.getWhiteSpaceElements(),A=/^[ \t\r\n]+/,D=/[ \t\r\n]+$/,P=/[ \t\r\n]+/g,E=/^[ \t\r\n]+$/,c=new n({validate:T,allow_script_urls:u.allow_script_urls,allow_conditional_comments:u.allow_conditional_comments,self_closing_elements:function(t){var e,n={};for(e in t)"li"!==e&&"p"!=e&&(n[e]=t[e]);return n}(d.getSelfClosingElements()),cdata:function(t){y.append(r("#cdata",4)).value=t},text:function(t,e){var n;I||(t=t.replace(P," "),y.lastChild&&k[y.lastChild.name]&&(t=t.replace(A,""))),0!==t.length&&((n=r("#text",3)).raw=!!e,y.append(n).value=t)},comment:function(t){y.append(r("#comment",8)).value=t},pi:function(t,e){y.append(r(t,7)).value=e,a(y)},doctype:function(t){y.append(r("#doctype",10)).value=t,a(y)},start:function(t,e,n){var i,o,s,l,c;if(s=T?d.getElementRule(t):{}){for((i=r(s.outputName||t,1)).attributes=e,i.shortEnded=n,y.append(i),(c=L[y.name])&&L[i.name]&&!c[i.name]&&B.push(i),o=g.length;o--;)(l=g[o].name)in e.map&&((C=v[l])?C.push(i):v[l]=[i]);k[t]&&a(i),n||(y=i),!I&&N[t]&&(I=!0)}},end:function(t){var e,n,i,o,r;if(n=T?d.getElementRule(t):{}){if(k[t]&&!I){if((e=y.firstChild)&&3===e.type)if((i=e.value.replace(A,"")).length>0)e.value=i,e=e.next;else for(o=e.next,e.remove(),e=o;e&&3===e.type;)o=e.next,(0===(i=e.value).length||E.test(i))&&(e.remove(),e=o),e=o;if((e=y.lastChild)&&3===e.type)if((i=e.value.replace(D,"")).length>0)e.value=i,e=e.prev;else for(o=e.prev,e.remove(),e=o;e&&3===e.type;)o=e.prev,(0===(i=e.value).length||E.test(i))&&(e.remove(),e=o),e=o}if(I&&N[t]&&(I=!1),(n.removeEmpty||n.paddEmpty)&&y.isEmpty(R,N))if(n.paddEmpty)l(u,y);else if(!y.attributes.map.name&&!y.attributes.map.id)return r=y.parent,k[y.name]?y.empty().remove():y.unwrap(),void(y=r);y=y.parent}}},d),f=y=new t(i.context||u.root_name,11),c.parse(e),T&&B.length&&(i.context?i.invalid=!0:h(B)),O&&("body"==f.name||i.isRootContent)&&function(){function t(t){t&&((i=t.firstChild)&&3==i.type&&(i.value=i.value.replace(A,"")),(i=t.lastChild)&&3==i.type&&(i.value=i.value.replace(D,"")))}var e,n,i=f.firstChild;if(d.isValidChild(f.name,O.toLowerCase())){for(;i;)e=i.next,3==i.type||1==i.type&&"p"!==i.name&&!k[i.name]&&!i.attr("data-mce-type")?(n||((n=r(O,1)).attr(u.forced_root_block_attrs),f.insert(n,i)),n.append(i)):(t(n),n=null),i=e;t(n)}}(),!i.invalid){for(M in m){for(C=p[M],w=(x=m[M]).length;w--;)x[w].parent||x.splice(w,1);for(b=0,_=C.length;b<_;b++)C[b](x,M,i)}for(b=0,_=g.length;b<_;b++)if((C=g[b]).name in v){for(w=(x=v[C.name]).length;w--;)x[w].parent||x.splice(w,1);for(w=0,S=C.callbacks.length;w<S;w++)C.callbacks[w](x,C.name,i)}}return f},u.remove_trailing_brs&&f.addNodeFilter("br",function(e){var n,i,o,r,a,c,h,f,p=e.length,g=s({},d.getBlockElements()),m=d.getNonEmptyElements(),v=d.getNonEmptyElements();for(g.body=1,n=0;n<p;n++)if(o=(i=e[n]).parent,g[i.parent.name]&&i===o.lastChild){for(a=i.prev;a;){if("span"!==(c=a.name)||"bookmark"!==a.attr("data-mce-type")){if("br"!==c)break;if("br"===c){i=null;break}}a=a.prev}i&&(i.remove(),o.isEmpty(m,v)&&(h=d.getElementRule(o.name))&&(h.removeEmpty?o.remove():h.paddEmpty&&l(u,o)))}else{for(r=i;o&&o.firstChild===r&&o.lastChild===r&&(r=o,!g[o.name]);)o=o.parent;r===o&&!0!==u.padd_empty_with_br&&((f=new t("#text",3)).value=" ",i.replace(f))}}),u.allow_unsafe_link_target||f.addAttributeFilter("href",function(t){function e(t){var e=new RegExp("("+s.replace(" ","|")+")","g");return t&&(t=i.trim(t.replace(e,""))),t||null}function n(t,n){return n?function(t){return(t=e(t))?[t,s].join(" "):s}(t):e(t)}for(var o,r,a=t.length,s="noopener noreferrer";a--;)r=(o=t[a]).attr("rel"),"a"===o.name&&o.attr("rel",n(r,"_blank"==o.attr("target")))}),u.allow_html_in_named_anchor||f.addAttributeFilter("id,name",function(t){for(var e,n,i,o,r=t.length;r--;)if("a"===(o=t[r]).name&&o.firstChild&&!o.attr("href")){i=o.parent,e=o.lastChild;do{n=e.prev,i.insert(e,o),e=n}while(e)}}),u.fix_list_elements&&f.addNodeFilter("ul,ol",function(e){for(var n,i,o=e.length;o--;)if("ul"===(i=(n=e[o]).parent).name||"ol"===i.name)if(n.prev&&"li"===n.prev.name)n.prev.append(n);else{var r=new t("li",1);r.attr("style","list-style-type: none"),n.wrap(r)}}),u.validate&&d.getValidClasses()&&f.addAttributeFilter("class",function(t){for(var e,n,i,o,r,a,s,l=t.length,c=d.getValidClasses();l--;){for(n=(e=t[l]).attr("class").split(" "),r="",i=0;i<n.length;i++)o=n[i],s=!1,(a=c["*"])&&a[o]&&(s=!0),a=c[e.name],!s&&a&&a[o]&&(s=!0),s&&(r&&(r+=" "),r+=o);r.length||(r=null),e.attr("class",r)}})}}),n(P,[v,h],function(t,e){var n=e.makeMap;return function(e){var i,o,r,a,s,l=[];return i=(e=e||{}).indent,o=n(e.indent_before||""),r=n(e.indent_after||""),a=t.getEncodeFunc(e.entity_encoding||"raw",e.entities),s="html"==e.element_format,{start:function(t,e,n){var c,u,d,h;if(i&&o[t]&&l.length>0&&(h=l[l.length-1]).length>0&&"\n"!==h&&l.push("\n"),l.push("<",t),e)for(c=0,u=e.length;c<u;c++)l.push(" ",(d=e[c]).name,'="',a(d.value,!0),'"');l[l.length]=!n||s?">":" />",n&&i&&r[t]&&l.length>0&&(h=l[l.length-1]).length>0&&"\n"!==h&&l.push("\n")},end:function(t){var e;l.push("</",t,">"),i&&r[t]&&l.length>0&&(e=l[l.length-1]).length>0&&"\n"!==e&&l.push("\n")},text:function(t,e){t.length>0&&(l[l.length]=e?t:a(t))},cdata:function(t){l.push("<![CDATA[",t,"]]>")},comment:function(t){l.push("\x3c!--",t,"--\x3e")},pi:function(t,e){e?l.push("<?",t," ",a(e),"?>"):l.push("<?",t,"?>"),i&&l.push("\n")},doctype:function(t){l.push("<!DOCTYPE",t,">",i?"\n":"")},reset:function(){l.length=0},getContent:function(){return l.join("").replace(/\n$/,"")}}}}),n(E,[P,A],function(t,e){return function(n,i){var o=this,r=new t(n);(n=n||{}).validate=!("validate"in n)||n.validate,o.schema=i=i||new e,o.writer=r,o.serialize=function(t){function e(t){var n,s,l,c,u,d,h,f,p,g=o[t.type];if(g)g(t);else{if(n=t.name,s=t.shortEnded,l=t.attributes,a&&l&&l.length>1&&((d=[]).map={},p=i.getElementRule(t.name))){for(h=0,f=p.attributesOrder.length;h<f;h++)(c=p.attributesOrder[h])in l.map&&(d.map[c]=u=l.map[c],d.push({name:c,value:u}));for(h=0,f=l.length;h<f;h++)(c=l[h].name)in d.map||(d.map[c]=u=l.map[c],d.push({name:c,value:u}));l=d}if(r.start(t.name,l,s),!s){if(t=t.firstChild)do{e(t)}while(t=t.next);r.end(n)}}}var o,a;return a=n.validate,o={3:function(t){r.text(t.value,t.raw)},8:function(t){r.comment(t.value)},7:function(t){r.pi(t.name,t.value)},10:function(t){r.doctype(t.value)},4:function(t){r.cdata(t.value)},11:function(t){if(t=t.firstChild)do{e(t)}while(t=t.next)}},r.reset(),1!=t.type||n.inner?o[11](t):e(t),r.getContent()}}}),n(N,[x,D,I,v,E,k,A,l,h,S],function(t,e,n,i,o,r,a,s,l,c){var u=l.each,d=l.trim,h=t.DOM;return function(t,r){function f(t){var e=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[​\ufeff]+<\\/span>","\\s?("+y.join("|")+')="[^"]+"'].join("|"),"gi");return c.trim(t.replace(e,""))}function p(t){var e,i,o,a,s,l=t,c=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,u=r.schema;for(l=f(l),s=u.getShortEndedElements();a=c.exec(l);)i=c.lastIndex,o=a[0].length,e=s[a[1]]?i:n.findEndTag(u,l,i),l=l.substring(0,i-o)+l.substring(e),c.lastIndex=i-o;return l}var g,m,v,y=["data-mce-selected"];return r&&(g=r.dom,m=r.schema),g=g||h,m=m||new a(t),t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs=!("remove_trailing_brs"in t)||t.remove_trailing_brs,(v=new e(t,m)).addAttributeFilter("data-mce-tabindex",function(t,e){for(var n,i=t.length;i--;)(n=t[i]).attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(e,null)}),v.addAttributeFilter("src,href,style",function(e,n){for(var i,o,r=e.length,a="data-mce-"+n,s=t.url_converter,l=t.url_converter_scope;r--;)void 0!==(o=(i=e[r]).attributes.map[a])?(i.attr(n,o.length>0?o:null),i.attr(a,null)):(o=i.attributes.map[n],"style"===n?o=g.serializeStyle(g.parseStyle(o),i.name):s&&(o=s.call(l,o,n,i.name)),i.attr(n,o.length>0?o:null))}),v.addAttributeFilter("class",function(t){for(var e,n,i=t.length;i--;)(n=(e=t[i]).attr("class"))&&(n=e.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),e.attr("class",n.length>0?n:null))}),v.addAttributeFilter("data-mce-type",function(t,e,n){for(var i,o=t.length;o--;)"bookmark"!==(i=t[o]).attributes.map["data-mce-type"]||n.cleanup||i.remove()}),v.addNodeFilter("noscript",function(t){for(var e,n=t.length;n--;)(e=t[n].firstChild)&&(e.value=i.decode(e.value))}),v.addNodeFilter("script,style",function(t,e){function n(t){return t.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var i,o,r,a=t.length;a--;)o=(i=t[a]).firstChild?i.firstChild.value:"","script"===e?((r=i.attr("type"))&&i.attr("type","mce-no/type"==r?null:r.replace(/^mce\-/,"")),o.length>0&&(i.firstChild.value="// <![CDATA[\n"+n(o)+"\n// ]]>")):o.length>0&&(i.firstChild.value="\x3c!--\n"+n(o)+"\n--\x3e")}),v.addNodeFilter("#comment",function(t){for(var e,n=t.length;n--;)0===(e=t[n]).value.indexOf("[CDATA[")?(e.name="#cdata",e.type=4,e.value=e.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===e.value.indexOf("mce:protected ")&&(e.name="#text",e.type=3,e.raw=!0,e.value=unescape(e.value).substr(14))}),v.addNodeFilter("xml:namespace,input",function(t,e){for(var n,i=t.length;i--;)7===(n=t[i]).type?n.remove():1===n.type&&("input"!==e||"type"in n.attributes.map||n.attr("type","text"))}),v.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(t,e){for(var n=t.length;n--;)t[n].attr(e,null)}),{schema:m,addNodeFilter:v.addNodeFilter,addAttributeFilter:v.addAttributeFilter,serialize:function(e,n){var i,r,a,l,h,f;return s.ie&&g.select("script,style,select,map").length>0?(h=e.innerHTML,e=e.cloneNode(!1),g.setHTML(e,h)):e=e.cloneNode(!0),(i=document.implementation).createHTMLDocument&&(r=i.createHTMLDocument(""),u("BODY"==e.nodeName?e.childNodes:[e],function(t){r.body.appendChild(r.importNode(t,!0))}),e="BODY"!=e.nodeName?r.body.firstChild:r.body,a=g.doc,g.doc=r),(n=n||{}).format=n.format||"html",n.selection&&(n.forced_root_block=""),n.no_events||(n.node=e,this.onPreProcess(n)),function(t){function e(t){return t&&"br"===t.name}var n,i;e(n=t.lastChild)&&e(i=n.prev)&&(n.remove(),i.remove())}(f=v.parse(d(n.getInner?e.innerHTML:g.getOuterHTML(e)),n)),l=new o(t,m),n.content=l.serialize(f),n.cleanup||(n.content=c.trim(n.content),n.content=n.content.replace(/\uFEFF/g,"")),n.no_events||this.onPostProcess(n),a&&(g.doc=a),n.node=null,n.content},addRules:function(t){m.addValidElements(t)},setRules:function(t){m.setValidElements(t)},onPreProcess:function(t){r&&r.fire("PreProcess",t)},onPostProcess:function(t){r&&r.fire("PostProcess",t)},addTempAttr:function(t){-1===l.inArray(y,t)&&(v.addAttributeFilter(t,function(t,e){for(var n=t.length;n--;)t[n].attr(e,null)}),y.push(t))},trimHtml:f,getTrimmedContent:function(){return p(r.getBody().innerHTML)},trimContent:p}}}),n(L,[],function(){return function(t){function e(e,n){var i,o,r,a,s,l,c,u,d=0,h=-1;if((i=e.duplicate()).collapse(n),(u=i.parentElement()).ownerDocument===t.dom.doc){for(;"false"===u.contentEditable;)u=u.parentNode;if(!u.hasChildNodes())return{node:u,inside:1};for(o=(a=u.children).length-1;d<=o;)if(c=Math.floor((d+o)/2),i.moveToElementText(s=a[c]),(h=i.compareEndPoints(n?"StartToStart":"EndToEnd",e))>0)o=c-1;else{if(!(h<0))return{node:s};d=c+1}if(h<0)for(s?i.collapse(!1):(i.moveToElementText(u),i.collapse(!0),s=u,r=!0),l=0;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",e)&&0!==i.move("character",1)&&u==i.parentElement();)l++;else for(i.collapse(!0),l=0;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",e)&&0!==i.move("character",-1)&&u==i.parentElement();)l++;return{node:s,position:h,offset:l,inside:r}}}var n=this,i=t.dom;this.getBookmark=function(n){function o(t){var e,n,o,r,a=[];for(e=t.parentNode,n=i.getRoot().parentNode;e!=n&&9!==e.nodeType;){for(r=(o=e.children).length;r--;)if(t===o[r]){a.push(r);break}t=e,e=e.parentNode}return a}function r(t){var n;if(n=e(a,t))return{position:n.position,offset:n.offset,indexes:o(n.node),inside:n.inside}}var a=t.getRng(),s={};return 2===n&&(a.item?s.start={ctrl:!0,indexes:o(a.item(0))}:(s.start=r(!0),t.isCollapsed()||(s.end=r()))),s},this.moveToBookmark=function(t){function e(t){var e,n,o,r;for(e=i.getRoot(),n=t.length-1;n>=0;n--)(o=t[n])<=(r=e.children).length-1&&(e=r[o]);return e}function n(n){var i,a,s,l=t[n?"start":"end"];l&&(i=l.position>0,(a=r.createTextRange()).moveToElementText(e(l.indexes)),void 0!==(s=l.offset)?(a.collapse(l.inside||i),a.moveStart("character",i?-s:s)):a.collapse(n),o.setEndPoint(n?"StartToStart":"EndToStart",a),n&&o.collapse(!0))}var o,r=i.doc.body;t.start&&(t.start.ctrl?((o=r.createControlRange()).addElement(e(t.start.indexes)),o.select()):(o=r.createTextRange(),n(!0),n(),o.select()))},this.addRange=function(e){function n(t){var e,n,r,u,d;r=i.create("a"),e=t?a:l,n=t?s:c,u=o.duplicate(),e!=p&&e!=p.documentElement||(e=g,n=0),3==e.nodeType?(e.parentNode.insertBefore(r,e),u.moveToElementText(r),u.moveStart("character",n),i.remove(r),o.setEndPoint(t?"StartToStart":"EndToEnd",u)):((d=e.childNodes).length?(n>=d.length?i.insertAfter(r,d[d.length-1]):e.insertBefore(r,d[n]),u.moveToElementText(r)):e.canHaveHTML&&(e.innerHTML="<span>&#xFEFF;</span>",u.moveToElementText(r=e.firstChild),u.collapse(!1)),o.setEndPoint(t?"StartToStart":"EndToEnd",u),i.remove(r))}var o,r,a,s,l,c,u,d,h,p=t.dom.doc,g=p.body;if(a=e.startContainer,s=e.startOffset,l=e.endContainer,c=e.endOffset,o=g.createTextRange(),a==l&&1==a.nodeType){if(s==c&&!a.hasChildNodes()){if(a.canHaveHTML)return(u=a.previousSibling)&&!u.hasChildNodes()&&i.isBlock(u)?u.innerHTML="&#xFEFF;":u=null,a.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",o.moveToElementText(a.lastChild),o.select(),i.doc.selection.clear(),a.innerHTML="",void(u&&(u.innerHTML=""));s=i.nodeIndex(a),a=a.parentNode}if(s==c-1)try{if(h=a.childNodes[s],(r=g.createControlRange()).addElement(h),r.select(),(d=t.getRng()).item&&h===d.item(0))return}catch(f){}}n(!0),n(),o.select()},this.getRangeAt=function(){function o(t){var n,i,o,r,a=e(d,t),s=0;if(n=a.node,i=a.offset,!a.inside||n.hasChildNodes())if(void 0!==i){if(a.position<0){if(!(o=a.inside?n.firstChild:n.nextSibling))return void h[t?"setStartAfter":"setEndAfter"](n);if(!i)return void(3==o.nodeType?h[t?"setStart":"setEnd"](o,0):h[t?"setStartBefore":"setEndBefore"](o));for(;o;){if(3==o.nodeType&&(s+=(r=o.nodeValue).length)>=i){n=o,s=r.length-(s-=i);break}o=o.nextSibling}}else{if(!(o=n.previousSibling))return h[t?"setStartBefore":"setEndBefore"](n);if(!i)return void(3==n.nodeType?h[t?"setStart":"setEnd"](o,n.nodeValue.length):h[t?"setStartAfter":"setEndAfter"](o));for(;o;){if(3==o.nodeType&&(s+=o.nodeValue.length)>=i){n=o,s-=i;break}o=o.previousSibling}}h[t?"setStart":"setEnd"](n,s)}else h[t?"setStartBefore":"setEndAfter"](n);else h[t?"setStart":"setEnd"](n,0)}var r,a,s,l,u,d=t.getRng(),h=i.createRng();if((r=d.item?d.item(0):d.parentElement()).ownerDocument!=i.doc)return h;if(a=t.isCollapsed(),d.item)return h.setStart(r.parentNode,i.nodeIndex(r)),h.setEnd(h.startContainer,h.startOffset+1),h;try{o(!0),a||o()}catch(c){if(-2147024809!=c.number)throw c;u=n.getBookmark(2),(s=d.duplicate()).collapse(!0),r=s.parentElement(),a||((s=d.duplicate()).collapse(!1),(l=s.parentElement()).innerHTML=l.innerHTML),r.innerHTML=r.innerHTML,n.moveToBookmark(u),d=t.getRng(),o(!0),a||o()}return h}}}),n(R,[l],function(t){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(t){return t.shiftKey||t.ctrlKey||t.altKey||this.metaKeyPressed(t)},metaKeyPressed:function(e){return t.mac?e.metaKey:e.ctrlKey&&!e.altKey}}}),n(O,[R,h,s,l,w],function(t,e,n,i,o){function r(t,e){for(;e&&e!=t;){if(s(e)||a(e))return e;e=e.parentNode}return null}var a=o.isContentEditableFalse,s=o.isContentEditableTrue;return function(o,s){function l(t){var e=s.settings.object_resizing;return!1!==e&&!i.iOS&&("string"!=typeof e&&(e="table,img,div"),"false"!==t.getAttribute("data-mce-resize")&&t!=s.getBody()&&s.dom.is(t,e))}function c(e){var n,i,o,r;B=(B=(n=e.screenX-I)*k[2]+N)<5?5:B,z=(z=(i=e.screenY-D)*k[3]+L)<5?5:z,("IMG"==S.nodeName&&!1!==s.settings.resize_img_proportional?!t.modifierPressed(e):t.modifierPressed(e)||"IMG"==S.nodeName&&k[2]*k[3]!=0)&&($(n)>$(i)?(z=q(B*R),B=q(z/R)):(B=q(z/R),z=q(B*R))),H.setStyles(C,{width:B,height:z}),H.setStyles(M,{left:o=(o=k.startPos.x+n)>0?o:0,top:r=(r=k.startPos.y+i)>0?r:0,display:"block"}),M.innerHTML=B+" &times; "+z,k[2]<0&&C.clientWidth<=B&&H.setStyle(C,"left",P+(N-B)),k[3]<0&&C.clientHeight<=z&&H.setStyle(C,"top",E+(L-z)),(n=Y.scrollWidth-V)+(i=Y.scrollHeight-F)!=0&&H.setStyles(M,{left:o-n,top:r-i}),O||(s.fire("ObjectResizeStart",{target:S,width:N,height:L}),O=!0)}function u(){function t(t,e){e&&(S.style[t]||!s.schema.isValid(S.nodeName.toLowerCase(),t)?H.setStyle(S,t,e):H.setAttrib(S,t,e))}O=!1,t("width",B),t("height",z),H.unbind(G,"mousemove",c),H.unbind(G,"mouseup",u),U!=G&&(H.unbind(U,"mousemove",c),H.unbind(U,"mouseup",u)),H.remove(C),H.remove(M),j&&"TABLE"!=S.nodeName||d(S),s.fire("ObjectResized",{target:S,width:B,height:z}),H.setAttrib(S,"style",H.getAttrib(S,"style")),s.nodeChanged()}function d(t,e,n){var o,r,a,d,f;h(),b(),o=H.getPos(t,Y),P=o.x,E=o.y,f=t.getBoundingClientRect(),r=f.width||f.right-f.left,a=f.height||f.bottom-f.top,S!=t&&(x(),S=t,B=z=0),d=s.fire("ObjectSelected",{target:t}),l(t)&&!d.isDefaultPrevented()?W(T,function(t,o){function s(e){I=e.screenX,D=e.screenY,R=(L=S.clientHeight)/(N=S.clientWidth),k=t,t.startPos={x:r*t[0]+P,y:a*t[1]+E},V=Y.scrollWidth,F=Y.scrollHeight,C=S.cloneNode(!0),H.addClass(C,"mce-clonedresizable"),H.setAttrib(C,"data-mce-bogus","all"),C.contentEditable=!1,C.unSelectabe=!0,H.setStyles(C,{left:P,top:E,margin:0}),C.removeAttribute("data-mce-selected"),Y.appendChild(C),H.bind(G,"mousemove",c),H.bind(G,"mouseup",u),U!=G&&(H.bind(U,"mousemove",c),H.bind(U,"mouseup",u)),M=H.add(Y,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},N+" &times; "+L)}var l;return e?void(o==e&&s(n)):((l=H.get("mceResizeHandle"+o))&&H.remove(l),l=H.add(Y,"div",{id:"mceResizeHandle"+o,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+o+"-resize; margin:0; padding:0"}),i.ie&&(l.contentEditable=!1),H.bind(l,"mousedown",function(t){t.stopImmediatePropagation(),t.preventDefault(),s(t)}),t.elm=l,void H.setStyles(l,{left:r*t[0]+P-l.offsetWidth/2,top:a*t[1]+E-l.offsetHeight/2}))}):h(),S.setAttribute("data-mce-selected","1")}function h(){var t,e;for(t in b(),S&&S.removeAttribute("data-mce-selected"),T)(e=H.get("mceResizeHandle"+t))&&(H.unbind(e),H.remove(e))}function f(t){function e(t,e){if(t)do{if(t===e)return!0}while(t=t.parentNode)}var n,i;if(!O&&!s.removed)return W(H.select("img[data-mce-selected],hr[data-mce-selected]"),function(t){t.removeAttribute("data-mce-selected")}),i="mousedown"==t.type?t.target:o.getNode(),e(i=H.$(i).closest(j?"table":"table,img,hr")[0],Y)&&(_(),e(n=o.getStart(!0),i)&&e(o.getEnd(!0),i)&&(!j||i!=n&&"IMG"!==n.nodeName))?void d(i):void h()}function p(t,e,n){t&&t.attachEvent&&t.attachEvent("on"+e,n)}function g(t,e,n){t&&t.detachEvent&&t.detachEvent("on"+e,n)}function m(t){var e,n,i,o,r,a,l=t.srcElement;for(n in e=l.getBoundingClientRect(),r=A.clientX-e.left,a=A.clientY-e.top,T)if(o=l.offsetHeight*(i=T[n])[1],$(l.offsetWidth*i[0]-r)<8&&$(o-a)<8){k=i;break}O=!0,s.fire("ObjectResizeStart",{target:S,width:S.clientWidth,height:S.clientHeight}),s.getDoc().selection.empty(),d(l,n,A)}function v(t){return a(r(s.getBody(),t))}function y(t){var e=t.srcElement;if(v(e))!function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(t);else if(e!=S){if(s.fire("ObjectSelected",{target:e}),x(),0===e.id.indexOf("mceResizeHandle"))return void(t.returnValue=!1);"IMG"!=e.nodeName&&"TABLE"!=e.nodeName||(h(),S=e,p(e,"resizestart",m))}}function x(){g(S,"resizestart",m)}function b(){for(var t in T){var e=T[t];e.elm&&(H.unbind(e.elm),delete e.elm)}}function _(){try{s.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(t){}}function w(t){var e;if(j){e=G.body.createControlRange();try{return e.addElement(t),e.select(),!0}catch(n){}}}var S,C,M,T,k,A,I,D,P,E,N,L,R,O,B,z,V,F,H=s.dom,W=e.each,G=s.getDoc(),U=document,j=i.ie&&i.ie<11,$=Math.abs,q=Math.round,Y=s.getBody();T={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var X=".mce-content-body";return s.contentStyles.push(X+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: box-sizing;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+X+" .mce-resizehandle:hover {background: #000}"+X+" img[data-mce-selected],"+X+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+X+" .mce-clonedresizable {position: absolute;"+(i.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+X+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),s.on("init",function(){j?(s.on("ObjectResized",function(t){"TABLE"!=t.target.nodeName&&(h(),w(t.target))}),p(Y,"controlselect",y),s.on("mousedown",function(t){A=t})):(_(),i.ie>=11&&(s.on("mousedown click",function(t){var e=t.target,n=e.nodeName;O||!/^(TABLE|IMG|HR)$/.test(n)||v(e)||(s.selection.select(e,"TABLE"==n),"mousedown"==t.type&&s.nodeChanged())}),s.dom.bind(Y,"mscontrolselect",function(t){function e(t){n.setEditorTimeout(s,function(){s.selection.select(t)})}return v(t.target)?(t.preventDefault(),void e(t.target)):void(/^(TABLE|IMG|HR)$/.test(t.target.nodeName)&&(t.preventDefault(),"IMG"==t.target.tagName&&e(t.target)))})));var t=n.throttle(function(t){s.composing||f(t)});s.on("nodechange ResizeEditor ResizeWindow drop",t),s.on("keyup compositionend",function(e){S&&"TABLE"==S.nodeName&&t(e)}),s.on("hide blur",h)}),s.on("remove",b),{isResizable:l,showResizeRect:d,hideResizeRect:h,updateResizeRect:f,controlSelect:w,destroy:function(){S=C=null,j&&(x(),g(Y,"controlselect",y))}}}}),n(B,[],function(){var t=[].slice;return{constant:function(t){return function(){return t}},negate:function(t){return function(e){return!t(e)}},and:function(){var e=t.call(arguments);return function(t){for(var n=0;n<e.length;n++)if(!e[n](t))return!1;return!0}},or:function(){var e=t.call(arguments);return function(t){for(var n=0;n<e.length;n++)if(e[n](t))return!0;return!1}},curry:function e(n){var i=t.call(arguments);return i.length-1>=n.length?n.apply(this,i.slice(1)):function(){var t=i.concat([].slice.call(arguments));return e.apply(this,t)}},compose:function(t,e){return function(n){return t(e(n))}},noop:function(){}}}),n(z,[w,d,C],function(t,e,n){function i(t){return!h(t)&&(l(t)?!c(t.parentNode):u(t)||s(t)||d(t)||a(t))}function o(t,e){for(t=t.parentNode;t&&t!=e;t=t.parentNode){if(a(t))return!1;if(r(t))return!0}return!0}var r=t.isContentEditableTrue,a=t.isContentEditableFalse,s=t.isBr,l=t.isText,c=t.matchNodeNames("script style textarea"),u=t.matchNodeNames("img input textarea hr iframe video audio object"),d=t.matchNodeNames("table"),h=n.isCaretContainer;return{isCaretCandidate:i,isInEditable:o,isAtomic:function(t){return u(t)||function(t){return!!a(t)&&!0!==e.reduce(t.getElementsByTagName("*"),function(t,e){return t||r(e)},!1)}(t)},isEditableCaretCandidate:function(t,e){return i(t)&&o(t,e)}}}),n(V,[],function(){function t(t){return t?{left:a(t.left),top:a(t.top),bottom:a(t.bottom),right:a(t.right),width:a(t.width),height:a(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}}function e(t,e,n){return t>=0&&t<=Math.min(e.height,n.height)/2}function n(t,n){return t.bottom<n.top||!(t.top>n.bottom)&&e(n.top-t.bottom,t,n)}function i(t,n){return t.top>n.bottom||!(t.bottom<n.top)&&e(n.bottom-t.top,t,n)}function o(t,e){return t.left<e.left}function r(t,e){return t.right>e.right}var a=Math.round;return{clone:t,collapse:function(e,n){return e=t(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},isEqual:function(t,e){return t.left===e.left&&t.top===e.top&&t.bottom===e.bottom&&t.right===e.right},isAbove:n,isBelow:i,isLeft:o,isRight:r,compare:function(t,e){return n(t,e)?-1:i(t,e)?1:o(t,e)?-1:r(t,e)?1:0},containsXY:function(t,e,n){return e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom}}}),n(F,[],function(){var t=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]");return{isExtendingChar:function(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&t.test(e)}}}),n(H,[B,w,x,M,z,V,F],function(t,e,n,i,o,r,a){function s(t){return"createRange"in t?t.createRange():n.DOM.createRng()}function l(t){return t&&/[\r\n\t ]/.test(t)}function c(t){var e,n=t.startContainer,i=t.startOffset;return!!(l(t.toString())&&m(n.parentNode)&&(e=n.data,l(e[i-1])||l(e[i+1])))}function u(e,n,i){function o(){return i||(i=function(t){function e(t){var e,n;return n=t.getClientRects(),e=r.clone(n.length>0?n[0]:t.getBoundingClientRect()),y(t)&&0===e.left?function(t){var e,n=t.ownerDocument,i=s(n),o=n.createTextNode(" "),a=t.parentNode;return a.insertBefore(o,t),i.setStart(o,0),i.setEnd(o,1),e=r.clone(i.getBoundingClientRect()),a.removeChild(o),e}(t):e}function n(t,e){return(t=r.collapse(t,e)).width=1,t.right=t.left+1,t}function i(t){0!==t.height&&(h.length>0&&r.isEqual(t,h[h.length-1])||h.push(t))}function o(t,o){var r=s(t.ownerDocument);if(o<t.data.length){if(a.isExtendingChar(t.data[o]))return h;if(a.isExtendingChar(t.data[o-1])&&(r.setStart(t,o),r.setEnd(t,o+1),!c(r)))return i(n(e(r),!1)),h}o>0&&(r.setStart(t,o-1),r.setEnd(t,o),c(r)||i(n(e(r),!1))),o<t.data.length&&(r.setStart(t,o),r.setEnd(t,o+1),c(r)||i(n(e(r),!0)))}var l,u,h=[];if(v(t.container()))return o(t.container(),t.offset()),h;if(d(t.container()))if(t.isAtEnd())u=b(t.container(),t.offset()),v(u)&&o(u,u.data.length),g(u)&&!y(u)&&i(n(e(u),!1));else{if(u=b(t.container(),t.offset()),v(u)&&o(u,0),g(u)&&t.isAtEnd())return i(n(e(u),!1)),h;l=b(t.container(),t.offset()-1),g(l)&&!y(l)&&(f(l)||f(u)||!g(u))&&i(n(e(l),!1)),g(u)&&i(n(e(u),!0))}return h}(new u(e,n))),i}return{container:t.constant(e),offset:t.constant(n),toRange:function(){var t;return(t=s(e.ownerDocument)).setStart(e,n),t.setEnd(e,n),t},getClientRects:o,isVisible:function(){return o().length>0},isAtStart:function(){return v(e),0===n},isAtEnd:function(){return v(e)?n>=e.data.length:n>=e.childNodes.length},isEqual:function(t){return t&&e===t.container()&&n===t.offset()},getNode:function(t){return b(e,t?n-1:n)}}}var d=e.isElement,h=o.isCaretCandidate,f=e.matchStyleValues("display","block table"),p=e.matchStyleValues("float","left right"),g=t.and(d,h,t.negate(p)),m=t.negate(e.matchStyleValues("white-space","pre pre-line pre-wrap")),v=e.isText,y=e.isBr,x=n.nodeIndex,b=i.getNode;return u.fromRangeStart=function(t){return new u(t.startContainer,t.startOffset)},u.fromRangeEnd=function(t){return new u(t.endContainer,t.endOffset)},u.after=function(t){return new u(t.parentNode,x(t)+1)},u.before=function(t){return new u(t.parentNode,x(t))},u}),n(W,[w,x,B,d,H],function(t,e,n,i,o){function r(t){var e=t.parentNode;return h(e)?r(e):e}function a(t){return t?i.reduce(t.childNodes,function(t,e){return h(e)&&"BR"!=e.nodeName?t=t.concat(a(e)):t.push(e),t},[]):[]}function s(t){return function(e){return t===e}}function l(e){var n,o,l;return n=a(r(e)),o=i.findIndex(n,s(e),e),n=n.slice(0,o+1),l=i.reduce(n,function(t,e,i){return d(e)&&d(n[i-1])&&t++,t},0),n=i.filter(n,t.matchNodeNames(e.nodeName)),(o=i.findIndex(n,s(e),e))-l}function c(t){return(d(t)?"text()":t.nodeName.toLowerCase())+"["+l(t)+"]"}function u(e,n,o){var r=a(e);return r=i.filter(r,function(t,e){return!d(t)||!d(r[e-1])}),(r=i.filter(r,t.matchNodeNames(n)))[o]}var d=t.isText,h=t.isBogus,f=e.nodeIndex;return{create:function(e,o){var r,a,s,l,u,h=[];return r=o.container(),a=o.offset(),d(r)?s=function(t,e){for(;(t=t.previousSibling)&&d(t);)e+=t.data.length;return e}(r,a):(a>=(l=r.childNodes).length?(s="after",a=l.length-1):s="before",r=l[a]),h.push(c(r)),u=function(t,e,n){var i=[];for(e=e.parentNode;e!=t;e=e.parentNode)i.push(e);return i}(e,r),u=i.filter(u,n.negate(t.isBogus)),(h=h.concat(i.map(u,function(t){return c(t)}))).reverse().join("/")+","+s},resolve:function(t,e){var n,r,a;return e?(n=e.split(","),e=n[0].split("/"),a=n.length>1?n[1]:"before",(r=i.reduce(e,function(t,e){return(e=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(e))?("text()"===e[1]&&(e[1]="#text"),u(t,e[1],parseInt(e[2],10))):null},t))?d(r)?function(t,e){for(var n,i=t,r=0;d(i);){if(n=i.data.length,e>=r&&e<=r+n){t=i,e-=r;break}if(!d(i.nextSibling)){t=i,e=n;break}r+=n,i=i.nextSibling}return e>t.data.length&&(e=t.data.length),new o(t,e)}(r,parseInt(a,10)):(a="after"===a?f(r)+1:f(r),new o(r.parentNode,a)):null):null}}}),n(G,[l,h,C,W,H,w,M],function(t,e,n,i,o,r,a){function s(s){var c=s.dom;this.getBookmark=function(t,u){function d(t,n){var i=0;return e.each(c.select(t),function(t){if("all"!==t.getAttribute("data-mce-bogus"))return t!=n&&void i++}),i}function h(t){function e(e){var n,i,o,r=e?"start":"end";i=t[r+"Offset"],1==(n=t[r+"Container"]).nodeType&&"TR"==n.nodeName&&(n=(o=n.childNodes)[Math.min(e?i:i-1,o.length-1)])&&t["set"+(e?"Start":"End")](n,i=e?0:n.childNodes.length)}return e(!0),e(),t}var f,p,g,m,v,y,x,_="&#xFEFF;";if(2==t)return v=(y=s.getNode())?y.nodeName:null,f=s.getRng(),l(y)||"IMG"==v?{name:v,index:d(v,y)}:s.tridentSel?s.tridentSel.getBookmark(t):(y=function(t){function e(t,e){var i;if(r.isElement(t)&&(t=a.getNode(t,e),l(t)))return t;if(n.isCaretContainer(t)){if(r.isText(t)&&n.isCaretContainerBlock(t)&&(t=t.parentNode),l(i=t.previousSibling))return i;if(l(i=t.nextSibling))return i}}return e(t.startContainer,t.startOffset)||e(t.endContainer,t.endOffset)}(f))?{name:v=y.tagName,index:d(v,y)}:function(t){function e(t,e){var i,o,r=t[e?"startContainer":"endContainer"],a=t[e?"startOffset":"endOffset"],s=[],l=0;if(3==r.nodeType){if(u)for(i=r.previousSibling;i&&3==i.nodeType;i=i.previousSibling)a+=i.nodeValue.length;s.push(a)}else a>=(o=r.childNodes).length&&o.length&&(l=1,a=Math.max(0,o.length-1)),s.push(c.nodeIndex(o[a],u)+l);for(;r&&r!=n;r=r.parentNode)s.push(c.nodeIndex(r,u));return s}var n=c.getRoot(),i={};return i.start=e(t,!0),s.isCollapsed()||(i.end=e(t)),i}(f);if(3==t)return f=s.getRng(),{start:i.create(c.getRoot(),o.fromRangeStart(f)),end:i.create(c.getRoot(),o.fromRangeEnd(f))};if(t)return{rng:s.getRng()};if(f=s.getRng(),g=c.uniqueId(),m=s.isCollapsed(),x="overflow:hidden;line-height:0px",f.duplicate||f.item){if(f.item)return{name:v=(y=f.item(0)).nodeName,index:d(v,y)};p=f.duplicate();try{f.collapse(),f.pasteHTML('<span data-mce-type="bookmark" id="'+g+'_start" style="'+x+'">'+_+"</span>"),m||(p.collapse(!1),f.moveToElementText(p.parentElement()),0===f.compareEndPoints("StartToEnd",p)&&p.move("character",-1),p.pasteHTML('<span data-mce-type="bookmark" id="'+g+'_end" style="'+x+'">'+_+"</span>"))}catch(b){return null}}else{if("IMG"==(v=(y=s.getNode()).nodeName))return{name:v,index:d(v,y)};p=h(f.cloneRange()),m||(p.collapse(!1),p.insertNode(c.create("span",{"data-mce-type":"bookmark",id:g+"_end",style:x},_))),(f=h(f)).collapse(!0),f.insertNode(c.create("span",{"data-mce-type":"bookmark",id:g+"_start",style:x},_))}return s.moveToBookmark({id:g,keep:1}),{id:g}},this.moveToBookmark=function(n){function o(t){var e,i,o,r,a=n[t?"start":"end"];if(a){for(o=a[0],i=u,e=a.length-1;e>=1;e--){if(a[e]>(r=i.childNodes).length-1)return;i=r[a[e]]}3===i.nodeType&&(o=Math.min(a[0],i.nodeValue.length)),1===i.nodeType&&(o=Math.min(a[0],i.childNodes.length)),t?l.setStart(i,o):l.setEnd(i,o)}return!0}function r(i){var o,r,a,s,l=c.get(n.id+"_"+i),u=n.keep;if(l&&(o=l.parentNode,"start"==i?(u?(o=l.firstChild,r=1):r=c.nodeIndex(l),d=h=o,f=p=r):(u?(o=l.firstChild,r=1):r=c.nodeIndex(l),h=o,p=r),!u)){for(s=l.previousSibling,a=l.nextSibling,e.each(e.grep(l.childNodes),function(t){3==t.nodeType&&(t.nodeValue=t.nodeValue.replace(/\uFEFF/g,""))});l=c.get(n.id+"_"+i);)c.remove(l,1);s&&a&&s.nodeType==a.nodeType&&3==s.nodeType&&!t.opera&&(r=s.nodeValue.length,s.appendData(a.nodeValue),c.remove(a),"start"==i?(d=h=s,f=p=r):(h=s,p=r))}}function a(e){return!c.isBlock(e)||e.innerHTML||t.ie||(e.innerHTML='<br data-mce-bogus="1" />'),e}var l,u,d,h,f,p;if(n)if(e.isArray(n.start)){if(l=c.createRng(),u=c.getRoot(),s.tridentSel)return s.tridentSel.moveToBookmark(n);o(!0)&&o()&&s.setRng(l)}else"string"==typeof n.start?s.setRng(function(){var t,e;return t=c.createRng(),e=i.resolve(c.getRoot(),n.start),t.setStart(e.container(),e.offset()),e=i.resolve(c.getRoot(),n.end),t.setEnd(e.container(),e.offset()),t}()):n.id?(r("start"),r("end"),d&&((l=c.createRng()).setStart(a(d),f),l.setEnd(a(h),p),s.setRng(l))):n.name?s.select(c.select(n.name)[n.index]):n.rng&&s.setRng(n.rng)}}var l=r.isContentEditableFalse;return s.isBookmarkNode=function(t){return t&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type")},s}),n(U,[g,L,O,M,G,w,l,h,H],function(t,n,i,o,r,a,s,l,c){function u(t,e,o,a){var s=this;s.dom=t,s.win=e,s.serializer=o,s.editor=a,s.bookmarkManager=new r(s),s.controlSelection=new i(s,a),s.win.getSelection||(s.tridentSel=new n(s))}var d=l.each,h=l.trim,f=s.ie;return u.prototype={setCursorLocation:function(t,e){var n=this,i=n.dom.createRng();t?(i.setStart(t,e),i.setEnd(t,e),n.setRng(i),n.collapse(!1)):(n._moveEndPoint(i,n.editor.getBody(),!0),n.setRng(i))},getContent:function(t){var n,i,o,r=this,a=r.getRng(),s=r.dom.create("body"),l=r.getSel();return n=i="",(t=t||{}).get=!0,t.format=t.format||"html",t.selection=!0,r.editor.fire("BeforeGetContent",t),"text"==t.format?r.isCollapsed()?"":a.text||(l.toString?l.toString():""):(a.cloneContents?(o=a.cloneContents())&&s.appendChild(o):a.item!==e||a.htmlText!==e?(s.innerHTML="<br>"+(a.item?a.item(0).outerHTML:a.htmlText),s.removeChild(s.firstChild)):s.innerHTML=a.toString(),/^\s/.test(s.innerHTML)&&(n=" "),/\s+$/.test(s.innerHTML)&&(i=" "),t.getInner=!0,t.content=r.isCollapsed()?"":n+r.serializer.serialize(s,t)+i,r.editor.fire("GetContent",t),t.content)},setContent:function(t,e){var n,i,o,r=this,a=r.getRng(),s=r.win.document;if((e=e||{format:"html"}).set=!0,e.selection=!0,e.content=t,e.no_events||r.editor.fire("BeforeSetContent",e),t=e.content,a.insertNode){t+='<span id="__caret">_</span>',a.startContainer==s&&a.endContainer==s?s.body.innerHTML=t:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=t:a.createContextualFragment?a.insertNode(a.createContextualFragment(t)):(i=s.createDocumentFragment(),o=s.createElement("div"),i.appendChild(o),o.outerHTML=t,a.insertNode(i))),n=r.dom.get("__caret"),(a=s.createRange()).setStartBefore(n),a.setEndBefore(n),r.setRng(a),r.dom.remove("__caret");try{r.setRng(a)}catch(l){}}else a.item&&(s.execCommand("Delete",!1,null),a=r.getRng()),/^\s+/.test(t)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+t),r.dom.remove("__mce_tmp")):a.pasteHTML(t);e.no_events||r.editor.fire("SetContent",e)},getStart:function(t){var e,n,i,o,r=this,a=r.getRng();if(a.duplicate||a.item){if(a.item)return a.item(0);for((i=a.duplicate()).collapse(1),(e=i.parentElement()).ownerDocument!==r.dom.doc&&(e=r.dom.getRoot()),n=o=a.parentElement();o=o.parentNode;)if(o==e){e=n;break}return e}return 1==(e=a.startContainer).nodeType&&e.hasChildNodes()&&(t&&a.collapsed||(e=e.childNodes[Math.min(e.childNodes.length-1,a.startOffset)])),e&&3==e.nodeType?e.parentNode:e},getEnd:function(t){var e,n,i=this,o=i.getRng();return o.duplicate||o.item?o.item?o.item(0):((o=o.duplicate()).collapse(0),(e=o.parentElement()).ownerDocument!==i.dom.doc&&(e=i.dom.getRoot()),e&&"BODY"==e.nodeName&&e.lastChild||e):(n=o.endOffset,1==(e=o.endContainer).nodeType&&e.hasChildNodes()&&(t&&o.collapsed||(e=e.childNodes[n>0?n-1:n])),e&&3==e.nodeType?e.parentNode:e)},getBookmark:function(t,e){return this.bookmarkManager.getBookmark(t,e)},moveToBookmark:function(t){return this.bookmarkManager.moveToBookmark(t)},select:function(t,e){var n,i=this,o=i.dom,r=o.createRng();if(i.lastFocusBookmark=null,t){if(!e&&i.controlSelection.controlSelect(t))return;n=o.nodeIndex(t),r.setStart(t.parentNode,n),r.setEnd(t.parentNode,n+1),e&&(i._moveEndPoint(r,t,!0),i._moveEndPoint(r,t)),i.setRng(r)}return t},isCollapsed:function(){var t=this.getRng(),e=this.getSel();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!e||t.collapsed)},collapse:function(t){var e,n=this,i=n.getRng();i.item&&(e=i.item(0),(i=n.win.document.body.createTextRange()).moveToElementText(e)),i.collapse(!!t),n.setRng(i)},getSel:function(){var t=this.win;return t.getSelection?t.getSelection():t.document.selection},getRng:function(t){function e(t,e,i){try{return e.compareBoundaryPoints(t,i)}catch(n){return-1}}var n,i,o,r,a,s,l=this;if(!l.win)return null;if(null==(r=l.win.document))return null;if(!t&&l.lastFocusBookmark){var c=l.lastFocusBookmark;return c.startContainer?((i=r.createRange()).setStart(c.startContainer,c.startOffset),i.setEnd(c.endContainer,c.endOffset)):i=c,i}if(t&&l.tridentSel)return l.tridentSel.getRangeAt(0);try{(n=l.getSel())&&(i=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():r.createRange())}catch(u){}if((s=l.editor.fire("GetSelectionRange",{range:i})).range!==i)return s.range;if(f&&i&&i.setStart&&r.selection){try{a=r.selection.createRange()}catch(u){}a&&a.item&&(o=a.item(0),(i=r.createRange()).setStartBefore(o),i.setEndAfter(o))}return i||(i=r.createRange?r.createRange():r.body.createTextRange()),i.setStart&&9===i.startContainer.nodeType&&i.collapsed&&(o=l.dom.getRoot(),i.setStart(o,0),i.setEnd(o,0)),l.selectedRange&&l.explicitRange&&(0===e(i.START_TO_START,i,l.selectedRange)&&0===e(i.END_TO_END,i,l.selectedRange)?i=l.explicitRange:(l.selectedRange=null,l.explicitRange=null)),i},setRng:function(t,e){var n,i,o=this;if(t)if(t.select){o.explicitRange=null;try{t.select()}catch(a){}}else if(o.tridentSel){if(t.cloneRange)try{o.tridentSel.addRange(t)}catch(a){}}else{if(n=o.getSel(),t=o.editor.fire("SetSelectionRange",{range:t}).range,n){o.explicitRange=t;try{n.removeAllRanges(),n.addRange(t)}catch(a){}!1===e&&n.extend&&(n.collapse(t.endContainer,t.endOffset),n.extend(t.startContainer,t.startOffset)),o.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}t.collapsed||t.startContainer!=t.endContainer||!n.setBaseAndExtent||s.ie||t.endOffset-t.startOffset<2&&t.startContainer.hasChildNodes()&&(i=t.startContainer.childNodes[t.startOffset])&&"IMG"==i.tagName&&(n.setBaseAndExtent(t.startContainer,t.startOffset,t.endContainer,t.endOffset),n.anchorNode===t.startContainer&&n.focusNode===t.endContainer||n.setBaseAndExtent(i,0,i,1)),o.editor.fire("AfterSetSelectionRange",{range:t})}},setNode:function(t){return this.setContent(this.dom.getOuterHTML(t)),t},getNode:function(){function t(t,e){for(var n=t;t&&3===t.nodeType&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n}var e,n,i,o,r,a=this,s=a.getRng(),l=a.dom.getRoot();return s?(n=s.startContainer,i=s.endContainer,o=s.startOffset,r=s.endOffset,s.setStart?(e=s.commonAncestorContainer,!s.collapsed&&(n==i&&r-o<2&&n.hasChildNodes()&&(e=n.childNodes[o]),3===n.nodeType&&3===i.nodeType&&(n=n.length===o?t(n.nextSibling,!0):n.parentNode,i=0===r?t(i.previousSibling,!1):i.parentNode,n&&n===i))?n:e&&3==e.nodeType?e.parentNode:e):((e=s.item?s.item(0):s.parentElement()).ownerDocument!==a.win.document&&(e=l),e)):l},getSelectedBlocks:function(e,n){var i,o,r=this,a=r.dom,s=[];if(o=a.getRoot(),e=a.getParent(e||r.getStart(),a.isBlock),n=a.getParent(n||r.getEnd(),a.isBlock),e&&e!=o&&s.push(e),e&&n&&e!=n){i=e;for(var l=new t(e,o);(i=l.next())&&i!=n;)a.isBlock(i)&&s.push(i)}return n&&e!=n&&n!=o&&s.push(n),s},isForward:function(){var t,e,n=this.dom,i=this.getSel();return!(i&&i.anchorNode&&i.focusNode)||((t=n.createRng()).setStart(i.anchorNode,i.anchorOffset),t.collapse(!0),(e=n.createRng()).setStart(i.focusNode,i.focusOffset),e.collapse(!0),t.compareBoundaryPoints(t.START_TO_START,e)<=0)},normalize:function(){var t=this,e=t.getRng();return s.range&&new o(t.dom).normalize(e)&&t.setRng(e,t.isForward()),e},selectorChanged:function(t,e){var n,i=this;return i.selectorChangedData||(i.selectorChangedData={},n={},i.editor.on("NodeChange",function(t){var e=t.element,o=i.dom,r=o.getParents(e,null,o.getRoot()),a={};d(i.selectorChangedData,function(t,e){d(r,function(i){if(o.is(i,e))return n[e]||(d(t,function(t){t(!0,{node:i,selector:e,parents:r})}),n[e]=t),a[e]=t,!1})}),d(n,function(t,i){a[i]||(delete n[i],d(t,function(t){t(!1,{node:e,selector:i,parents:r})}))})})),i.selectorChangedData[t]||(i.selectorChangedData[t]=[]),i.selectorChangedData[t].push(e),i},getScrollContainer:function(){for(var t,e=this.dom.getRoot();e&&"BODY"!=e.nodeName;){if(e.scrollHeight>e.clientHeight){t=e;break}e=e.parentNode}return t},scrollIntoView:function(t,e){function n(t){for(var e=0,n=0,i=t;i&&i.nodeType;)e+=i.offsetLeft||0,n+=i.offsetTop||0,i=i.offsetParent;return{x:e,y:n}}var i,o,r,s,l=this,c=l.dom,u=c.getRoot(),d=0;if(a.isElement(t)){if(!1===e&&(d=t.offsetHeight),"BODY"!=u.nodeName){var h=l.getScrollContainer();if(h)return i=n(t).y-n(h).y+d,s=h.clientHeight,void((i<(r=h.scrollTop)||i+25>r+s)&&(h.scrollTop=i<r?i:i-s+25))}o=c.getViewPort(l.editor.getWin()),i=c.getPos(t).y+d,r=o.y,s=o.h,(i<o.y||i+25>r+s)&&l.editor.getWin().scrollTo(0,i<r?i:i-s+25)}},placeCaretAt:function(t,e){this.setRng(o.getCaretRangeFromPoint(t,e,this.editor.getDoc()))},_moveEndPoint:function(e,n,i){var o=n,r=new t(n,o),a=this.dom.schema.getNonEmptyElements();do{if(3==n.nodeType&&0!==h(n.nodeValue).length)return void(i?e.setStart(n,0):e.setEnd(n,n.nodeValue.length));if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(i?e.setStartBefore(n):"BR"==n.nodeName?e.setEndBefore(n):e.setEndAfter(n));if(s.ie&&s.ie<11&&this.dom.isBlock(n)&&this.dom.isEmpty(n))return void(i?e.setStart(n,0):e.setEnd(n,0))}while(n=i?r.next():r.prev());"BODY"==o.nodeName&&(i?e.setStart(o,0):e.setEnd(o,o.childNodes.length))},getBoundingClientRect:function(){var t=this.getRng();return t.collapsed?c.fromRangeStart(t).getClientRects()[0]:t.getBoundingClientRect()},destroy:function(){this.win=null,this.controlSelection.destroy()}},u}),n(j,[G,h],function(t,e){var n=e.each;return function(e){this.compare=function(i,o){function r(t){var i={};return n(e.getAttribs(t),function(n){var o=n.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&0!==o.indexOf("data-")&&(i[o]=e.getAttrib(t,o))}),i}function a(t,e){var n,i;for(i in t)if(t.hasOwnProperty(i)){if(void 0===(n=e[i]))return!1;if(t[i]!=n)return!1;delete e[i]}for(i in e)if(e.hasOwnProperty(i))return!1;return!0}return!(i.nodeName!=o.nodeName||!a(r(i),r(o))||!a(e.parseStyle(e.getAttrib(i,"style")),e.parseStyle(e.getAttrib(o,"style")))||t.isBookmarkNode(i)||t.isBookmarkNode(o))}}}),n($,[x,h,A],function(t,e,n){function i(t,i){function o(t){var e;return function(t,e){e.classes.length&&s.addClass(t,e.classes.join(" ")),s.setAttribs(t,e.attrs)}(e=s.create((l="string"==typeof t?{name:t,classes:[],attrs:{}}:t).name),l),e}function r(t,n){var i="string"!=typeof t?t.nodeName.toLowerCase():t,o=u.getElementRule(i).parentsRequired;return!(!o||!o.length)&&(n&&-1!==e.inArray(o,n)?n:o[0])}var a,l,c,u=i&&i.schema||new n({});return t&&t.length?(a=o(l=t[0]),(c=s.create("div")).appendChild(function t(n,i,a){var l,c,u,d=i.length&&i[0],h=d&&d.name;if(u=r(n,h))h==u?(c=i[0],i=i.slice(1)):c=u;else if(d)c=i[0],i=i.slice(1);else if(!a)return n;return c&&(l=o(c)).appendChild(n),a&&(l||(l=s.create("div")).appendChild(n),e.each(a,function(t){var e=o(t);l.insertBefore(e,n)})),t(l,i,c&&c.siblings)}(a,t.slice(1),l.siblings)),c):""}function o(t){var n,i={classes:[],attrs:{}};return"*"!==(t=i.selector=e.trim(t))&&(n=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(t,n,o,r,a){switch(n){case"#":i.attrs.id=o;break;case".":i.classes.push(o);break;case":":-1!==e.inArray("checked disabled enabled read-only required".split(" "),o)&&(i.attrs[o]=o)}if("["==r){var s=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);s&&(i.attrs[s[1]]=s[2])}return""})),i.name=n||"div",i}function r(t){return t&&"string"==typeof t?(t=(t=t.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),e.map(t.split(/(?:>|\s+(?![^\[\]]+\]))/),function(t){var n=e.map(t.split(/(?:~\+|~|\+)/),o),i=n.pop();return n.length&&(i.siblings=n),i}).reverse()):[]}var a=e.each,s=t.DOM;return{getCssText:function(t,e){function n(t){return t.replace(/%(\w+)/g,"")}var o,l,c,u,d,h,f="";if(!1===(h=t.settings.preview_styles))return"";if("string"!=typeof h&&(h="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),"string"==typeof e){if(!(e=t.formatter.get(e)))return;e=e[0]}return"preview"in e&&!1===(h=e.preview)?"":(o=e.block||e.inline||"span",(u=r(e.selector)).length?(u[0].name||(u[0].name=o),o=e.selector,l=i(u,t)):l=i([o],t),c=s.select(o,l)[0]||l.firstChild,a(e.styles,function(t,e){(t=n(t))&&s.setStyle(c,e,t)}),a(e.attributes,function(t,e){(t=n(t))&&s.setAttrib(c,e,t)}),a(e.classes,function(t){t=n(t),s.hasClass(c,t)||s.addClass(c,t)}),t.fire("PreviewFormats"),s.setStyles(l,{position:"absolute",left:-65535}),t.getBody().appendChild(l),d=s.getStyle(t.getBody(),"fontSize",!0),d=/px$/.test(d)?parseInt(d,10):0,a(h.split(" "),function(e){var n=s.getStyle(c,e,!0);if(!("background-color"==e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=s.getStyle(t.getBody(),e,!0),"#ffffff"==s.toHex(n).toLowerCase())||"color"==e&&"#000000"==s.toHex(n).toLowerCase())){if("font-size"==e&&/em|%$/.test(n)){if(0===d)return;n=(n=parseFloat(n,10)/(/%$/.test(n)?100:1))*d+"px"}"border"==e&&n&&(f+="padding:0 2px;"),f+=e+":"+n+";"}}),t.fire("AfterPreviewFormats"),s.remove(l),f)},parseSelector:r,selectorToHtml:function(t,e){return i(r(t),e)}}}),n(q,[d,w,f],function(t,e,n){var i={},o=t.filter,r=t.each;return function(t,e){var n=i[t];n||(i[t]=n=[]),i[t].push(e)}("pre",function(i){var a,s,l=i.selection.getRng();a=e.matchNodeNames("pre"),l.collapsed||(s=i.selection.getSelectedBlocks(),r(o(o(s,a),function(e){return a(e.previousSibling)&&-1!=t.indexOf(s,e.previousSibling)}),function(t){!function(t,e){n(e).remove(),n(t).append("<br><br>").append(e.childNodes)}(t.previousSibling,t)}))}),{postProcess:function(t,e){r(i[t],function(t){t(e)})}}}),n(Y,[g,M,G,j,B,h,$,q],function(t,e,n,i,o,r,a,s){return function(l){function c(t){return t.nodeType&&(t=t.nodeName),!!l.schema.getTextBlockElements()[t.toLowerCase()]}function u(t){return/^(TH|TD)$/.test(t.nodeName)}function d(t,e){return j.getParents(t,e,j.getRoot())}function h(t){return 1===t.nodeType&&"_mce_caret"===t.id}function f(t){return t?U[t]:U}function p(t,e){t&&("string"!=typeof t?ot(t,function(t,e){p(e,t)}):(ot(e=e.length?e:[e],function(t){t.deep===H&&(t.deep=!t.selector),t.split===H&&(t.split=!t.selector||t.inline),t.remove===H&&t.selector&&!t.inline&&(t.remove="none"),t.selector&&t.inline&&(t.mixed=!0,t.block_expand=!0),"string"==typeof t.classes&&(t.classes=t.classes.split(/\s+/))}),U[t]=e))}function g(t,e){var n=f(e);if(n)for(var i=0;i<n.length;i++)if(!1===n[i].inherit&&j.is(t,n[i].selector))return!0;return!1}function m(t){var e;return l.dom.getParent(t,function(t){return(e=l.dom.getStyle(t,"text-decoration"))&&"none"!==e}),e}function v(t){var e;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(e=m(t.parentNode),l.dom.getStyle(t,"color")&&e?l.dom.setStyle(t,"text-decoration",e):l.dom.getStyle(t,"text-decoration")===e&&l.dom.setStyle(t,"text-decoration",null))}function y(e,n,i){function o(t,e){if(e=e||g,t){if(e.onformat&&e.onformat(t,e,n,i),ot(e.styles,function(e,i){j.setStyle(t,i,D(e,n))}),e.styles){var o=j.getAttrib(t,"style");o&&t.setAttribute("data-mce-style",o)}ot(e.attributes,function(e,i){j.setAttrib(t,i,D(e,n))}),ot(e.classes,function(e){e=D(e,n),j.hasClass(t,e)||j.addClass(t,e)})}}function r(t,e){var n=!1;return!!g.selector&&(ot(t,function(t){if(!("collapsed"in t)||t.collapsed===m)return j.is(e,t.selector)&&!h(e)?(o(e,t),n=!0,!1):void 0}),n)}function a(t,i,a){var s,l,u=[],d=!0;o(l=j.create(s=g.inline||g.block)),q.walk(t,function(t){var i;ot(t,function t(f){var m,v,y,x;if(x=d,m=f.nodeName.toLowerCase(),v=f.parentNode.nodeName.toLowerCase(),1===f.nodeType&&nt(f)&&(x=d,d="true"===nt(f),y=!0),S(m,"br"))return i=0,void(g.block&&j.remove(f));if(g.wrapper&&b(f,e,n))i=0;else{if(d&&!y&&g.block&&!g.wrapper&&c(m)&&Y(v,s))return o(f=j.rename(f,s)),u.push(f),void(i=0);if(g.selector){var _=r(p,f);if(!g.inline||_)return void(i=0)}!d||y||!Y(s,m)||!Y(v,s)||!a&&3===f.nodeType&&1===f.nodeValue.length&&65279===f.nodeValue.charCodeAt(0)||h(f)||g.inline&&X(f)?(i=0,ot(rt(f.childNodes),t),y&&(d=x),i=0):(i||(i=j.clone(l,tt),f.parentNode.insertBefore(i,f),u.push(i)),i.appendChild(f))}})}),!0===g.links&&ot(u,function(t){!function t(e){"A"===e.nodeName&&o(e,g),ot(rt(e.childNodes),t)}(t)}),ot(u,function(t){function i(t){var e=0;return ot(t.childNodes,function(t){P(t)||it(t)||e++}),e}function r(t){var e=!1;return ot(t.childNodes,function(t){if(M(t))return e=t,!1}),e}var a;if(a=i(t),!(u.length>1)&&X(t)||0!==a){if(g.inline||g.wrapper){if(g.exact||1!==a||(t=function(t){var e,n;return(e=r(t))&&!it(e)&&w(e,g)&&(o(n=j.clone(e,tt)),j.replace(n,t,et),j.remove(e,1)),n||t}(t)),ot(p,function(e){ot(j.select(e.inline,t),function(t){it(t)||L(e,n,t,e.exact?t:null)})}),b(t.parentNode,e,n)&&L(g,n,t)&&(t=0),g.merge_with_parents&&j.getParent(t.parentNode,function(i){if(b(i,e,n))return L(g,n,t)&&(t=0),et}),!X(t)&&!A(t,"fontSize")){var s=function(t,e){do{if(1!==i(t))break;if(!(t=r(t)))break;if(e(t))return t}while(t);return null}(t,T("fontSize"));s&&y("fontsize",{value:A(s,"fontSize")},t)}t&&!1!==g.merge_siblings&&(t=O(R(t),t),t=O(t,R(t,et)))}}else j.remove(t,1)})}var u,d,p=f(e),g=p[0],m=!i&&$.isCollapsed();if("false"!==nt($.getNode())){if(g){if(i)i.nodeType?r(p,i)||((d=j.createRng()).setStartBefore(i),d.setEndAfter(i),a(N(d,p),0,!0)):a(i,0,!0);else if(m&&g.inline&&!j.select("td[data-mce-selected],th[data-mce-selected]").length)z("apply",e,n);else{var x=l.selection.getNode();Z||!p[0].defaultBlock||j.getParent(x,j.isBlock)||y(p[0].defaultBlock),l.selection.setRng(function(){var e=l.selection.getRng(),n=e.startContainer,o=e.endContainer;if(n!=o&&0===e.endOffset){var r=function(e,n){var o=new t(n);for(i=o.prev2();i;i=o.prev2()){if(3==i.nodeType&&i.data.length>0)return i;if(i.childNodes.length>1||i==e||"BR"==i.tagName)return i}}(n,o);e.setEnd(r,3==r.nodeType?r.data.length:r.childNodes.length)}return e}()),u=$.getBookmark(),a(N($.getRng(et),p)),g.styles&&((g.styles.color||g.styles.textDecoration)&&(at(x,v,"childNodes"),v(x)),g.styles.backgroundColor&&C(x,T("fontSize"),k("backgroundColor",D(g.styles.backgroundColor,n)))),$.moveToBookmark(u),V($.getRng(et)),l.nodeChanged()}s.postProcess(e,l)}}else{i=$.getNode();for(var _=0,I=p.length;_<I;_++)if(p[_].ceFalseOverride&&j.is(i,p[_].selector))return void o(i,p[_])}}function x(t,e,n,i){function o(t){var n,i,r,a,s;if(1===t.nodeType&&nt(t)&&(a=y,y="true"===nt(t),s=!0),n=rt(t.childNodes),y&&!s)for(i=0,r=g.length;i<r&&!L(g[i],e,t,t);i++);if(v.deep&&n.length){for(i=0,r=n.length;i<r;i++)o(n[i]);s&&(y=a)}}function r(n){var o;return ot(d(n.parentNode).reverse(),function(n){var r;o||"_start"==n.id||"_end"==n.id||(r=b(n,t,e,i))&&!1!==r.split&&(o=n)}),o}function a(t){return function(t,n,i,o){var r,a,s,l,c,u;if(t){for(u=t.parentNode,r=n.parentNode;r&&r!=u;r=r.parentNode){for(a=j.clone(r,tt),c=0;c<g.length;c++)if(L(g[c],e,a,a)){a=0;break}a&&(s&&a.appendChild(s),l||(l=a),s=a)}v.mixed&&X(t)||(n=j.split(t,n)),s&&(i.parentNode.insertBefore(s,i),l.appendChild(i))}return n}(r(t),t,t)}function s(t){var e=j.get(t?"_start":"_end"),n=e[t?"firstChild":"lastChild"];return it(n)&&(n=n[t?"firstChild":"lastChild"]),3==n.nodeType&&0===n.data.length&&(n=t?e.previousSibling||e.nextSibling:e.nextSibling||e.previousSibling),j.remove(e,!0),n}function c(t){var e,n,i=t.commonAncestorContainer;if(t=N(t,g,et),v.split){if((e=B(t,et))!=(n=B(t))){if(/^(TR|TH|TD)$/.test(e.nodeName)&&e.firstChild&&(e="TR"==e.nodeName?e.firstChild.firstChild||e:e.firstChild||e),i&&/^T(HEAD|BODY|FOOT|R)$/.test(i.nodeName)&&u(n)&&n.firstChild&&(n=n.firstChild||n),j.isChildOf(e,n)&&!X(n)&&!u(e)&&!u(n))return a(e=E(e,"span",{id:"_start","data-mce-type":"bookmark"})),void(e=s(et));e=E(e,"span",{id:"_start","data-mce-type":"bookmark"}),n=E(n,"span",{id:"_end","data-mce-type":"bookmark"}),a(e),a(n),e=s(et),n=s()}else e=n=a(e);t.startContainer=e.parentNode?e.parentNode:e,t.startOffset=K(e),t.endContainer=n.parentNode?n.parentNode:n,t.endOffset=K(n)+1}q.walk(t,function(t){ot(t,function(t){o(t),1===t.nodeType&&"underline"===l.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===m(t.parentNode)&&L({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)})})}var h,p,g=f(t),v=g[0],y=!0;if(n)n.nodeType?((p=j.createRng()).setStartBefore(n),p.setEndAfter(n),c(p)):c(n);else if("false"!==nt($.getNode()))$.isCollapsed()&&v.inline&&!j.select("td[data-mce-selected],th[data-mce-selected]").length?z("remove",t,e,i):(h=$.getBookmark(),c($.getRng(et)),$.moveToBookmark(h),v.inline&&_(t,e,$.getStart())&&V($.getRng(!0)),l.nodeChanged());else{n=$.getNode();for(var x=0,w=g.length;x<w&&(!g[x].ceFalseOverride||!L(g[x],e,n,n));x++);}}function b(t,e,n,i){function o(t,e,o){var r,a,s,l=e[o];if(e.onmatch)return e.onmatch(t,e,o);if(l)if(l.length===H){for(r in l)if(l.hasOwnProperty(r)){if(a="attributes"===o?j.getAttrib(t,r):A(t,r),i&&!a&&!e.exact)return;if((!i||e.exact)&&!S(a,I(D(l[r],n),r)))return}}else for(s=0;s<l.length;s++)if("attributes"===o?j.getAttrib(t,l[s]):A(t,l[s]))return e;return e}var r,a,s,l=f(e);if(l&&t)for(a=0;a<l.length;a++)if(w(t,r=l[a])&&o(t,r,"attributes")&&o(t,r,"styles")){if(s=r.classes)for(a=0;a<s.length;a++)if(!j.hasClass(t,s[a]))return;return r}}function _(t,e,n){function i(n){var i=j.getRoot();return n!==i&&(n=j.getParent(n,function(n){return!!g(n,t)||n.parentNode===i||!!b(n,t,e,!0)}),b(n,t,e))}var o;return n?i(n):i(n=$.getNode())||(o=$.getStart())!=n&&i(o)?et:tt}function w(t,e){return S(t,e.inline)||S(t,e.block)?et:e.selector?1==t.nodeType&&j.is(t,e.selector):void 0}function S(t,e){return e=""+((e=e||"").nodeName||e),(t=""+((t=t||"").nodeName||t)).toLowerCase()==e.toLowerCase()}function C(t,e,n){ot(t.childNodes,function(t){M(t)&&(e(t)&&n(t),t.hasChildNodes()&&C(t,e,n))})}function M(t){return 1==t.nodeType&&!it(t)&&!P(t)&&!h(t)}function T(t){return o.curry(function(t,e){return!(!e||!A(e,t))},t)}function k(t,e){return o.curry(function(t,e,n){j.setStyle(n,t,e)},t,e)}function A(t,e){return I(j.getStyle(t,e),e)}function I(t,e){return"color"!=e&&"backgroundColor"!=e||(t=j.toHex(t)),"fontWeight"==e&&700==t&&(t="bold"),"fontFamily"==e&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t}function D(t,e){return"string"!=typeof t?t=t(e):e&&(t=t.replace(/%(\w+)/g,function(t,n){return e[n]||t})),t}function P(t){return t&&3===t.nodeType&&/^([\t \r\n]+|)$/.test(t.nodeValue)}function E(t,e,n){var i=j.create(e,n);return t.parentNode.insertBefore(i,t),i.appendChild(t),i}function N(e,n,i){function o(t){function e(t){return"BR"==t.nodeName&&t.getAttribute("data-mce-bogus")&&!t.nextSibling}var i,o,r,a,s;if(i=o=t?m:y,a=t?"previousSibling":"nextSibling",s=j.getRoot(),3==i.nodeType&&!P(i)&&(t?v>0:x<i.nodeValue.length))return i;for(;;){if(!n[0].block_expand&&X(o))return o;for(r=o[a];r;r=r[a])if(!it(r)&&!P(r)&&!e(r))return o;if(o==s||o.parentNode==s){i=o;break}o=o.parentNode}return i}function r(t,e){for(e===H&&(e=3===t.nodeType?t.length:t.childNodes.length);t&&t.hasChildNodes();)(t=t.childNodes[e])&&(e=3===t.nodeType?t.length:t.childNodes.length);return{node:t,offset:e}}function a(t){for(var e=t;e;){if(1===e.nodeType&&nt(e))return"false"===nt(e)?e:t;e=e.parentNode}return t}function s(e,n,o){function r(t,e){var n,r,a=t.nodeValue;return void 0===e&&(e=o?a.length:0),o?-1===(n=(n=a.lastIndexOf(" ",e))>(r=a.lastIndexOf(" ",e))?n:r)||i||n++:(n=a.indexOf(" ",e),r=a.indexOf(" ",e),n=-1!==n&&(-1===r||n<r)?n:r),n}var a,s,c,u;if(3===e.nodeType){if(-1!==(c=r(e,n)))return{container:e,offset:c};u=e}for(a=new t(e,j.getParent(e,X)||l.getBody());s=a[o?"prev":"next"]();)if(3===s.nodeType){if(u=s,-1!==(c=r(s)))return{container:s,offset:c}}else if(X(s))break;if(u)return{container:u,offset:n=o?0:u.length}}function u(t,i){var o,r,a,s;for(3==t.nodeType&&0===t.nodeValue.length&&t[i]&&(t=t[i]),o=d(t),r=0;r<o.length;r++)for(a=0;a<n.length;a++)if((!("collapsed"in(s=n[a]))||s.collapsed===e.collapsed)&&j.is(o[r],s.selector))return o[r];return t}function h(t,e){var i,o=j.getRoot();if(n[0].wrapper||(i=j.getParent(t,n[0].block,o)),i||(i=j.getParent(3==t.nodeType?t.parentNode:t,function(t){return t!=o&&c(t)})),i&&n[0].wrapper&&(i=d(i,"ul,ol").reverse()[0]||i),!i)for(i=t;i[e]&&!X(i[e])&&!S(i=i[e],"br"););return i||t}var f,p,g,m=e.startContainer,v=e.startOffset,y=e.endContainer,x=e.endOffset;if(1==m.nodeType&&m.hasChildNodes()&&3==(m=m.childNodes[v>(f=m.childNodes.length-1)?f:v]).nodeType&&(v=0),1==y.nodeType&&y.hasChildNodes()&&3==(y=y.childNodes[x>(f=y.childNodes.length-1)?f:x-1]).nodeType&&(x=y.nodeValue.length),m=a(m),y=a(y),(it(m.parentNode)||it(m))&&3==(m=(m=it(m)?m:m.parentNode).nextSibling||m).nodeType&&(v=0),(it(y.parentNode)||it(y))&&3==(y=(y=it(y)?y:y.parentNode).previousSibling||y).nodeType&&(x=y.length),n[0].inline&&(e.collapsed&&((g=s(m,v,!0))&&(m=g.container,v=g.offset),(g=s(y,x))&&(y=g.container,x=g.offset)),(p=r(y,x)).node)){for(;p.node&&0===p.offset&&p.node.previousSibling;)p=r(p.node.previousSibling);p.node&&p.offset>0&&3===p.node.nodeType&&" "===p.node.nodeValue.charAt(p.offset-1)&&p.offset>1&&(y=p.node).splitText(p.offset-1)}return(n[0].inline||n[0].block_expand)&&(n[0].inline&&3==m.nodeType&&0!==v||(m=o(!0)),n[0].inline&&3==y.nodeType&&x!==y.nodeValue.length||(y=o())),n[0].selector&&n[0].expand!==tt&&!n[0].inline&&(m=u(m,"previousSibling"),y=u(y,"nextSibling")),(n[0].block||n[0].selector)&&(m=h(m,"previousSibling"),y=h(y,"nextSibling"),n[0].block&&(X(m)||(m=o(!0)),X(y)||(y=o()))),1==m.nodeType&&(v=K(m),m=m.parentNode),1==y.nodeType&&(x=K(y)+1,y=y.parentNode),{startContainer:m,startOffset:v,endContainer:y,endOffset:x}}function L(t,e,n,i){var o,r,a;if(!w(n,t)&&!function(t,e){return e.links&&"A"==t.tagName}(n,t))return tt;if("all"!=t.remove)for(ot(t.styles,function(o,r){o=I(D(o,e),r),"number"==typeof r&&(r=o,i=0),(t.remove_similar||!i||S(A(i,r),o))&&j.setStyle(n,r,""),a=1}),a&&""===j.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),ot(t.attributes,function(t,o){var r;if(t=D(t,e),"number"==typeof o&&(o=t,i=0),!i||S(j.getAttrib(i,o),t)){if("class"==o&&(t=j.getAttrib(n,o))&&(r="",ot(t.split(/\s+/),function(t){/mce\-\w+/.test(t)&&(r+=(r?" ":"")+t)}),r))return void j.setAttrib(n,o,r);"class"==o&&n.removeAttribute("className"),Q.test(o)&&n.removeAttribute("data-mce-"+o),n.removeAttribute(o)}}),ot(t.classes,function(t){t=D(t,e),i&&!j.hasClass(i,t)||j.removeClass(n,t)}),r=j.getAttribs(n),o=0;o<r.length;o++){var s=r[o].nodeName;if(0!==s.indexOf("_")&&0!==s.indexOf("data-"))return tt}return"none"!=t.remove?(function(t,e){function n(t,e,n){return!(t=R(t,e,n))||"BR"==t.nodeName||X(t)}var i,o=t.parentNode;e.block&&(Z?o==j.getRoot()&&(e.list_block&&S(t,e.list_block)||ot(rt(t.childNodes),function(t){Y(Z,t.nodeName.toLowerCase())?i?i.appendChild(t):(i=E(t,Z),j.setAttribs(i,l.settings.forced_root_block_attrs)):i=0})):X(t)&&!X(o)&&(n(t,tt)||n(t.firstChild,et,1)||t.insertBefore(j.create("br"),t.firstChild),n(t,et)||n(t.lastChild,tt,1)||t.appendChild(j.create("br")))),e.selector&&e.inline&&!S(e.inline,t)||j.remove(t,1)}(n,t),et):void 0}function R(t,e,n){if(t)for(e=e?"nextSibling":"previousSibling",t=n?t:t[e];t;t=t[e])if(1==t.nodeType||!P(t))return t}function O(t,e){function n(t,e){for(o=t;o;o=o[e]){if(3==o.nodeType&&0!==o.nodeValue.length)return t;if(1==o.nodeType&&!it(o))return o}return t}var o,r,a=new i(j);if(t&&e&&(t=n(t,"previousSibling"),e=n(e,"nextSibling"),a.compare(t,e))){for(o=t.nextSibling;o&&o!=e;)r=o,o=o.nextSibling,t.appendChild(r);return j.remove(e),ot(rt(e.childNodes),function(e){t.appendChild(e)}),t}return e}function B(e,n){var i,o,r;return o=e[n?"startOffset":"endOffset"],1==(i=e[n?"startContainer":"endContainer"]).nodeType&&(!n&&o&&o--,i=i.childNodes[o>(r=i.childNodes.length-1)?r:o]),3===i.nodeType&&n&&o>=i.nodeValue.length&&(i=new t(i,l.getBody()).next()||i),3!==i.nodeType||n||0!==o||(i=new t(i,l.getBody()).prev()||i),i}function z(e,n,i,o){function r(t){var e=j.create("span",{id:p,"data-mce-bogus":!0,style:g?"color:red":""});return t&&e.appendChild(l.getDoc().createTextNode(J)),e}function a(t,e){for(;t;){if(3===t.nodeType&&t.nodeValue!==J||t.childNodes.length>1)return!1;e&&1===t.nodeType&&e.push(t),t=t.firstChild}return!0}function s(t){for(;t;){if(t.id===p)return t;t=t.parentNode}}function u(e){var n;if(e)for(e=(n=new t(e,e)).current();e;e=n.next())if(3===e.nodeType)return e}function d(t,e){var n,i;if(t)i=$.getRng(!0),a(t)?(!1!==e&&(i.setStartBefore(t),i.setEndBefore(t)),j.remove(t)):((n=u(t)).nodeValue.charAt(0)===J&&(n.deleteData(0,1),i.startContainer==n&&i.startOffset>0&&i.setStart(n,i.startOffset-1),i.endContainer==n&&i.endOffset>0&&i.setEnd(n,i.endOffset-1)),j.remove(t,1)),$.setRng(i);else if(!(t=s($.getStart())))for(;t=j.get(p);)d(t,!1)}function h(){var t;(t=s($.getStart()))&&!j.isEmpty(t)&&at(t,function(t){1!=t.nodeType||t.id===p||j.isEmpty(t)||j.setAttrib(t,"data-mce-bogus",null)},"childNodes")}var p="_mce_caret",g=l.settings.caret_debug;l._hasCaretEvents||(G=function(){var t,e=[];if(a(s($.getStart()),e))for(t=e.length;t--;)j.setAttrib(e[t],"data-mce-bogus","1")},W=function(t){var e=t.keyCode;d(),8==e&&$.isCollapsed()&&$.getStart().innerHTML==J&&d(s($.getStart())),37!=e&&39!=e||d(s($.getStart())),h()},l.on("SetContent",function(t){t.selection&&h()}),l._hasCaretEvents=!0),"apply"==e?function(){var t,e,o,a,l,c;a=(t=$.getRng(!0)).startOffset,c=t.startContainer.nodeValue,(e=s($.getStart()))&&(o=u(e));var d=/[^\s\u00a0\u00ad\u200b\ufeff]/;c&&a>0&&a<c.length&&d.test(c.charAt(a))&&d.test(c.charAt(a-1))?(l=$.getBookmark(),t.collapse(!0),t=N(t,f(n)),t=q.split(t),y(n,i,t),$.moveToBookmark(l)):(e&&o.nodeValue===J||(o=(e=r(!0)).firstChild,t.insertNode(e),a=1),y(n,i,e),$.setCursorLocation(o,a))}():function(){var t,e,a,s,l,u,d,h=$.getRng(!0),p=[];for(s=t=h.startContainer,3==t.nodeType&&(h.startOffset!=t.nodeValue.length&&(a=!0),s=s.parentNode);s;){if(b(s,n,i,o)){l=s;break}s.nextSibling&&(a=!0),p.push(s),s=s.parentNode}if(l)if(a)e=$.getBookmark(),h.collapse(!0),h=N(h,f(n),!0),h=q.split(h),x(n,i,h),$.moveToBookmark(e);else{for(s=d=r(),u=p.length-1;u>=0;u--)s.appendChild(j.clone(p[u],!1)),s=s.firstChild;s.appendChild(j.doc.createTextNode(J)),s=s.firstChild;var g=j.getParent(l,c);g&&j.isEmpty(g)?l.parentNode.replaceChild(d,l):j.insertAfter(d,l),$.setCursorLocation(s,1),j.isEmpty(l)&&j.remove(l)}}()}function V(e){var n,i,o,r,a,s=e.startContainer,l=e.startOffset;if((e.startContainer!=e.endContainer||!function(t){return t&&/^(IMG)$/.test(t.nodeName)}(e.startContainer.childNodes[e.startOffset]))&&(3==s.nodeType&&l>=s.nodeValue.length&&(l=K(s),s=s.parentNode,n=!0),1==s.nodeType))for(s=(r=s.childNodes)[Math.min(l,r.length-1)],i=new t(s,j.getParent(s,j.isBlock)),(l>r.length-1||n)&&i.next(),o=i.current();o;o=i.next())if(3==o.nodeType&&!P(o))return a=j.create("a",{"data-mce-bogus":"all"},J),o.parentNode.insertBefore(a,o),e.setStart(o,0),$.setRng(e),void j.remove(a)}var F,H,W,G,U={},j=l.dom,$=l.selection,q=new e(j),Y=l.schema.isValidChild,X=j.isBlock,Z=l.settings.forced_root_block,K=j.nodeIndex,J="\ufeff",Q=/^(src|href|style)$/,tt=!1,et=!0,nt=j.getContentEditable,it=n.isBookmarkNode,ot=r.each,rt=r.grep,at=r.walk;(0,r.extend)(this,{get:f,register:p,unregister:function(t){return t&&U[t]&&delete U[t],U},apply:y,remove:x,toggle:function(t,e,n){var i=f(t);!_(t,e,n)||"toggle"in i[0]&&!i[0].toggle?y(t,e,n):x(t,e,n)},match:_,matchAll:function(t,e){var n,i=[],o={};return n=$.getStart(),j.getParent(n,function(n){var r,a;for(r=0;r<t.length;r++)!o[a=t[r]]&&b(n,a,e)&&(o[a]=!0,i.push(a))},j.getRoot()),i},matchNode:b,canApply:function(t){var e,n,i,o,r=f(t);if(r)for(e=d($.getStart()),i=r.length-1;i>=0;i--){if(!(o=r[i].selector)||r[i].defaultBlock)return et;for(n=e.length-1;n>=0;n--)if(j.is(e[n],o))return et}return tt},formatChanged:function(t,e,n){var i;return F||(F={},i={},l.on("NodeChange",function(t){var e=d(t.element),n={};e=r.grep(e,function(t){return 1==t.nodeType&&!t.getAttribute("data-mce-bogus")}),ot(F,function(t,o){ot(e,function(r){return b(r,o,{},t.similar)?(i[o]||(ot(t,function(t){t(!0,{node:r,format:o,parents:e})}),i[o]=t),n[o]=t,!1):!g(r,o)&&void 0})}),ot(i,function(o,r){n[r]||(delete i[r],ot(o,function(n){n(!1,{node:t.element,format:r,parents:e})}))})})),ot(t.split(","),function(t){F[t]||(F[t]=[],F[t].similar=n),F[t].push(e)}),this},getCssText:function(t){return a.getCssText(l,t)}}),p({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(t,e,n){ot(n,function(e,n){j.setAttrib(t,n,e)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),ot("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(t){p(t,{block:t,remove:"all"})}),p(l.settings.formats),function(){l.addShortcut("meta+b","bold_desc","Bold"),l.addShortcut("meta+i","italic_desc","Italic"),l.addShortcut("meta+u","underline_desc","Underline");for(var t=1;t<=6;t++)l.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);l.addShortcut("access+7","",["FormatBlock",!1,"p"]),l.addShortcut("access+8","",["FormatBlock",!1,"div"]),l.addShortcut("access+9","",["FormatBlock",!1,"address"])}(),l.on("BeforeGetContent",function(t){G&&"raw"!=t.format&&G()}),l.on("mouseup keydown",function(t){W&&W(t)})}}),n(X,[],function(){return{KEEP:0,DELETE:2,INSERT:1,diff:function(t,e){var n=t.length+e.length+2,i=new Array(n),o=new Array(n),r=function(n,i,o,a,l){var c=s(n,i,o,a);if(null===c||c.start===i&&c.diag===i-a||c.end===n&&c.diag===n-o)for(var u=n,d=o;u<i||d<a;)u<i&&d<a&&t[u]===e[d]?(l.push([0,t[u]]),++u,++d):i-n>a-o?(l.push([2,t[u]]),++u):(l.push([1,e[d]]),++d);else{r(n,c.start,o,c.start-c.diag,l);for(var h=c.start;h<c.end;++h)l.push([0,t[h]]);r(c.end,i,c.end-c.diag,a,l)}},a=function(n,i,o,r){for(var a=n;a-i<r&&a<o&&t[a]===e[a-i];)++a;return function(t,e,n){return{start:t,end:e,diag:n}}(n,a,i)},s=function(n,r,s,l){var c=r-n,u=l-s;if(0===c||0===u)return null;var d=c-u,h=u+c,f=(h%2==0?h:h+1)/2;i[1+f]=n,o[1+f]=r+1;for(var p=0;p<=f;++p){for(var g=-p;g<=p;g+=2){var m=g+f;i[m]=g===-p||g!=p&&i[m-1]<i[m+1]?i[m+1]:i[m-1]+1;for(var v=i[m],y=v-n+s-g;v<r&&y<l&&t[v]===e[y];)i[m]=++v,++y;if(d%2!=0&&d-p<=g&&g<=d+p&&o[m-d]<=i[m])return a(o[m-d],g+n-s,r,l)}for(g=d-p;g<=d+p;g+=2){for(o[m=g+f-d]=g===d-p||g!=d+p&&o[m+1]<=o[m-1]?o[m+1]-1:o[m-1],y=(v=o[m]-1)-n+s-g;v>=n&&y>=s&&t[v]===e[y];)o[m]=v--,y--;if(d%2==0&&-p<=g&&g<=p&&o[m]<=i[m+d])return a(o[m],g+n-s,r,l)}}},l=[];return r(0,t.length,0,e.length,l),l}}}),n(Z,[d,v,X],function(t,e,n){var i=function(t){return 1===t.nodeType?t.outerHTML:3===t.nodeType?e.encodeRaw(t.data,!1):8===t.nodeType?"\x3c!--"+t.data+"--\x3e":""};return{read:function(e){return t.map(e.childNodes,i)},write:function(e,o){var r=t.map(o.childNodes,i);return function(e,i){var o=0;t.each(e,function(t){t[0]===n.KEEP?o++:t[0]===n.INSERT?(function(t,e,n){var i=function(t){var e,n,i;for(i=document.createElement("div"),e=document.createDocumentFragment(),t&&(i.innerHTML=t);n=i.firstChild;)e.appendChild(n);return e}(e);if(t.hasChildNodes()&&n<t.childNodes.length){var o=t.childNodes[n];o.parentNode.insertBefore(i,o)}else t.appendChild(i)}(i,t[1],o),o++):t[0]===n.DELETE&&function(t,e){if(t.hasChildNodes()&&e<t.childNodes.length){var n=t.childNodes[e];n.parentNode.removeChild(n)}}(i,o)})}(n.diff(r,e),o),o}}}),n(K,[d,Z],function(t,e){var n=function(t){return{type:"fragmented",fragments:t,content:"",bookmark:null,beforeBookmark:null}},i=function(t){return{type:"complete",fragments:null,content:t,bookmark:null,beforeBookmark:null}},o=function(t){return"fragmented"===t.type?t.fragments.join(""):t.content};return{createFragmentedLevel:n,createCompleteLevel:i,createFromEditor:function(o){var r,a,s;return r=e.read(o.getBody()),function(t){return-1!==t.indexOf("</iframe>")}(a=(s=t.map(r,function(t){return o.serializer.trimContent(t)})).join(""))?n(s):i(a)},applyToEditor:function(t,n,i){"fragmented"===n.type?e.write(n.fragments,t.getBody()):t.setContent(n.content,{format:"raw"}),t.selection.moveToBookmark(i?n.beforeBookmark:n.bookmark)},isEq:function(t,e){return o(t)===o(e)}}}),n(J,[R,h,K],function(t,e,n){return function(t){function i(e){t.setDirty(e)}function o(t){l.typing=!1,l.add({},t)}function r(){l.typing&&(l.typing=!1,l.add())}var a,s,l=this,c=0,u=[],d=0;return t.on("init",function(){l.add()}),t.on("BeforeExecCommand",function(t){var e=t.command;"Undo"!==e&&"Redo"!==e&&"mceRepaint"!==e&&(r(),l.beforeChange())}),t.on("ExecCommand",function(t){var e=t.command;"Undo"!==e&&"Redo"!==e&&"mceRepaint"!==e&&o(t)}),t.on("ObjectResizeStart Cut",function(){l.beforeChange()}),t.on("SaveContent ObjectResized blur",o),t.on("DragEnd",o),t.on("KeyUp",function(e){var r=e.keyCode;e.isDefaultPrevented()||((r>=33&&r<=36||r>=37&&r<=40||45===r||e.ctrlKey)&&(o(),t.nodeChanged()),46!==r&&8!==r||t.nodeChanged(),s&&l.typing&&(t.isDirty()||(i(u[0]&&!n.isEq(n.createFromEditor(t),u[0])),t.isDirty()&&t.fire("change",{level:u[0],lastLevel:null})),t.fire("TypingUndo"),s=!1,t.nodeChanged()))}),t.on("KeyDown",function(t){var e=t.keyCode;if(!t.isDefaultPrevented()){if(e>=33&&e<=36||e>=37&&e<=40||45===e)return void(l.typing&&o(t));!(e<16||e>20)||224===e||91===e||l.typing||t.ctrlKey&&!t.altKey||t.metaKey||(l.beforeChange(),l.typing=!0,l.add({},t),s=!0)}}),t.on("MouseDown",function(t){l.typing&&o(t)}),t.addShortcut("meta+z","","Undo"),t.addShortcut("meta+y,meta+shift+z","","Redo"),t.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||t.nodeChanged()}),l={data:u,typing:!1,beforeChange:function(){d||(a=t.selection.getBookmark(2,!0))},add:function(o,r){var s,l,h,f=t.settings;if(h=n.createFromEditor(t),o=e.extend(o=o||{},h),d||t.removed)return null;if(t.fire("BeforeAddUndo",{level:o,lastLevel:l=u[c],originalEvent:r}).isDefaultPrevented())return null;if(l&&n.isEq(l,o))return null;if(u[c]&&(u[c].beforeBookmark=a),f.custom_undo_redo_levels&&u.length>f.custom_undo_redo_levels){for(s=0;s<u.length-1;s++)u[s]=u[s+1];u.length--,c=u.length}o.bookmark=t.selection.getBookmark(2,!0),c<u.length-1&&(u.length=c+1),u.push(o),c=u.length-1;var p={level:o,lastLevel:l,originalEvent:r};return t.fire("AddUndo",p),c>0&&(i(!0),t.fire("change",p)),o},undo:function(){var e;return l.typing&&(l.add(),l.typing=!1),c>0&&(e=u[--c],n.applyToEditor(t,e,!0),i(!0),t.fire("undo",{level:e})),e},redo:function(){var e;return c<u.length-1&&(e=u[++c],n.applyToEditor(t,e,!1),i(!0),t.fire("redo",{level:e})),e},clear:function(){u=[],c=0,l.typing=!1,l.data=u,t.fire("ClearUndos")},hasUndo:function(){return c>0||l.typing&&u[0]&&!n.isEq(n.createFromEditor(t),u[0])},hasRedo:function(){return c<u.length-1&&!l.typing},transact:function(t){r(),l.beforeChange();try{d++,t()}finally{d--}return l.add()},extra:function(e,i){var o;l.transact(e)&&(o=u[c].bookmark,n.applyToEditor(t,u[c-1],!0),l.transact(i)&&(u[c-1].beforeBookmark=o))}}}}),n(Q,[g,M,C,l],function(t,e,n,i){var o=i.ie&&i.ie<11;return function(r){function a(a){function p(t){return t&&s.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==s.getContentEditable(t)}function g(t){var e;s.isBlock(t)&&(e=l.getRng(),t.appendChild(s.create("span",null," ")),l.select(t),t.lastChild.outerHTML="",l.setRng(e))}function m(e){var n,o,r,a,c=e;if(e){if(i.ie&&i.ie<9&&A&&A.firstChild&&A.firstChild==A.lastChild&&"BR"==A.firstChild.tagName&&s.remove(A.firstChild),/^(LI|DT|DD)$/.test(e.nodeName)){var u=function(t){for(;t;){if(1==t.nodeType||3==t.nodeType&&t.data&&/[\r\n\s]/.test(t.data))return t;t=t.nextSibling}}(e.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&e.insertBefore(s.doc.createTextNode(" "),e.firstChild)}if(r=s.createRng(),i.ie||e.normalize(),e.hasChildNodes()){for(n=new t(e,e);o=n.current();){if(3==o.nodeType){r.setStart(o,0),r.setEnd(o,0);break}if(f[o.nodeName.toLowerCase()]){r.setStartBefore(o),r.setEndBefore(o);break}c=o,o=n.next()}o||(r.setStart(c,0),r.setEnd(c,0))}else"BR"==e.nodeName?e.nextSibling&&s.isBlock(e.nextSibling)?((!I||I<9)&&(a=s.create("br"),e.parentNode.insertBefore(a,e)),r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)):(r.setStart(e,0),r.setEnd(e,0));l.setRng(r),s.remove(a),l.scrollIntoView(e)}}function v(t){var e=c.forced_root_block;e&&e.toLowerCase()===t.tagName.toLowerCase()&&s.setAttribs(t,c.forced_root_block_attrs)}function y(t){t.innerHTML=o?"":'<br data-mce-bogus="1">'}function x(t){var e,n,i,r=T,a=d.getTextInlineElements();if(t||"TABLE"==L?v(e=s.create(t||O)):e=A.cloneNode(!1),i=e,!1!==c.keep_styles)do{if(a[r.nodeName]){if("_mce_caret"==r.id)continue;n=r.cloneNode(!1),s.setAttrib(n,"id",""),e.hasChildNodes()?(n.appendChild(e.firstChild),e.appendChild(n)):(i=n,e.appendChild(n))}}while((r=r.parentNode)&&r!=M);return o||(i.innerHTML='<br data-mce-bogus="1">'),e}function b(e){var n,i,o;if(3==T.nodeType&&(e?k>0:k<T.nodeValue.length))return!1;if(T.parentNode==A&&B&&!e)return!0;if(e&&1==T.nodeType&&T==A.firstChild)return!0;if("TABLE"===T.nodeName||T.previousSibling&&"TABLE"==T.previousSibling.nodeName)return B&&!e||!B&&e;for(n=new t(T,A),3==T.nodeType&&(e&&0===k?n.prev():e||k!=T.nodeValue.length||n.next());i=n.current();){if(1===i.nodeType){if(!i.getAttribute("data-mce-bogus")&&(o=i.nodeName.toLowerCase(),h[o]&&"br"!==o))return!1}else if(3===i.nodeType&&!/^[ \t\r\n]*$/.test(i.nodeValue))return!1;e?n.prev():n.next()}return!0}function _(){r.execCommand("InsertLineBreak",!1,a)}function w(){P=/^(H[1-6]|PRE|FIGURE)$/.test(L)&&"HGROUP"!=R?x(O):x(),c.end_container_on_empty_block&&p(N)&&s.isEmpty(A)?P=s.split(N,A):s.insertAfter(P,A),m(P)}var S,C,M,T,k,A,I,D,P,E,N,L,R,O,B;if(S=l.getRng(!0),!a.isDefaultPrevented()){if(!S.collapsed)return void r.execCommand("Delete");if(new e(s).normalize(S),T=S.startContainer,k=S.startOffset,O=(O=(c.force_p_newlines?"p":"")||c.forced_root_block)?O.toUpperCase():"",I=s.doc.documentMode,D=a.shiftKey,1==T.nodeType&&T.hasChildNodes()&&(B=k>T.childNodes.length-1,T=T.childNodes[Math.min(k,T.childNodes.length-1)]||T,k=B&&3==T.nodeType?T.nodeValue.length:0),M=function(t){var e,n,i=s.getRoot();for(e=t;e!==i&&"false"!==s.getContentEditable(e);)"true"===s.getContentEditable(e)&&(n=e),e=e.parentNode;return e!==i?n:i}(T)){if(u.beforeChange(),!s.isBlock(M)&&M!=s.getRoot())return void(O&&!D||_());if((O&&!D||!O&&D)&&(T=function(t,e){var n,i,o,a,l,c,u=O||"P";if(!(i=s.getParent(t,s.isBlock))||!p(i)){if(c=(i=i||M)==r.getBody()||function(t){return t&&/^(TD|TH|CAPTION)$/.test(t.nodeName)}(i)?i.nodeName.toLowerCase():i.parentNode.nodeName.toLowerCase(),!i.hasChildNodes())return v(n=s.create(u)),i.appendChild(n),S.setStart(n,0),S.setEnd(n,0),n;for(a=t;a.parentNode!=i;)a=a.parentNode;for(;a&&!s.isBlock(a);)o=a,a=a.previousSibling;if(o&&d.isValidChild(c,u.toLowerCase())){for(v(n=s.create(u)),o.parentNode.insertBefore(n,o),a=o;a&&!s.isBlock(a);)l=a.nextSibling,n.appendChild(a),a=l;S.setStart(t,e),S.setEnd(t,e)}}return t}(T,k)),A=s.getParent(T,s.isBlock),N=A?s.getParent(A.parentNode,s.isBlock):null,L=A?A.nodeName.toUpperCase():"","LI"!=(R=N?N.nodeName.toUpperCase():"")||a.ctrlKey||(A=N,L=R),r.undoManager.typing&&(r.undoManager.typing=!1,r.undoManager.add()),/^(LI|DT|DD)$/.test(L)){if(!O&&D)return void _();if(s.isEmpty(A))return void function(){function t(t){for(var e=N[t?"firstChild":"lastChild"];e&&1!=e.nodeType;)e=e[t?"nextSibling":"previousSibling"];return e===A}function e(){var t=N.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:N}if(N!=r.getBody()){var n=N.parentNode.nodeName;/^(OL|UL|LI)$/.test(n)&&(O="LI"),P=O?x(O):s.create("BR"),t(!0)&&t()?"LI"==n?s.insertAfter(P,e()):s.replace(P,N):t(!0)?"LI"==n?(s.insertAfter(P,e()),P.appendChild(s.doc.createTextNode(" ")),P.appendChild(N)):N.parentNode.insertBefore(P,N):t()?(s.insertAfter(P,e()),g(P)):(N=e(),(C=S.cloneRange()).setStartAfter(A),C.setEndAfter(N),E=C.extractContents(),"LI"==O&&"LI"==E.firstChild.nodeName?(P=E.firstChild,s.insertAfter(E,N)):(s.insertAfter(E,N),s.insertAfter(P,N))),s.remove(A),m(P),u.add()}}()}if("PRE"==L&&!1!==c.br_in_pre){if(!D)return void _()}else if(!O&&!D&&"LI"!=L||O&&D)return void _();O&&A===r.getBody()||(O=O||"P",n.isCaretContainerBlock(A)?(P=n.showCaretContainerBlock(A),s.isEmpty(A)&&y(A),m(P)):b()?w():b(!0)?(g(P=A.parentNode.insertBefore(x(),A)),m(A)):((C=S.cloneRange()).setEndAfter(A),function(t){do{3===t.nodeType&&(t.nodeValue=t.nodeValue.replace(/^[\r\n]+/,"")),t=t.firstChild}while(t)}(E=C.extractContents()),P=E.firstChild,s.insertAfter(E,A),function(t){var e,n=t,i=[];if(n){for(;n=n.firstChild;){if(s.isBlock(n))return;1!=n.nodeType||h[n.nodeName.toLowerCase()]||i.push(n)}for(e=i.length;e--;)(!(n=i[e]).hasChildNodes()||n.firstChild==n.lastChild&&""===n.firstChild.nodeValue||"A"==n.nodeName&&" "===(n.innerText||n.textContent))&&s.remove(n)}}(P),function(t){var e;o||(t.normalize(),(e=t.lastChild)&&!/^(left|right)$/gi.test(s.getStyle(e,"float",!0))||s.add(t,"br"))}(A),s.isEmpty(A)&&y(A),P.normalize(),s.isEmpty(P)?(s.remove(P),w()):m(P)),s.setAttrib(P,"id",""),r.fire("NewBlock",{newBlock:P}),u.typing=!1,u.add())}}}var s=r.dom,l=r.selection,c=r.settings,u=r.undoManager,d=r.schema,h=d.getNonEmptyElements(),f=d.getMoveCaretBeforeOnEnterElements();r.on("keydown",function(t){13==t.keyCode&&!1!==a(t)&&t.preventDefault()})}}),n(tt,[],function(){return function(t){var e=t.settings,n=t.dom,i=t.selection,o=t.schema,r=o.getBlockElements();e.forced_root_block&&t.on("NodeChange",function(){var a,s,l,c,u,d,h,f,p,g,m,v,x=i.getStart(),b=t.getBody(),_=-16777215;if(v=e.forced_root_block,x&&1===x.nodeType&&v){for(;x&&x!=b;){if(r[x.nodeName])return;x=x.parentNode}if((a=i.getRng()).setStart){s=a.startContainer,l=a.startOffset,c=a.endContainer,u=a.endOffset;try{p=t.getDoc().activeElement===b}catch(y){}}else a.item&&(x=a.item(0),(a=t.getDoc().body.createTextRange()).moveToElementText(x)),p=a.parentElement().ownerDocument===t.getDoc(),(g=a.duplicate()).collapse(!0),l=-1*g.move("character",_),g.collapsed||((g=a.duplicate()).collapse(!1),u=-1*g.move("character",_)-l);for(x=b.firstChild,m=b.nodeName.toLowerCase();x;)if((3===x.nodeType||1==x.nodeType&&!r[x.nodeName])&&o.isValidChild(m,v.toLowerCase())){if(3===x.nodeType&&0===x.nodeValue.length){h=x,x=x.nextSibling,n.remove(h);continue}d||(d=n.create(v,t.settings.forced_root_block_attrs),x.parentNode.insertBefore(d,x),f=!0),h=x,x=x.nextSibling,d.appendChild(h)}else d=null,x=x.nextSibling;if(f&&p){if(a.setStart)a.setStart(s,l),a.setEnd(c,u),i.setRng(a);else try{(a=t.getDoc().body.createTextRange()).moveToElementText(b),a.collapse(!0),a.moveStart("character",l),u>0&&a.moveEnd("character",u),a.select()}catch(y){}t.nodeChanged()}}})}}),n(et,[B,g,w,H,C,z],function(t,e,n,i,o,r){function a(t){return t>0}function s(t){return t<0}function l(t,e){for(var n;n=t(e);)if(!x(n))return n;return null}function c(t,e){for(t=t.parentNode;t&&t!=e;t=t.parentNode)if(g(t))return t;return e}function u(t,e){for(;t&&t!=e;){if(v(t))return t;t=t.parentNode}return null}function d(t,e){var n=e.ownerDocument.createRange();return t?(n.setStartBefore(e),n.setEndBefore(e)):(n.setStartAfter(e),n.setEndAfter(e)),n}function h(t,e,n){return u(e,t)==u(n,t)}function f(t,e,n){var i,o;for(o=t?"previousSibling":"nextSibling";n&&n!=e;){if(y(i=n[o])&&(i=i[o]),m(i)){if(h(e,i,n))return i;break}if(w(i))break;n=n.parentNode}return null}function p(t,e){return m(function(t,e){var n,i;return e?(n=e.container(),i=e.offset(),_(n)?n.childNodes[i+t]:null):null}(t,e))}var g=n.isContentEditableTrue,m=n.isContentEditableFalse,v=n.matchStyleValues("display","block table table-cell table-caption"),y=o.isCaretContainer,x=o.isCaretContainerBlock,b=t.curry,_=n.isElement,w=r.isCaretCandidate,S=b(d,!0),C=b(d,!1);return{isForwards:a,isBackwards:s,findNode:function(t,n,i,o,r){var c=new e(t,o);if(s(n)){if((m(t)||x(t))&&i(t=l(c.prev,!0)))return t;for(;t=l(c.prev,r);)if(i(t))return t}if(a(n)){if((m(t)||x(t))&&i(t=l(c.next,!0)))return t;for(;t=l(c.next,r);)if(i(t))return t}return null},getEditingHost:c,getParentBlock:u,isInSameBlock:function(t,e,n){return u(t.container(),n)==u(e.container(),n)},isInSameEditingHost:function(t,e,n){return c(t.container(),n)==c(e.container(),n)},isBeforeContentEditableFalse:b(p,0),isAfterContentEditableFalse:b(p,-1),normalizeRange:function(t,e,i){var r,a,s,l,c=b(f,!0,e),u=b(f,!1,e);if(s=i.startOffset,o.isCaretContainerBlock(a=i.startContainer)){if(_(a)||(a=a.parentNode),"before"==(l=a.getAttribute("data-mce-caret"))&&m(r=a.nextSibling))return S(r);if("after"==l&&m(r=a.previousSibling))return C(r)}if(!i.collapsed)return i;if(n.isText(a)){if(y(a)){if(1===t){if(r=u(a))return S(r);if(r=c(a))return C(r)}if(-1===t){if(r=c(a))return C(r);if(r=u(a))return S(r)}return i}if(o.endsWithCaretContainer(a)&&s>=a.data.length-1)return 1===t&&(r=u(a))?S(r):i;if(o.startsWithCaretContainer(a)&&s<=1)return-1===t&&(r=c(a))?C(r):i;if(s===a.data.length)return(r=u(a))?S(r):i;if(0===s)return(r=c(a))?C(r):i}return i}}}),n(nt,[w,z,H,et,d,B],function(t,e,n,i,o,r){function a(t,e){return t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null}function s(t,e){if(p(t)){if(m(e.previousSibling)&&!d(e.previousSibling))return n.before(e);if(d(e))return n(e,0)}if(g(t)){if(m(e.nextSibling)&&!d(e.nextSibling))return n.after(e);if(d(e))return n(e,e.data.length)}return g(t)?f(e)?n.before(e):n.after(e):n.before(e)}function l(e,o){var r;return!!t.isBr(e)&&!!(r=c(1,n.after(e),o))&&!i.isInSameBlock(n.before(e),n.before(r),o)}function c(t,e,f){var x,b,_,w,S,C,M;if(!h(f)||!e)return null;if(x=(M=e).container(),b=M.offset(),d(x)){if(g(t)&&b>0)return n(x,--b);if(p(t)&&b<x.length)return n(x,++b);_=x}else{if(g(t)&&b>0&&(w=a(x,b-1),m(w)))return!v(w)&&(S=i.findNode(w,t,y,w))?d(S)?n(S,S.data.length):n.after(S):d(w)?n(w,w.data.length):n.before(w);if(p(t)&&b<x.childNodes.length&&(w=a(x,b),m(w)))return l(w,f)?c(t,n.after(w),f):!v(w)&&(S=i.findNode(w,t,y,w))?d(S)?n(S,0):n.before(S):d(w)?n(w,0):n.after(w);_=M.getNode()}return(p(t)&&M.isAtEnd()||g(t)&&M.isAtStart())&&(_=i.findNode(_,t,r.constant(!0),f,!0),y(_))?s(t,_):(w=i.findNode(_,t,y,f),!(C=o.last(o.filter(function(t,e){for(var n=[];t&&t!=e;)n.push(t),t=t.parentNode;return n}(x,f),u)))||w&&C.contains(w)?w?s(t,w):null:M=p(t)?n.after(C):n.before(C))}var u=t.isContentEditableFalse,d=t.isText,h=t.isElement,f=t.isBr,p=i.isForwards,g=i.isBackwards,m=e.isCaretCandidate,v=e.isAtomic,y=e.isEditableCaretCandidate;return function(t){return{next:function(e){return c(1,e,t)},prev:function(e){return c(-1,e,t)}}}}),n(it,[h,nt,H],function(t,e,n){var i=function(e){return t.grep(e.childNodes,function(t){return"LI"===t.nodeName})},o=function(t){return t.length>0&&function(t){return!t.firstChild}(t[t.length-1])?t.slice(0,-1):t},r=function(t,e){var n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},a=function(t,i){var o=n.before(t),r=new e(i).next(o);return r?r.toRange():null},s=function(t,i){var o=n.after(t),r=new e(i).prev(o);return r?r.toRange():null},l=function(e,n,i,o){var r=function(t,e){var n=e.cloneRange(),i=e.cloneRange();return n.setStartBefore(t),i.setEndAfter(t),[n.cloneContents(),i.cloneContents()]}(e,o),a=e.parentNode;return a.insertBefore(r[0],e),t.each(n,function(t){a.insertBefore(t,e)}),a.insertBefore(r[1],e),a.removeChild(e),s(n[n.length-1],i)},c=function(e,n,i){var o=e.parentNode;return t.each(n,function(t){o.insertBefore(t,e)}),a(e,i)};return{isListFragment:function(t){var e=t.firstChild,n=t.lastChild;return e&&"meta"===e.name&&(e=e.next),n&&"mce_marker"===n.attr("id")&&(n=n.prev),!(!e||e!==n||"ul"!==e.name&&"ol"!==e.name)},insertAtCaret:function(t,a,u,d){var h=function(t,e,n){var i=e.serialize(n);return function(t){var e=t.firstChild,n=t.lastChild;return e&&"META"===e.nodeName&&e.parentNode.removeChild(e),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),t}(t.createFragment(i))}(a,t,d),f=r(a,u.startContainer),p=o(i(h.firstChild)),g=a.getRoot(),m=function(t){var i=n.fromRangeStart(u),o=new e(a.getRoot()),s=1===t?o.prev(i):o.next(i);return!s||r(a,s.getNode())!==f};return m(1)?c(f,p,g):m(2)?function(t,e,n,i){return i.insertAfter(e.reverse(),t),s(e[0],n)}(f,p,g,a):l(f,p,g,u)},isParentBlockLi:function(t,e){return!!r(t,e)},trimListItems:o,listItems:i}}),n(ot,[l,h,E,nt,H,j,w,it],function(t,e,n,i,o,r,a,s){var l=a.matchNodeNames("td th"),c=function(a,c,u){var d,h,f,p,g,m,v,y,x,b,_,w,S=a.schema.getTextInlineElements(),C=a.selection,M=a.dom;/^ | $/.test(c)&&(c=function(t){function e(t){return i[t]&&3==i[t].nodeType}var n,i,o;return o=(n=C.getRng(!0)).startOffset,3==(i=n.startContainer).nodeType&&(o>0?t=t.replace(/^&nbsp;/," "):e("previousSibling")||(t=t.replace(/^ /,"&nbsp;")),o<i.length?t=t.replace(/&nbsp;(<br>|)$/," "):e("nextSibling")||(t=t.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),t}(c)),d=a.parser,w=u.merge,h=new n({validate:a.settings.validate},a.schema),_='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',a.fire("BeforeSetContent",m={content:c,format:"html",selection:!0}),-1==(c=m.content).indexOf("{$caret}")&&(c+="{$caret}"),c=c.replace(/\{\$caret\}/,_);var T=(y=C.getRng()).startContainer||(y.parentElement?y.parentElement():null),k=a.getBody();T===k&&C.isCollapsed()&&M.isBlock(k.firstChild)&&function(t){return t&&!a.schema.getShortEndedElements()[t.nodeName]}(k.firstChild)&&M.isEmpty(k.firstChild)&&((y=M.createRng()).setStart(k.firstChild,0),y.setEnd(k.firstChild,0),C.setRng(y)),C.isCollapsed()||(a.selection.setRng(a.selection.getRng()),a.getDoc().execCommand("Delete",!1,null),function(){var t,e,n;n=(t=C.getRng(!0)).startOffset,3==(e=t.startContainer).nodeType&&t.collapsed&&(" "===e.data[n]?(e.deleteData(n,1),/[\u00a0| ]$/.test(c)||(c+=" ")):" "===e.data[n-1]&&(e.deleteData(n-1,1),/[\u00a0| ]$/.test(c)||(c=" "+c)))}());var A={context:(f=C.getNode()).nodeName.toLowerCase(),data:u.data};if(g=d.parse(c,A),!0===u.paste&&s.isListFragment(g)&&s.isParentBlockLi(M,f))return y=s.insertAtCaret(h,M,a.selection.getRng(!0),g),a.selection.setRng(y),void a.fire("SetContent",m);if(function(t){for(var e=t;e=e.walk();)1===e.type&&e.attr("data-mce-fragment","1")}(g),"mce_marker"==(x=g.lastChild).attr("id"))for(v=x,x=x.prev;x;x=x.walk(!0))if(3==x.type||!M.isBlock(x.name)){a.schema.isValidChild(x.parent.name,"span")&&x.parent.insert(v,x,"br"===x.name);break}if(a._selectionOverrides.showBlockCaretContainer(f),A.invalid){for(C.setContent(_),f=C.getNode(),p=a.getBody(),9==f.nodeType?f=x=p:x=f;x!==p;)f=x,x=x.parentNode;c=f==p?p.innerHTML:M.getOuterHTML(f),c=h.serialize(d.parse(c.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return h.serialize(g)}))),f==p?M.setHTML(p,c):M.setOuterHTML(f,c)}else c=h.serialize(g),function(t,e,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(t.dom.createFragment(e),n);else{var i=n.firstChild;!i||i===n.lastChild&&"BR"===i.nodeName?t.dom.setHTML(n,e):t.selection.setContent(e)}}(a,c,f);(function(){if(w){var t=a.getBody(),n=new r(M);e.each(M.select("*[data-mce-fragment]"),function(e){for(var i=e.parentNode;i&&i!=t;i=i.parentNode)S[e.nodeName.toLowerCase()]&&n.compare(i,e)&&M.remove(e,!0)})}})(),function(e){var n,r,s;if(e){if(C.scrollIntoView(e),n=function(t){for(var e=a.getBody();t&&t!==e;t=t.parentNode)if("false"===a.dom.getContentEditable(t))return t;return null}(e))return M.remove(e),void C.select(n);y=M.createRng(),(x=e.previousSibling)&&3==x.nodeType?(y.setStart(x,x.nodeValue.length),t.ie||(b=e.nextSibling)&&3==b.nodeType&&(x.appendData(b.data),b.parentNode.removeChild(b))):(y.setStartBefore(e),y.setEndBefore(e)),r=M.getParent(e,M.isBlock),M.remove(e),r&&M.isEmpty(r)&&(a.$(r).empty(),y.setStart(r,0),y.setEnd(r,0),l(r)||function(t){return!!t.getAttribute("data-mce-fragment")}(r)||!(s=function(t){var e=o.fromRangeStart(t);if(e=new i(a.getBody()).next(e))return e.toRange()}(y))?M.add(r,M.create("br",{"data-mce-bogus":"1"})):(y=s,M.remove(r))),C.setRng(y)}}(M.get("mce_marker")),function(t){e.each(t.getElementsByTagName("*"),function(t){t.removeAttribute("data-mce-fragment")})}(a.getBody()),a.fire("SetContent",m),a.addVisual()},u=function(t){var n;return"string"!=typeof t?(n=e.extend({paste:t.paste,data:{paste:t.paste}},t),{content:t.content,details:n}):{content:t,details:{}}};return{insertAtCaret:function(t,e){var n=u(e);c(t,n.content,n.details)}}}),n(rt,[l,h,M,g,ot,w],function(t,n,i,o,r,a){var s=n.each,l=n.extend,c=n.map,u=n.inArray,d=n.explode,h=t.ie&&t.ie<11,f=!0;return function(n){function p(t){var e;if(!n.quirks.isHidden()){if(t=t.toLowerCase(),e=M.state[t])return e(t);try{return n.getDoc().queryCommandState(t)}catch(i){}return!1}}function g(t,e){e=e||"exec",s(t,function(t,n){s(n.toLowerCase().split(","),function(n){M[e][n]=t})})}function m(t,i,o){return i===e&&(i=!1),o===e&&(o=null),n.getDoc().execCommand(t,i,o)}function v(t){return S.match(t)}function y(t,i){S.toggle(t,i?{value:i}:e),n.nodeChanged()}function x(t){C=w.getBookmark(t)}function b(){w.moveToBookmark(C)}var _,w,S,C,M={state:{},exec:{},value:{}},T=n.settings;n.on("PreInit",function(){_=n.dom,w=n.selection,T=n.settings,S=n.formatter}),l(this,{execCommand:function(t,e,i,o){var r,a,l=0;if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||o&&o.skip_focus||n.focus(),(o=n.fire("BeforeExecCommand",{command:t,ui:e,value:i})).isDefaultPrevented())return!1;if(a=t.toLowerCase(),r=M.exec[a])return r(a,e,i),n.fire("ExecCommand",{command:t,ui:e,value:i}),!0;if(s(n.plugins,function(o){if(o.execCommand&&o.execCommand(t,e,i))return n.fire("ExecCommand",{command:t,ui:e,value:i}),l=!0,!1}),l)return l;if(n.theme&&n.theme.execCommand&&n.theme.execCommand(t,e,i))return n.fire("ExecCommand",{command:t,ui:e,value:i}),!0;try{l=n.getDoc().execCommand(t,e,i)}catch(c){}return!!l&&(n.fire("ExecCommand",{command:t,ui:e,value:i}),!0)},queryCommandState:p,queryCommandValue:function(t){var e;if(!n.quirks.isHidden()){if(t=t.toLowerCase(),e=M.value[t])return e(t);try{return n.getDoc().queryCommandValue(t)}catch(i){}}},queryCommandSupported:function(t){if(t=t.toLowerCase(),M.exec[t])return!0;try{return n.getDoc().queryCommandSupported(t)}catch(e){}return!1},addCommands:g,addCommand:function(t,e,i){t=t.toLowerCase(),M.exec[t]=function(t,o,r,a){return e.call(i||n,o,r,a)}},addQueryStateHandler:function(t,e,i){t=t.toLowerCase(),M.state[t]=function(){return e.call(i||n)}},addQueryValueHandler:function(t,e,i){t=t.toLowerCase(),M.value[t]=function(){return e.call(i||n)}},hasCustomCommand:function(t){return t=t.toLowerCase(),!!M.exec[t]}}),g({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){n.undoManager.add()},"Cut,Copy,Paste":function(e){var i,o=n.getDoc();try{m(e)}catch(r){i=f}if("paste"!==e||o.queryCommandEnabled(e)||(i=!0),i||!o.queryCommandSupported(e)){var a=n.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");t.mac&&(a=a.replace(/Ctrl\+/g,"⌘+")),n.notificationManager.open({text:a,type:"error"})}},unlink:function(){if(w.isCollapsed()){var t=n.dom.getParent(n.selection.getStart(),"a");t&&n.dom.remove(t,!0)}else S.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(t){var e=t.substring(7);"full"==e&&(e="justify"),s("left,center,right,justify".split(","),function(t){e!=t&&S.remove("align"+t)}),"none"!=e&&y("align"+e)},"InsertUnorderedList,InsertOrderedList":function(t){var e,n;m(t),(e=_.getParent(w.getNode(),"ol,ul"))&&/^(H[1-6]|P|ADDRESS|PRE)$/.test((n=e.parentNode).nodeName)&&(x(),_.split(n,e),b())},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(t){y(t)},"ForeColor,HiliteColor,FontName":function(t,e,n){y(t,n)},FontSize:function(t,e,n){var i,o;n>=1&&n<=7&&(o=d(T.font_size_style_values),n=(i=d(T.font_size_classes))?i[n-1]||n:o[n-1]||n),y(t,n)},RemoveFormat:function(t){S.remove(t)},mceBlockQuote:function(){y("blockquote")},FormatBlock:function(t,e,n){return y(n||"p")},mceCleanup:function(){var t=w.getBookmark();n.setContent(n.getContent({cleanup:f}),{cleanup:f}),w.moveToBookmark(t)},mceRemoveNode:function(t,e,i){var o=i||w.getNode();o!=n.getBody()&&(x(),n.dom.remove(o,f),b())},mceSelectNodeDepth:function(t,e,i){var o=0;_.getParent(w.getNode(),function(t){if(1==t.nodeType&&o++==i)return w.select(t),!1},n.getBody())},mceSelectNode:function(t,e,n){w.select(n)},mceInsertContent:function(t,e,i){r.insertAtCaret(n,i)},mceInsertRawHTML:function(t,e,i){w.setContent("tiny_mce_marker"),n.setContent(n.getContent().replace(/tiny_mce_marker/g,function(){return i}))},mceToggleFormat:function(t,e,n){y(n)},mceSetContent:function(t,e,i){n.setContent(i)},"Indent,Outdent":function(t){var e,i,o;i=/[a-z%]+$/i.exec(e=T.indentation),e=parseInt(e,10),p("InsertUnorderedList")||p("InsertOrderedList")?m(t):(T.forced_root_block||_.getParent(w.getNode(),_.isBlock)||S.apply("div"),s(w.getSelectedBlocks(),function(r){if("false"!==_.getContentEditable(r)&&"LI"!==r.nodeName){var a=n.getParam("indent_use_margin",!1)?"margin":"padding";a="TABLE"===r.nodeName?"margin":a,a+="rtl"==_.getStyle(r,"direction",!0)?"Right":"Left","outdent"==t?(o=Math.max(0,parseInt(r.style[a]||0,10)-e),_.setStyle(r,a,o?o+i:"")):(o=parseInt(r.style[a]||0,10)+e+i,_.setStyle(r,a,o))}}))},mceRepaint:function(){},InsertHorizontalRule:function(){n.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual,n.addVisual()},mceReplaceContent:function(t,e,i){n.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,w.getContent({format:"text"})))},mceInsertLink:function(t,e,n){var i;"string"==typeof n&&(n={href:n}),i=_.getParent(w.getNode(),"a"),n.href=n.href.replace(" ","%20"),i&&n.href||S.remove("link"),n.href&&S.apply("link",n,i)},selectAll:function(){var t,e=_.getRoot();if(w.getRng().setStart){var n=_.getParent(w.getStart(),a.isContentEditableTrue);n&&((t=_.createRng()).selectNodeContents(n),w.setRng(t))}else(t=w.getRng()).item||(t.moveToElementText(e),t.select())},delete:function(){m("Delete");var t=n.getBody();_.isEmpty(t)&&(n.setContent(""),t.firstChild&&_.isBlock(t.firstChild)?n.selection.setCursorLocation(t.firstChild,0):n.selection.setCursorLocation(t,0))},mceNewDocument:function(){n.setContent("")},InsertLineBreak:function(t,e,r){var a,s,l,c=r,u=w.getRng(!0);new i(_).normalize(u);var d=u.startOffset,p=u.startContainer;if(1==p.nodeType&&p.hasChildNodes()){var g=d>p.childNodes.length-1;p=p.childNodes[Math.min(d,p.childNodes.length-1)]||p,d=g&&3==p.nodeType?p.nodeValue.length:0}var m=_.getParent(p,_.isBlock),v=m?m.nodeName.toUpperCase():"",y=m?_.getParent(m.parentNode,_.isBlock):null,x=y?y.nodeName.toUpperCase():"";"LI"!=x||c&&c.ctrlKey||(m=y,v=x),p&&3==p.nodeType&&d>=p.nodeValue.length&&(h||function(){for(var t,e=new o(p,m),i=n.schema.getNonEmptyElements();t=e.next();)if(i[t.nodeName.toLowerCase()]||t.length>0)return!0}()||(a=_.create("br"),u.insertNode(a),u.setStartAfter(a),u.setEndAfter(a),s=!0)),a=_.create("br"),u.insertNode(a);var b=_.doc.documentMode;return h&&"PRE"==v&&(!b||b<8)&&a.parentNode.insertBefore(_.doc.createTextNode("\r"),a),l=_.create("span",{},"&nbsp;"),a.parentNode.insertBefore(l,a),w.scrollIntoView(l),_.remove(l),s?(u.setStartBefore(a),u.setEndBefore(a)):(u.setStartAfter(a),u.setEndAfter(a)),w.setRng(u),n.undoManager.add(),f}}),g({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(t){var e="align"+t.substring(7),n=w.isCollapsed()?[_.getParent(w.getNode(),_.isBlock)]:w.getSelectedBlocks(),i=c(n,function(t){return!!S.matchNode(t,e)});return-1!==u(i,f)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(t){return v(t)},mceBlockQuote:function(){return v("blockquote")},Outdent:function(){var t;if(T.inline_styles){if((t=_.getParent(w.getStart(),_.isBlock))&&parseInt(t.style.paddingLeft,10)>0)return f;if((t=_.getParent(w.getEnd(),_.isBlock))&&parseInt(t.style.paddingLeft,10)>0)return f}return p("InsertUnorderedList")||p("InsertOrderedList")||!T.inline_styles&&!!_.getParent(w.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(t){var e=_.getParent(w.getNode(),"ul,ol");return e&&("insertunorderedlist"===t&&"UL"===e.tagName||"insertorderedlist"===t&&"OL"===e.tagName)}},"state"),g({"FontSize,FontName":function(t){var e,n=0;return(e=_.getParent(w.getNode(),"span"))&&(n="fontsize"==t?e.style.fontSize:e.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),g({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}})}}),n(at,[h],function(t){function e(t,r){var a,s,l=this;if(t=i(t),a=(r=l.settings=r||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))l.source=t;else{var c=0===t.indexOf("//");0!==t.indexOf("/")||c||(t=(a&&a.protocol||"http")+"://mce_host"+t),/^[\w\-]*:?\/\//.test(t)||(s=r.base_uri?r.base_uri.path:new e(location.href).directory,""===r.base_uri.protocol?t="//mce_host"+l.toAbsPath(s,t):(t=/([^#?]*)([#?]?.*)/.exec(t),t=(a&&a.protocol||"http")+"://mce_host"+l.toAbsPath(s,t[1])+t[2])),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),n(o,function(e,n){var i=t[n];i&&(i=i.replace(/\(mce_at\)/g,"@@")),l[e]=i}),a&&(l.protocol||(l.protocol=a.protocol),l.userInfo||(l.userInfo=a.userInfo),l.port||"mce_host"!==l.host||(l.port=a.port),l.host&&"mce_host"!==l.host||(l.host=a.host),l.source=""),c&&(l.protocol="")}}var n=t.each,i=t.trim,o="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),r={ftp:21,http:80,https:443,mailto:25};return e.prototype={setPath:function(t){var e=this;t=/^(.*?)\/?(\w+)?$/.exec(t),e.path=t[0],e.directory=t[1],e.file=t[2],e.source="",e.getURI()},toRelative:function(t){var n,i=this;if("./"===t)return t;if("mce_host"!=(t=new e(t,{base_uri:i})).host&&i.host!=t.host&&t.host||i.port!=t.port||i.protocol!=t.protocol&&""!==t.protocol)return t.getURI();var o=i.getURI(),r=t.getURI();return o==r||"/"==o.charAt(o.length-1)&&o.substr(0,o.length-1)==r?o:(n=i.toRelPath(i.path,t.path),t.query&&(n+="?"+t.query),t.anchor&&(n+="#"+t.anchor),n)},toAbsolute:function(t,n){return(t=new e(t,{base_uri:this})).getURI(n&&this.isSameOrigin(t))},isSameOrigin:function(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;var e=r[this.protocol];if(e&&(this.port||e)==(t.port||e))return!0}return!1},toRelPath:function(t,e){var n,i,o,r=0,a="";if(t=(t=t.substring(0,t.lastIndexOf("/"))).split("/"),n=e.split("/"),t.length>=n.length)for(i=0,o=t.length;i<o;i++)if(i>=n.length||t[i]!=n[i]){r=i+1;break}if(t.length<n.length)for(i=0,o=n.length;i<o;i++)if(i>=t.length||t[i]!=n[i]){r=i+1;break}if(1===r)return e;for(i=0,o=t.length-(r-1);i<o;i++)a+="../";for(i=r-1,o=n.length;i<o;i++)a+=i!=r-1?"/"+n[i]:n[i];return a},toAbsPath:function(t,e){var i,o,r,a=0,s=[];for(o=/\/$/.test(e)?"/":"",t=t.split("/"),e=e.split("/"),n(t,function(t){t&&s.push(t)}),t=s,i=e.length-1,s=[];i>=0;i--)0!==e[i].length&&"."!==e[i]&&(".."!==e[i]?a>0?a--:s.push(e[i]):a++);return 0!==(r=(i=t.length-a)<=0?s.reverse().join("/"):t.slice(0,i).join("/")+"/"+s.reverse().join("/")).indexOf("/")&&(r="/"+r),o&&r.lastIndexOf("/")!==r.length-1&&(r+=o),r},getURI:function(t){var e,n=this;return n.source&&!t||(e="",t||(e+=n.protocol?n.protocol+"://":"//",n.userInfo&&(e+=n.userInfo+"@"),n.host&&(e+=n.host),n.port&&(e+=":"+n.port)),n.path&&(e+=n.path),n.query&&(e+="?"+n.query),n.anchor&&(e+="#"+n.anchor),n.source=e),n.source}},e.parseDataUri=function(t){var e,n;return t=decodeURIComponent(t).split(","),(n=/data:([^;]+)/.exec(t[0]))&&(e=n[1]),{type:e,data:t[1]}},e.getDocumentBaseUrl=function(t){var e;return e=0!==t.protocol.indexOf("http")&&"file:"!==t.protocol?t.href:t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/")),e},e}),n(st,[h],function(t){function e(){}var n,i,o=t.each,r=t.extend;return e.extend=n=function(t){function e(){var t,e,n,o=this;if(!i&&(o.init&&o.init.apply(o,arguments),e=o.Mixins))for(t=e.length;t--;)(n=e[t]).init&&n.init.apply(o,arguments)}function a(){return this}function s(t,e){return function(){var n,i=this,o=i._super;return i._super=d[t],n=e.apply(i,arguments),i._super=o,n}}var l,c,u,d=this.prototype;for(c in i=!0,l=new this,i=!1,t.Mixins&&(o(t.Mixins,function(e){for(var n in e)"init"!==n&&(t[n]=e[n])}),d.Mixins&&(t.Mixins=d.Mixins.concat(t.Mixins))),t.Methods&&o(t.Methods.split(","),function(e){t[e]=a}),t.Properties&&o(t.Properties.split(","),function(e){var n="_"+e;t[e]=function(t){var e=this;return void 0!==t?(e[n]=t,e):e[n]}}),t.Statics&&o(t.Statics,function(t,n){e[n]=t}),t.Defaults&&d.Defaults&&(t.Defaults=r({},d.Defaults,t.Defaults)),t)l[c]="function"==typeof(u=t[c])&&d[c]?s(c,u):u;return e.prototype=l,e.constructor=e,e.extend=n,e},e}),n(lt,[h],function(t){function e(e){function n(){return!1}function i(){return!0}function o(e,i,o,r){var a,u,d;if(!1===i&&(i=n),i)for(i={func:i},r&&t.extend(i,r),d=(u=e.toLowerCase().split(" ")).length;d--;)(a=c[e=u[d]])||(a=c[e]=[],s(e,!0)),o?a.unshift(i):a.push(i);return l}function r(t,e){var n,i,o,r,a;if(t)for(n=(r=t.toLowerCase().split(" ")).length;n--;){if(i=c[t=r[n]],!t){for(o in c)s(o,!1),delete c[o];return l}if(i){if(e)for(a=i.length;a--;)i[a].func===e&&(i=i.slice(0,a).concat(i.slice(a+1)),c[t]=i);else i.length=0;i.length||(s(t,!1),delete c[t])}}else{for(t in c)s(t,!1);c={}}return l}var a,s,l=this,c={};a=(e=e||{}).scope||l,s=e.toggleEvent||n,l.fire=function(t,o){var s,l,u,d;if(t=t.toLowerCase(),(o=o||{}).type=t,o.target||(o.target=a),o.preventDefault||(o.preventDefault=function(){o.isDefaultPrevented=i},o.stopPropagation=function(){o.isPropagationStopped=i},o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=i},o.isDefaultPrevented=n,o.isPropagationStopped=n,o.isImmediatePropagationStopped=n),e.beforeFire&&e.beforeFire(o),s=c[t])for(l=0,u=s.length;l<u;l++){if((d=s[l]).once&&r(t,d.func),o.isImmediatePropagationStopped())return o.stopPropagation(),o;if(!1===d.func.call(a,o))return o.preventDefault(),o}return o},l.on=o,l.off=r,l.once=function(t,e,n){return o(t,e,n,{once:!0})},l.has=function(t){return t=t.toLowerCase(),!(!c[t]||0===c[t].length)}}var n=t.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," ");return e.isNative=function(t){return!!n[t.toLowerCase()]},e}),n(ct,[],function(){function t(t){this.create=t.create}return t.create=function(e,n){return new t({create:function(t,i){function o(e){t.set(i,e.value)}var r;return t.on("change:"+i,function(t){e.set(n,t.value)}),e.on("change:"+n,o),(r=t._bindings)||(r=t._bindings=[],t.on("destroy",function(){for(var t=r.length;t--;)r[t]()})),r.push(function(){e.off("change:"+n,o)}),e.get(n)}})},t}),n(ut,[lt],function(t){function e(e){return e._eventDispatcher||(e._eventDispatcher=new t({scope:e,toggleEvent:function(n,i){t.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,i)}})),e._eventDispatcher}return{fire:function(t,n,i){var o=this;if(o.removed&&"remove"!==t)return n;if(n=e(o).fire(t,n,i),!1!==i&&o.parent)for(var r=o.parent();r&&!n.isPropagationStopped();)r.fire(t,n,!1),r=r.parent();return n},on:function(t,n,i){return e(this).on(t,n,i)},off:function(t,n){return e(this).off(t,n)},once:function(t,n){return e(this).once(t,n)},hasEventListeners:function(t){return e(this).has(t)}}}),n(dt,[ct,ut,st,h],function(t,e,n,i){function o(t){return t.nodeType>0}function r(t,e){var n,a;if(t===e)return!0;if(null===t||null===e)return t===e;if("object"!=typeof t||"object"!=typeof e)return t===e;if(i.isArray(e)){if(t.length!==e.length)return!1;for(n=t.length;n--;)if(!r(t[n],e[n]))return!1}if(o(t)||o(e))return t===e;for(n in a={},e){if(!r(t[n],e[n]))return!1;a[n]=!0}for(n in t)if(!a[n]&&!r(t[n],e[n]))return!1;return!0}return n.extend({Mixins:[e],init:function(e){var n,i;for(n in e=e||{})(i=e[n])instanceof t&&(e[n]=i.create(this,n));this.data=e},set:function(e,n){var i,o,a=this.data[e];if(n instanceof t&&(n=n.create(this,e)),"object"==typeof e){for(i in e)this.set(i,e[i]);return this}return r(a,n)||(this.data[e]=n,this.fire("change:"+e,o={target:this,name:e,value:n,oldValue:a}),this.fire("change",o)),this},get:function(t){return this.data[t]},has:function(t){return t in this.data},bind:function(e){return t.create(this,e)},destroy:function(){this.fire("destroy")}})}),n(ht,[st],function(t){var e,n=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,o=/^\s*|\s*$/g,r=t.extend({init:function(t){function e(t){var e;if(t)return(t=/(?:not\((.+)\))|(.+)/i.exec(t))[1]?(e=a(t[1],[]),function(t){return!s(t,e)}):(t=t[2],function(e,n,i){return"first"===t?0===n:"last"===t?n===i-1:"even"===t?n%2==0:"odd"===t?n%2==1:!!e[t]&&e[t]()})}function r(t,i,r){function a(t){t&&i.push(t)}var s;return a(function(t){if(t)return t=t.toLowerCase(),function(e){return"*"===t||e.type===t}}((s=n.exec(t.replace(o,"")))[1])),a(function(t){if(t)return function(e){return e._name===t}}(s[2])),a(function(t){if(t)return t=t.split("."),function(e){for(var n=t.length;n--;)if(!e.classes.contains(t[n]))return!1;return!0}}(s[3])),a(function(t,e,n){if(t)return function(i){var o=i[t]?i[t]():"";return e?"="===e?o===n:"*="===e?o.indexOf(n)>=0:"~="===e?(" "+o+" ").indexOf(" "+n+" ")>=0:"!="===e?o!=n:"^="===e?0===o.indexOf(n):"$="===e&&o.substr(o.length-n.length)===n:!!n}}(s[4],s[5],s[6])),a(e(s[7])),i.pseudo=!!s[7],i.direct=r,i}function a(t,e){var n,o,s,l=[];do{if(i.exec(""),(o=i.exec(t))&&(t=o[3],l.push(o[1]),o[2])){n=o[3];break}}while(o);for(n&&a(n,e),t=[],s=0;s<l.length;s++)">"!=l[s]&&t.push(r(l[s],[],">"===l[s-1]));return e.push(t),e}var s=this.match;this._selectors=a(t,[])},match:function(t,e){var n,i,o,r,a,s,l,c,u,d,h,f,p;for(n=0,i=(e=e||this._selectors).length;n<i;n++){for(p=t,f=0,o=(r=(a=e[n]).length)-1;o>=0;o--)for(c=a[o];p;){if(c.pseudo)for(u=d=(h=p.parent().items()).length;u--&&h[u]!==p;);for(s=0,l=c.length;s<l;s++)if(!c[s](p,u,d)){s=l+1;break}if(s===l){f++;break}if(o===r-1)break;p=p.parent()}if(f===r)return!0}return!1},find:function(t){function n(t,e,i){var o,r,s,l,c,u=e[i];for(o=0,r=t.length;o<r;o++){for(c=t[o],s=0,l=u.length;s<l;s++)if(!u[s](c,o,r)){s=l+1;break}if(s===l)i==e.length-1?a.push(c):c.items&&n(c.items(),e,i+1);else if(u.direct)return;c.items&&n(c.items(),e,i)}}var i,o,a=[],s=this._selectors;if(t.items){for(i=0,o=s.length;i<o;i++)n(t.items(),s[i],0);o>1&&(a=function(t){for(var e,n=[],i=t.length;i--;)(e=t[i]).__checked||(n.push(e),e.__checked=1);for(i=n.length;i--;)delete n[i].__checked;return n}(a))}return e||(e=r.Collection),new e(a)}});return r}),n(ft,[h,ht,st],function(t,e,n){var i,o,r=Array.prototype.push,a=Array.prototype.slice;return o={length:0,init:function(t){t&&this.add(t)},add:function(e){var n=this;return t.isArray(e)?r.apply(n,e):e instanceof i?n.add(e.toArray()):r.call(n,e),n},set:function(t){var e,n=this,i=n.length;for(n.length=0,n.add(t),e=n.length;e<i;e++)delete n[e];return n},filter:function(t){var n,o,r,a,s=[];for("string"==typeof t?(t=new e(t),a=function(e){return t.match(e)}):a=t,n=0,o=this.length;n<o;n++)a(r=this[n])&&s.push(r);return new i(s)},slice:function(){return new i(a.apply(this,arguments))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},each:function(e){return t.each(this,e),this},toArray:function(){return t.toArray(this)},indexOf:function(t){for(var e=this.length;e--&&this[e]!==t;);return e},reverse:function(){return new i(t.toArray(this).reverse())},hasClass:function(t){return!!this[0]&&this[0].classes.contains(t)},prop:function(t,e){var n,i=this;return void 0!==e?(i.each(function(n){n[t]&&n[t](e)}),i):(n=i[0])&&n[t]?n[t]():void 0},exec:function(e){var n=this,i=t.toArray(arguments).slice(1);return n.each(function(t){t[e]&&t[e].apply(t,i)}),n},remove:function(){for(var t=this.length;t--;)this[t].remove();return this},addClass:function(t){return this.each(function(e){e.classes.add(t)})},removeClass:function(t){return this.each(function(e){e.classes.remove(t)})}},t.each("fire on off show hide append prepend before after reflow".split(" "),function(e){o[e]=function(){var n=t.toArray(arguments);return this.each(function(t){e in t&&t[e].apply(t,n)}),this}}),t.each("text name disabled active selected checked visible parent value data".split(" "),function(t){o[t]=function(e){return this.prop(t,e)}}),i=n.extend(o),e.Collection=i,i}),n(pt,[l,h,x],function(t,e,n){var i=0,o={id:function(){return"mceu_"+i++},create:function(t,i,o){var r=document.createElement(t);return n.DOM.setAttribs(r,i),"string"==typeof o?r.innerHTML=o:e.each(o,function(t){t.nodeType&&r.appendChild(t)}),r},createFragment:function(t){return n.DOM.createFragment(t)},getWindowSize:function(){return n.DOM.getViewPort()},getSize:function(t){var e,n;if(t.getBoundingClientRect){var i=t.getBoundingClientRect();e=Math.max(i.width||i.right-i.left,t.offsetWidth),n=Math.max(i.height||i.bottom-i.bottom,t.offsetHeight)}else e=t.offsetWidth,n=t.offsetHeight;return{width:e,height:n}},getPos:function(t,e){return n.DOM.getPos(t,e||o.getContainer())},getContainer:function(){return t.container?t.container:document.body},getViewPort:function(t){return n.DOM.getViewPort(t)},get:function(t){return document.getElementById(t)},addClass:function(t,e){return n.DOM.addClass(t,e)},removeClass:function(t,e){return n.DOM.removeClass(t,e)},hasClass:function(t,e){return n.DOM.hasClass(t,e)},toggleClass:function(t,e,i){return n.DOM.toggleClass(t,e,i)},css:function(t,e,i){return n.DOM.setStyle(t,e,i)},getRuntimeStyle:function(t,e){return n.DOM.getStyle(t,e,!0)},on:function(t,e,i,o){return n.DOM.bind(t,e,i,o)},off:function(t,e,i){return n.DOM.unbind(t,e,i)},fire:function(t,e,i){return n.DOM.fire(t,e,i)},innerHtml:function(t,e){n.DOM.setHTML(t,e)}};return o}),n(gt,[],function(){return{parseBox:function(t){var e;if(t)return"number"==typeof t?{top:t=t||0,left:t,bottom:t,right:t}:(1===(e=(t=t.split(" ")).length)?t[1]=t[2]=t[3]=t[0]:2===e?(t[2]=t[0],t[3]=t[1]):3===e&&(t[3]=t[1]),{top:parseInt(t[0],10)||0,right:parseInt(t[1],10)||0,bottom:parseInt(t[2],10)||0,left:parseInt(t[3],10)||0})},measureBox:function(t,e){function n(e){var n=document.defaultView;return n?(e=e.replace(/[A-Z]/g,function(t){return"-"+t}),n.getComputedStyle(t,null).getPropertyValue(e)):t.currentStyle[e]}function i(t){var e=parseFloat(n(t),10);return isNaN(e)?0:e}return{top:i(e+"TopWidth"),right:i(e+"RightWidth"),bottom:i(e+"BottomWidth"),left:i(e+"LeftWidth")}}}}),n(mt,[h],function(t){function e(){}function n(t){this.cls=[],this.cls._map={},this.onchange=t||e,this.prefix=""}return t.extend(n.prototype,{add:function(t){return t&&!this.contains(t)&&(this.cls._map[t]=!0,this.cls.push(t),this._change()),this},remove:function(t){if(this.contains(t)){for(var e=0;e<this.cls.length&&this.cls[e]!==t;e++);this.cls.splice(e,1),delete this.cls._map[t],this._change()}return this},toggle:function(t,e){var n=this.contains(t);return n!==e&&(n?this.remove(t):this.add(t),this._change()),this},contains:function(t){return!!this.cls._map[t]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),n.prototype.toString=function(){var t;if(this.clsValue)return this.clsValue;t="";for(var e=0;e<this.cls.length;e++)e>0&&(t+=" "),t+=this.prefix+this.cls[e];return t},n}),n(vt,[s],function(t){var e,n={};return{add:function(i){var o=i.parent();if(o){if(!o._layout||o._layout.isNative())return;n[o._id]||(n[o._id]=o),e||(e=!0,t.requestAnimationFrame(function(){var t,i;for(t in e=!1,n)(i=n[t]).state.get("rendered")&&i.reflow();n={}},document.body))}},remove:function(t){n[t._id]&&delete n[t._id]}}}),n(yt,[st,h,lt,dt,ft,pt,f,gt,mt,vt],function(t,e,n,i,o,r,a,s,l,c){function u(t){return t._eventDispatcher||(t._eventDispatcher=new n({scope:t,toggleEvent:function(e,i){i&&n.isNative(e)&&(t._nativeEvents||(t._nativeEvents={}),t._nativeEvents[e]=!0,t.state.get("rendered")&&d(t))}})),t._eventDispatcher}function d(t){function e(e){var n=t.getParentCtrl(e.target);n&&n.fire(e.type,e)}function n(){var t=c._lastHoverCtrl;t&&(t.fire("mouseleave",{target:t.getEl()}),t.parents().each(function(t){t.fire("mouseleave",{target:t.getEl()})}),c._lastHoverCtrl=null)}function i(e){var n,i,o,r=t.getParentCtrl(e.target),a=c._lastHoverCtrl,s=0;if(r!==a){if(c._lastHoverCtrl=r,(i=r.parents().toArray().reverse()).push(r),a){for((o=a.parents().toArray().reverse()).push(a),s=0;s<o.length&&i[s]===o[s];s++);for(n=o.length-1;n>=s;n--)(a=o[n]).fire("mouseleave",{target:a.getEl()})}for(n=s;n<i.length;n++)(r=i[n]).fire("mouseenter",{target:r.getEl()})}}function o(e){e.preventDefault(),"mousewheel"==e.type?(e.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-.025*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=t.fire("wheel",e)}var r,s,l,c,u,d;if(u=t._nativeEvents){for((l=t.parents().toArray()).unshift(t),r=0,s=l.length;!c&&r<s;r++)c=l[r]._eventsRoot;for(c||(c=l[l.length-1]||t),t._eventsRoot=c,s=r,r=0;r<s;r++)l[r]._eventsRoot=c;var h=c._delegates;for(d in h||(h=c._delegates={}),u){if(!u)return!1;"wheel"!==d||p?("mouseenter"===d||"mouseleave"===d?c._hasMouseEnter||(a(c.getEl()).on("mouseleave",n).on("mouseover",i),c._hasMouseEnter=1):h[d]||(a(c.getEl()).on(d,e),h[d]=!0),u[d]=!1):f?a(t.getEl()).on("mousewheel",o):a(t.getEl()).on("DOMMouseScroll",o)}}}var h,f="onmousewheel"in document,p=!1,g="mce-",m=0,v={Statics:{classPrefix:g},isRtl:function(){return h.rtl},classPrefix:g,init:function(t){function n(t){var e;for(t=t.split(" "),e=0;e<t.length;e++)c.classes.add(t[e])}var o,r,c=this;c.settings=t=e.extend({},c.Defaults,t),c._id=t.id||"mceu_"+m++,c._aria={role:t.role},c._elmCache={},c.$=a,c.state=new i({visible:!0,active:!1,disabled:!1,value:""}),c.data=new i(t.data),c.classes=new l(function(){c.state.get("rendered")&&(c.getEl().className=this.toString())}),c.classes.prefix=c.classPrefix,(o=t.classes)&&(c.Defaults&&(r=c.Defaults.classes)&&o!=r&&n(r),n(o)),e.each("title text name visible disabled active value".split(" "),function(e){e in t&&c[e](t[e])}),c.on("click",function(){if(c.disabled())return!1}),c.settings=t,c.borderBox=s.parseBox(t.border),c.paddingBox=s.parseBox(t.padding),c.marginBox=s.parseBox(t.margin),t.hidden&&c.hide()},Properties:"parent,name",getContainerElm:function(){return r.getContainer()},getParentCtrl:function(t){for(var e,n=this.getRoot().controlIdLookup;t&&n&&!(e=n[t.id]);)t=t.parentNode;return e},initLayoutRect:function(){var t,e,n,i,o,a,l,c,u,d,h=this,f=h.settings,p=h.getEl();t=h.borderBox=h.borderBox||s.measureBox(p,"border"),h.paddingBox=h.paddingBox||s.measureBox(p,"padding"),h.marginBox=h.marginBox||s.measureBox(p,"margin"),d=r.getSize(p),o=(c=f.minWidth)||d.width,a=(u=f.minHeight)||d.height,n=f.width,i=f.height,l=void 0!==(l=f.autoResize)?l:!n&&!i;var g=t.left+t.right,m=t.top+t.bottom,v=f.maxWidth||65535,y=f.maxHeight||65535;return h._layoutRect=e={x:f.x||0,y:f.y||0,w:n=n||o,h:i=i||a,deltaW:g,deltaH:m,contentW:n-g,contentH:i-m,innerW:n-g,innerH:i-m,startMinWidth:c||0,startMinHeight:u||0,minW:Math.min(o,v),minH:Math.min(a,y),maxW:v,maxH:y,autoResize:l,scrollW:0},h._lastLayoutRect={},e},layoutRect:function(t){var e,n,i,o,r,a,s=this,l=s._layoutRect;return l||(l=s.initLayoutRect()),t?(i=l.deltaW,o=l.deltaH,t.x!==r&&(l.x=t.x),t.y!==r&&(l.y=t.y),t.minW!==r&&(l.minW=t.minW),t.minH!==r&&(l.minH=t.minH),(n=t.w)!==r&&(l.w=n=(n=n<l.minW?l.minW:n)>l.maxW?l.maxW:n,l.innerW=n-i),(n=t.h)!==r&&(l.h=n=(n=n<l.minH?l.minH:n)>l.maxH?l.maxH:n,l.innerH=n-o),(n=t.innerW)!==r&&(l.innerW=n=(n=n<l.minW-i?l.minW-i:n)>l.maxW-i?l.maxW-i:n,l.w=n+i),(n=t.innerH)!==r&&(l.innerH=n=(n=n<l.minH-o?l.minH-o:n)>l.maxH-o?l.maxH-o:n,l.h=n+o),t.contentW!==r&&(l.contentW=t.contentW),t.contentH!==r&&(l.contentH=t.contentH),(e=s._lastLayoutRect).x===l.x&&e.y===l.y&&e.w===l.w&&e.h===l.h||((a=h.repaintControls)&&a.map&&!a.map[s._id]&&(a.push(s),a.map[s._id]=!0),e.x=l.x,e.y=l.y,e.w=l.w,e.h=l.h),s):l},repaint:function(){var t,e,n,i,o,r,a,s,l,c,u=this;l=document.createRange?function(t){return t}:Math.round,t=u.getEl().style,r=(o=u.borderBox).left+o.right,a=o.top+o.bottom,(i=u._layoutRect).x!==(s=u._lastRepaintRect||{}).x&&(t.left=l(i.x)+"px",s.x=i.x),i.y!==s.y&&(t.top=l(i.y)+"px",s.y=i.y),i.w!==s.w&&(c=l(i.w-r),t.width=(c>=0?c:0)+"px",s.w=i.w),i.h!==s.h&&(c=l(i.h-a),t.height=(c>=0?c:0)+"px",s.h=i.h),u._hasBody&&i.innerW!==s.innerW&&(c=l(i.innerW),(n=u.getEl("body"))&&((e=n.style).width=(c>=0?c:0)+"px"),s.innerW=i.innerW),u._hasBody&&i.innerH!==s.innerH&&(c=l(i.innerH),(n=n||u.getEl("body"))&&((e=e||n.style).height=(c>=0?c:0)+"px"),s.innerH=i.innerH),u._lastRepaintRect=s,u.fire("repaint",{},!1)},updateLayoutRect:function(){var t=this;t.parent()._lastRect=null,r.css(t.getEl(),{width:"",height:""}),t._layoutRect=t._lastRepaintRect=t._lastLayoutRect=null,t.initLayoutRect()},on:function(t,e){var n=this;return u(n).on(t,function(t){var e,i;return"string"!=typeof t?t:function(o){return e||n.parentsAndSelf().each(function(n){var o=n.settings.callbacks;if(o&&(e=o[t]))return i=n,!1}),e?e.call(i,o):(o.action=t,void this.fire("execute",o))}}(e)),n},off:function(t,e){return u(this).off(t,e),this},fire:function(t,e,n){var i=this;if((e=e||{}).control||(e.control=i),e=u(i).fire(t,e),!1!==n&&i.parent)for(var o=i.parent();o&&!e.isPropagationStopped();)o.fire(t,e,!1),o=o.parent();return e},hasEventListeners:function(t){return u(this).has(t)},parents:function(t){var e,n=new o;for(e=this.parent();e;e=e.parent())n.add(e);return t&&(n=n.filter(t)),n},parentsAndSelf:function(t){return new o(this).add(this.parents(t))},next:function(){var t=this.parent().items();return t[t.indexOf(this)+1]},prev:function(){var t=this.parent().items();return t[t.indexOf(this)-1]},innerHtml:function(t){return this.$el.html(t),this},getEl:function(t){var e=t?this._id+"-"+t:this._id;return this._elmCache[e]||(this._elmCache[e]=a("#"+e)[0]),this._elmCache[e]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(t){}return this},blur:function(){return this.getEl().blur(),this},aria:function(t,e){var n=this,i=n.getEl(n.ariaTarget);return void 0===e?n._aria[t]:(n._aria[t]=e,n.state.get("rendered")&&i.setAttribute("role"==t?t:"aria-"+t,e),n)},encode:function(t,e){return!1!==e&&(t=this.translate(t)),(t||"").replace(/[&<>"]/g,function(t){return"&#"+t.charCodeAt(0)+";"})},translate:function(t){return h.translate?h.translate(t):t},before:function(t){var e=this,n=e.parent();return n&&n.insert(t,n.items().indexOf(e),!0),e},after:function(t){var e=this,n=e.parent();return n&&n.insert(t,n.items().indexOf(e)),e},remove:function(){var t,e,n=this,i=n.getEl(),o=n.parent();if(n.items){var r=n.items().toArray();for(e=r.length;e--;)r[e].remove()}o&&o.items&&(t=[],o.items().each(function(e){e!==n&&t.push(e)}),o.items().set(t),o._lastRect=null),n._eventsRoot&&n._eventsRoot==n&&a(i).off();var s=n.getRoot().controlIdLookup;return s&&delete s[n._id],i&&i.parentNode&&i.parentNode.removeChild(i),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(t){return a(t).before(this.renderHtml()),this.postRender(),this},renderTo:function(t){return a(t||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var t,e,n,i,o,r=this,s=r.settings;for(i in r.$el=a(r.getEl()),r.state.set("rendered",!0),s)0===i.indexOf("on")&&r.on(i.substr(2),s[i]);if(r._eventsRoot){for(n=r.parent();!o&&n;n=n.parent())o=n._eventsRoot;if(o)for(i in o._nativeEvents)r._nativeEvents[i]=!0}d(r),s.style&&(t=r.getEl())&&(t.setAttribute("style",s.style),t.style.cssText=s.style),r.settings.border&&r.$el.css({"border-top-width":(e=r.borderBox).top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left});var l=r.getRoot();for(var u in l.controlIdLookup||(l.controlIdLookup={}),l.controlIdLookup[r._id]=r,r._aria)r.aria(u,r._aria[u]);!1===r.state.get("visible")&&(r.getEl().style.display="none"),r.bindStates(),r.state.on("change:visible",function(t){var e,n=t.value;r.state.get("rendered")&&(r.getEl().style.display=!1===n?"none":"",r.getEl().getBoundingClientRect()),(e=r.parent())&&(e._lastRect=null),r.fire(n?"show":"hide"),c.add(r)}),r.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(t){var e,n,i,o,r,a,s=this.getEl(),l=s.parentNode,c=function(t,e){var n,i,o=t;for(n=i=0;o&&o!=e&&o.nodeType;)n+=o.offsetLeft||0,i+=o.offsetTop||0,o=o.offsetParent;return{x:n,y:i}}(s,l);return e=c.x,n=c.y,i=s.offsetWidth,o=s.offsetHeight,r=l.clientWidth,a=l.clientHeight,"end"==t?(e-=r-i,n-=a-o):"center"==t&&(e-=r/2-i/2,n-=a/2-o/2),l.scrollLeft=e,l.scrollTop=n,this},getRoot:function(){for(var t,e=this,n=[];e;){if(e.rootControl){t=e.rootControl;break}n.push(e),t=e,e=e.parent()}t||(t=this);for(var i=n.length;i--;)n[i].rootControl=t;return t},reflow:function(){c.remove(this);var t=this.parent();return t._layout&&!t._layout.isNative()&&t.reflow(),this}};return e.each("text title visible disabled active value".split(" "),function(t){v[t]=function(e){return 0===arguments.length?this.state.get(t):(void 0!==e&&this.state.set(t,e),this)}}),h=t.extend(v)}),n(xt,[],function(){var t,e={};return{add:function(t,n){e[t.toLowerCase()]=n},has:function(t){return!!e[t.toLowerCase()]},create:function(n,i){var o,r,a;if(!t){for(r in a=tinymce.ui)e[r.toLowerCase()]=a[r];t=!0}if("string"==typeof n?(i=i||{}).type=n:n=(i=n).type,n=n.toLowerCase(),!(o=e[n]))throw new Error("Could not find control by type: "+n);return(o=new o(i)).type=n,o}}}),n(bt,[],function(){return function(t){function e(t){return t&&1===t.nodeType}function n(t){return e(t=t||v)?t.getAttribute("role"):null}function i(t){for(var e,i=t||v;i=i.parentNode;)if(e=n(i))return e}function o(t){var n=v;if(e(n))return n.getAttribute("aria-"+t)}function r(t){var e=t.tagName.toUpperCase();return"INPUT"==e||"TEXTAREA"==e||"SELECT"==e}function a(t){return!(!r(t)||t.hidden)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(n(t))}function s(t){var e=[];return function t(n){if(1==n.nodeType&&"none"!=n.style.display&&!n.disabled){a(n)&&e.push(n);for(var i=0;i<n.childNodes.length;i++)t(n.childNodes[i])}}(t||b.getEl()),e}function l(t){var e,n;(n=(t=t||y).parents().toArray()).unshift(t);for(var i=0;i<n.length&&!(e=n[i]).settings.ariaRoot;i++);return e}function c(t,e){return t<0?t=e.length-1:t>=e.length&&(t=0),e[t]&&e[t].focus(),t}function u(t,e){var n=-1,i=l();e=e||s(i.getEl());for(var o=0;o<e.length;o++)e[o]===v&&(n=o);i.lastAriaIndex=c(n+=t,e)}function d(){"tablist"==i()?u(-1,s(v.parentNode)):y.parent().submenu?g():u(-1)}function h(){var t=n(),e=i();"tablist"==e?u(1,s(v.parentNode)):"menuitem"==t&&"menu"==e&&o("haspopup")?m():u(1)}function f(){u(-1)}function p(){var t=n(),e=i();"menuitem"==t&&"menubar"==e?m():"button"==t&&o("haspopup")?m({key:"down"}):u(1)}function g(){y.fire("cancel")}function m(t){y.fire("click",{target:v,aria:t=t||{}})}var v,y,b=t.root;try{v=document.activeElement}catch(x){v=document.body}return y=b.getParentCtrl(v),b.on("keydown",function(t){function e(t,e){r(v)||"slider"!==n(v)&&!1!==e(t)&&t.preventDefault()}if(!t.isDefaultPrevented())switch(t.keyCode){case 37:e(t,d);break;case 39:e(t,h);break;case 38:e(t,f);break;case 40:e(t,p);break;case 27:g();break;case 14:case 13:case 32:e(t,m);break;case 9:!1!==function(t){if("tablist"==i()){var e=s(y.getEl("body"))[0];e&&e.focus()}else u(t.shiftKey?-1:1)}(t)&&t.preventDefault()}}),b.on("focusin",function(t){v=t.target,y=t.control}),{focusFirst:function(t){var e=l(t),n=s(e.getEl());c(e.settings.ariaRemember&&"lastAriaIndex"in e?e.lastAriaIndex:0,n)}}}}),n(_t,[yt,ft,ht,xt,bt,h,f,mt,vt],function(t,e,n,i,o,r,a,s,l){var c={};return t.extend({init:function(t){var n=this;n._super(t),(t=n.settings).fixed&&n.state.set("fixed",!0),n._items=new e,n.isRtl()&&n.classes.add("rtl"),n.bodyClasses=new s(function(){n.state.get("rendered")&&(n.getEl("body").className=this.toString())}),n.bodyClasses.prefix=n.classPrefix,n.classes.add("container"),n.bodyClasses.add("container-body"),t.containerCls&&n.classes.add(t.containerCls),n._layout=i.create((t.layout||"")+"layout"),n.add(n.settings.items?n.settings.items:n.render()),n._hasBody=!0},items:function(){return this._items},find:function(t){return(t=c[t]=c[t]||new n(t)).find(this)},add:function(t){var e=this;return e.items().add(e.create(t)).parent(e),e},focus:function(t){var e,n,i,o=this;return t&&(n=o.keyboardNav||o.parents().eq(-1)[0].keyboardNav)?void n.focusFirst(o):(i=o.find("*"),o.statusbar&&i.add(o.statusbar.items()),i.each(function(t){return t.settings.autofocus?(e=null,!1):void(t.canFocus&&(e=e||t))}),e&&e.focus(),o)},replace:function(t,e){for(var n,i=this.items(),o=i.length;o--;)if(i[o]===t){i[o]=e;break}o>=0&&((n=e.getEl())&&n.parentNode.removeChild(n),(n=t.getEl())&&n.parentNode.removeChild(n)),e.parent(this)},create:function(e){var n,o=this,a=[];return r.isArray(e)||(e=[e]),r.each(e,function(e){e&&(e instanceof t||("string"==typeof e&&(e={type:e}),n=r.extend({},o.settings.defaults,e),e.type=n.type=n.type||e.type||o.settings.defaultType||(n.defaults?n.defaults.type:null),e=i.create(n)),a.push(e))}),a},renderNew:function(){var t=this;return t.items().each(function(e,n){var i;e.parent(t),e.state.get("rendered")||((i=t.getEl("body")).hasChildNodes()&&n<=i.childNodes.length-1?a(i.childNodes[n]).before(e.renderHtml()):a(i).append(e.renderHtml()),e.postRender(),l.add(e))}),t._layout.applyClasses(t.items().filter(":visible")),t._lastRect=null,t},append:function(t){return this.add(t).renderNew()},prepend:function(t){var e=this;return e.items().set(e.create(t).concat(e.items().toArray())),e.renderNew()},insert:function(t,e,n){var i,o,r,a=this;return t=a.create(t),i=a.items(),!n&&e<i.length-1&&(e+=1),e>=0&&e<i.length&&(o=i.slice(0,e).toArray(),r=i.slice(e).toArray(),i.set(o.concat(t,r))),a.renderNew()},fromJSON:function(t){for(var e in t)this.find("#"+e).value(t[e]);return this},toJSON:function(){var t={};return this.find("*").each(function(e){var n=e.name(),i=e.value();n&&void 0!==i&&(t[n]=i)}),t},renderHtml:function(){var t=this,e=t._layout,n=this.settings.role;return t.preRender(),e.preRender(t),'<div id="'+t._id+'" class="'+t.classes+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+t._id+'-body" class="'+t.bodyClasses+'">'+(t.settings.html||"")+e.renderHtml(t)+"</div></div>"},postRender:function(){var t,e=this;return e.items().exec("postRender"),e._super(),e._layout.postRender(e),e.state.set("rendered",!0),e.settings.style&&e.$el.css(e.settings.style),e.settings.border&&e.$el.css({"border-top-width":(t=e.borderBox).top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left}),e.parent()||(e.keyboardNav=new o({root:e})),e},initLayoutRect:function(){var t=this,e=t._super();return t._layout.recalc(t),e},recalc:function(){var t=this,e=t._layoutRect,n=t._lastRect;if(!n||n.w!=e.w||n.h!=e.h)return t._layout.recalc(t),e=t.layoutRect(),t._lastRect={x:e.x,y:e.y,w:e.w,h:e.h},!0},reflow:function(){var e;if(l.remove(this),this.visible()){for(t.repaintControls=[],t.repaintControls.map={},this.recalc(),e=t.repaintControls.length;e--;)t.repaintControls[e].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),t.repaintControls=[]}return this}})}),n(wt,[f],function(t){function e(t){var e,n;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]}return function(n,i){function o(){return h.getElementById(i.handle||n)}var r,a,s,l,c,u,d,h=i.document||document;i=i||{},s=function(n){var s,f,p=function(t){var e,n,i,o,r,a,s,l=Math.max;return i=l((e=t.documentElement).scrollWidth,(n=t.body).scrollWidth),o=l(e.clientWidth,n.clientWidth),r=l(e.offsetWidth,n.offsetWidth),a=l(e.scrollHeight,n.scrollHeight),s=l(e.clientHeight,n.clientHeight),{width:i<r?o:i,height:a<l(e.offsetHeight,n.offsetHeight)?s:a}}(h);e(n),n.preventDefault(),a=n.button,s=o(),u=n.screenX,d=n.screenY,f=window.getComputedStyle?window.getComputedStyle(s,null).getPropertyValue("cursor"):s.runtimeStyle.cursor,r=t("<div></div>").css({position:"absolute",top:0,left:0,width:p.width,height:p.height,zIndex:2147483647,opacity:1e-4,cursor:f}).appendTo(h.body),t(h).on("mousemove touchmove",c).on("mouseup touchend",l),i.start(n)},c=function(t){return e(t),t.button!==a?l(t):(t.deltaX=t.screenX-u,t.deltaY=t.screenY-d,t.preventDefault(),void i.drag(t))},l=function(n){e(n),t(h).off("mousemove touchmove",c).off("mouseup touchend",l),r.remove(),i.stop&&i.stop(n)},this.destroy=function(){t(o()).off()},t(o()).on("mousedown touchstart",s)}}),n(St,[f,wt],function(t,e){return{init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){function n(){function e(e,a,s,l,c,u){var d,h,f,p,g,m,v,y;if(h=i.getEl("scroll"+e)){if(v=a.toLowerCase(),y=s.toLowerCase(),t(i.getEl("absend")).css(v,i.layoutRect()[l]-1),!c)return void t(h).css("display","none");t(h).css("display","block"),d=i.getEl("body"),f=i.getEl("scroll"+e+"t"),p=d["client"+s]-2*o,g=(p-=n&&r?h["client"+u]:0)/d["scroll"+s],(m={})[v]=d["offset"+a]+o,m[y]=p,t(h).css(m),(m={})[v]=d["scroll"+a]*g,m[y]=p*g,t(f).css(m)}}var n,r,a;a=i.getEl("body"),r=a.scrollHeight>a.clientHeight,e("h","Left","Width","contentW",n=a.scrollWidth>a.clientWidth,"Height"),e("v","Top","Height","contentH",r,"Width")}var i=this,o=2;i.settings.autoScroll&&(i._hasScroll||(i._hasScroll=!0,function(){function n(n,r,a,s,l){var c,u=i._id+"-scroll"+n,d=i.classPrefix;t(i.getEl()).append('<div id="'+u+'" class="'+d+"scrollbar "+d+"scrollbar-"+n+'"><div id="'+u+'t" class="'+d+'scrollbar-thumb"></div></div>'),i.draghelper=new e(u+"t",{start:function(){c=i.getEl("body")["scroll"+r],t("#"+u).addClass(d+"active")},drag:function(t){var e,u,d,h,f=i.layoutRect();u=f.contentW>f.innerW,d=f.contentH>f.innerH,h=i.getEl("body")["client"+a]-2*o,e=(h-=u&&d?i.getEl("scroll"+n)["client"+l]:0)/i.getEl("body")["scroll"+a],i.getEl("body")["scroll"+r]=c+t["delta"+s]/e},stop:function(){t("#"+u).removeClass(d+"active")}})}i.classes.add("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}(),i.on("wheel",function(t){var e=i.getEl("body");e.scrollLeft+=10*(t.deltaX||0),e.scrollTop+=10*t.deltaY,n()}),t(i.getEl("body")).on("scroll",n)),n())}}}),n(Ct,[_t,St],function(t,e){return t.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[e],renderHtml:function(){var t=this,e=t._layout,n=t.settings.html;return t.preRender(),e.preRender(t),void 0===n?n='<div id="'+t._id+'-body" class="'+t.bodyClasses+'">'+e.renderHtml(t)+"</div>":("function"==typeof n&&(n=n.call(t)),t._hasBody=!1),'<div id="'+t._id+'" class="'+t.classes+'" hidefocus="1" tabindex="-1" role="group">'+(t._preBodyHtml||"")+n+"</div>"}})}),n(Mt,[pt],function(t){function e(e,n,i){var o,r,a,s,l,c,u,d,h,f;return h=t.getViewPort(),a=(r=t.getPos(n)).x,s=r.y,e.state.get("fixed")&&"static"==t.getRuntimeStyle(document.body,"position")&&(a-=h.x,s-=h.y),o=e.getEl(),l=(f=t.getSize(o)).width,c=f.height,u=(f=t.getSize(n)).width,d=f.height,"b"===(i=(i||"").split(""))[0]&&(s+=d),"r"===i[1]&&(a+=u),"c"===i[0]&&(s+=Math.round(d/2)),"c"===i[1]&&(a+=Math.round(u/2)),"b"===i[3]&&(s-=c),"r"===i[4]&&(a-=l),"c"===i[3]&&(s-=Math.round(c/2)),"c"===i[4]&&(a-=Math.round(l/2)),{x:a,y:s,w:l,h:c}}return{testMoveRel:function(n,i){for(var o=t.getViewPort(),r=0;r<i.length;r++){var a=e(this,n,i[r]);if(this.state.get("fixed")){if(a.x>0&&a.x+a.w<o.w&&a.y>0&&a.y+a.h<o.h)return i[r]}else if(a.x>o.x&&a.x+a.w<o.w+o.x&&a.y>o.y&&a.y+a.h<o.h+o.y)return i[r]}return i[0]},moveRel:function(t,n){"string"!=typeof n&&(n=this.testMoveRel(t,n));var i=e(this,t,n);return this.moveTo(i.x,i.y)},moveBy:function(t,e){var n=this,i=n.layoutRect();return n.moveTo(i.x+t,i.y+e),n},moveTo:function(e,n){function i(t,e,n){return t<0||t+n>e&&(t=e-n)<0?0:t}var o=this;if(o.settings.constrainToViewport){var r=t.getViewPort(window),a=o.layoutRect();e=i(e,r.w+r.x,a.w),n=i(n,r.h+r.y,a.h)}return o.state.get("rendered")?o.layoutRect({x:e,y:n}).repaint():(o.settings.x=e,o.settings.y=n),o.fire("move",{x:e,y:n}),o}}}),n(Tt,[pt],function(t){return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(e,n){if(e<=1||n<=1){var i=t.getWindowSize();e=e<=1?e*i.w:e,n=n<=1?n*i.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:e,minH:n,w:e,h:n}).reflow()},resizeBy:function(t,e){var n=this.layoutRect();return this.resizeTo(n.w+t,n.h+e)}}}),n(kt,[Ct,Mt,Tt,pt,f,s],function(t,e,n,i,o,r){function a(t,e){for(;t;){if(t==e)return!0;t=t.parent()}}function s(t){function e(e,n){for(var i,o=0;o<p.length;o++)if(p[o]!=t)for(i=p[o].parent();i&&(i=i.parent());)i==t&&p[o].fixed(e).moveBy(0,n).repaint()}var n=i.getViewPort().y;t.settings.autofix&&(t.state.get("fixed")?t._autoFixY>n&&(t.fixed(!1).layoutRect({y:t._autoFixY}).repaint(),e(!1,t._autoFixY-n)):(t._autoFixY=t.layoutRect().y,t._autoFixY<n&&(t.fixed(!0).layoutRect({y:0}).repaint(),e(!0,n-t._autoFixY))))}function l(t,e){var n,i,r=m.zIndex||65535;if(t)g.push(e);else for(n=g.length;n--;)g[n]===e&&g.splice(n,1);if(g.length)for(n=0;n<g.length;n++)g[n].modal&&(r++,i=g[n]),g[n].getEl().style.zIndex=r,g[n].zIndex=r,r++;var a=o("#"+e.classPrefix+"modal-block",e.getContainerElm())[0];i?o(a).css("z-index",i.zIndex-1):a&&(a.parentNode.removeChild(a),f=!1),m.currentZIndex=r}function c(t){var e;for(e=p.length;e--;)p[e]===t&&p.splice(e,1);for(e=g.length;e--;)g[e]===t&&g.splice(e,1)}var u,d,h,f,p=[],g=[],m=t.extend({Mixins:[e,n],init:function(t){var e=this;e._super(t),e._eventsRoot=e,e.classes.add("floatpanel"),t.autohide&&(u||(u=function(t){2!=t.button&&function(t){for(var e=p.length;e--;){var n=p[e],i=n.getParentCtrl(t.target);if(n.settings.autohide){if(i&&(a(i,n)||n.parent()===i))continue;(t=n.fire("autohide",{target:t.target})).isDefaultPrevented()||n.hide()}}}(t)},o(document).on("click touchstart",u)),function(){if(!h){var t=document.documentElement,e=t.clientWidth,n=t.clientHeight;h=function(){document.all&&e==t.clientWidth&&n==t.clientHeight||(e=t.clientWidth,n=t.clientHeight,m.hideAll())},o(window).on("resize",h)}}(),p.push(e)),t.autofix&&(d||(d=function(){var t;for(t=p.length;t--;)s(p[t])},o(window).on("scroll",d)),e.on("move",function(){s(this)})),e.on("postrender show",function(t){if(t.control==e){var n,i=e.classPrefix;e.modal&&!f&&((n=o("#"+i+"modal-block",e.getContainerElm()))[0]||(n=o('<div id="'+i+'modal-block" class="'+i+"reset "+i+'fade"></div>').appendTo(e.getContainerElm())),r.setTimeout(function(){n.addClass(i+"in"),o(e.getEl()).addClass(i+"in")}),f=!0),l(!0,e)}}),e.on("show",function(){e.parents().each(function(t){if(t.state.get("fixed"))return e.fixed(!0),!1})}),t.popover&&(e._preBodyHtml='<div class="'+e.classPrefix+'arrow"></div>',e.classes.add("popover").add("bottom").add(e.isRtl()?"end":"start")),e.aria("label",t.ariaLabel),e.aria("labelledby",e._id),e.aria("describedby",e.describedBy||e._id+"-none")},fixed:function(t){var e=this;if(e.state.get("fixed")!=t){if(e.state.get("rendered")){var n=i.getViewPort();t?e.layoutRect().y-=n.y:e.layoutRect().y+=n.y}e.classes.toggle("fixed",t),e.state.set("fixed",t)}return e},show:function(){var t,e=this,n=e._super();for(t=p.length;t--&&p[t]!==e;);return-1===t&&p.push(e),n},hide:function(){return c(this),l(!1,this),this._super()},hideAll:function(){m.hideAll()},close:function(){var t=this;return t.fire("close").isDefaultPrevented()||(t.remove(),l(!1,t)),t},remove:function(){c(this),this._super()},postRender:function(){var t=this;return t.settings.bodyRole&&this.getEl("body").setAttribute("role",t.settings.bodyRole),t._super()}});return m.hideAll=function(){for(var t=p.length;t--;){var e=p[t];e&&e.settings.autohide&&(e.hide(),p.splice(t,1))}},m}),n(At,[kt,Ct,pt,f,wt,gt,l,s],function(t,e,n,i,o,r,a,s){function l(t){var e,n=i("meta[name=viewport]")[0];!1!==a.overrideViewPort&&(n||((n=document.createElement("meta")).setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(n)),(e=n.getAttribute("content"))&&void 0!==u&&(u=e),n.setAttribute("content",t?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":u))}var c=[],u="",d=t.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(t){var i=this;i._super(t),i.isRtl()&&i.classes.add("rtl"),i.classes.add("window"),i.bodyClasses.add("window-body"),i.state.set("fixed",!0),t.buttons&&(i.statusbar=new e({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:i.isRtl()?"start":"end",defaults:{type:"button"},items:t.buttons}),i.statusbar.classes.add("foot"),i.statusbar.parent(i)),i.on("click",function(t){var e=i.classPrefix+"close";(n.hasClass(t.target,e)||n.hasClass(t.target.parentNode,e))&&i.close()}),i.on("cancel",function(){i.close()}),i.aria("describedby",i.describedBy||i._id+"-none"),i.aria("label",t.title),i._fullscreen=!1},recalc:function(){var t,e,i,o,r=this,a=r.statusbar;r._fullscreen&&(r.layoutRect(n.getWindowSize()),r.layoutRect().contentH=r.layoutRect().innerH),r._super(),t=r.layoutRect(),r.settings.title&&!r._fullscreen&&(e=t.headerW)>t.w&&(i=t.x-Math.max(0,e/2),r.layoutRect({w:e,x:i}),o=!0),a&&(a.layoutRect({w:r.layoutRect().innerW}).recalc(),(e=a.layoutRect().minW+t.deltaW)>t.w&&(i=t.x-Math.max(0,e-t.w),r.layoutRect({w:e,x:i}),o=!0)),o&&r.recalc()},initLayoutRect:function(){var t,e=this,i=e._super(),o=0;if(e.settings.title&&!e._fullscreen){t=e.getEl("head");var r=n.getSize(t);i.headerW=r.width,i.headerH=r.height,o+=i.headerH}e.statusbar&&(o+=e.statusbar.layoutRect().h),i.deltaH+=o,i.minH+=o,i.h+=o;var a=n.getWindowSize();return i.x=e.settings.x||Math.max(0,a.w/2-i.w/2),i.y=e.settings.y||Math.max(0,a.h/2-i.h/2),i},renderHtml:function(){var t=this,e=t._layout,n=t._id,i=t.classPrefix,o=t.settings,r="",a="",s=o.html;return t.preRender(),e.preRender(t),o.title&&(r='<div id="'+n+'-head" class="'+i+'window-head"><div id="'+n+'-title" class="'+i+'title">'+t.encode(o.title)+'</div><div id="'+n+'-dragh" class="'+i+'dragh"></div><button type="button" class="'+i+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),o.url&&(s='<iframe src="'+o.url+'" tabindex="-1"></iframe>'),void 0===s&&(s=e.renderHtml(t)),t.statusbar&&(a=t.statusbar.renderHtml()),'<div id="'+n+'" class="'+t.classes+'" hidefocus="1"><div class="'+t.classPrefix+'reset" role="application">'+r+'<div id="'+n+'-body" class="'+t.bodyClasses+'">'+s+"</div>"+a+"</div></div>"},fullscreen:function(t){var e,o,a=this,l=document.documentElement,c=a.classPrefix;if(t!=a._fullscreen)if(i(window).on("resize",function(){var t;if(a._fullscreen)if(e)a._timer||(a._timer=s.setTimeout(function(){var t=n.getWindowSize();a.moveTo(0,0).resizeTo(t.w,t.h),a._timer=0},50));else{t=(new Date).getTime();var i=n.getWindowSize();a.moveTo(0,0).resizeTo(i.w,i.h),(new Date).getTime()-t>50&&(e=!0)}}),o=a.layoutRect(),a._fullscreen=t,t){a._initial={x:o.x,y:o.y,w:o.w,h:o.h},a.borderBox=r.parseBox("0"),a.getEl("head").style.display="none",o.deltaH-=o.headerH+2,i([l,document.body]).addClass(c+"fullscreen"),a.classes.add("fullscreen");var u=n.getWindowSize();a.moveTo(0,0).resizeTo(u.w,u.h)}else a.borderBox=r.parseBox(a.settings.border),a.getEl("head").style.display="",o.deltaH+=o.headerH,i([l,document.body]).removeClass(c+"fullscreen"),a.classes.remove("fullscreen"),a.moveTo(a._initial.x,a._initial.y).resizeTo(a._initial.w,a._initial.h);return a.reflow()},postRender:function(){var t,e=this;setTimeout(function(){e.classes.add("in"),e.fire("open")},0),e._super(),e.statusbar&&e.statusbar.postRender(),e.focus(),this.dragHelper=new o(e._id+"-dragh",{start:function(){t={x:e.layoutRect().x,y:e.layoutRect().y}},drag:function(n){e.moveTo(t.x+n.deltaX,t.y+n.deltaY)}}),e.on("submit",function(t){t.isDefaultPrevented()||e.close()}),c.push(e),l(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var t,e=this;for(e.dragHelper.destroy(),e._super(),e.statusbar&&this.statusbar.remove(),function(t,e){(function(){for(var t=0;t<c.length;t++)if(c[t]._fullscreen)return!0;return!1})()&&i([document.documentElement,document.body]).removeClass(t+"fullscreen")}(e.classPrefix),t=c.length;t--;)c[t]===e&&c.splice(t,1);l(c.length>0)},getContentWindow:function(){var t=this.getEl().getElementsByTagName("iframe")[0];return t?t.contentWindow:null}});return function(){if(!a.desktop){var t={w:window.innerWidth,h:window.innerHeight};s.setInterval(function(){var e=window.innerWidth,n=window.innerHeight;t.w==e&&t.h==n||(t={w:e,h:n},i(window).trigger("resize"))},100)}i(window).on("resize",function(){var t,e,i=n.getWindowSize();for(t=0;t<c.length;t++)e=c[t].layoutRect(),c[t].moveTo(c[t].settings.x||Math.max(0,i.w/2-e.w/2),c[t].settings.y||Math.max(0,i.h/2-e.h/2))})}(),d}),n(It,[At],function(t){var e=t.extend({init:function(t){this._super({border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}})},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){function i(t,e,n){return{type:"button",text:t,subtype:n?"primary":"",onClick:function(t){t.control.parents()[1].close(),r(e)}}}var o,r=n.callback||function(){};switch(n.buttons){case e.OK_CANCEL:o=[i("Ok",!0,!0),i("Cancel",!1)];break;case e.YES_NO:case e.YES_NO_CANCEL:o=[i("Yes",1,!0),i("No",0)],n.buttons==e.YES_NO_CANCEL&&o.push(i("Cancel",-1));break;default:o=[i("Ok",!0,!0)]}return new t({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:o,title:n.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:n.onClose,onCancel:function(){r(!1)}}).renderTo(document.body).reflow()},alert:function(t,n){return"string"==typeof t&&(t={text:t}),t.callback=n,e.msgBox(t)},confirm:function(t,n){return"string"==typeof t&&(t={text:t}),t.callback=n,t.buttons=e.OK_CANCEL,e.msgBox(t)}}});return e}),n(Dt,[At,It],function(t,e){return function(n){function i(){if(s.length)return s[s.length-1]}function o(t){n.fire("OpenWindow",{win:t})}function r(t){n.fire("CloseWindow",{win:t})}var a=this,s=[];a.windows=s,n.on("remove",function(){for(var t=s.length;t--;)s[t].close()}),a.open=function(e,i){var a;return n.editorManager.setActive(n),e.title=e.title||" ",e.url=e.url||e.file,e.url&&(e.width=parseInt(e.width||320,10),e.height=parseInt(e.height||240,10)),e.body&&(e.items={defaults:e.defaults,type:e.bodyType||"form",items:e.body,data:e.data,callbacks:e.commands}),e.url||e.buttons||(e.buttons=[{text:"Ok",subtype:"primary",onclick:function(){a.find("form")[0].submit()}},{text:"Cancel",onclick:function(){a.close()}}]),a=new t(e),s.push(a),a.on("close",function(){for(var t=s.length;t--;)s[t]===a&&s.splice(t,1);s.length||n.focus(),r(a)}),e.data&&a.on("postRender",function(){this.find("*").each(function(t){var n=t.name();n in e.data&&t.value(e.data[n])})}),a.features=e||{},a.params=i||{},1===s.length&&n.nodeChanged(),o(a=a.renderTo().reflow()),a},a.alert=function(t,i,a){var s;(s=e.alert(t,function(){i?i.call(a||this):n.focus()})).on("close",function(){r(s)}),o(s)},a.confirm=function(t,n,i){var a;(a=e.confirm(t,function(t){n.call(i||this,t)})).on("close",function(){r(a)}),o(a)},a.close=function(){i()&&i().close()},a.getParams=function(){return i()?i().params:null},a.setParams=function(t){i()&&(i().params=t)},a.getWindows=function(){return s}}}),n(Pt,[yt,Mt],function(t,e){return t.extend({Mixins:[e],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var t=this,e=t.classPrefix;return'<div id="'+t._id+'" class="'+t.classes+'" role="presentation"><div class="'+e+'tooltip-arrow"></div><div class="'+e+'tooltip-inner">'+t.encode(t.state.get("text"))+"</div></div>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().lastChild.innerHTML=t.encode(e.value)}),t._super()},repaint:function(){var t,e;(t=this.getEl().style).left=(e=this._layoutRect).x+"px",t.top=e.y+"px",t.zIndex=131070}})}),n(Et,[yt,Pt],function(t,e){var n,i=t.extend({init:function(t){var e=this;e._super(t),t=e.settings,e.canFocus=!0,t.tooltip&&!1!==i.tooltips&&(e.on("mouseenter",function(n){var i=e.tooltip().moveTo(-65535);if(n.control==e){var o=i.text(t.tooltip).show().testMoveRel(e.getEl(),["bc-tc","bc-tl","bc-tr"]);i.classes.toggle("tooltip-n","bc-tc"==o),i.classes.toggle("tooltip-nw","bc-tl"==o),i.classes.toggle("tooltip-ne","bc-tr"==o),i.moveRel(e.getEl(),o)}else i.hide()}),e.on("mouseleave mousedown click",function(){e.tooltip().hide()})),e.aria("label",t.ariaLabel||t.tooltip)},tooltip:function(){return n||(n=new e({type:"tooltip"})).renderTo(),n},postRender:function(){var t=this,e=t.settings;t._super(),t.parent()||!e.width&&!e.height||(t.initLayoutRect(),t.repaint()),e.autofocus&&t.focus()},bindStates:function(){function t(t){n.aria("disabled",t),n.classes.toggle("disabled",t)}function e(t){n.aria("pressed",t),n.classes.toggle("active",t)}var n=this;return n.state.on("change:disabled",function(e){t(e.value)}),n.state.on("change:active",function(t){e(t.value)}),n.state.get("disabled")&&t(!0),n.state.get("active")&&e(!0),n._super()},remove:function(){this._super(),n&&(n.remove(),n=null)}});return i}),n(Nt,[Et],function(t){return t.extend({Defaults:{value:0},init:function(t){var e=this;e._super(t),e.classes.add("progress"),e.settings.filter||(e.settings.filter=function(t){return Math.round(t)})},renderHtml:function(){var t=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div class="'+t+'bar-container"><div class="'+t+'bar"></div></div><div class="'+t+'text">0%</div></div>'},postRender:function(){var t=this;return t._super(),t.value(t.settings.value),t},bindStates:function(){function t(t){t=e.settings.filter(t),e.getEl().lastChild.innerHTML=t+"%",e.getEl().firstChild.firstChild.style.width=t+"%"}var e=this;return e.state.on("change:value",function(e){t(e.value)}),t(e.state.get("value")),e._super()}})}),n(Lt,[yt,Mt,Nt,s],function(t,e,n,i){return t.extend({Mixins:[e],Defaults:{classes:"widget notification"},init:function(t){var e=this;e._super(t),t.text&&e.text(t.text),t.icon&&(e.icon=t.icon),t.color&&(e.color=t.color),t.type&&e.classes.add("notification-"+t.type),t.timeout&&(t.timeout<0||t.timeout>0)&&!t.closeButton?e.closeButton=!1:(e.classes.add("has-close"),e.closeButton=!0),t.progressBar&&(e.progressBar=new n),e.on("click",function(t){-1!=t.target.className.indexOf(e.classPrefix+"close")&&e.close()})},renderHtml:function(){var t=this,e=t.classPrefix,n="",i="",o="",r="";return t.icon&&(n='<i class="'+e+"ico "+e+"i-"+t.icon+'"></i>'),t.color&&(r=' style="background-color: '+t.color+'"'),t.closeButton&&(i='<button type="button" class="'+e+'close" aria-hidden="true">×</button>'),t.progressBar&&(o=t.progressBar.renderHtml()),'<div id="'+t._id+'" class="'+t.classes+'"'+r+' role="presentation">'+n+'<div class="'+e+'notification-inner">'+t.state.get("text")+"</div>"+o+i+"</div>"},postRender:function(){var t=this;return i.setTimeout(function(){t.$el.addClass(t.classPrefix+"in")}),t._super()},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().childNodes[1].innerHTML=e.value}),t.progressBar&&t.progressBar.bindStates(),t._super()},close:function(){var t=this;return t.fire("close").isDefaultPrevented()||t.remove(),t},repaint:function(){var t,e;(t=this.getEl().style).left=(e=this._layoutRect).x+"px",t.top=e.y+"px",t.zIndex=65534}})}),n(Rt,[Lt,s,h],function(t,e,n){return function(i){function o(){if(l.length)return l[l.length-1]}function r(){if(l.length>0){var t=l.slice(0,1)[0],e=i.inline?i.getElement():i.getContentAreaContainer();if(t.moveRel(e,"tc-tc"),l.length>1)for(var n=1;n<l.length;n++)l[n].moveRel(l[n-1].getEl(),"bc-tc")}}function a(t,e){if(!function(t){return!t.progressBar&&!t.timeout}(e))return null;var i=n.grep(t,function(t){return function(t,e){return t.type===e.settings.type&&t.text===e.settings.text}(e,t)});return 0===i.length?null:i[0]}var s=this,l=[];s.notifications=l,i.on("remove",function(){for(var t=l.length;t--;)l[t].close()}),i.on("ResizeEditor",r),i.on("ResizeWindow",function(){e.requestAnimationFrame(function(){(function(){for(var t=0;t<l.length;t++)l[t].moveTo(0,0)})(),r()})}),s.open=function(e){if(!i.removed){var n;i.editorManager.setActive(i);var o=a(l,e);return null===o?(n=new t(e),l.push(n),e.timeout>0&&(n.timer=setTimeout(function(){n.close()},e.timeout)),n.on("close",function(){var t=l.length;for(n.timer&&i.getWin().clearTimeout(n.timer);t--;)l[t]===n&&l.splice(t,1);r()}),n.renderTo(),r()):n=o,n}},s.close=function(){o()&&o().close()},s.getNotifications=function(){return l},i.on("SkinLoaded",function(){var t=i.settings.service_message;t&&i.notificationManager.open({text:t,type:"warning",timeout:0,icon:""})})}}),n(Ot,[x],function(t){return{create:function(e,n,i){for(var o=[];n&&n!=e;n=n.parentNode)o.push(t.nodeIndex(n,i));return o},resolve:function(t,e){var n,i,o;for(i=t,n=e.length-1;n>=0;n--){if(e[n]>(o=i.childNodes).length-1)return null;i=o[e[n]]}return i}}}),n(Bt,[R,M,g,Ot,k,v,l,h,s,C,H,nt],function(t,e,n,i,o,r,a,s,l,c,u,d){return function(h){function f(t,e){try{h.getDoc().execCommand(t,!1,e)}catch(n){}}function p(){return h.getDoc().documentMode||6}function g(t){return t.isDefaultPrevented()}function m(t){var e,n;t.dataTransfer&&(h.selection.isCollapsed()&&"IMG"==t.target.tagName&&I.select(t.target),(e=h.selection.getContent()).length>0&&(n=O+escape(h.id)+","+escape(e),t.dataTransfer.setData(B,n)))}function v(t){var e;return t.dataTransfer&&(e=t.dataTransfer.getData(B))&&e.indexOf(O)>=0?(e=e.substr(O.length).split(","),{id:unescape(e[0]),html:unescape(e[1])}):null}function y(t){h.queryCommandSupported("mceInsertClipboardContent")?h.execCommand("mceInsertClipboardContent",!1,{content:t}):h.execCommand("mceInsertContent",!1,t)}function x(){h.shortcuts.add("meta+a",null,"SelectAll")}function b(){h.on("keydown",function(t){if(!g(t)&&t.keyCode===T){if(!h.getBody().getElementsByTagName("hr").length)return;if(I.isCollapsed()&&0===I.getRng(!0).startOffset){var e=I.getNode(),n=e.previousSibling;if("HR"==e.nodeName)return A.remove(e),void t.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(A.remove(n),t.preventDefault())}}})}function _(){h.on("keydown",function(t){if(!g(t)&&t.keyCode===T&&I.isCollapsed()&&0===I.getRng(!0).startOffset){var e=I.getNode().previousSibling;if(e&&e.nodeName&&"table"===e.nodeName.toLowerCase())return t.preventDefault(),!1}})}function w(){h.inline||(h.contentStyles.push("body {min-height: 150px}"),h.on("click",function(t){var e;if("HTML"==t.target.nodeName){if(a.ie>11)return void h.getBody().focus();e=h.selection.getRng(),h.getBody().focus(),h.selection.setRng(e),h.selection.normalize(),h.nodeChanged()}}))}function S(){function e(t){var e=new d(t.getBody()),n=t.selection.getRng(),i=u.fromRangeStart(n),o=u.fromRangeEnd(n),r=e.prev(i),a=e.next(o);return!t.selection.isCollapsed()&&(!r||r.isAtStart()&&i.isEqual(r))&&(!a||a.isAtEnd()&&i.isEqual(a))}h.on("keypress",function(n){!g(n)&&!I.isCollapsed()&&n.charCode>31&&!t.metaKeyPressed(n)&&e(h)&&(n.preventDefault(),h.setContent(String.fromCharCode(n.charCode)),h.selection.select(h.getBody(),!0),h.selection.collapse(!1),h.nodeChanged())}),h.on("keydown",function(t){var n=t.keyCode;g(t)||n!=k&&n!=T||e(h)&&(t.preventDefault(),h.setContent(""),h.nodeChanged())})}var C=s.each,M=h.$,T=t.BACKSPACE,k=t.DELETE,A=h.dom,I=h.selection,D=h.settings,P=h.parser,E=h.serializer,N=a.gecko,L=a.ie,R=a.webkit,O="data:text/mce-internal,",B=L?"Text":"URL";return h.on("keydown",function(e){var n,i,o,r,a;if(!g(e)&&e.keyCode==t.BACKSPACE&&(i=(n=I.getRng()).startContainer,o=n.startOffset,r=A.getRoot(),a=i,n.collapsed&&0===o)){for(;a&&a.parentNode&&a.parentNode.firstChild==a&&a.parentNode!=r;)a=a.parentNode;"BLOCKQUOTE"===a.tagName&&(h.formatter.toggle("blockquote",null,a),(n=A.createRng()).setStart(i,0),n.setEnd(i,0),I.setRng(n))}}),function(){function t(t){var e=A.create("body"),n=t.cloneContents();return e.appendChild(n),I.serializer.serialize(e,{format:"html"})}function n(n){if(!n.setStart){if(n.item)return!1;var i=n.duplicate();return i.moveToElementText(h.getBody()),e.compareRanges(n,i)}var o=t(n),r=A.createRng();return r.selectNode(h.getBody()),o===t(r)}h.on("keydown",function(t){var e,i,o=t.keyCode;if(!g(t)&&(o==k||o==T)){if(e=h.selection.isCollapsed(),i=h.getBody(),e&&!A.isEmpty(i))return;if(!e&&!n(h.selection.getRng()))return;t.preventDefault(),h.setContent(""),i.firstChild&&A.isBlock(i.firstChild)?h.selection.setCursorLocation(i.firstChild,0):h.selection.setCursorLocation(i,0),h.nodeChanged()}})}(),a.windowsPhone||h.on("keyup focusin mouseup",function(e){65==e.keyCode&&t.metaKeyPressed(e)||I.normalize()},!0),R&&(S(),function(){function o(t){var e=w.schema.getBlockElements(),n=h.getBody();if("BR"!=t.nodeName)return!1;for(;t!=n&&!e[t.nodeName];t=t.parentNode)if(t.nextSibling)return!1;return!0}function r(t,e){var n;for(n=t.nextSibling;n&&n!=e;n=n.nextSibling)if((3!=n.nodeType||0!==M.trim(n.data).length)&&n!==e)return!1;return n===e}function a(t,e,i){var r,a,s;if(w.isChildOf(t,h.getBody()))for(s=w.schema.getNonEmptyElements(),r=new n(i||t,t);a=r[e?"next":"prev"]();){if(s[a.nodeName]&&!o(a))return a;if(3==a.nodeType&&a.data.length>0)return a}}function c(t){var n,i,o,r,s;if(!t.collapsed&&(n=w.getParent(e.getNode(t.startContainer,t.startOffset),w.isBlock),i=w.getParent(e.getNode(t.endContainer,t.endOffset),w.isBlock),s=h.schema.getTextBlockElements(),n!=i&&s[n.nodeName]&&s[i.nodeName]&&"false"!==w.getContentEditable(n)&&"false"!==w.getContentEditable(i)))return t.deleteContents(),o=a(n,!1),r=a(i,!0),w.isEmpty(i)||M(n).append(i.childNodes),M(i).remove(),o?1==o.nodeType?"BR"==o.nodeName?(t.setStartBefore(o),t.setEndBefore(o)):(t.setStartAfter(o),t.setEndAfter(o)):(t.setStart(o,o.data.length),t.setEnd(o,o.data.length)):r&&(1==r.nodeType?(t.setStartBefore(r),t.setEndBefore(r)):(t.setStart(r,0),t.setEnd(r,0))),S.setRng(t),!0}function u(t,n){var i,o,s,l,c,u;if(!t.collapsed)return t;if(u=t.startOffset,3==(c=t.startContainer).nodeType)if(n){if(u<c.data.length)return t}else if(u>0)return t;i=e.getNode(c,u),s=w.getParent(i,w.isBlock),o=a(h.getBody(),n,i),l=w.getParent(o,w.isBlock);var d=1===c.nodeType&&u>c.childNodes.length-1;if(!i||!o)return t;if(l&&s!=l)if(n){if(!r(s,l))return t;1==i.nodeType?"BR"==i.nodeName?t.setStartBefore(i):t.setStartAfter(i):t.setStart(i,i.data.length),1==o.nodeType?t.setEnd(o,0):t.setEndBefore(o)}else{if(!r(l,s))return t;1==o.nodeType?"BR"==o.nodeName?t.setStartBefore(o):t.setStartAfter(o):t.setStart(o,o.data.length),1==i.nodeType&&d?t.setEndAfter(i):t.setEndBefore(i)}return t}function d(t,e){function n(t,n){return g=M(n).parents().filter(function(t,e){return!!h.schema.getTextInlineElements()[e.nodeName]}),l=t.cloneNode(!1),(g=s.map(g,function(t){return t=t.cloneNode(!1),l.hasChildNodes()?(t.appendChild(l.firstChild),l.appendChild(t)):l.appendChild(t),l.appendChild(t),t})).length?(p=w.create("br"),g[0].appendChild(p),w.replace(l,t),e.setStartBefore(p),e.setEndBefore(p),h.selection.setRng(e),p):null}function o(t){return t&&h.schema.getTextBlockElements()[t.tagName]}var r,a,l,c,u,d,f,p,g;if(e.collapsed&&(f=e.startOffset,o(a=w.getParent(d=e.startContainer,w.isBlock))))if(1==d.nodeType){if((d=d.childNodes[f])&&"BR"!=d.tagName)return;if(u=t?a.nextSibling:a.previousSibling,w.isEmpty(a)&&o(u)&&w.isEmpty(u)&&n(a,d))return w.remove(u),!0}else if(3==d.nodeType){if(r=i.create(a,d),c=a.cloneNode(!0),d=i.resolve(c,r),t){if(f>=d.data.length)return;d.deleteData(f,1)}else{if(f<=0)return;d.deleteData(f-1,1)}if(w.isEmpty(c))return n(a,d)}}function f(t){var e,n,i;(function(t){var e=S.getRng();if(c(e=u(e,t)))return!0})(t)||(s.each(h.getBody().getElementsByTagName("*"),function(t){"SPAN"==t.tagName&&t.setAttribute("mce-data-marked",1),!t.hasAttribute("data-mce-style")&&t.hasAttribute("style")&&h.dom.setAttrib(t,"style",h.dom.getAttrib(t,"style"))}),(e=new C(function(){})).observe(h.getDoc(),{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"]}),h.getDoc().execCommand(t?"ForwardDelete":"Delete",!1,null),n=h.selection.getRng(),i=n.startContainer.parentNode,s.each(e.takeRecords(),function(t){if(w.isChildOf(t.target,h.getBody())){if("style"==t.attributeName){var e=t.target.getAttribute("data-mce-style");e?t.target.setAttribute("style",e):t.target.removeAttribute("style")}s.each(t.addedNodes,function(t){var e,o;"SPAN"!=t.nodeName||t.getAttribute("mce-data-marked")||(t==i&&(e=n.startOffset,o=t.firstChild),w.remove(t,!0),o&&(n.setStart(o,e),n.setEnd(o,e),h.selection.setRng(n)))})}}),e.disconnect(),s.each(h.dom.select("span[mce-data-marked]"),function(t){t.removeAttribute("mce-data-marked")}))}function p(t){h.undoManager.transact(function(){f(t)})}var x,b,_=h.getDoc(),w=h.dom,S=h.selection,C=window.MutationObserver;C||(x=!0,C=function(){function t(t){var e=t.relatedNode||t.target;i.push({target:e,addedNodes:[e]})}function e(t){i.push({target:t.relatedNode||t.target,attributeName:t.attrName})}var n,i=[];this.observe=function(i){(n=i).addEventListener("DOMSubtreeModified",t,!1),n.addEventListener("DOMNodeInsertedIntoDocument",t,!1),n.addEventListener("DOMNodeInserted",t,!1),n.addEventListener("DOMAttrModified",e,!1)},this.disconnect=function(){n.removeEventListener("DOMSubtreeModified",t,!1),n.removeEventListener("DOMNodeInsertedIntoDocument",t,!1),n.removeEventListener("DOMNodeInserted",t,!1),n.removeEventListener("DOMAttrModified",e,!1)},this.takeRecords=function(){return i}}),h.on("keydown",function(t){var e=t.keyCode==k,n=t.ctrlKey||t.metaKey;if(!g(t)&&(e||t.keyCode==T)){var i=h.selection.getRng(),o=i.startContainer,r=i.startOffset;if(e&&t.shiftKey)return;if(d(e,i))return void t.preventDefault();if(!n&&i.collapsed&&3==o.nodeType&&(e?r<o.data.length:r>0))return;t.preventDefault(),n&&h.selection.getSel().modify("extend",e?"forward":"backward",t.metaKey?"lineboundary":"word"),f(e)}}),h.on("keypress",function(e){var n,i,o,r,a,s;!g(e)&&!S.isCollapsed()&&e.charCode>31&&!t.metaKeyPressed(e)&&(n=h.selection.getRng(),s=String.fromCharCode(e.charCode),e.preventDefault(),i=M(n.startContainer).parents().filter(function(t,e){return!!h.schema.getTextInlineElements()[e.nodeName]}),f(!0),(i=i.filter(function(t,e){return!M.contains(h.getBody(),e)})).length?(o=w.createFragment(),i.each(function(t,e){e=e.cloneNode(!1),o.hasChildNodes()?(e.appendChild(o.firstChild),o.appendChild(e)):(a=e,o.appendChild(e)),o.appendChild(e)}),a.appendChild(h.getDoc().createTextNode(s)),r=w.getParent(n.startContainer,w.isBlock),w.isEmpty(r)?M(r).empty().append(o):n.insertNode(o),n.setStart(a.firstChild,1),n.setEnd(a.firstChild,1),h.selection.setRng(n)):h.selection.setContent(s))}),h.addCommand("Delete",function(){f()}),h.addCommand("ForwardDelete",function(){f(!0)}),x||(h.on("dragstart",function(t){b=S.getRng(),m(t)}),h.on("drop",function(t){if(!g(t)){var n=v(t);n&&(t.preventDefault(),l.setEditorTimeout(h,function(){var i=e.getCaretRangeFromPoint(t.x,t.y,_);b&&(S.setRng(b),b=null,p()),S.setRng(i),y(n.html)}))}}),h.on("cut",function(t){g(t)||!t.clipboardData||h.selection.isCollapsed()||(t.preventDefault(),t.clipboardData.clearData(),t.clipboardData.setData("text/html",h.selection.getContent()),t.clipboardData.setData("text/plain",h.selection.getContent({format:"text"})),l.setEditorTimeout(h,function(){p(!0)}))}))}(),h.settings.content_editable||A.bind(h.getDoc(),"mousedown mouseup",function(t){var e;if(t.target==h.getDoc().documentElement)if(e=I.getRng(),h.getBody().focus(),"mousedown"==t.type){if(c.isCaretContainer(e.startContainer))return;I.placeCaretAt(t.clientX,t.clientY)}else I.setRng(e)}),h.on("click",function(t){var e=t.target;/^(IMG|HR)$/.test(e.nodeName)&&"false"!==A.getContentEditableParent(e)&&(t.preventDefault(),I.select(e),h.nodeChanged()),"A"==e.nodeName&&A.hasClass(e,"mce-item-anchor")&&(t.preventDefault(),I.select(e))}),D.forced_root_block&&h.on("init",function(){f("DefaultParagraphSeparator",D.forced_root_block)}),h.on("init",function(){h.dom.bind(h.getBody(),"submit",function(t){t.preventDefault()})}),_(),P.addNodeFilter("br",function(t){for(var e=t.length;e--;)"Apple-interchange-newline"==t[e].attr("class")&&t[e].remove()}),a.iOS?(h.inline||h.on("keydown",function(){document.activeElement==document.body&&h.getWin().focus()}),w(),h.on("click",function(t){var e=t.target;do{if("A"===e.tagName)return void t.preventDefault()}while(e=e.parentNode)}),h.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):x()),L&&a.ie<11&&(b(),document.body.setAttribute("role","application"),p()>7||(f("RespectVisibilityInDesign",!0),h.contentStyles.push(".mceHideBrInPre pre br {display: none}"),A.addClass(h.getBody(),"mceHideBrInPre"),P.addNodeFilter("pre",function(t){for(var e,n,i,r,a=t.length;a--;)for(n=(e=t[a].getAll("br")).length;n--;)(r=(i=e[n]).prev)&&3===r.type&&"\n"!=r.value.charAt(r.value-1)?r.value+="\n":i.parent.insert(new o("#text",3),i,!0).value="\n"}),E.addNodeFilter("pre",function(t){for(var e,n,i,o=t.length;o--;)for(n=(e=t[o].getAll("br")).length;n--;)(i=e[n].prev)&&3==i.type&&(i.value=i.value.replace(/\r?\n$/,""))})),A.bind(h.getBody(),"mouseup",function(){var t,e=I.getNode();"IMG"==e.nodeName&&((t=A.getStyle(e,"width"))&&(A.setAttrib(e,"width",t.replace(/[^0-9%]+/g,"")),A.setStyle(e,"width","")),(t=A.getStyle(e,"height"))&&(A.setAttrib(e,"height",t.replace(/[^0-9%]+/g,"")),A.setStyle(e,"height","")))}),h.on("keydown",function(t){var e;g(t)||t.keyCode!=T||(e=h.getDoc().selection.createRange())&&e.item&&(t.preventDefault(),h.undoManager.beforeChange(),A.remove(e.item(0)),h.undoManager.add())}),function(){var t;p()>=10&&(t="",C("p div h1 h2 h3 h4 h5 h6".split(" "),function(e,n){t+=(n>0?",":"")+e+":empty"}),h.contentStyles.push(t+"{padding-right: 1px !important}"))}(),p()<9&&(P.addNodeFilter("noscript",function(t){for(var e,n,i=t.length;i--;)(n=(e=t[i]).firstChild)&&e.attr("data-mce-innertext",n.value)}),E.addNodeFilter("noscript",function(t){for(var e,n,i,a=t.length;a--;)e=t[a],(n=t[a].firstChild)?n.value=r.decode(n.value):(i=e.attributes.map["data-mce-innertext"])&&(e.attr("data-mce-innertext",null),(n=new o("#text",3)).value=i,n.raw=!0,e.append(n))})),function(){function t(t,e){var n=s.createTextRange();try{n.moveToPoint(t,e)}catch(a){n=null}return n}function e(e){var i;e.button?(i=t(e.x,e.y))&&(i.compareEndPoints("StartToStart",o)>0?i.setEndPoint("StartToStart",o):i.setEndPoint("EndToEnd",o),i.select()):n()}function n(){var t=a.selection.createRange();o&&!t.item&&0===t.compareEndPoints("StartToEnd",t)&&o.select(),A.unbind(a,"mouseup",n),A.unbind(a,"mousemove",e),o=i=0}var i,o,r,a=A.doc,s=a.body;a.documentElement.unselectable=!0,A.bind(a,"mousedown contextmenu",function(s){if("HTML"===s.target.nodeName){if(i&&n(),(r=a.documentElement).scrollHeight>r.clientHeight)return;i=1,(o=t(s.x,s.y))&&(A.bind(a,"mouseup",n),A.bind(a,"mousemove",e),A.getRoot().focus(),o.select())}})}()),a.ie>=11&&(w(),_()),a.ie&&(x(),f("AutoUrlDetect",!1),h.on("dragstart",function(t){m(t)}),h.on("drop",function(t){if(!g(t)){var n=v(t);if(n&&n.id!=h.id){t.preventDefault();var i=e.getCaretRangeFromPoint(t.x,t.y,h.getDoc());I.setRng(i),y(n.html)}}})),N&&(S(),b(),window.Range.prototype.getClientRects||h.on("mousedown",function(t){if(!g(t)&&"HTML"===t.target.nodeName){var e=h.getBody();e.blur(),l.setEditorTimeout(h,function(){e.focus()})}}),function(){function t(){var t=A.getAttribs(I.getStart().cloneNode(!1));return function(){var e=I.getStart();e!==h.getBody()&&(A.setAttrib(e,"style",null),C(t,function(t){e.setAttributeNode(t.cloneNode(!0))}))}}function e(){return!I.isCollapsed()&&A.getParent(I.getStart(),A.isBlock)!=A.getParent(I.getEnd(),A.isBlock)}h.on("keypress",function(n){var i;if(!g(n)&&(8==n.keyCode||46==n.keyCode)&&e())return i=t(),h.getDoc().execCommand("delete",!1,null),i(),n.preventDefault(),!1}),A.bind(h.getDoc(),"cut",function(n){var i;!g(n)&&e()&&(i=t(),l.setEditorTimeout(h,function(){i()}))})}(),D.readonly||h.on("BeforeExecCommand MouseDown",function(){f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),D.object_resizing||f("enableObjectResizing",!1)}),h.on("SetContent ExecCommand",function(t){"setcontent"!=t.type&&"mceInsertLink"!==t.command||C(A.select("a"),function(t){var e=t.parentNode,n=A.getRoot();if(e.lastChild===t){for(;e&&!A.isBlock(e);){if(e.parentNode.lastChild!==e||e===n)return;e=e.parentNode}A.add(e,"br",{"data-mce-bogus":1})}})}),h.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),a.mac&&h.on("keydown",function(e){!t.metaKeyPressed(e)||e.shiftKey||37!=e.keyCode&&39!=e.keyCode||(e.preventDefault(),h.selection.getSel().modify("move",37==e.keyCode?"backward":"forward","lineboundary"))}),_()),{refreshContentEditable:function(){},isHidden:function(){var t;return N?!(t=h.selection.getSel())||!t.rangeCount||0===t.rangeCount:0}}}}),n(zt,[ut,x,h],function(t,e,n){function i(t,e){return"selectionchange"==e?t.getDoc():!t.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(e)?t.getDoc().documentElement:t.settings.event_root?(t.eventRoot||(t.eventRoot=a.select(t.settings.event_root)[0]),t.eventRoot):t.getBody()}function o(t,e){function n(t){return!t.hidden&&!t.readonly}var o,s=i(t,e);if(t.delegates||(t.delegates={}),!t.delegates[e])if(t.settings.event_root){if(r||(r={},t.editorManager.on("removeEditor",function(){var e;if(!t.editorManager.activeEditor&&r){for(e in r)t.dom.unbind(i(t,e));r=null}})),r[e])return;o=function(i){for(var o=i.target,r=t.editorManager.editors,s=r.length;s--;){var l=r[s].getBody();(l===o||a.isChildOf(o,l))&&n(r[s])&&r[s].fire(e,i)}},r[e]=o,a.bind(s,e,o)}else a.bind(s,e,o=function(i){n(t)&&t.fire(e,i)}),t.delegates[e]=o}var r,a=e.DOM,s={bindPendingEventDelegates:function(){var t=this;n.each(t._pendingNativeEvents,function(e){o(t,e)})},toggleNativeEvent:function(t,e){var n=this;"focus"!=t&&"blur"!=t&&(e?n.initialized?o(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&(n.dom.unbind(i(n,t),t,n.delegates[t]),delete n.delegates[t]))},unbindAllNativeEvents:function(){var t,e=this;if(e.delegates){for(t in e.delegates)e.dom.unbind(i(e,t),t,e.delegates[t]);delete e.delegates}e.inline||(e.getBody().onload=null,e.dom.unbind(e.getWin()),e.dom.unbind(e.getDoc())),e.dom.unbind(e.getBody()),e.dom.unbind(e.getContainer())}};return n.extend({},t,s)}),n(Vt,[],function(){function t(t,e,i){try{t.getDoc().execCommand(e,!1,i)}catch(n){}}function e(e,n){e._clickBlocker&&(e._clickBlocker.unbind(),e._clickBlocker=null),n?(e._clickBlocker=function(t){var e,n;return e=t.getBody(),n=function(e){t.dom.getParents(e.target,"a").length>0&&e.preventDefault()},t.dom.bind(e,"click",n),{unbind:function(){t.dom.unbind(e,"click",n)}}}(e),e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable=!1):(e.readonly=!1,e.getBody().contentEditable=!0,t(e,"StyleWithCSS",!1),t(e,"enableInlineTableEditing",!1),t(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())}return{setMode:function(t,n){n!=(t.readonly?"readonly":"design")&&(t.initialized?e(t,"readonly"==n):t.on("init",function(){e(t,"readonly"==n)}),t.fire("SwitchMode",{mode:n}))}}}),n(Ft,[h,l],function(t,e){var n=t.each,i=t.explode,o={f9:120,f10:121,f11:122},r=t.makeMap("alt,ctrl,shift,meta,access");return function(a){function s(t){var a,s,l={};for(s in n(i(t,"+"),function(t){t in r?l[t]=!0:/^[0-9]{2,}$/.test(t)?l.keyCode=parseInt(t,10):(l.charCode=t.charCodeAt(0),l.keyCode=o[t]||t.toUpperCase().charCodeAt(0))}),a=[l.keyCode],r)l[s]?a.push(s):l[s]=!1;return l.id=a.join(","),l.access&&(l.alt=!0,e.mac?l.ctrl=!0:l.shift=!0),l.meta&&(e.mac?l.meta=!0:(l.ctrl=!0,l.meta=!1)),l}function l(e,n,o,r){var l;return(l=t.map(i(e,">"),s))[l.length-1]=t.extend(l[l.length-1],{func:o,scope:r||a}),t.extend(l[0],{desc:a.translate(n),subpatterns:l.slice(1)})}function c(t,e){return!!e&&e.ctrl==t.ctrlKey&&e.meta==t.metaKey&&e.alt==t.altKey&&e.shift==t.shiftKey&&!!(t.keyCode==e.keyCode||t.charCode&&t.charCode==e.charCode)&&(t.preventDefault(),!0)}function u(t){return t.func?t.func.call(t.scope):null}var d={},h=[];a.on("keyup keypress keydown",function(t){!function(t){return t.altKey||t.ctrlKey||t.metaKey}(t)&&!function(t){return"keydown"===t.type&&t.keyCode>=112&&t.keyCode<=123}(t)||t.isDefaultPrevented()||(n(d,function(e){if(c(t,e))return h=e.subpatterns.slice(0),"keydown"==t.type&&u(e),!0}),c(t,h[0])&&(1===h.length&&"keydown"==t.type&&u(h[0]),h.shift()))}),this.add=function(e,o,r,s){var c;return c=r,"string"==typeof r?r=function(){a.execCommand(c,!1,null)}:t.isArray(c)&&(r=function(){a.execCommand(c[0],c[1],c[2])}),n(i(t.trim(e.toLowerCase())),function(t){var e=l(t,o,r,s);d[e.id]=e}),!0},this.remove=function(t){var e=l(t);return!!d[e.id]&&(delete d[e.id],!0)}}}),n(Ht,[a,h,B],function(t,e,n){return function(i,o){function r(t){var e;return e={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[t.blob().type.toLowerCase()]||"dat",t.filename()+"."+e}function a(t){return{id:t.id,blob:t.blob,base64:t.base64,filename:n.constant(r(t))}}function s(t,e,n,i){var r,a;(r=new XMLHttpRequest).open("POST",o.url),r.withCredentials=o.credentials,r.upload.onprogress=function(t){i(t.loaded/t.total*100)},r.onerror=function(){n("Image upload failed due to a XHR Transport error. Code: "+r.status)},r.onload=function(){var t;return 200!=r.status?void n("HTTP Error: "+r.status):(t=JSON.parse(r.responseText))&&"string"==typeof t.location?void e(function(t,e){return t?t.replace(/\/$/,"")+"/"+e.replace(/^\//,""):e}(o.basePath,t.location)):void n("Invalid JSON: "+r.responseText)},(a=new FormData).append("file",t.blob(),t.filename()),r.send(a)}function l(){return new t(function(t){t([])})}function c(t,e){return{url:e,blobInfo:t,status:!0}}function u(t,e){return{url:"",blobInfo:t,status:!1,error:e}}function d(t,n){e.each(g[t],function(t){t(n)}),delete g[t]}function h(e,n,o){return i.markPending(e.blobUri()),new t(function(t){var r,s,l=function(){};try{var h=function(){r&&(r.close(),s=l)};s=function(t){t<0||t>100||(r||(r=o()),r.progressBar.value(t))},n(a(e),function(n){h(),i.markUploaded(e.blobUri(),n),d(e.blobUri(),c(e,n)),t(c(e,n))},function(n){h(),i.removeFailed(e.blobUri()),d(e.blobUri(),u(e,n)),t(u(e,n))},s)}catch(f){t(u(e,f.message))}})}function f(e){var n=e.blobUri();return new t(function(t){g[n]=g[n]||[],g[n].push(t)})}function p(n,r){return n=e.grep(n,function(t){return!i.isUploaded(t.blobUri())}),t.all(e.map(n,function(t){return i.isPending(t.blobUri())?f(t):h(t,o.handler,r)}))}var g={};return o=e.extend({credentials:!1,handler:s},o),{upload:function(t,e){return!o.url&&function(t){return t===s}(o.handler)?l():p(t,e)}}}}),n(Wt,[a],function(t){function e(e){return new t(function(t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(){200==this.status&&t(this.response)},n.send()})}function n(t){var e,n;return t=decodeURIComponent(t).split(","),(n=/data:([^;]+)/.exec(t[0]))&&(e=n[1]),{type:e,data:t[1]}}function i(e){return new t(function(t){var i,o,r;e=n(e);try{i=atob(e.data)}catch(a){return void t(new Blob([]))}for(o=new Uint8Array(i.length),r=0;r<o.length;r++)o[r]=i.charCodeAt(r);t(new Blob([o],{type:e.type}))})}return{uriToBlob:function(t){return 0===t.indexOf("blob:")?e(t):0===t.indexOf("data:")?i(t):null},blobToDataUri:function(e){return new t(function(t){var n=new FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})},parseDataUri:n}}),n(Gt,[a,d,B,Wt,l],function(t,e,n,i,o){var r=0,a=function(t){return(t||"blobid")+r++};return function(r,s){var l={};return{findAll:function(c,u){var d,h;return u||(u=n.constant(!0)),d=e.filter(c.getElementsByTagName("img"),function(t){var e=t.src;return!!o.fileApi&&!t.hasAttribute("data-mce-bogus")&&!t.hasAttribute("data-mce-placeholder")&&!(!e||e==o.transparentSrc)&&(0===e.indexOf("blob:")?!r.isUploaded(e):0===e.indexOf("data:")&&u(t))}),h=e.map(d,function(e){var n;return l[e.src]?new t(function(t){l[e.src].then(function(n){t({image:e,blobInfo:n.blobInfo})})}):(n=new t(function(t){!function(t,e){var n,o;0===t.src.indexOf("blob:")?(o=s.getByUri(t.src))?e({image:t,blobInfo:o}):i.uriToBlob(t.src).then(function(r){i.blobToDataUri(r).then(function(l){n=i.parseDataUri(l).data,o=s.create(a(),r,n),s.add(o),e({image:t,blobInfo:o})})}):(n=i.parseDataUri(t.src).data,(o=s.findFirst(function(t){return t.base64()===n}))?e({image:t,blobInfo:o}):i.uriToBlob(t.src).then(function(i){o=s.create(a(),i,n),s.add(o),e({image:t,blobInfo:o})}))}(e,t)}).then(function(t){return delete l[t.image.src],t}).catch(function(t){return delete l[e.src],t}),l[e.src]=n,n)}),t.all(h)}}}}),n(Ut,[d,B],function(t,e){return function(){function n(t){return i(function(e){return e.id()===t})}function i(e){return t.filter(o,e)[0]}var o=[],r=e.constant;return{create:function(t,e,n,i){return{id:r(t),filename:r(i||t),blob:r(e),base64:r(n),blobUri:r(URL.createObjectURL(e))}},add:function(t){n(t.id())||o.push(t)},get:n,getByUri:function(t){return i(function(e){return e.blobUri()==t})},findFirst:i,removeByUri:function(e){o=t.filter(o,function(t){return t.blobUri()!==e||(URL.revokeObjectURL(t.blobUri()),!1)})},destroy:function(){t.each(o,function(t){URL.revokeObjectURL(t.blobUri())}),o=[]}}}}),n(jt,[],function(){return function(){function t(t,e){return{status:t,resultUri:e}}function e(t){return t in n}var n={};return{hasBlobUri:e,getResultUri:function(t){var e=n[t];return e?e.resultUri:null},isPending:function(t){return!!e(t)&&1===n[t].status},isUploaded:function(t){return!!e(t)&&2===n[t].status},markPending:function(e){n[e]=t(1,null)},markUploaded:function(e,i){n[e]=t(2,i)},removeFailed:function(t){delete n[t]},destroy:function(){n={}}}}}),n($t,[_],function(t){var e=t.PluginManager,n=function(t,n){for(var i in e.urls)if(e.urls[i]+"/plugin"+n+".js"===t)return i;return null},i=function(t,e){t.notificationManager.open({type:"error",text:e})},o=function(t,e){t._skinLoaded?i(t,e):t.on("SkinLoaded",function(){i(t,e)})};return{pluginLoadError:function(t,e){o(t,function(t,e){var i=n(e,t.suffix);return i?"Failed to load plugin: "+i+" from url "+e:"Failed to load plugin url: "+e}(t,e))},uploadError:function(t,e){o(t,"Failed to upload image: "+e)}}}),n(qt,[d,Ht,Gt,Ut,jt,$t],function(t,e,n,i,o,r){return function(a){function s(t){return function(e){return a.selection?t(e):[]}}function l(t,e,n){var i=0;do{-1!==(i=t.indexOf(e,i))&&(t=t.substring(0,i)+n+t.substr(i+e.length),i+=n.length-e.length+1)}while(-1!==i);return t}function c(t,e,n){return t=l(t,'src="'+e+'"','src="'+n+'"'),l(t,'data-mce-src="'+e+'"','data-mce-src="'+n+'"')}function u(e,n){t.each(a.undoManager.data,function(i){"fragmented"===i.type?i.fragments=t.map(i.fragments,function(t){return c(t,e,n)}):i.content=c(i.content,e,n)})}function d(){return a.notificationManager.open({text:a.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}function h(n){return v||(v=new e(_,{url:b.images_upload_url,basePath:b.images_upload_base_path,credentials:b.images_upload_credentials,handler:b.images_upload_handler})),g().then(s(function(e){var i;return i=t.map(e,function(t){return t.blobInfo}),v.upload(i,d).then(s(function(i){return i=t.map(i,function(t,n){var i=e[n].image;return t.status&&!1!==a.settings.images_replace_blob_uris?function(t,e){x.removeByUri(t.src),u(t.src,e),a.$(t).attr({src:b.images_reuse_filename?e+"?"+(new Date).getTime():e,"data-mce-src":a.convertURL(e,"src")})}(i,t.url):t.error&&r.uploadError(a,t.error),{element:i,status:t.status}}),n&&n(i),i}))}))}function f(t){if(!1!==b.automatic_uploads)return h(t)}function p(t){return!b.images_dataimg_filter||b.images_dataimg_filter(t)}function g(){return y||(y=new n(_,x)),y.findAll(a.getBody(),p).then(s(function(e){return t.each(e,function(t){u(t.image.src,t.blobInfo.blobUri()),t.image.src=t.blobInfo.blobUri(),t.image.removeAttribute("data-mce-src")}),e}))}function m(e){return e.replace(/src="(blob:[^"]+)"/g,function(e,n){var i=_.getResultUri(n);if(i)return'src="'+i+'"';var o=x.getByUri(n);return o||(o=t.reduce(a.editorManager.editors,function(t,e){return t||e.editorUpload.blobCache.getByUri(n)},null)),o?'src="data:'+o.blob().type+";base64,"+o.base64()+'"':e})}var v,y,x=new i,b=a.settings,_=new o;return a.on("setContent",function(){!1!==a.settings.automatic_uploads?f():g()}),a.on("RawSaveContent",function(t){t.content=m(t.content)}),a.on("getContent",function(t){t.source_view||"raw"==t.format||(t.content=m(t.content))}),a.on("PostRender",function(){a.parser.addNodeFilter("img",function(e){t.each(e,function(t){var e=t.attr("src");if(!x.getByUri(e)){var n=_.getResultUri(e);n&&t.attr("src",n)}})})}),{blobCache:x,uploadImages:h,uploadImagesAuto:f,scanForImages:g,destroy:function(){x.destroy(),_.destroy(),y=v=null}}}}),n(Yt,[C,H,w,M,f,V,s],function(t,e,n,i,o,r,a){var s=n.isContentEditableFalse;return function(e,n){function i(t,n){var i,o,a,s,l,c=r.collapse(t.getBoundingClientRect(),n);return"BODY"==e.tagName?(i=e.ownerDocument.documentElement,o=e.scrollLeft||i.scrollLeft,a=e.scrollTop||i.scrollTop):(l=e.getBoundingClientRect(),o=e.scrollLeft-l.left,a=e.scrollTop-l.top),c.left+=o,c.right+=o,c.top+=a,c.bottom+=a,c.width=1,(s=t.offsetWidth-t.clientWidth)>0&&(n&&(s*=-1),c.left+=s,c.right+=s),c}function l(){(function(){var n,i,r,a,s;for(n=o("*[contentEditable=false]",e),a=0;a<n.length;a++)t.endsWithCaretContainer(r=(i=n[a]).previousSibling)&&(1==(s=r.data).length?r.parentNode.removeChild(r):r.deleteData(s.length-1,1)),t.startsWithCaretContainer(r=i.nextSibling)&&(1==(s=r.data).length?r.parentNode.removeChild(r):r.deleteData(0,1))})(),h&&(t.remove(h),h=null),d&&(d.remove(),d=null),clearInterval(u)}function c(){u=a.setInterval(function(){o("div.mce-visual-caret",e).toggleClass("mce-visual-caret-hidden")},500)}var u,d,h;return{show:function(r,a){var u,f;return l(),n(a)?(h=t.insertBlock("p",a,r),u=i(a,r),o(h).css("top",u.top),d=o('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(u).appendTo(e),r&&d.addClass("mce-visual-caret-before"),c(),(f=a.ownerDocument.createRange()).setStart(h,0),f.setEnd(h,0),f):(h=t.insertInline(a,r),f=a.ownerDocument.createRange(),s(h.nextSibling)?(f.setStart(h,0),f.setEnd(h,0)):(f.setStart(h,1),f.setEnd(h,1)),f)},hide:l,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},destroy:function(){a.clearInterval(u)}}}}),n(Xt,[d,w,V],function(t,e,n){return{getClientRects:function i(o){function r(e){return t.map(e,function(t){return(t=n.clone(t)).node=o,t})}if(t.isArray(o))return t.reduce(o,function(t,e){return t.concat(i(e))},[]);if(e.isElement(o))return r(o.getClientRects());if(e.isText(o)){var a=o.ownerDocument.createRange();return a.setStart(o,0),a.setEnd(o,o.data.length),r(a.getClientRects())}}}}),n(Zt,[B,d,Xt,z,et,nt,H,V],function(t,e,n,i,o,r,a,s){function l(t,e,n,r){for(;r=o.findNode(r,t,i.isEditableCaretCandidate,e);)if(n(r))return}function c(t,i,o,r,a,s){function c(r){var s,l,c;for(c=n.getClientRects(r),-1==t&&(c=c.reverse()),s=0;s<c.length;s++)if(!o(l=c[s],d)){if(f.length>0&&i(l,e.last(f))&&h++,l.line=h,a(l))return!0;f.push(l)}}var u,d,h=0,f=[];return(d=e.last(s.getClientRects()))?(c(u=s.getNode()),l(t,r,c,u),f):f}var u=t.curry;return{upUntil:u(c,-1,s.isAbove,s.isBelow),downUntil:u(c,1,s.isBelow,s.isAbove),positionsUntil:function(t,n,i,o){function l(t){return e.last(t.getClientRects())}var c,u,d,h,f,p,g=new r(n),m=[],v=0;1==t?(c=g.next,u=s.isBelow,d=s.isAbove,h=a.after(o)):(c=g.prev,u=s.isAbove,d=s.isBelow,h=a.before(o)),p=l(h);do{if(h.isVisible()&&!d(f=l(h),p)){if(m.length>0&&u(f,e.last(m))&&v++,(f=s.clone(f)).position=h,f.line=v,i(f))return m;m.push(f)}}while(h=c(h));return m},isAboveLine:u(function(t,e){return e.line>t}),isLine:u(function(t,e){return e.line===t})}}),n(Kt,[B,d,w,Xt,V,et,z],function(t,e,n,i,o,r,a){function s(t,e){return Math.abs(t.left-e)}function l(t,e){return Math.abs(t.right-e)}function c(t,n){function i(t,e){return t>=e.left&&t<=e.right}return e.reduce(t,function(t,e){var o,r;return o=Math.min(s(t,n),l(t,n)),r=Math.min(s(e,n),l(e,n)),i(n,e)?e:i(n,t)?t:r==o&&h(e.node)||r<o?e:t})}function u(t,e,n,i){for(;i=f(i,t,a.isEditableCaretCandidate,e);)if(n(i))return}function d(t,n){function r(t,o){var r;return r=e.filter(i.getClientRects(o),function(e){return!t(e,n)}),a=a.concat(r),0===r.length}var a=[];return a.push(n),u(-1,t,p(r,o.isAbove),n.node),u(1,t,p(r,o.isBelow),n.node),a}var h=n.isContentEditableFalse,f=r.findNode,p=t.curry;return{findClosestClientRect:c,findLineNodeRects:d,closestCaret:function(t,n,o){var r,a;return r=i.getClientRects(function(t){return e.filter(e.toArray(t.getElementsByTagName("*")),h)}(t)),(a=c(r=e.filter(r,function(t){return o>=t.top&&o<=t.bottom}),n))&&(a=c(d(t,a),n))&&h(a.node)?function(t,e){return{node:t.node,before:s(t,e)<l(t,e)}}(a,n):null}}}),n(Jt,[],function(){var t=function(t){var e,n,i,o;return{top:(o=t.getBoundingClientRect()).top+(i=(e=t.ownerDocument).defaultView).pageYOffset-(n=e.documentElement).clientTop,left:o.left+i.pageXOffset-n.clientLeft}},e=function(e){return e.inline?t(e.getBody()):{left:0,top:0}},n=function(e,n){if(n.target.ownerDocument!==e.getDoc()){var i=t(e.getContentAreaContainer()),o=function(t){var e=t.getBody(),n=t.getDoc().documentElement;return t.inline?{left:e.scrollLeft,top:e.scrollTop}:{left:e.scrollLeft||n.scrollLeft,top:e.scrollTop||n.scrollTop}}(e);return{left:n.pageX-i.left+o.left,top:n.pageY-i.top+o.top}}return{left:n.pageX,top:n.pageY}};return{calc:function(t,i){return function(t,e,n){return{pageX:n.left-t.left+e.left,pageY:n.top-t.top+e.top}}(e(t),function(t){var e=t.getBody();return t.inline?{left:e.scrollLeft,top:e.scrollTop}:{left:0,top:0}}(t),n(t,i))}}}),n(Qt,[w,d,B,s,x,Jt],function(t,e,n,i,o,r){var a=t.isContentEditableFalse,s=t.isContentEditableTrue,l=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},c=function(t,i){return function(o){if(function(t){return 0===t.button}(o)){var r=e.find(i.dom.getParents(o.target),n.or(a,s));if(function(t,e){return a(e)&&e!==t}(i.getBody(),r)){var l=i.dom.getPos(r),c=i.getBody(),u=i.getDoc().documentElement;t.element=r,t.screenX=o.screenX,t.screenY=o.screenY,t.maxX=(i.inline?c.scrollWidth:u.offsetWidth)-2,t.maxY=(i.inline?c.scrollHeight:u.offsetHeight)-2,t.relX=o.pageX-l.x,t.relY=o.pageY-l.y,t.width=r.offsetWidth,t.height=r.offsetHeight,t.ghost=function(t,e,n,i){var o=e.cloneNode(!0);t.dom.setStyles(o,{width:n,height:i}),t.dom.setAttrib(o,"data-mce-selected",null);var r=t.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return t.dom.setStyles(r,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:i}),t.dom.setStyles(o,{margin:0,boxSizing:"border-box"}),r.appendChild(o),r}(i,r,t.width,t.height)}}}},u=function(t,e){var n=i.throttle(function(t,n){e._selectionOverrides.hideFakeCaret(),e.selection.placeCaretAt(t,n)},0);return function(i){var o=Math.max(Math.abs(i.screenX-t.screenX),Math.abs(i.screenY-t.screenY));if(function(t){return t.element}(t)&&!t.dragging&&o>10){if(e.fire("dragstart",{target:t.element}).isDefaultPrevented())return;t.dragging=!0,e.focus()}if(t.dragging){var a=function(t,e){return{pageX:e.pageX-t.relX,pageY:e.pageY+5}}(t,r.calc(e,i));(function(t,e){t.parentNode!==e&&e.appendChild(t)})(t.ghost,e.getBody()),function(t,e,n,i,o,r){var a=0,s=0;t.style.left=e.pageX+"px",t.style.top=e.pageY+"px",e.pageX+n>o&&(a=e.pageX+n-o),e.pageY+i>r&&(s=e.pageY+i-r),t.style.width=n-a+"px",t.style.height=i-s+"px"}(t.ghost,a,t.width,t.height,t.maxX,t.maxY),n(i.clientX,i.clientY)}}},d=function(t,e){return function(n){if(t.dragging&&function(t,e,n){return e!==n&&!t.dom.isChildOf(e,n)&&!a(e)}(e,function(t){var e=t.getSel().getRangeAt(0).startContainer;return 3===e.nodeType?e.parentNode:e}(e.selection),t.element)){var i=function(t){var e=t.cloneNode(!0);return e.removeAttribute("data-mce-selected"),e}(t.element),o=e.fire("drop",{targetClone:i,clientX:n.clientX,clientY:n.clientY});o.isDefaultPrevented()||(i=o.targetClone,e.undoManager.transact(function(){l(t.element),e.insertContent(e.dom.getOuterHTML(i)),e._selectionOverrides.hideFakeCaret()}))}h(t)}},h=function(t){t.dragging=!1,t.element=null,l(t.ghost)};return{init:function(t){(function(t){var e,n,i,r,a,s,l={};e=o.DOM,s=document,n=c(l,t),i=u(l,t),r=d(l,t),a=function(t,e){return function(){h(t),t.dragging&&e.fire("dragend")}}(l,t),t.on("mousedown",n),t.on("mousemove",i),t.on("mouseup",r),e.bind(s,"mousemove",i),e.bind(s,"mouseup",a),t.on("remove",function(){e.unbind(s,"mousemove",i),e.unbind(s,"mouseup",a)})})(t),function(t){t.on("drop",function(e){var n=void 0!==e.clientX?t.getDoc().elementFromPoint(e.clientX,e.clientY):null;(a(n)||a(t.dom.getContentEditableParent(n)))&&e.preventDefault()})}(t)}}}),n(te,[l,nt,H,C,et,Yt,Zt,Kt,w,M,V,R,B,d,s,Qt],function(t,e,n,i,o,r,a,s,l,c,u,d,h,f,p,g){function m(t,e){for(;e=t(e);)if(e.isVisible())return e;return e}var v=h.curry,y=l.isContentEditableTrue,x=l.isContentEditableFalse,b=l.isElement,_=o.isAfterContentEditableFalse,w=o.isBeforeContentEditableFalse,S=c.getSelectedNode;return function(c){function C(t){return c.dom.isBlock(t)}function M(t){t&&c.selection.setRng(t)}function T(){return c.selection.getRng()}function k(t,e){c.selection.scrollIntoView(t,e)}function A(t,e,n){return c.fire("ShowCaret",{target:e,direction:t,before:n}).isDefaultPrevented()?null:(k(e,-1===t),tt.show(n,e))}function I(t){return c.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:function(t){var e=t.ownerDocument.createRange();return e.selectNode(t),e}(t)}function D(t,e){var n=o.isInSameBlock(t,e);return!(n||!l.isBr(t.getNode()))||n}function P(t,e){return e=o.normalizeRange(t,Z,e),-1==t?n.fromRangeStart(e):n.fromRangeEnd(e)}function E(t){return i.isCaretContainerBlock(t.startContainer)}function N(e,i){var o,r;if(i.collapsed&&c.settings.forced_root_block){if(!(o=c.dom.getParent(i.startContainer,"PRE")))return;(1==e?J(n.fromRangeStart(i)):Q(n.fromRangeStart(i)))||(r=function(){var e=c.dom.create(c.settings.forced_root_block);return(!t.ie||t.ie>=11)&&(e.innerHTML='<br data-mce-bogus="1">'),e}(),1==e?c.$(o).after(r):c.$(o).before(r),c.selection.select(r,!0),c.selection.collapse())}}function L(t,e,n,i){var o;return(o=function(t,e,n,i){var o,r,a,s;return!i.collapsed&&(o=S(i),x(o))?A(t,o,-1==t):(s=E(i),n(r=P(t,i))?I(r.getNode(-1==t)):(r=e(r))?n(r)?A(t,r.getNode(-1==t),1==t):n(a=e(r))&&D(r,a)?A(t,a.getNode(-1==t),1==t):s?z(r.toRange()):null:s?i:null)}(t,e,n,i))?o:(o=N(t,i))||null}function R(t,e,n){var i;return(i=function(t,e,n){var i,o,r,l,c,u,d,h,p;if(p=S(n),i=P(t,n),o=e(Z,a.isAboveLine(1),i),r=f.filter(o,a.isLine(1)),c=f.last(i.getClientRects()),w(i)&&(p=i.getNode()),_(i)&&(p=i.getNode(!0)),!c)return null;if((l=s.findClosestClientRect(r,u=c.left))&&x(l.node))return d=Math.abs(u-l.left),h=Math.abs(u-l.right),A(t,l.node,d<h);if(p){var g=a.positionsUntil(t,Z,a.isAboveLine(1),p);if(l=s.findClosestClientRect(f.filter(g,a.isLine(1)),u))return z(l.position.toRange());if(l=f.last(f.filter(g,a.isLine(0))))return z(l.position.toRange())}}(t,e,n))?i:(i=N(t,n))||null}function O(t){t.hasAttribute("data-mce-caret")&&(i.showCaretContainerBlock(t),M(T()),k(t[0]))}function B(t){var e,i;return t=o.normalizeRange(1,Z,t),e=n.fromRangeStart(t),x(e.getNode())?A(1,e.getNode(),!e.isAtEnd()):x(e.getNode(!0))?A(1,e.getNode(!0),!1):(i=c.dom.getParent(e.getNode(),h.or(x,y)),x(i)?A(1,i,!1):null)}function z(t){return t&&t.collapsed&&B(t)||t}function V(t){var e,o,r,a;return x(t)?(x(t.previousSibling)&&(r=t.previousSibling),(o=Q(n.before(t)))||(e=J(n.after(t))),e&&b(e.getNode())&&(a=e.getNode()),i.remove(t.previousSibling),i.remove(t.nextSibling),c.dom.remove(t),c.dom.isEmpty(c.getBody())?(c.setContent(""),void c.focus()):r?n.after(r).toRange():a?n.before(a).toRange():o?o.toRange():e?e.toRange():null):null}function F(t){var e=c.schema.getTextBlockElements();return t.nodeName in e}function H(t){return c.dom.isEmpty(t)}function W(t,e,i){var o,r,a,s,l=c.dom;if(o=l.getParent(e.getNode(),l.isBlock),r=l.getParent(i.getNode(),l.isBlock),-1===t){if(s=i.getNode(!0),_(i)&&C(s))return F(o)?(H(o)&&l.remove(o),n.after(s).toRange()):V(i.getNode(!0))}else if(s=e.getNode(),w(e)&&C(s))return F(r)?(H(r)&&l.remove(r),n.before(s).toRange()):V(e.getNode());if(o===r||!F(o)||!F(r))return null;for(;a=o.firstChild;)r.appendChild(a);return c.dom.remove(o),i.toRange()}function G(t,e,n,o){var r,a,s,l;return!o.collapsed&&(r=S(o),x(r))?z(V(r)):n(a=P(t,o))&&i.isCaretContainerBlock(o.startContainer)?(l=-1==t?K.prev(a):K.next(a))?z(l.toRange()):o:e(a)?z(V(a.getNode(-1==t))):e(s=-1==t?K.prev(a):K.next(a))?-1===t?W(t,a,s):W(t,s,a):void 0}function U(t){return i.isCaretContainer(t)||i.startsWithCaretContainer(t)||i.endsWithCaretContainer(t)}function j(t){return U(t.startContainer)||U(t.endContainer)}function $(e){var n,i,o,r,a,s,l,u,d,h,f=c.$,p=c.dom;if(!e)return null;if(e.collapsed){if(!j(e)){if(u=P(1,e),x(u.getNode()))return A(1,u.getNode(),!u.isAtEnd());if(x(u.getNode(!0)))return A(1,u.getNode(!0),!1)}return null}return a=e.startOffset,s=e.endOffset,3==(r=e.startContainer).nodeType&&0==a&&x(r.parentNode)&&(a=p.nodeIndex(r=r.parentNode),r=r.parentNode),1!=r.nodeType?null:(s==a+1&&(n=r.childNodes[a]),x(n)?(d=h=n.cloneNode(!0),(l=c.fire("ObjectSelected",{target:n,targetClone:d})).isDefaultPrevented()?null:(d=l.targetClone,0===(i=f("#"+et)).length&&(i=f('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",et)).appendTo(c.getBody()),e=c.dom.createRng(),d===h&&t.ie?(i.empty().append('<p style="font-size: 0" data-mce-bogus="all"> </p>').append(d),e.setStartAfter(i[0].firstChild.firstChild),e.setEndAfter(d)):(i.empty().append(" ").append(d).append(" "),e.setStart(i[0].firstChild,1),e.setEnd(i[0].lastChild,0)),i.css({top:p.getPos(n,c.getBody()).y}),i[0].focus(),(o=c.selection.getSel()).removeAllRanges(),o.addRange(e),c.$("*[data-mce-selected]").removeAttr("data-mce-selected"),n.setAttribute("data-mce-selected",1),X=n,Y(),e)):null)}function q(){X&&(X.removeAttribute("data-mce-selected"),c.$("#"+et).remove(),X=null)}function Y(){tt.hide()}var X,Z=c.getBody(),K=new e(Z),J=v(m,K.next),Q=v(m,K.prev),tt=new r(c.getBody(),C),et="sel-"+c.dom.uniqueId(),nt=c.$;return t.ceFalse&&(function(){function o(t,e){if(!1===t.isDefaultPrevented()){var n=e(T());n&&(t.preventDefault(),M(n))}}function r(t){for(var e=c.getBody();t&&t!=e;){if(y(t)||x(t))return t;t=t.parentNode}return null}function l(){var t,e=r(c.selection.getNode());y(e)&&C(e)&&c.dom.isEmpty(e)&&(t=c.dom.create("br",{"data-mce-bogus":"1"}),c.$(e).empty().append(t),c.selection.setRng(n.before(t).toRange()))}var h=v(L,1,J,w),m=v(L,-1,Q,_),b=v(G,1,w,_),S=v(G,-1,_,w),k=v(R,-1,a.upUntil),D=v(R,1,a.downUntil);c.on("mouseup",function(){var t=T();t.collapsed&&M(B(t))}),c.on("click",function(t){var e;(e=r(t.target))&&(x(e)&&(t.preventDefault(),c.focus()),y(e)&&c.dom.isChildOf(e,c.selection.getNode())&&q())}),c.on("blur NewBlock",function(){q(),Y()});var P=function(t){var i=new e(t);if(!t.firstChild)return!1;var o=n.before(t.firstChild),r=i.next(o);return r&&!w(r)&&!_(r)};(function(t){var e=!1;t.on("touchstart",function(){e=!1}),t.on("touchmove",function(){e=!0}),t.on("touchend",function(t){var n=r(t.target);x(n)&&(e||(t.preventDefault(),$(I(n))))})})(c),c.on("mousedown",function(t){var e;if(e=r(t.target))x(e)?(t.preventDefault(),$(I(e))):function(t,e,n){return!n.collapsed&&f.reduce(n.getClientRects(),function(n,i){return n||u.containsXY(i,t,e)},!1)}(t.clientX,t.clientY,c.selection.getRng())||c.selection.placeCaretAt(t.clientX,t.clientY);else{q(),Y();var n=s.closestCaret(Z,t.clientX,t.clientY);n&&(function(t,e){var n=c.dom.getParent(t,c.dom.isBlock),i=c.dom.getParent(e,c.dom.isBlock);return n&&!function(t,e){return c.dom.getParent(t,c.dom.isBlock)===c.dom.getParent(e,c.dom.isBlock)}(n,i)&&P(n)}(t.target,n.node)||(t.preventDefault(),c.getBody().focus(),M(A(1,n.node,n.before))))}}),c.on("keydown",function(t){if(!d.modifierPressed(t))switch(t.keyCode){case d.RIGHT:o(t,h);break;case d.DOWN:o(t,D);break;case d.LEFT:o(t,m);break;case d.UP:o(t,k);break;case d.DELETE:o(t,b);break;case d.BACKSPACE:o(t,S);break;default:x(c.selection.getNode())&&function(t){return!(t.keyCode>=112&&t.keyCode<=123)}(t)&&t.preventDefault()}}),c.on("keyup compositionstart",function(t){(function(t){var e=nt("*[data-mce-caret]")[0];e&&("compositionstart"==t.type?(t.preventDefault(),t.stopPropagation(),O(e)):i.hasContent(e)&&O(e))})(t),function(t){var e;switch(t.keyCode){case d.DELETE:e=l();break;case d.BACKSPACE:e=l()}e&&t.preventDefault()}(t)},!0),c.on("cut",function(){var t=c.selection.getNode();x(t)&&p.setEditorTimeout(c,function(){M(z(V(t)))})}),c.on("getSelectionRange",function(t){var e=t.range;if(X){if(!X.parentNode)return void(X=null);(e=e.cloneRange()).selectNode(X),t.range=e}}),c.on("setSelectionRange",function(t){var e;(e=$(t.range))&&(t.range=e)}),c.on("AfterSetSelectionRange",function(t){var e=t.range;j(e)||Y(),function(t){return c.dom.hasClass(t,"mce-offscreen-selection")}(e.startContainer.parentNode)||q()}),c.on("focus",function(){p.setEditorTimeout(c,function(){c.selection.setRng(z(c.selection.getRng()))},0)}),c.on("copy",function(e){var n=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!t.ie){var i=function(){var t=c.dom.get(et);return t?t.getElementsByTagName("*")[0]:t}();i&&(e.preventDefault(),n.clearData(),n.setData("text/html",i.outerHTML),n.setData("text/plain",i.outerText))}}),g.init(c)}(),function(){var t=c.contentStyles,e=".mce-content-body";t.push(tt.getCss()),t.push(e+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+e+" *[contentEditable=false] {cursor: default;}"+e+" *[contentEditable=true] {cursor: text;}")}()),{showBlockCaretContainer:O,hideFakeCaret:Y,destroy:function(){tt.destroy(),X=null}}}}),n(ee,[],function(){var t=0;return{uuid:function(e){return e+t+++function(){var t=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+t()+t()+t()}()}}}),n(ne,[],function(){return{add:function(t,e,n){var i=t.sidebars?t.sidebars:[];i.push({name:e,settings:n}),t.sidebars=i}}}),n(ie,[x,f,_,T,k,N,E,U,Y,J,Q,tt,rt,at,b,c,Dt,Rt,A,D,Bt,l,h,s,zt,Vt,Ft,qt,te,ee,ne,$t],function(t,n,i,o,r,a,s,l,c,u,d,h,f,p,g,m,v,y,x,b,_,w,S,C,M,T,k,A,I,D,P,E){function N(t,e,o){var r,a,s,l=this;r=l.documentBaseUrl=o.documentBaseURL,a=o.baseURI,e=B({id:t,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:r,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:l.convertURL,url_converter_scope:l,ie7_compat:!0},s=o.defaultSettings,e),s&&s.external_plugins&&e.external_plugins&&(e.external_plugins=B({},s.external_plugins,e.external_plugins)),l.settings=e,i.language=e.language||"en",i.languageLoad=e.language_load,i.baseURL=o.baseURL,l.id=e.id=t,l.setDirty(!1),l.plugins={},l.documentBaseURI=new p(e.document_base_url||r,{base_uri:a}),l.baseURI=a,l.contentCSS=[],l.contentStyles=[],l.shortcuts=new k(l),l.loadedCSS={},l.editorCommands=new f(l),l.suffix=o.suffix,l.editorManager=o,l.inline=e.inline,l.settings.content_editable=l.inline,e.cache_suffix&&(w.cacheSuffix=e.cache_suffix.replace(/^[\?\&]+/,"")),!1===e.override_viewport&&(w.overrideViewPort=!1),o.fire("SetupEditor",l),l.execCallback("setup",l),l.$=n.overrideDefaults(function(){return{context:l.inline?l.getBody():l.getDoc(),element:l.getBody()}})}var L=t.DOM,R=i.ThemeManager,O=i.PluginManager,B=S.extend,z=S.each,V=S.explode,F=S.inArray,H=S.trim,W=S.resolve,G=m.Event,U=w.gecko,j=w.ie;return N.prototype={render:function(){var t=this,e=t.settings,n=t.id,i=t.suffix;if(G.domLoaded){if(t.getElement()&&w.contentEditable){e.inline?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");var o=t.getElement().form||L.getParent(n,"form");o&&(t.formElement=o,e.hidden_input&&!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&(L.insertAfter(L.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=!0),t.formEventDelegate=function(e){t.fire(e.type,e)},L.bind(o,"submit reset",t.formEventDelegate),t.on("reset",function(){t.setContent(t.startContent,{format:"raw"})}),!e.submit_patch||o.submit.nodeType||o.submit.length||o._mceOldSubmit||(o._mceOldSubmit=o.submit,o.submit=function(){return t.editorManager.triggerSave(),t.setDirty(!1),o._mceOldSubmit(o)})),t.windowManager=new v(t),t.notificationManager=new y(t),"xml"==e.encoding&&t.on("GetContent",function(t){t.save&&(t.content=L.encode(t.content))}),e.add_form_submit_trigger&&t.on("submit",function(){t.initialized&&t.save()}),e.add_unload_trigger&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),function(){var n=g.ScriptLoader;if(e.language&&"en"!=e.language&&!e.language_url&&(e.language_url=t.editorManager.baseURL+"/langs/"+e.language+".js"),e.language_url&&n.add(e.language_url),e.theme&&"function"!=typeof e.theme&&"-"!=e.theme.charAt(0)&&!R.urls[e.theme]){var o=e.theme_url;o=o?t.documentBaseURI.toAbsolute(o):"themes/"+e.theme+"/theme"+i+".js",R.load(e.theme,o)}S.isArray(e.plugins)&&(e.plugins=e.plugins.join(" ")),z(e.external_plugins,function(t,n){O.load(n,t),e.plugins+=" "+n}),z(e.plugins.split(/[ ,]/),function(t){if((t=H(t))&&!O.urls[t])if("-"==t.charAt(0)){t=t.substr(1,t.length);var e=O.dependencies(t);z(e,function(t){t=O.createUrl({prefix:"plugins/",resource:t,suffix:"/plugin"+i+".js"},t),O.load(t.resource,t)})}else O.load(t,{prefix:"plugins/",resource:t,suffix:"/plugin"+i+".js"})}),n.loadQueue(function(){t.removed||t.init()},t,function(e){E.pluginLoadError(t,e[0]),t.removed||t.init()})}()}}else L.bind(window,"ready",function e(){L.unbind(window,"ready",e),t.render()})},init:function(){var t,e,n,i,o,r,a,s,l,c,u,d=this,h=d.settings,f=d.getElement(),p=[];if(d.rtl=h.rtl_ui||d.editorManager.i18n.rtl,d.editorManager.i18n.setCode(h.language),h.aria_label=h.aria_label||L.getAttrib(f,"aria-label",d.getLang("aria.rich_text_area")),d.fire("ScriptsLoaded"),h.theme&&("function"!=typeof h.theme?(h.theme=h.theme.replace(/-/,""),r=R.get(h.theme),d.theme=new r(d,R.urls[h.theme]),d.theme.init&&d.theme.init(d,R.urls[h.theme]||d.documentBaseUrl.replace(/\/$/,""),d.$)):d.theme=h.theme),z(h.plugins.replace(/\-/g,"").split(/[ ,]/),function t(e){var n,i,o=O.get(e);if(n=O.urls[e]||d.documentBaseUrl.replace(/\/$/,""),e=H(e),o&&-1===F(p,e)){if(z(O.dependencies(e),function(e){t(e)}),d.plugins[e])return;i=new o(d,n,d.$),d.plugins[e]=i,i.init&&(i.init(d,n),p.push(e))}}),h.render_ui&&d.theme&&(d.orgDisplay=f.style.display,"function"!=typeof h.theme?(e=h.height||f.style.height||f.offsetHeight,n=h.min_height||100,(c=/^[0-9\.]+(|px)$/i).test(""+(t=h.width||f.style.width||f.offsetWidth))&&(t=Math.max(parseInt(t,10),100)),c.test(""+e)&&(e=Math.max(parseInt(e,10),n)),o=d.theme.renderUI({targetNode:f,width:t,height:e,deltaWidth:h.delta_width,deltaHeight:h.delta_height}),h.content_editable||(e=(o.iframeHeight||e)+("number"==typeof e?o.deltaHeight||0:""))<n&&(e=n)):((o=h.theme(d,f)).editorContainer.nodeType&&(o.editorContainer.id=o.editorContainer.id||d.id+"_parent"),o.iframeContainer.nodeType&&(o.iframeContainer.id=o.iframeContainer.id||d.id+"_iframecontainer"),e=o.iframeHeight||f.offsetHeight),d.editorContainer=o.editorContainer),h.content_css&&z(V(h.content_css),function(t){d.contentCSS.push(d.documentBaseURI.toAbsolute(t))}),h.content_style&&d.contentStyles.push(h.content_style),h.content_editable)return f=i=o=null,d.initContentBody();if(d.iframeHTML=h.doctype+"<html><head>",h.document_base_url!=d.documentBaseUrl&&(d.iframeHTML+='<base href="'+d.documentBaseURI.getURI()+'" />'),!w.caretAfter&&h.ie7_compat&&(d.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),d.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',!/#$/.test(document.location.href))for(u=0;u<d.contentCSS.length;u++){var g=d.contentCSS[u];d.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+S._addCacheSuffix(g)+'" />',d.loadedCSS[g]=!0}-1!=(s=h.body_id||"tinymce").indexOf("=")&&(s=(s=d.getParam("body_id","","hash"))[d.id]||s),-1!=(l=h.body_class||"").indexOf("=")&&(l=(l=d.getParam("body_class","","hash"))[d.id]||""),h.content_security_policy&&(d.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+h.content_security_policy+'" />'),d.iframeHTML+='</head><body id="'+s+'" class="mce-content-body '+l+'" data-id="'+d.id+'"><br></body></html>';var m='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+d.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody(true);})()';document.domain!=location.hostname&&w.ie&&w.ie<12&&(a=m);var v=L.create("iframe",{id:d.id+"_ifr",frameBorder:"0",allowTransparency:"true",title:d.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:e,display:"block"}});if(v.onload=function(){v.onload=null,d.fire("load")},L.setAttrib(v,"src",a||'javascript:""'),d.contentAreaContainer=o.iframeContainer,d.iframeElement=v,i=L.add(o.iframeContainer,v),j)try{d.getDoc()}catch(x){i.src=a=m}o.editorContainer&&(L.get(o.editorContainer).style.display=d.orgDisplay,d.hidden=L.isHidden(o.editorContainer)),d.getElement().style.display="none",L.setAttrib(d.id,"aria-hidden",!0),a||d.initContentBody(),f=i=o=null},initContentBody:function(e){var n,i,s=this,f=s.settings,p=s.getElement(),g=s.getDoc();f.inline||(s.getElement().style.visibility=s.orgVisibility),e||f.content_editable||(g.open(),g.write(s.iframeHTML),g.close()),f.content_editable&&(s.on("remove",function(){var t=this.getBody();L.removeClass(t,"mce-content-body"),L.removeClass(t,"mce-edit-focus"),L.setAttrib(t,"contentEditable",null)}),L.addClass(p,"mce-content-body"),s.contentDocument=g=f.content_document||document,s.contentWindow=f.content_window||window,s.bodyElement=p,f.content_document=f.content_window=null,f.root_name=p.nodeName.toLowerCase()),(n=s.getBody()).disabled=!0,s.readonly=f.readonly,s.readonly||(s.inline&&"static"==L.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable=s.getParam("content_editable_state",!0)),n.disabled=!1,s.editorUpload=new A(s),s.schema=new x(f),s.dom=new t(g,{keep_values:!0,url_converter:s.convertURL,url_converter_scope:s,hex_colors:f.force_hex_style_colors,class_filter:f.class_filter,update_styles:!0,root_element:s.inline?s.getBody():null,collect:f.content_editable,schema:s.schema,onSetAttrib:function(t){s.fire("SetAttrib",t)}}),s.parser=new b(f,s.schema),s.parser.addAttributeFilter("src,href,style,tabindex",function(t,e){for(var n,i,o,r=t.length,a=s.dom;r--;)if(i=(n=t[r]).attr(e),!n.attributes.map[o="data-mce-"+e]){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;"style"===e?((i=a.serializeStyle(a.parseStyle(i),n.name)).length||(i=null),n.attr(o,i),n.attr(e,i)):"tabindex"===e?(n.attr(o,i),n.attr(e,null)):n.attr(o,s.convertURL(i,e,n.name))}}),s.parser.addNodeFilter("script",function(t){for(var e,n,i=t.length;i--;)0!==(n=(e=t[i]).attr("type")||"no/type").indexOf("mce-")&&e.attr("type","mce-"+n)}),s.parser.addNodeFilter("#cdata",function(t){for(var e,n=t.length;n--;)(e=t[n]).type=8,e.name="#comment",e.value="[CDATA["+e.value+"]]"}),s.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var e,n=t.length,i=s.schema.getNonEmptyElements();n--;)(e=t[n]).isEmpty(i)&&0===e.getAll("br").length&&(e.append(new r("br",1)).shortEnded=!0)}),s.serializer=new a(f,s),s.selection=new l(s.dom,s.getWin(),s.serializer,s),s.formatter=new c(s),s.undoManager=new u(s),s.forceBlocks=new h(s),s.enterKey=new d(s),s._nodeChangeDispatcher=new o(s),s._selectionOverrides=new I(s),s.fire("PreInit"),f.browser_spellcheck||f.gecko_spellcheck||(g.body.spellcheck=!1,L.setAttrib(n,"spellcheck","false")),s.quirks=new _(s),s.fire("PostRender"),f.directionality&&(n.dir=f.directionality),f.nowrap&&(n.style.whiteSpace="nowrap"),f.protect&&s.on("BeforeSetContent",function(t){z(f.protect,function(e){t.content=t.content.replace(e,function(t){return"\x3c!--mce:protected "+escape(t)+"--\x3e"})})}),s.on("SetContent",function(){s.addVisual(s.getBody())}),f.padd_empty_editor&&s.on("PostProcess",function(t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),s.load({initial:!0,format:"html"}),s.startContent=s.getContent({format:"raw"}),s.initialized=!0,s.bindPendingEventDelegates(),s.fire("init"),s.focus(!0),s.nodeChanged({initial:!0}),s.execCallback("init_instance_callback",s),s.on("compositionstart compositionend",function(t){s.composing="compositionstart"===t.type}),s.contentStyles.length>0&&(i="",z(s.contentStyles,function(t){i+=t+"\r\n"}),s.dom.addStyle(i)),z(s.contentCSS,function(t){s.loadedCSS[t]||(s.dom.loadCSS(t),s.loadedCSS[t]=!0)}),f.auto_focus&&C.setEditorTimeout(s,function(){var t;(t=!0===f.auto_focus?s:s.editorManager.get(f.auto_focus)).destroyed||t.focus()},100),p=g=n=null},focus:function(t){var e,n,i,o=this,r=o.selection,a=o.settings.content_editable,s=o.getDoc(),l=o.getBody();if(!t){if((e=r.getRng()).item&&(n=e.item(0)),o.quirks.refreshContentEditable(),i=function(t){return o.dom.getParent(t,function(t){return"true"===o.dom.getContentEditable(t)})}(r.getNode()),o.$.contains(l,i))return i.focus(),r.normalize(),void o.editorManager.setActive(o);if(a||(w.opera||o.getBody().focus(),o.getWin().focus()),U||a){if(l.setActive)try{l.setActive()}catch(u){l.focus()}else l.focus();a&&r.normalize()}n&&n.ownerDocument==s&&((e=s.body.createControlRange()).addElement(n),e.select())}o.editorManager.setActive(o)},execCallback:function(t){var e,n=this,i=n.settings[t];if(i)return n.callbackLookup&&(e=n.callbackLookup[t])&&(i=e.func,e=e.scope),"string"==typeof i&&(e=(e=i.replace(/\.\w+$/,""))?W(e):0,i=W(i),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[t]={func:i,scope:e}),i.apply(e||n,Array.prototype.slice.call(arguments,1))},translate:function(t){var e=this.settings.language||"en",n=this.editorManager.i18n;return t?(t=n.data[e+"."+t]||t.replace(/\{\#([^\}]+)\}/g,function(t,i){return n.data[e+"."+i]||"{#"+i+"}"}),this.editorManager.translate(t)):""},getLang:function(t,n){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+t]||(n!==e?n:"{#"+t+"}")},getParam:function(t,e,n){var i,o=t in this.settings?this.settings[t]:e;return"hash"===n?(i={},"string"==typeof o?z(o.indexOf("=")>0?o.split(/[;,](?![^=;,]*(?:[;,]|$))/):o.split(","),function(t){t=t.split("="),i[H(t[0])]=H(t.length>1?t[1]:t)}):i=o,i):o},nodeChanged:function(t){this._nodeChangeDispatcher.nodeChanged(t)},addButton:function(t,e){var n=this;e.cmd&&(e.onclick=function(){n.execCommand(e.cmd)}),e.text||e.icon||(e.icon=t),n.buttons=n.buttons||{},e.tooltip=e.tooltip||e.title,n.buttons[t]=e},addSidebar:function(t,e){return P.add(this,t,e)},addMenuItem:function(t,e){var n=this;e.cmd&&(e.onclick=function(){n.execCommand(e.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[t]=e},addContextToolbar:function(t,e){var n,i=this;i.contextToolbars=i.contextToolbars||[],"string"==typeof t&&(n=t,t=function(t){return i.dom.is(t,n)}),i.contextToolbars.push({id:D.uuid("mcet"),predicate:t,items:e})},addCommand:function(t,e,n){this.editorCommands.addCommand(t,e,n)},addQueryStateHandler:function(t,e,n){this.editorCommands.addQueryStateHandler(t,e,n)},addQueryValueHandler:function(t,e,n){this.editorCommands.addQueryValueHandler(t,e,n)},addShortcut:function(t,e,n,i){this.shortcuts.add(t,e,n,i)},execCommand:function(t,e,n,i){return this.editorCommands.execCommand(t,e,n,i)},queryCommandState:function(t){return this.editorCommands.queryCommandState(t)},queryCommandValue:function(t){return this.editorCommands.queryCommandValue(t)},queryCommandSupported:function(t){return this.editorCommands.queryCommandSupported(t)},show:function(){var t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable=!0:(L.show(t.getContainer()),L.hide(t.id)),t.load(),t.fire("show"))},hide:function(){var t=this,e=t.getDoc();t.hidden||(j&&e&&!t.inline&&e.execCommand("SelectAll"),t.save(),t.inline?(t.getBody().contentEditable=!1,t==t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(L.hide(t.getContainer()),L.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(t,e){this.fire("ProgressState",{state:t,time:e})},load:function(t){var n,i=this,o=i.getElement();if(o)return(t=t||{}).load=!0,n=i.setContent(o.value!==e?o.value:o.innerHTML,t),t.element=o,t.no_events||i.fire("LoadContent",t),t.element=o=null,n},save:function(t){var e,n,i=this,o=i.getElement();if(o&&i.initialized)return(t=t||{}).save=!0,t.element=o,t.content=i.getContent(t),t.no_events||i.fire("SaveContent",t),"raw"==t.format&&i.fire("RawSaveContent",t),e=t.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=e:(i.inline||(o.innerHTML=e),(n=L.getParent(i.id,"form"))&&z(n.elements,function(t){if(t.name==i.id)return t.value=e,!1})),t.element=o=null,!1!==t.set_dirty&&i.setDirty(!1),e},setContent:function(t,e){var n,i,o=this,r=o.getBody();return(e=e||{}).format=e.format||"html",e.set=!0,e.content=t,e.no_events||o.fire("BeforeSetContent",e),0===(t=e.content).length||/^\s+$/.test(t)?(i=j&&j<11?"":'<br data-mce-bogus="1">',"TABLE"==r.nodeName?t="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(r.nodeName)&&(t="<li>"+i+"</li>"),(n=o.settings.forced_root_block)&&o.schema.isValidChild(r.nodeName.toLowerCase(),n.toLowerCase())?t=o.dom.createHTML(n,o.settings.forced_root_block_attrs,t=i):j||t||(t='<br data-mce-bogus="1">'),o.dom.setHTML(r,t),o.fire("SetContent",e)):("raw"!==e.format&&(t=new s({validate:o.validate},o.schema).serialize(o.parser.parse(t,{isRootContent:!0}))),e.content=H(t),o.dom.setHTML(r,e.content),e.no_events||o.fire("SetContent",e)),e.content},getContent:function(t){var e,n=this,i=n.getBody();return(t=t||{}).format=t.format||"html",t.get=!0,t.getInner=!0,t.no_events||n.fire("BeforeGetContent",t),e="raw"==t.format?S.trim(n.serializer.getTrimmedContent()):"text"==t.format?i.innerText||i.textContent:n.serializer.serialize(i,t),t.content="text"!=t.format?H(e):e,t.no_events||n.fire("GetContent",t),t.content},insertContent:function(t,e){e&&(t=B({content:t},e)),this.execCommand("mceInsertContent",!1,t)},isDirty:function(){return!this.isNotDirty},setDirty:function(t){var e=!this.isNotDirty;this.isNotDirty=!t,t&&t!=e&&this.fire("dirty")},setMode:function(t){T.setMode(this,t)},getContainer:function(){var t=this;return t.container||(t.container=L.get(t.editorContainer||t.id+"_parent")),t.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=L.get(this.id)),this.targetElm},getWin:function(){var t,e=this;return e.contentWindow||(t=e.iframeElement)&&(e.contentWindow=t.contentWindow),e.contentWindow},getDoc:function(){var t,e=this;return e.contentDocument||(t=e.getWin())&&(e.contentDocument=t.document),e.contentDocument},getBody:function(){var t=this.getDoc();return this.bodyElement||(t?t.body:null)},convertURL:function(t,e,n){var i=this,o=i.settings;return o.urlconverter_callback?i.execCallback("urlconverter_callback",t,n,!0,e):!o.convert_urls||n&&"LINK"==n.nodeName||0===t.indexOf("file:")||0===t.length?t:o.relative_urls?i.documentBaseURI.toRelative(t):t=i.documentBaseURI.toAbsolute(t,o.remove_script_host)},addVisual:function(t){var n,i=this,o=i.settings,r=i.dom;t=t||i.getBody(),i.hasVisual===e&&(i.hasVisual=o.visual),z(r.select("table,a",t),function(t){var e;switch(t.nodeName){case"TABLE":return n=o.visual_table_class||"mce-item-table",void((e=r.getAttrib(t,"border"))&&"0"!=e||!i.hasVisual?r.removeClass(t,n):r.addClass(t,n));case"A":return void(r.getAttrib(t,"href",!1)||(e=r.getAttrib(t,"name")||t.id,n=o.visual_anchor_class||"mce-item-anchor",e&&i.hasVisual?r.addClass(t,n):r.removeClass(t,n)))}}),i.fire("VisualAid",{element:t,hasVisual:i.hasVisual})},remove:function(){var t=this;t.removed||(t.save(),t.removed=1,t.unbindAllNativeEvents(),t.hasHiddenInput&&L.remove(t.getElement().nextSibling),t.inline||(j&&j<10&&t.getDoc().execCommand("SelectAll",!1,null),L.setStyle(t.id,"display",t.orgDisplay),t.getBody().onload=null),t.fire("remove"),t.editorManager.remove(t),L.remove(t.getContainer()),t._selectionOverrides.destroy(),t.editorUpload.destroy(),t.destroy())},destroy:function(t){var e,n=this;if(!n.destroyed){if(!t&&!n.removed)return void n.remove();t||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),n.selection.destroy(),n.dom.destroy()),(e=n.formElement)&&(e._mceOldSubmit&&(e.submit=e._mceOldSubmit,e._mceOldSubmit=null),L.unbind(e,"submit reset",n.formEventDelegate)),n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null,n.selection&&(n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null),n.destroyed=1}},uploadImages:function(t){return this.editorUpload.uploadImages(t)},_scanForImages:function(){return this.editorUpload.scanForImages()}},B(N.prototype,M),N}),n(oe,[h],function(t){var e={},n="en";return{setCode:function(t){t&&(n=t,this.rtl=!!this.data[t]&&"rtl"===this.data[t]._dir)},getCode:function(){return n},rtl:!1,add:function(t,n){var i=e[t];for(var o in i||(e[t]=i={}),n)i[o]=n[o];this.setCode(t)},translate:function(i){function o(e){return t.is(e,"function")?Object.prototype.toString.call(e):r(e)?"":""+e}function r(e){return""===e||null===e||t.is(e,"undefined")}function a(e){return e=o(e),t.hasOwn(s,e)?o(s[e]):e}var s=e[n]||{};if(r(i))return"";if(t.is(i,"object")&&t.hasOwn(i,"raw"))return o(i.raw);if(t.is(i,"array")){var l=i.slice(1);i=a(i[0]).replace(/\{([0-9]+)\}/g,function(e,n){return t.hasOwn(l,n)?o(l[n]):e})}return a(i).replace(/{context:\w+}$/,"")},data:e}}),n(re,[x,s,l],function(t,e,n){function i(t){function i(){try{return document.activeElement}catch(t){return document.body}}t.on("AddEditor",function(c){var u=c.editor;u.on("init",function(){(u.inline||n.ie)&&("onbeforedeactivate"in document&&n.ie<9?u.dom.bind(u.getBody(),"beforedeactivate",function(t){if(t.target==u.getBody())try{u.lastRng=u.selection.getRng()}catch(e){}}):u.on("nodechange mouseup keyup",function(t){var e=i();"nodechange"==t.type&&t.selectionChange||(e&&e.id==u.id+"_ifr"&&(e=u.getBody()),u.dom.isChildOf(e,u.getBody())&&(u.lastRng=u.selection.getRng()))}),n.webkit&&!o&&(o=function(){var e=t.activeEditor;if(e&&e.selection){var n=e.selection.getRng();n&&!n.collapsed&&(u.lastRng=n)}},s.bind(document,"selectionchange",o)))}),u.on("setcontent",function(){u.lastRng=null}),u.on("mousedown",function(){u.selection.lastFocusBookmark=null}),u.on("focusin",function(){var e,n=t.focusedEditor;u.selection.lastFocusBookmark&&(e=function(t,e){var n;return e.startContainer?((n=t.getDoc().createRange()).setStart(e.startContainer,e.startOffset),n.setEnd(e.endContainer,e.endOffset)):n=e,n}(u,u.selection.lastFocusBookmark),u.selection.lastFocusBookmark=null,u.selection.setRng(e)),n!=u&&(n&&n.fire("blur",{focusedEditor:u}),t.setActive(u),t.focusedEditor=u,u.fire("focus",{blurredEditor:n}),u.focus(!0)),u.lastRng=null}),u.on("focusout",function(){e.setEditorTimeout(u,function(){var e=t.focusedEditor;l(u,i())||e!=u||(u.fire("blur",{focusedEditor:null}),t.focusedEditor=null,u.selection&&(u.selection.lastFocusBookmark=null))})}),r||(r=function(e){var n,i=t.activeEditor;n=e.target,i&&n.ownerDocument==document&&(i.selection&&n!=i.getBody()&&(i.selection.lastFocusBookmark=function(t,e){if(e&&e.startContainer){if(!t.isChildOf(e.startContainer,t.getRoot())||!t.isChildOf(e.endContainer,t.getRoot()))return;return{startContainer:e.startContainer,startOffset:e.startOffset,endContainer:e.endContainer,endOffset:e.endOffset}}return e}(i.dom,i.lastRng)),n==document.body||l(i,n)||t.focusedEditor!=i||(i.fire("blur",{focusedEditor:null}),t.focusedEditor=null))},s.bind(document,"focusin",r)),u.inline&&!a&&(a=function(e){var n=t.activeEditor,i=n.dom;if(n.inline&&i&&!i.isChildOf(e.target,n.getBody())){var o=n.selection.getRng();o.collapsed||(n.lastRng=o)}},s.bind(document,"mouseup",a))}),t.on("RemoveEditor",function(e){t.focusedEditor==e.editor&&(t.focusedEditor=null),t.activeEditor||(s.unbind(document,"selectionchange",o),s.unbind(document,"focusin",r),s.unbind(document,"mouseup",a),o=r=a=null)})}var o,r,a,s=t.DOM,l=function(t,e){var n=t?t.settings.custom_ui_selector:"";return null!==s.getParent(e,function(e){return i.isEditorUIElement(e)||!!n&&t.dom.is(e,n)})};return i.isEditorUIElement=function(t){return-1!==t.className.toString().indexOf("mce-")},i._isUIElement=l,i}),n(ae,[ie,f,x,at,l,h,a,ut,oe,re,_],function(t,e,n,i,o,r,a,s,l,c,u){function d(t){x(m.editors,function(e){e.fire("scroll"===t.type?"ScrollWindow":"ResizeWindow",t)})}function h(t,n){n!==w&&(n?e(window).on("resize scroll",d):e(window).off("resize scroll",d),w=n)}function f(t){var e,n=m.editors;delete n[t.id];for(var i=0;i<n.length;i++)if(n[i]==t){n.splice(i,1),e=!0;break}return m.activeEditor==t&&(m.activeEditor=n[0]),m.focusedEditor==t&&(m.focusedEditor=null),e}function p(t){return t&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(f(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0,t=null),t}var g,m,v=n.DOM,y=r.explode,x=r.each,b=r.extend,_=0,w=!1;return m={$:e,majorVersion:"4",minorVersion:"5.7",releaseDate:"2017-04-25",editors:[],i18n:l,activeEditor:null,setup:function(){var t,e,n,o,r=this,a="";if(e=i.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/")),n=window.tinymce||window.tinyMCEPreInit)t=n.base||n.baseURL,a=n.suffix;else{for(var s=document.getElementsByTagName("script"),l=0;l<s.length;l++){var u=(o=s[l].src).substring(o.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!=u.indexOf(".min")&&(a=".min"),t=o.substring(0,o.lastIndexOf("/"));break}}!t&&document.currentScript&&(-1!=(o=document.currentScript.src).indexOf(".min")&&(a=".min"),t=o.substring(0,o.lastIndexOf("/")))}r.baseURL=new i(e).toAbsolute(t),r.documentBaseURL=e,r.baseURI=new i(r.baseURL),r.suffix=a,r.focusManager=new c(r)},overrideDefaults:function(t){var e;(e=t.base_url)&&(this.baseURL=new i(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new i(this.baseURL)),t.suffix&&(this.suffix=t.suffix),this.defaultSettings=t;var n=t.plugin_base_urls;for(var o in n)u.PluginManager.urls[o]=n[o]},init:function(n){function i(t){var e=t.id;return e||(e=(e=t.name)&&!v.get(e)?t.name:v.uniqueId(),t.setAttribute("id",e)),e}function o(t,e){return e.constructor===RegExp?e.test(t.className):v.hasClass(t,e)}function s(t){var e,n=[];if(t.types)return x(t.types,function(t){n=n.concat(v.select(t.selector))}),n;if(t.selector)return v.select(t.selector);if(t.target)return[t.target];switch(t.mode){case"exact":(e=t.elements||"").length>0&&x(y(e),function(t){var e;(e=v.get(t))?n.push(e):x(document.forms,function(e){x(e.elements,function(e){e.name===t&&(t="mce_editor_"+_++,v.setAttrib(e,"id",t),n.push(e))})})});break;case"textareas":case"specific_textareas":x(v.select("textarea"),function(e){t.editor_deselector&&o(e,t.editor_deselector)||t.editor_selector&&!o(e,t.editor_selector)||n.push(e)})}return n}var l,c,u=this;c=r.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var d=function(t){l=t};return u.settings=n,v.bind(window,"ready",function o(){function a(e,n,i){var o=new t(e,n,u);f.push(o),o.on("init",function(){++h===l.length&&d(f)}),o.targetElm=o.targetElm||i,o.render()}var l,h=0,f=[];return v.unbind(window,"ready",o),function(t){var e=n[t];e&&e.apply(u,Array.prototype.slice.call(arguments,2))}("onpageload"),l=e.unique(s(n)),n.types?void x(n.types,function(t){r.each(l,function(e){return!v.is(e,t.selector)||(a(i(e),b({},n,t),e),!1)})}):(r.each(l,function(t){p(u.get(t.id))}),l=r.grep(l,function(t){return!u.get(t.id)}),void x(l,function(t){!function(t,e){return t.inline&&e.tagName.toLowerCase()in c}(n,t)?a(i(t),n,t):function(t,e){window.console&&!window.test&&window.console.log("Could not initialize inline editor on invalid inline target element",e)}(0,t)}))}),new a(function(t){l?t(l):d=function(e){t(e)}})},get:function(t){return arguments.length?t in this.editors?this.editors[t]:null:this.editors},add:function(t){var e=this,n=e.editors;return n[t.id]=t,n.push(t),h(0,!0),e.activeEditor=t,e.fire("AddEditor",{editor:t}),g||(g=function(){e.fire("BeforeUnload")},v.bind(window,"beforeunload",g)),t},createEditor:function(e,n){return this.add(new t(e,n,this))},remove:function(t){var e,n,i=this,o=i.editors;if(t)return"string"==typeof t?void x(v.select(t=t.selector||t),function(t){(n=o[t.id])&&i.remove(n)}):o[(n=t).id]?(f(n)&&i.fire("RemoveEditor",{editor:n}),o.length||v.unbind(window,"beforeunload",g),n.remove(),h(0,o.length>0),n):null;for(e=o.length-1;e>=0;e--)i.remove(o[e])},execCommand:function(e,n,i){var o=this,r=o.get(i);switch(e){case"mceAddEditor":return o.get(i)||new t(i,o.settings,o).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?(r.isHidden()?r.show():r.hide(),!0):(o.execCommand("mceAddEditor",0,i),!0)}return!!o.activeEditor&&o.activeEditor.execCommand(e,n,i)},triggerSave:function(){x(this.editors,function(t){t.save()})},addI18n:function(t,e){l.add(t,e)},translate:function(t){return l.translate(t)},setActive:function(t){var e=this.activeEditor;this.activeEditor!=t&&(e&&e.fire("deactivate",{relatedTarget:t}),t.fire("activate",{relatedTarget:e})),this.activeEditor=t}},b(m,s),m.setup(),window.tinymce=window.tinyMCE=m,m}),n("tinymce/LegacyInput",[ae,h],function(t,e){var n=e.each,i=e.explode;t.on("AddEditor",function(t){var e=t.editor;e.on("preInit",function(){function t(t,e){n(e,function(e,n){e&&a.setStyle(t,n,e)}),a.rename(t,"span")}var o,r,a,s=e.settings;s.inline_styles&&(r=i(s.font_size_legacy_values),o={font:function(e,n){t(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:r[parseInt(n.size,10)-1]})},u:function(n,i){"html4"===e.settings.schema&&t(i,{textDecoration:"underline"})},strike:function(e,n){t(n,{textDecoration:"line-through"})}},e.on("PreProcess SetContent",function(t){a=e.dom,s.convert_fonts_to_spans&&n(a.select("font,u,strike",t.node),function(t){o[t.nodeName.toLowerCase()](a,t)})}))})})}),n(se,[ut,h],function(t,e){var n={send:function(t){function i(){!t.async||4==o.readyState||r++>1e4?(t.success&&r<1e4&&200==o.status?t.success.call(t.success_scope,""+o.responseText,o,t):t.error&&t.error.call(t.error_scope,r>1e4?"TIMED_OUT":"GENERAL",o,t),o=null):setTimeout(i,10)}var o,r=0;if(t.scope=t.scope||this,t.success_scope=t.success_scope||t.scope,t.error_scope=t.error_scope||t.scope,t.async=!1!==t.async,t.data=t.data||"",n.fire("beforeInitialize",{settings:t}),o=new XMLHttpRequest){if(o.overrideMimeType&&o.overrideMimeType(t.content_type),o.open(t.type||(t.data?"POST":"GET"),t.url,t.async),t.crossDomain&&(o.withCredentials=!0),t.content_type&&o.setRequestHeader("Content-Type",t.content_type),t.requestheaders&&e.each(t.requestheaders,function(t){o.setRequestHeader(t.key,t.value)}),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),(o=n.fire("beforeSend",{xhr:o,settings:t}).xhr).send(t.data),!t.async)return i();setTimeout(i,10)}}};return e.extend(n,t),n}),n(le,[],function(){return{serialize:function t(e,n){var i,o,r,a;if(n=n||'"',null===e)return"null";if("string"==(r=typeof e))return o="\bb\tt\nn\ff\rr\"\"''\\\\",n+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(t,e){return'"'===n&&"'"===t?t:(i=o.indexOf(e))+1?"\\"+o.charAt(i+1):(t=e.charCodeAt().toString(16),"\\u"+"0000".substring(t.length)+t)})+n;if("object"==r){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(i=0,o="[";i<e.length;i++)o+=(i>0?",":"")+t(e[i],n);return o+"]"}for(a in o="{",e)e.hasOwnProperty(a)&&(o+="function"!=typeof e[a]?(o.length>1?","+n:n)+a+n+":"+t(e[a],n):"");return o+"}"}return""+e},parse:function(t){try{return window[String.fromCharCode(101)+"val"]("("+t+")")}catch(e){}}}}),n(ce,[le,se,h],function(t,e,n){function i(t){this.settings=o({},t),this.count=0}var o=n.extend;return i.sendRPC=function(t){return(new i).send(t)},i.prototype={send:function(n){var i=n.error,r=n.success;(n=o(this.settings,n)).success=function(e,o){void 0===(e=t.parse(e))&&(e={error:"JSON Parse error."}),e.error?i.call(n.error_scope||n.scope,e.error,o):r.call(n.success_scope||n.scope,e.result)},n.error=function(t,e){i&&i.call(n.error_scope||n.scope,t,e)},n.data=t.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",e.send(n)}},i}),n(ue,[x],function(t){return{callbacks:{},count:0,send:function(n){var i=this,o=t.DOM,r=n.count!==e?n.count:i.count,a="tinymce_jsonp_"+r;i.callbacks[r]=function(t){o.remove(a),delete i.callbacks[r],n.callback(t)},o.add(o.doc.body,"script",{id:a,src:n.url,type:"text/javascript"}),i.count++}}}),n(de,[],function(){function t(){for(var t in a=[],r)a.push(t);i.length=a.length}function n(){var e,n="";if(c){for(var a in r)e=r[a],n+=(n?",":"")+a.length.toString(32)+","+a+","+e.length.toString(32)+","+e;o.setAttribute(l,n);try{o.save(l)}catch(i){}t()}}var i,o,r,a,l,c;try{if(window.localStorage)return localStorage}catch(s){}return l="tinymce",o=document.documentElement,(c=!!o.addBehavior)&&o.addBehavior("#default#userData"),i={key:function(t){return a[t]},getItem:function(t){return t in r?r[t]:null},setItem:function(t,e){r[t]=""+e,n()},removeItem:function(t){delete r[t],n()},clear:function(){r={},n()}},function(){function n(t){var n,i;return-1===(i=t!==e?u+t:a.indexOf(",",u))||i>a.length?null:(n=a.substring(u,i),u=i+1,n)}var i,a,s,u=0;if(r={},c){o.load(l),a=o.getAttribute(l)||"";do{var d=n();if(null===d)break;if(null!==(i=n(parseInt(d,32)||0))){if(null===(d=n()))break;s=n(parseInt(d,32)||0),i&&(r[i]=s)}}while(null!==i);t()}}(),i}),n(he,[x,c,b,_,h,l],function(t,e,n,i,o,r){var a=window.tinymce;return a.DOM=t.DOM,a.ScriptLoader=n.ScriptLoader,a.PluginManager=i.PluginManager,a.ThemeManager=i.ThemeManager,a.dom=a.dom||{},a.dom.Event=e.Event,o.each("trim isArray is toArray makeMap each map grep inArray extend create walk createNS resolve explode _addCacheSuffix".split(" "),function(t){a[t]=o[t]}),o.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(t){a[t]=r[t.substr(2).toLowerCase()]}),{}}),n(fe,[st,h],function(t,e){return t.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(t){this.settings=e.extend({},this.Defaults,t)},preRender:function(t){t.bodyClasses.add(this.settings.containerClass)},applyClasses:function(t){var e,n,i,o,r=this.settings;e=r.firstControlClass,n=r.lastControlClass,t.each(function(t){t.classes.remove(e).remove(n).add(r.controlClass),t.visible()&&(i||(i=t),o=t)}),i&&i.classes.add(e),o&&o.classes.add(n)},renderHtml:function(t){var e="";return this.applyClasses(t.items()),t.items().each(function(t){e+=t.renderHtml()}),e},recalc:function(){},postRender:function(){},isNative:function(){return!1}})}),n(pe,[fe],function(t){return t.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(t){t.items().filter(":visible").each(function(t){var e=t.settings;t.layoutRect({x:e.x,y:e.y,w:e.w,h:e.h}),t.recalc&&t.recalc()})},renderHtml:function(t){return'<div id="'+t._id+'-absend" class="'+t.classPrefix+'abs-end"></div>'+this._super(t)}})}),n(ge,[Et],function(t){return t.extend({Defaults:{classes:"widget btn",role:"button"},init:function(t){var e,n=this;n._super(t),t=n.settings,e=n.settings.size,n.on("click mousedown",function(t){t.preventDefault()}),n.on("touchstart",function(t){n.fire("click",t),t.preventDefault()}),t.subtype&&n.classes.add(t.subtype),e&&n.classes.add("btn-"+e),t.icon&&n.icon(t.icon)},icon:function(t){return arguments.length?(this.state.set("icon",t),this):this.state.get("icon")},repaint:function(){var t,e=this.getEl().firstChild;e&&((t=e.style).width=t.height="100%"),this._super()},renderHtml:function(){var t,e=this,n=e._id,i=e.classPrefix,o=e.state.get("icon"),r=e.state.get("text"),a="";return(t=e.settings.image)?(o="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",r&&(e.classes.add("btn-has-text"),a='<span class="'+i+'txt">'+e.encode(r)+"</span>"),'<div id="'+n+'" class="'+e.classes+'" tabindex="-1" aria-labelledby="'+n+'"><button role="presentation" type="button" tabindex="-1">'+((o=o?i+"ico "+i+"i-"+o:"")?'<i class="'+o+'"'+t+"></i>":"")+a+"</button></div>"},bindStates:function(){function t(t){var o=n("span."+i,e.getEl());t?(o[0]||(n("button:first",e.getEl()).append('<span class="'+i+'"></span>'),o=n("span."+i,e.getEl())),o.html(e.encode(t))):o.remove(),e.classes.toggle("btn-has-text",!!t)}var e=this,n=e.$,i=e.classPrefix+"txt";return e.state.on("change:text",function(e){t(e.value)}),e.state.on("change:icon",function(n){var i=n.value,o=e.classPrefix;e.settings.icon=i,i=i?o+"ico "+o+"i-"+e.settings.icon:"";var r=e.getEl().firstChild,a=r.getElementsByTagName("i")[0];i?(a&&a==r.firstChild||(a=document.createElement("i"),r.insertBefore(a,r.firstChild)),a.className=i):a&&r.removeChild(a),t(e.state.get("text"))}),e._super()}})}),n(me,[_t],function(t){return t.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var t=this,e=t._layout;return t.classes.add("btn-group"),t.preRender(),e.preRender(t),'<div id="'+t._id+'" class="'+t.classes+'"><div id="'+t._id+'-body">'+(t.settings.html||"")+e.renderHtml(t)+"</div></div>"}})}),n(ve,[Et],function(t){return t.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(t){var e=this;e._super(t),e.on("click mousedown",function(t){t.preventDefault()}),e.on("click",function(t){t.preventDefault(),e.disabled()||e.checked(!e.checked())}),e.checked(e.settings.checked)},checked:function(t){return arguments.length?(this.state.set("checked",t),this):this.state.get("checked")},value:function(t){return arguments.length?this.checked(t):this.checked()},renderHtml:function(){var t=this,e=t._id,n=t.classPrefix;return'<div id="'+e+'" class="'+t.classes+'" unselectable="on" aria-labelledby="'+e+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+e+'-al" class="'+n+'label">'+t.encode(t.state.get("text"))+"</span></div>"},bindStates:function(){function t(t){e.classes.toggle("checked",t),e.aria("checked",t)}var e=this;return e.state.on("change:text",function(t){e.getEl("al").firstChild.data=e.translate(t.value)}),e.state.on("change:checked change:value",function(n){e.fire("change"),t(n.value)}),e.state.on("change:icon",function(t){var n=t.value,i=e.classPrefix;if(void 0===n)return e.settings.icon;e.settings.icon=n,n=n?i+"ico "+i+"i-"+e.settings.icon:"";var o=e.getEl().firstChild,r=o.getElementsByTagName("i")[0];n?(r&&r==o.firstChild||(r=document.createElement("i"),o.insertBefore(r,o.firstChild)),r.className=n):r&&o.removeChild(r)}),e.state.get("checked")&&t(!0),e._super()}})}),n(ye,[Et,xt,pt,f,R,h],function(t,e,n,i,o,r){return t.extend({init:function(t){var e=this;e._super(t),t=e.settings,e.classes.add("combobox"),e.subinput=!0,e.ariaTarget="inp",t.menu=t.menu||t.values,t.menu&&(t.icon="caret"),e.on("click",function(n){var o=n.target,r=e.getEl();if(i.contains(r,o)||o==r)for(;o&&o!=r;)o.id&&-1!=o.id.indexOf("-open")&&(e.fire("action"),t.menu&&(e.showMenu(),n.aria&&e.menu.items()[0].focus())),o=o.parentNode}),e.on("keydown",function(t){var n;13==t.keyCode&&"INPUT"===t.target.nodeName&&(t.preventDefault(),e.parents().reverse().each(function(t){if(t.toJSON)return n=t,!1}),e.fire("submit",{data:n.toJSON()}))}),e.on("keyup",function(t){if("INPUT"==t.target.nodeName){var n=e.state.get("value"),i=t.target.value;i!==n&&(e.state.set("value",i),e.fire("autocomplete",t))}}),e.on("mouseover",function(t){var n=e.tooltip().moveTo(-65535);if(e.statusLevel()&&-1!==t.target.className.indexOf(e.classPrefix+"status")){var i=e.statusMessage()||"Ok",o=n.text(i).show().testMoveRel(t.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"==o),n.classes.toggle("tooltip-nw","bc-tl"==o),n.classes.toggle("tooltip-ne","bc-tr"==o),n.moveRel(t.target,o)}})},statusLevel:function(t){return arguments.length>0&&this.state.set("statusLevel",t),this.state.get("statusLevel")},statusMessage:function(t){return arguments.length>0&&this.state.set("statusMessage",t),this.state.get("statusMessage")},showMenu:function(){var t,n=this;n.menu||((t=n.settings.menu||[]).length?t={type:"menu",items:t}:t.type=t.type||"menu",n.menu=e.create(t).parent(n).renderTo(n.getContainerElm()),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(t){t.control===n.menu&&n.focus()}),n.menu.on("show hide",function(t){t.control.items().each(function(t){t.active(t.value()==n.value())})}).fire("show"),n.menu.on("select",function(t){n.value(t.control.value())}),n.on("focusin",function(t){"INPUT"==t.target.tagName.toUpperCase()&&n.menu.hide()}),n.aria("expanded",!0)),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var t,e,o=this,r=o.getEl(),a=o.getEl("open"),s=o.layoutRect(),l=0,c=r.firstChild;o.statusLevel()&&"none"!==o.statusLevel()&&(l=parseInt(n.getRuntimeStyle(c,"padding-right"),10)-parseInt(n.getRuntimeStyle(c,"padding-left"),10)),t=a?s.w-n.getSize(a).width-10:s.w-10;var u=document;return u.all&&(!u.documentMode||u.documentMode<=8)&&(e=o.layoutRect().h-2+"px"),i(c).css({width:t-l,lineHeight:e}),o._super(),o},postRender:function(){var t=this;return i(this.getEl("inp")).on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)}),t._super()},renderHtml:function(){var t,e,n,i=this,o=i._id,r=i.settings,a=i.classPrefix,s=i.state.get("value")||"",l="",c="";return"spellcheck"in r&&(c+=' spellcheck="'+r.spellcheck+'"'),r.maxLength&&(c+=' maxlength="'+r.maxLength+'"'),r.size&&(c+=' size="'+r.size+'"'),r.subtype&&(c+=' type="'+r.subtype+'"'),n='<i id="'+o+'-status" class="mce-status mce-ico" style="display: none"></i>',i.disabled()&&(c+=' disabled="disabled"'),(t=r.icon)&&"caret"!=t&&(t=a+"ico "+a+"i-"+r.icon),e=i.state.get("text"),(t||e)&&(l='<div id="'+o+'-open" class="'+a+"btn "+a+'open" tabIndex="-1" role="button"><button id="'+o+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=t?'<i class="'+t+'"></i>':'<i class="'+a+'caret"></i>')+(e?(t?" ":"")+e:"")+"</button></div>",i.classes.add("has-open")),'<div id="'+o+'" class="'+i.classes+'"><input id="'+o+'-inp" class="'+a+'textbox" value="'+i.encode(s,!1)+'" hidefocus="1"'+c+' placeholder="'+i.encode(r.placeholder)+'" />'+n+l+"</div>"},value:function(t){return arguments.length?(this.state.set("value",t),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(t,n){var i=this;if(0!==t.length){var o=function(t,e){return function(){i.fire("selectitem",{title:e,value:t})}};i.menu?i.menu.items().remove():i.menu=e.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(i).renderTo(),r.each(t,function(t){i.menu.add({text:t.title,url:t.previewUrl,match:n,classes:"menu-item-ellipsis",onclick:o(t.value,t.title)})}),i.menu.renderNew(),i.hideMenu(),i.menu.on("cancel",function(t){t.control.parent()===i.menu&&(t.stopPropagation(),i.focus(),i.hideMenu())}),i.menu.on("select",function(){i.focus()});var a=i.layoutRect().w;i.menu.layoutRect({w:a,minW:0,maxW:a}),i.menu.reflow(),i.menu.show(),i.menu.moveRel(i.getEl(),i.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])}else i.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var t=this;t.state.on("change:value",function(e){t.getEl("inp").value!=e.value&&(t.getEl("inp").value=e.value)}),t.state.on("change:disabled",function(e){t.getEl("inp").disabled=e.value}),t.state.on("change:statusLevel",function(e){var i=t.getEl("status"),o=t.classPrefix,r=e.value;n.css(i,"display","none"===r?"none":""),n.toggleClass(i,o+"i-checkmark","ok"===r),n.toggleClass(i,o+"i-warning","warn"===r),n.toggleClass(i,o+"i-error","error"===r),t.classes.toggle("has-status","none"!==r),t.repaint()}),n.on(t.getEl("status"),"mouseleave",function(){t.tooltip().hide()}),t.on("cancel",function(e){t.menu&&t.menu.visible()&&(e.stopPropagation(),t.hideMenu())});var e=function(t,e){e&&e.items().length>0&&e.items().eq(t)[0].focus()};return t.on("keydown",function(n){var i=n.keyCode;"INPUT"===n.target.nodeName&&(i===o.DOWN?(n.preventDefault(),t.fire("autocomplete"),e(0,t.menu)):i===o.UP&&(n.preventDefault(),e(-1,t.menu)))}),t._super()},remove:function(){i(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}})}),n(xe,[ye],function(t){return t.extend({init:function(t){var e=this;t.spellcheck=!1,t.onaction&&(t.icon="none"),e._super(t),e.classes.add("colorbox"),e.on("change keyup postrender",function(){e.repaintColor(e.value())})},repaintColor:function(t){var e=this.getEl("open"),i=e?e.getElementsByTagName("i")[0]:null;if(i)try{i.style.background=t}catch(n){}},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.state.get("rendered")&&t.repaintColor(e.value)}),t._super()}})}),n(be,[ge,kt],function(t,e){return t.extend({showPanel:function(){var t=this,n=t.settings;if(t.active(!0),t.panel)t.panel.show();else{var i=n.panel;i.type&&(i={layout:"grid",items:i}),i.role=i.role||"dialog",i.popover=!0,i.autohide=!0,i.ariaRoot=!0,t.panel=new e(i).on("hide",function(){t.active(!1)}).on("cancel",function(e){e.stopPropagation(),t.focus(),t.hidePanel()}).parent(t).renderTo(t.getContainerElm()),t.panel.fire("show"),t.panel.reflow()}t.panel.moveRel(t.getEl(),n.popoverAlign||(t.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var t=this;return t.aria("haspopup",!0),t.on("click",function(e){e.control===t&&(t.panel&&t.panel.visible()?t.hidePanel():(t.showPanel(),t.panel.focus(!!e.aria)))}),t._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}})}),n(_e,[be,x],function(t,e){var n=e.DOM;return t.extend({init:function(t){this._super(t),this.classes.add("colorbutton")},color:function(t){return t?(this._color=t,this.getEl("preview").style.backgroundColor=t,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var t=this,e=t._id,n=t.classPrefix,i=t.state.get("text"),o=t.settings.icon?n+"ico "+n+"i-"+t.settings.icon:"",r=t.settings.image?" style=\"background-image: url('"+t.settings.image+"')\"":"",a="";return i&&(t.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+t.encode(i)+"</span>"),'<div id="'+e+'" class="'+t.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+r+"></i>":"")+'<span id="'+e+'-preview" class="'+n+'preview"></span>'+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var t=this,e=t.settings.onclick;return t.on("click",function(i){i.aria&&"down"==i.aria.key||i.control!=t||n.getParent(i.target,"."+t.classPrefix+"open")||(i.stopImmediatePropagation(),e.call(t,i))}),delete t.settings.onclick,t._super()}})}),n(we,[],function(){var t=Math.min,e=Math.max,n=Math.round;return function(i){function o(i,o,r){var a,u,d,h;if(i=(parseInt(i,10)||0)%360,o=parseInt(o,10)/100,r=parseInt(r,10)/100,o=e(0,t(o,1)),r=e(0,t(r,1)),0!==o){switch(a=i/60,d=(u=r*o)*(1-Math.abs(a%2-1)),h=r-u,Math.floor(a)){case 0:s=u,l=d,c=0;break;case 1:s=d,l=u,c=0;break;case 2:s=0,l=u,c=d;break;case 3:s=0,l=d,c=u;break;case 4:s=d,l=0,c=u;break;case 5:s=u,l=0,c=d;break;default:s=l=c=0}s=n(255*(s+h)),l=n(255*(l+h)),c=n(255*(c+h))}else s=l=c=n(255*r)}function r(t){var e;return"object"==typeof t?"r"in t?(s=t.r,l=t.g,c=t.b):"v"in t&&o(t.h,t.s,t.v):(e=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(t))?(s=parseInt(e[1],10),l=parseInt(e[2],10),c=parseInt(e[3],10)):(e=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(t))?(s=parseInt(e[1],16),l=parseInt(e[2],16),c=parseInt(e[3],16)):(e=/#([0-F])([0-F])([0-F])/gi.exec(t))&&(s=parseInt(e[1]+e[1],16),l=parseInt(e[2]+e[2],16),c=parseInt(e[3]+e[3],16)),s=s<0?0:s>255?255:s,l=l<0?0:l>255?255:l,c=c<0?0:c>255?255:c,a}var a=this,s=0,l=0,c=0;i&&r(i),a.toRgb=function(){return{r:s,g:l,b:c}},a.toHsv=function(){return function(i,o,r){var a,s,l,c;return a=0,s=0,(l=t(i/=255,t(o/=255,r/=255)))==(c=e(i,e(o,r)))?{h:0,s:0,v:100*(s=l)}:(a=(c-l)/c,s=c,{h:n(60*((i==l?3:r==l?1:5)-(i==l?o-r:r==l?i-o:r-i)/(c-l))),s:n(100*a),v:n(100*s)})}(s,l,c)},a.toHex=function(){function t(t){return(t=parseInt(t,10).toString(16)).length>1?t:"0"+t}return"#"+t(s)+t(l)+t(c)},a.parse=r}}),n(Se,[Et,wt,pt,we],function(t,e,n,i){return t.extend({Defaults:{classes:"widget colorpicker"},init:function(t){this._super(t)},postRender:function(){function t(t,e){var i,o,r=n.getPos(t);return i=e.pageX-r.x,o=e.pageY-r.y,{x:i=Math.max(0,Math.min(i/t.clientWidth,1)),y:o=Math.max(0,Math.min(o/t.clientHeight,1))}}function o(t,e){n.css(c,{top:(360-t.h)/360*100+"%"}),e||n.css(d,{left:t.s+"%",top:100-t.v+"%"}),u.style.background=new i({s:100,v:100,h:t.h}).toHex(),h.color().parse({s:t.s,v:t.v,h:t.h})}function r(e){var n;n=t(u,e),s.s=100*n.x,s.v=100*(1-n.y),o(s),h.fire("change")}function a(e){var n;n=t(l,e),(s=f.toHsv()).h=360*(1-n.y),o(s,!0),h.fire("change")}var s,l,c,u,d,h=this,f=h.color();l=h.getEl("h"),c=h.getEl("hp"),u=h.getEl("sv"),d=h.getEl("svp"),h._repaint=function(){o(s=f.toHsv())},h._super(),h._svdraghelper=new e(h._id+"-sv",{start:r,drag:r}),h._hdraghelper=new e(h._id+"-h",{start:a,drag:a}),h._repaint()},rgb:function(){return this.color().toRgb()},value:function(t){var e=this;return arguments.length?(e.color().parse(t),void(e._rendered&&e._repaint())):e.color().toHex()},color:function(){return this._color||(this._color=new i),this._color},renderHtml:function(){var t,e=this,n=e._id,i=e.classPrefix,o="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return t='<div id="'+n+'-h" class="'+i+'colorpicker-h" style="background: -ms-linear-gradient(top,'+o+");background: linear-gradient(to bottom,"+o+');">'+function(){var t,e,n,r,a="";for(n="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",t=0,e=(r=o.split(",")).length-1;t<e;t++)a+='<div class="'+i+'colorpicker-h-chunk" style="height:'+100/e+"%;"+n+r[t]+",endColorstr="+r[t+1]+");-ms-"+n+r[t]+",endColorstr="+r[t+1]+')"></div>';return a}()+'<div id="'+n+'-hp" class="'+i+'colorpicker-h-marker"></div></div>','<div id="'+n+'" class="'+e.classes+'"><div id="'+n+'-sv" class="'+i+'colorpicker-sv"><div class="'+i+'colorpicker-overlay1"><div class="'+i+'colorpicker-overlay2"><div id="'+n+'-svp" class="'+i+'colorpicker-selector1"><div class="'+i+'colorpicker-selector2"></div></div></div></div></div>'+t+"</div>"}})}),n(Ce,[Et],function(t){return t.extend({init:function(t){var e=this;t.delimiter||(t.delimiter="»"),e._super(t),e.classes.add("path"),e.canFocus=!0,e.on("click",function(t){var n;(n=t.target.getAttribute("data-index"))&&e.fire("select",{value:e.row()[n],index:n})}),e.row(e.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(t){return arguments.length?(this.state.set("row",t),this):this.state.get("row")},renderHtml:function(){var t=this;return'<div id="'+t._id+'" class="'+t.classes+'">'+t._getDataPathHtml(t.state.get("row"))+"</div>"},bindStates:function(){var t=this;return t.state.on("change:row",function(e){t.innerHtml(t._getDataPathHtml(e.value))}),t._super()},_getDataPathHtml:function(t){var e,n,i=this,o=t||[],r="",a=i.classPrefix;for(e=0,n=o.length;e<n;e++)r+=(e>0?'<div class="'+a+'divider" aria-hidden="true"> '+i.settings.delimiter+" </div>":"")+'<div role="button" class="'+a+"path-item"+(e==n-1?" "+a+"last":"")+'" data-index="'+e+'" tabindex="-1" id="'+i._id+"-"+e+'" aria-level="'+(e+1)+'">'+o[e].name+"</div>";return r||(r='<div class="'+a+'path-item"> </div>'),r}})}),n(Me,[Ce],function(t){return t.extend({postRender:function(){function t(t){if(1===t.nodeType){if("BR"==t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1}var e=this,n=e.settings.editor;return!1!==n.settings.elementpath&&(e.on("select",function(t){n.focus(),n.selection.select(this.row()[t.index].element),n.nodeChanged()}),n.on("nodeChange",function(i){for(var o=[],r=i.parents,a=r.length;a--;)if(1==r[a].nodeType&&!t(r[a])){var s=n.fire("ResolveName",{name:r[a].nodeName.toLowerCase(),target:r[a]});if(s.isDefaultPrevented()||o.push({name:s.name,element:r[a]}),s.isPropagationStopped())break}e.row(o)})),e._super()}})}),n(Te,[_t],function(t){return t.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var t=this,e=t._layout,n=t.classPrefix;return t.classes.add("formitem"),e.preRender(t),'<div id="'+t._id+'" class="'+t.classes+'" hidefocus="1" tabindex="-1">'+(t.settings.title?'<div id="'+t._id+'-title" class="'+n+'title">'+t.settings.title+"</div>":"")+'<div id="'+t._id+'-body" class="'+t.bodyClasses+'">'+(t.settings.html||"")+e.renderHtml(t)+"</div></div>"}})}),n(ke,[_t,Te,h],function(t,e,n){return t.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var t=this,i=t.items();t.settings.formItemDefaults||(t.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),i.each(function(i){var o,r=i.settings.label;r&&((o=new e(n.extend({items:{type:"label",id:i._id+"-l",text:r,flex:0,forId:i._id,disabled:i.disabled()}},t.settings.formItemDefaults))).type="formitem",i.aria("labelledby",i._id+"-l"),void 0===i.settings.flex&&(i.settings.flex=1),t.replace(i,o),o.add(i))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var t=this;t._super(),t.fromJSON(t.settings.data)},bindStates:function(){function t(){var t,n,i=0,o=[];if(!1!==e.settings.labelGapCalc)for(("children"==e.settings.labelGapCalc?e.find("formitem"):e.items()).filter("formitem").each(function(t){var e=t.items()[0],n=e.getEl().clientWidth;i=n>i?n:i,o.push(e)}),n=e.settings.labelGap||0,t=o.length;t--;)o[t].settings.minWidth=i+n}var e=this;e._super(),e.on("show",t),t()}})}),n(Ae,[ke],function(t){return t.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var t=this,e=t._layout,n=t.classPrefix;return t.preRender(),e.preRender(t),'<fieldset id="'+t._id+'" class="'+t.classes+'" hidefocus="1" tabindex="-1">'+(t.settings.title?'<legend id="'+t._id+'-title" class="'+n+'fieldset-title">'+t.settings.title+"</legend>":"")+'<div id="'+t._id+'-body" class="'+t.bodyClasses+'">'+(t.settings.html||"")+e.renderHtml(t)+"</div></fieldset>"}})}),n(Ie,[x,B,d,ee,h,w],function(t,e,n,i,o,r){var a=o.trim,s=function(t,e,n,i,o){return{type:t,title:e,url:n,level:i,attach:o}},l=function(e,n){return t.DOM.select(e,n)},c=function(t){return t.innerText||t.textContent},u=function(t){return function(t){return t&&"A"===t.nodeName&&(t.id||t.name)}(t)&&h(t)},d=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},h=function(t){return function(t){for(;t=t.parentNode;){var e=t.contentEditable;if(e&&"inherit"!==e)return r.isContentEditableTrue(t)}return!1}(t)&&!r.isContentEditableFalse(t)},f=function(t){return d(t)&&h(t)},p=function(t){var e=function(t){return t.id?t.id:i.uuid("h")}(t);return s("header",c(t),"#"+e,function(t){return d(t)?parseInt(t.nodeName.substr(1),10):0}(t),function(){t.id=e})},g=function(t){var n=t.id||t.name,i=c(t);return s("anchor",i||"#"+n,"#"+n,0,e.noop)},m=function(t){return a(t.title).length>0};return{find:function(t){var e=function(t){return l("h1,h2,h3,h4,h5,h6,a:not([href])",t)}(t);return n.filter(function(t){return n.map(n.filter(t,f),p)}(e).concat(function(t){return n.map(n.filter(t,u),g)}(e)),m)}}}),n(De,[ye,h,d,B,R,Ie],function(t,e,n,i,o,r){var a={},s=function(t){return{title:t.title,value:{title:{raw:t.title},url:t.url,attach:t.attach}}},l=function(t){return e.map(t,s)},c=function(t,e){return{title:t,value:{title:t,url:e,attach:i.noop}}},u=function(t,e,n){var i=e in t?t[e]:n;return!1===i?null:i},d=function(t,o,r,s){var d={title:"-"},h=function(t){var a=n.filter(t[r],function(t){return function(t,e){return!n.find(e,function(e){return e.url===t})}(t,o)});return e.map(a,function(t){return{title:t,value:{title:t,url:t,attach:i.noop}}})},p=function(t){var e=n.filter(o,function(e){return e.type==t});return l(e)};return!1===s.typeahead_urls?[]:"file"===r?function(t){return n.reduce(t,function(t,e){return 0===t.length||0===e.length?t.concat(e):t.concat(d,e)},[])}([f(t,h(a)),f(t,p("header")),f(t,function(){var t=p("anchor"),e=u(s,"anchor_top","#top"),n=u(s,"anchor_bottom","#bottom");return null!==e&&t.unshift(c("<top>",e)),null!==n&&t.push(c("<bottom>",n)),t}())]):f(t,h(a))},h=function(t,e){var i=a[e];/^https?/.test(t)&&(i?-1===n.indexOf(i,t)&&(a[e]=i.slice(0,5).concat(t)):a[e]=[t])},f=function(t,n){var i=t.toLowerCase(),o=e.grep(n,function(t){return-1!==t.title.toLowerCase().indexOf(i)});return 1===o.length&&o[0].title===t?[]:o},p=function(t,e,n,i){var o=function(o){var a=r.find(n),s=d(o,a,i,e);t.showAutoComplete(s,o)};t.on("autocomplete",function(){o(t.value())}),t.on("selectitem",function(e){var n=e.value;t.value(n.url);var o=function(t){var e=t.title;return e.raw?e.raw:e}(n);t.fire("change","image"===i?{meta:{alt:o,attach:n.attach}}:{meta:{text:o,attach:n.attach}}),t.focus()}),t.on("click",function(e){0===t.value().length&&"INPUT"===e.target.nodeName&&o("")}),t.on("PostRender",function(){t.getRoot().on("submit",function(e){e.isDefaultPrevented()||h(t.value(),i)})})};return t.extend({init:function(t){var n,i,o,r=this,a=tinymce.activeEditor,s=a.settings,l=t.filetype;t.spellcheck=!1,(o=s.file_picker_types||s.file_browser_callback_types)&&(o=e.makeMap(o,/[, ]/)),o&&!o[l]||(!(i=s.file_picker_callback)||o&&!o[l]?!(i=s.file_browser_callback)||o&&!o[l]||(n=function(){i(r.getEl("inp").id,r.value(),l,window)}):n=function(){var t=r.fire("beforecall").meta;t=e.extend({filetype:l},t),i.call(a,function(t,e){r.value(t).fire("change",{meta:e})},r.value(),t)}),n&&(t.icon="browse",t.onaction=n),r._super(t),p(r,s,a.getBody(),l),function(t,e,n){var i=e.filepicker_validator_handler;if(i){var o=function(e){return 0===e.length?void t.statusLevel("none"):void i({url:e,type:n},function(e){var n=function(t){var e=t.status,n=t.message;return"valid"===e?{status:"ok",message:n}:"unknown"===e||"invalid"===e?{status:"warn",message:n}:{status:"none",message:""}}(e);t.statusMessage(n.message),t.statusLevel(n.status)})};t.state.on("change:value",function(t){o(t.value)})}}(r,s,l)}})}),n(Pe,[pe],function(t){return t.extend({recalc:function(t){var e=t.layoutRect(),n=t.paddingBox;t.items().filter(":visible").each(function(t){t.layoutRect({x:n.left,y:n.top,w:e.innerW-n.right-n.left,h:e.innerH-n.top-n.bottom}),t.recalc&&t.recalc()})}})}),n(Ee,[pe],function(t){return t.extend({recalc:function(t){var e,n,i,o,r,a,s,l,c,u,d,h,f,p,g,m,v,y,x,b,_,w,S,C,M,T,k,A,I,D,P,E,N,L,R,O,B,z=[],V=Math.max,F=Math.min;for(i=t.items().filter(":visible"),o=t.layoutRect(),r=t.paddingBox,a=t.settings,h=t.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,l=t.isRtl()?a.pack||"end":a.pack,c=a.spacing||0,"row-reversed"!=h&&"column-reverse"!=h||(i=i.set(i.toArray().reverse()),h=h.split("-")[0]),"column"==h?(C="y",w="h",S="minH",M="maxH",k="innerH",T="top",A="deltaH",I="contentH",L="left",E="w",D="x",P="innerW",N="minW",R="right",O="deltaW",B="contentW"):(C="x",w="w",S="minW",M="maxW",k="innerW",T="left",A="deltaW",I="contentW",L="top",E="h",D="y",P="innerH",N="minH",R="bottom",O="deltaH",B="contentH"),d=o[k]-r[T]-r[T],_=u=0,e=0,n=i.length;e<n;e++)p=(f=i[e]).layoutRect(),d-=e<n-1?c:0,(g=f.settings.flex)>0&&(u+=g,p[M]&&z.push(f),p.flex=g),d-=p[S],(m=r[L]+p[N]+r[R])>_&&(_=m);if((x={})[S]=d<0?o[S]-d+o[A]:o[k]-d+o[A],x[N]=_+o[O],x[I]=o[k]-d,x[B]=_,x.minW=F(x.minW,o.maxW),x.minH=F(x.minH,o.maxH),x.minW=V(x.minW,o.startMinWidth),x.minH=V(x.minH,o.startMinHeight),!o.autoResize||x.minW==o.minW&&x.minH==o.minH){for(y=d/u,e=0,n=z.length;e<n;e++)(m=(p=(f=z[e]).layoutRect())[S]+p.flex*y)>(v=p[M])?(d-=p[M]-p[S],u-=p.flex,p.flex=0,p.maxFlexSize=v):p.maxFlexSize=0;for(y=d/u,b=r[T],x={},0===u&&("end"==l?b=d+r[T]:"center"==l?(b=Math.round(o[k]/2-(o[k]-d)/2)+r[T])<0&&(b=r[T]):"justify"==l&&(b=r[T],c=Math.floor(d/(i.length-1)))),x[D]=r[L],e=0,n=i.length;e<n;e++)m=(p=(f=i[e]).layoutRect()).maxFlexSize||p[S],"center"===s?x[D]=Math.round(o[P]/2-p[E]/2):"stretch"===s?(x[E]=V(p[N]||0,o[P]-r[L]-r[R]),x[D]=r[L]):"end"===s&&(x[D]=o[P]-p[E]-r.top),p.flex>0&&(m+=p.flex*y),x[w]=m,x[C]=b,f.layoutRect(x),f.recalc&&f.recalc(),b+=m+c}else if(x.w=x.minW,x.h=x.minH,t.layoutRect(x),this.recalc(t),null===t._lastRect){var H=t.parent();H&&(H._lastRect=null,H.recalc())}}})}),n(Ne,[fe],function(t){return t.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(t){t.items().filter(":visible").each(function(t){t.recalc&&t.recalc()})},isNative:function(){return!0}})}),n(Le,[x],function(t){var n=function(t,e,n){for(;n!==e;){if(n.style[t])return n.style[t];n=n.parentNode}return""},i=function(e,n){return t.DOM.getStyle(n,e,!0)};return{getFontSize:function(t,e){var o=n("fontSize",t,e);return""!==o?o:i("fontSize",e)},getFontFamily:function(t,o){var r=n("fontFamily",t,o),a=""!==r?r:i("fontFamily",o);return a!==e?function(t){return t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")}(a):""},toPt:function(t){return/[0-9.]+px$/.test(t)?Math.round(72*parseInt(t,10)/96)+"pt":t}}}),n(Re,[yt,Et,kt,h,d,x,ae,l,Le],function(t,e,n,i,o,r,a,s,l){function c(e){e.on("ScriptsLoaded",function(){e.rtl&&(t.rtl=!0)})}function u(t){function e(e,n){return function(){var i=this;t.on("nodeChange",function(o){var r=t.formatter,a=null;d(o.parents,function(t){if(d(e,function(e){if(n?r.matchNode(t,n,{value:e.value})&&(a=e.value):r.matchNode(t,e.value)&&(a=e.value),a)return!1}),a)return!1}),i.value(a)})}}function o(e){return function(){var n=this,i=function(t){return t?t.split(",")[0]:""};t.on("nodeChange",function(o){var r,a=null;r=l.getFontFamily(t.getBody(),o.element),d(e,function(t){t.value.toLowerCase()===r.toLowerCase()&&(a=t.value)}),d(e,function(t){a||i(t.value).toLowerCase()!==i(r).toLowerCase()||(a=t.value)}),n.value(a),!a&&r&&n.text(i(r))})}}function r(e){return function(){var n=this;t.on("nodeChange",function(i){var o,r,a=null;o=l.getFontSize(t.getBody(),i.element),r=l.toPt(o),d(e,function(t){t.value===o?a=o:t.value===r&&(a=r)}),n.value(a),a||n.text(r)})}}function a(t){for(var e=(t=t.replace(/;$/,"").split(";")).length;e--;)t[e]=t[e].split("=");return t}function s(e){return function(){var n=this;t.formatter?t.formatter.formatChanged(e,function(t){n.active(t)}):t.on("init",function(){t.formatter.formatChanged(e,function(t){n.active(t)})})}}function c(e){return function(){function n(){return!!t.undoManager&&t.undoManager["redo"==e?"hasRedo":"hasUndo"]()}var i=this;i.disabled(!n()),t.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){i.disabled(t.readonly||!n())})}}function u(e){e.control&&(e=e.control.value()),e&&t.execCommand("mceToggleFormat",!1,e)}function f(e){var n=e.length;return i.each(e,function(e){e.menu&&(e.hidden=0===f(e.menu));var i=e.format;i&&(e.hidden=!t.formatter.canApply(i)),e.hidden&&n--}),n}function p(e){var n=e.items().length;return e.items().each(function(e){e.menu&&e.visible(p(e.menu)>0),!e.menu&&e.settings.menu&&e.visible(f(e.settings.menu)>0);var i=e.settings.format;i&&e.visible(t.formatter.canApply(i)),e.visible()||n--}),n}var g;g=function(){var e=0,n=[],i=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];return t.on("init",function(){d(n,function(e){t.formatter.register(e.name,e)})}),{type:"menu",items:function t(i){var o=[];if(i)return d(i,function(i){var r={text:i.title,icon:i.icon};if(i.items)r.menu=t(i.items);else{var a=i.format||"custom"+e++;i.format||(i.name=a,n.push(i)),r.format=a,r.cmd=i.cmd}o.push(r)}),o}(t.settings.style_formats_merge?t.settings.style_formats?i.concat(t.settings.style_formats):i:t.settings.style_formats||i),onPostRender:function(e){t.fire("renderFormatsMenu",{control:e.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return t.formatter.getCssText(this.settings.format)},onPostRender:function(){var e=this;e.parent().on("show",function(){var n,i;(n=e.settings.format)&&(e.disabled(!t.formatter.canApply(n)),e.active(t.formatter.match(n))),(i=e.settings.cmd)&&e.active(t.queryCommandState(i))})},onclick:function(){this.settings.format&&u(this.settings.format),this.settings.cmd&&t.execCommand(this.settings.cmd)}}}}(),d({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(e,n){t.addButton(n,{tooltip:e,onPostRender:s(n),onclick:function(){u(n)}})}),d({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(e,n){t.addButton(n,{tooltip:e[0],cmd:e[1]})}),d({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(e,n){t.addButton(n,{tooltip:e[0],cmd:e[1],onPostRender:s(n)})});var m=function(e){var n,o;if("string"==typeof e)o=e.split(" ");else if(i.isArray(e))return h(i.map(e,m));return n=i.grep(o,function(e){return"|"===e||e in t.menuItems}),i.map(n,function(e){return"|"===e?{text:"-"}:t.menuItems[e]})},v=function(e){var n=[{text:"-"}],o=i.grep(t.menuItems,function(t){return t.context===e});return i.each(o,function(t){"before"==t.separator&&n.push({text:"|"}),t.prependToContext?n.unshift(t):n.push(t),"after"==t.separator&&n.push({text:"|"})}),n};t.addButton("undo",{tooltip:"Undo",onPostRender:c("undo"),cmd:"undo"}),t.addButton("redo",{tooltip:"Redo",onPostRender:c("redo"),cmd:"redo"}),t.addMenuItem("newdocument",{text:"New document",icon:"newdocument",cmd:"mceNewDocument"}),t.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:c("undo"),cmd:"undo"}),t.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:c("redo"),cmd:"redo"}),t.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:function(){var e=this;t.on("VisualAid",function(t){e.active(t.hasVisual)}),e.active(t.hasVisual)},cmd:"mceToggleVisualAid"}),t.addButton("remove",{tooltip:"Remove",icon:"remove",cmd:"Delete"}),t.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(function(t){return function(t){var e=t;return e.length>0&&"-"===e[0].text&&(e=e.slice(1)),e.length>0&&"-"===e[e.length-1].text&&(e=e.slice(0,e.length-1)),e}(t.insert_button_items?m(t.insert_button_items):v("insert"))}(t.settings)),this.menu.renderNew()}}),d({cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"],bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(e,n){t.addMenuItem(n,{text:e[0],icon:n,shortcut:e[2],cmd:e[1]})}),t.on("mousedown",function(){n.hideAll()}),t.addButton("styleselect",{type:"menubutton",text:"Formats",menu:g,onShowMenu:function(){t.settings.style_formats_autohide&&p(this.menu)}}),t.addButton("formatselect",function(){var n=[],i=a(t.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");return d(i,function(e){n.push({text:e[0],value:e[1],textStyle:function(){return t.formatter.getCssText(e[1])}})}),{type:"listbox",text:i[0][0],values:n,fixedWidth:!0,onselect:u,onPostRender:e(n)}}),t.addButton("fontselect",function(){var e=[],n=a(t.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return d(n,function(t){e.push({text:{raw:t[0]},value:t[1],textStyle:-1==t[1].indexOf("dings")?"font-family:"+t[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:e,fixedWidth:!0,onPostRender:o(e),onselect:function(e){e.control.settings.value&&t.execCommand("FontName",!1,e.control.settings.value)}}}),t.addButton("fontsizeselect",function(){var e=[];return d((t.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt").split(" "),function(t){var n=t,i=t,o=t.split("=");o.length>1&&(n=o[0],i=o[1]),e.push({text:n,value:i})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:e,fixedWidth:!0,onPostRender:r(e),onclick:function(e){e.control.settings.value&&t.execCommand("FontSize",!1,e.control.settings.value)}}}),t.addMenuItem("formats",{text:"Formats",menu:g})}var d=i.each,h=function(t){return o.reduce(t,function(t,e){return t.concat(e)},[])};a.on("AddEditor",function(t){var e=t.editor;c(e),u(e),function(t){t.settings.ui_container&&(s.container=r.DOM.select(t.settings.ui_container)[0])}(e)}),t.translate=function(t){return a.translate(t)},e.tooltips=!s.iOS}),n(Oe,[pe],function(t){return t.extend({recalc:function(t){var e,n,i,o,r,a,s,l,c,u,d,h,f,p,g,m,v,y,x,b,_,w,S,C,M,T,k,A,I=[],D=[];e=t.settings,o=t.items().filter(":visible"),r=t.layoutRect(),i=e.columns||Math.ceil(Math.sqrt(o.length)),n=Math.ceil(o.length/i),y=e.spacingH||e.spacing||0,x=e.spacingV||e.spacing||0,b=e.alignH||e.align,_=e.alignV||e.align,m=t.paddingBox,A="reverseRows"in e?e.reverseRows:t.isRtl(),b&&"string"==typeof b&&(b=[b]),_&&"string"==typeof _&&(_=[_]);for(d=0;d<i;d++)I.push(0);for(h=0;h<n;h++)D.push(0);for(h=0;h<n;h++)for(d=0;d<i&&(u=o[h*i+d]);d++)M=(c=u.layoutRect()).minH,I[d]=(C=c.minW)>I[d]?C:I[d],D[h]=M>D[h]?M:D[h];for(T=r.innerW-m.left-m.right,w=0,d=0;d<i;d++)w+=I[d]+(d>0?y:0),T-=(d>0?y:0)+I[d];for(k=r.innerH-m.top-m.bottom,S=0,h=0;h<n;h++)S+=D[h]+(h>0?x:0),k-=(h>0?x:0)+D[h];if(S+=m.top+m.bottom,(l={}).minW=(w+=m.left+m.right)+(r.w-r.innerW),l.minH=S+(r.h-r.innerH),l.contentW=l.minW-r.deltaW,l.contentH=l.minH-r.deltaH,l.minW=Math.min(l.minW,r.maxW),l.minH=Math.min(l.minH,r.maxH),l.minW=Math.max(l.minW,r.startMinWidth),l.minH=Math.max(l.minH,r.startMinHeight),!r.autoResize||l.minW==r.minW&&l.minH==r.minH){var P;r.autoResize&&((l=t.layoutRect(l)).contentW=l.minW-r.deltaW,l.contentH=l.minH-r.deltaH),P="start"==e.packV?0:k>0?Math.floor(k/n):0;var E=0,N=e.flexWidths;if(N)for(d=0;d<N.length;d++)E+=N[d];else E=i;var L=T/E;for(d=0;d<i;d++)I[d]+=N?N[d]*L:L;for(p=m.top,h=0;h<n;h++){for(f=m.left,s=D[h]+P,d=0;d<i&&(u=o[A?h*i+i-1-d:h*i+d]);d++)g=u.settings,c=u.layoutRect(),a=Math.max(I[d],c.startMinWidth),c.x=f,c.y=p,"center"==(v=g.alignH||(b?b[d]||b[0]:null))?c.x=f+a/2-c.w/2:"right"==v?c.x=f+a-c.w:"stretch"==v&&(c.w=a),"center"==(v=g.alignV||(_?_[d]||_[0]:null))?c.y=p+s/2-c.h/2:"bottom"==v?c.y=p+s-c.h:"stretch"==v&&(c.h=s),u.layoutRect(c),f+=a+y,u.recalc&&u.recalc();p+=s+x}}else if(l.w=l.minW,l.h=l.minH,t.layoutRect(l),this.recalc(t),null===t._lastRect){var R=t.parent();R&&(R._lastRect=null,R.recalc())}}})}),n(Be,[Et,s],function(t,e){return t.extend({renderHtml:function(){var t=this;return t.classes.add("iframe"),t.canFocus=!1,'<iframe id="'+t._id+'" class="'+t.classes+'" tabindex="-1" src="'+(t.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(t){this.getEl().src=t},html:function(t,n){var i=this,o=this.getEl().contentWindow.document.body;return o?(o.innerHTML=t,n&&n()):e.setTimeout(function(){i.html(t)}),this}})}),n(ze,[Et],function(t){return t.extend({init:function(t){var e=this;e._super(t),e.classes.add("widget").add("infobox"),e.canFocus=!1},severity:function(t){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(t)},help:function(t){this.state.set("help",t)},renderHtml:function(){var t=this,e=t.classPrefix;return'<div id="'+t._id+'" class="'+t.classes+'"><div id="'+t._id+'-body">'+t.encode(t.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+e+"ico "+e+'i-help"></i></button></div></div>'},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl("body").firstChild.data=t.encode(e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t.state.on("change:help",function(e){t.classes.toggle("has-help",e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}})}),n(Ve,[Et,pt],function(t,e){return t.extend({init:function(t){var e=this;e._super(t),e.classes.add("widget").add("label"),e.canFocus=!1,t.multiline&&e.classes.add("autoscroll"),t.strong&&e.classes.add("strong")},initLayoutRect:function(){var t=this,n=t._super();return t.settings.multiline&&(e.getSize(t.getEl()).width>n.maxW&&(n.minW=n.maxW,t.classes.add("multiline")),t.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,e.getSize(t.getEl()).height)),n},repaint:function(){var t=this;return t.settings.multiline||(t.getEl().style.lineHeight=t.layoutRect().h+"px"),t._super()},severity:function(t){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(t)},renderHtml:function(){var t,e,n=this,i=n.settings.forId;return!i&&(e=n.settings.forName)&&(t=n.getRoot().find("#"+e)[0])&&(i=t._id),i?'<label id="'+n._id+'" class="'+n.classes+'"'+(i?' for="'+i+'"':"")+">"+n.encode(n.state.get("text"))+"</label>":'<span id="'+n._id+'" class="'+n.classes+'">'+n.encode(n.state.get("text"))+"</span>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.innerHtml(t.encode(e.value)),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}})}),n(Fe,[_t],function(t){return t.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(t){this._super(t),this.classes.add("toolbar")},postRender:function(){return this.items().each(function(t){t.classes.add("toolbar-item")}),this._super()}})}),n(He,[Fe],function(t){return t.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})}),n(We,[ge,xt,He],function(t,e,n){var i=t.extend({init:function(t){var e=this;e._renderOpen=!0,e._super(t),t=e.settings,e.classes.add("menubtn"),t.fixedWidth&&e.classes.add("fixed-width"),e.aria("haspopup",!0),e.state.set("menu",t.menu||e.render())},showMenu:function(t){var n,i=this;return i.menu&&i.menu.visible()&&!1!==t?i.hideMenu():(i.menu||((n=i.state.get("menu")||[]).length?n={type:"menu",items:n}:n.type=n.type||"menu",i.menu=n.renderTo?n.parent(i).show().renderTo():e.create(n).parent(i).renderTo(),i.fire("createmenu"),i.menu.reflow(),i.menu.on("cancel",function(t){t.control.parent()===i.menu&&(t.stopPropagation(),i.focus(),i.hideMenu())}),i.menu.on("select",function(){i.focus()}),i.menu.on("show hide",function(t){t.control==i.menu&&i.activeMenu("show"==t.type),i.aria("expanded","show"==t.type)}).fire("show")),i.menu.show(),i.menu.layoutRect({w:i.layoutRect().w}),i.menu.moveRel(i.getEl(),i.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),void i.fire("showmenu"))},hideMenu:function(){var t=this;t.menu&&(t.menu.items().each(function(t){t.hideMenu&&t.hideMenu()}),t.menu.hide())},activeMenu:function(t){this.classes.toggle("active",t)},renderHtml:function(){var t,e=this,i=e._id,o=e.classPrefix,r=e.settings.icon,a=e.state.get("text"),s="";return(t=e.settings.image)?(r="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",a&&(e.classes.add("btn-has-text"),s='<span class="'+o+'txt">'+e.encode(a)+"</span>"),r=e.settings.icon?o+"ico "+o+"i-"+r:"",e.aria("role",e.parent()instanceof n?"menuitem":"button"),'<div id="'+i+'" class="'+e.classes+'" tabindex="-1" aria-labelledby="'+i+'"><button id="'+i+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+t+"></i>":"")+s+' <i class="'+o+'caret"></i></button></div>'},postRender:function(){var t=this;return t.on("click",function(e){e.control===t&&function(t,e){for(;t;){if(e===t)return!0;t=t.parentNode}return!1}(e.target,t.getEl())&&(t.focus(),t.showMenu(!e.aria),e.aria&&t.menu.items().filter(":visible")[0].focus())}),t.on("mouseenter",function(e){var n,o=e.control,r=t.parent();o&&r&&o instanceof i&&o.parent()==r&&(r.items().filter("MenuButton").each(function(t){t.hideMenu&&t!=o&&(t.menu&&t.menu.visible()&&(n=!0),t.hideMenu())}),n&&(o.focus(),o.showMenu()))}),t._super()},bindStates:function(){var t=this;return t.state.on("change:menu",function(){t.menu&&t.menu.remove(),t.menu=null}),t._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}});return i}),n(Ge,[Et,xt,l,s],function(t,e,n,i){return t.extend({Defaults:{border:0,role:"menuitem"},init:function(t){var e,n=this;n._super(t),t=n.settings,n.classes.add("menu-item"),t.menu&&n.classes.add("menu-item-expand"),t.preview&&n.classes.add("menu-item-preview"),"-"!==(e=n.state.get("text"))&&"|"!==e||(n.classes.add("menu-item-sep"),n.aria("role","separator"),n.state.set("text","-")),t.selectable&&(n.aria("role","menuitemcheckbox"),n.classes.add("menu-item-checkbox"),t.icon="selected"),t.preview||t.selectable||n.classes.add("menu-item-normal"),n.on("mousedown",function(t){t.preventDefault()}),t.menu&&!t.ariaHideMenu&&n.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var t,n=this,i=n.settings,o=n.parent();if(o.items().each(function(t){t!==n&&t.hideMenu()}),i.menu){(t=n.menu)?t.show():((t=i.menu).length?t={type:"menu",items:t}:t.type=t.type||"menu",o.settings.itemDefaults&&(t.itemDefaults=o.settings.itemDefaults),(t=n.menu=e.create(t).parent(n).renderTo()).reflow(),t.on("cancel",function(e){e.stopPropagation(),n.focus(),t.hide()}),t.on("show hide",function(t){t.control.items&&t.control.items().each(function(t){t.active(t.settings.selected)})}).fire("show"),t.on("hide",function(e){e.control===t&&n.classes.remove("selected")}),t.submenu=!0),t._parentMenu=o,t.classes.add("menu-sub");var r=t.testMoveRel(n.getEl(),n.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);t.moveRel(n.getEl(),r),t.rel=r,r="menu-sub-"+r,t.classes.remove(t._lastRel).add(r),t._lastRel=r,n.classes.add("selected"),n.aria("expanded",!0)}},hideMenu:function(){var t=this;return t.menu&&(t.menu.items().each(function(t){t.hideMenu&&t.hideMenu()}),t.menu.hide(),t.aria("expanded",!1)),t},renderHtml:function(){function t(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(e){var n=s.match||"";return n?e.replace(new RegExp(t(n),"gi"),function(t){return"!mce~match["+t+"]mce~match!"}):e}function i(e){return e.replace(new RegExp(t("!mce~match["),"g"),"<b>").replace(new RegExp(t("]mce~match!"),"g"),"</b>")}var o,r=this,a=r._id,s=r.settings,l=r.classPrefix,c=r.state.get("text"),u=r.settings.icon,d="",h=s.shortcut,f=r.encode(s.url);return u&&r.parent().classes.add("menu-has-icons"),s.image&&(d=" style=\"background-image: url('"+s.image+"')\""),h&&(h=function(t){var e,i,o;for(o=n.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},t=t.split("+"),e=0;e<t.length;e++)(i=o[t[e].toLowerCase()])&&(t[e]=i);return t.join("+")}(h)),u=l+"ico "+l+"i-"+(r.settings.icon||"none"),o="-"!==c?'<i class="'+u+'"'+d+"></i> ":"",c=i(r.encode(e(c))),f=i(r.encode(e(f))),'<div id="'+a+'" class="'+r.classes+'" tabindex="-1">'+o+("-"!==c?'<span id="'+a+'-text" class="'+l+'text">'+c+"</span>":"")+(h?'<div id="'+a+'-shortcut" class="'+l+'menu-shortcut">'+h+"</div>":"")+(s.menu?'<div class="'+l+'caret"></div>':"")+(f?'<div class="'+l+'menu-item-link">'+f+"</div>":"")+"</div>"},postRender:function(){var t=this,e=t.settings,n=e.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var o=t.getEl("text");o&&o.setAttribute("style",n)}return t.on("mouseenter click",function(n){n.control===t&&(e.menu||"click"!==n.type?(t.showMenu(),n.aria&&t.menu.focus(!0)):(t.fire("select"),i.requestAnimationFrame(function(){t.parent().hideAll()})))}),t._super(),t},hover:function(){var t=this;return t.parent().items().each(function(t){t.classes.remove("selected")}),t.classes.toggle("selected",!0),t},active:function(t){return void 0!==t&&this.aria("checked",t),this._super(t)},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),n(Ue,[f,yt,s],function(t,e,n){return function(i,o){var r,a,s=this,l=e.classPrefix;s.show=function(e,c){function u(){r&&(t(i).append('<div class="'+l+"throbber"+(o?" "+l+"throbber-inline":"")+'"></div>'),c&&c())}return s.hide(),r=!0,e?a=n.setTimeout(u,e):u(),s},s.hide=function(){var t=i.lastChild;return n.clearTimeout(a),t&&-1!=t.className.indexOf("throbber")&&t.parentNode.removeChild(t),r=!1,s}}}),n(je,[kt,Ge,Ue,h],function(t,e,n,i){return t.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(t){if(t.autohide=!0,t.constrainToViewport=!0,"function"==typeof t.items&&(t.itemsFactory=t.items,t.items=[]),t.itemDefaults)for(var e=t.items,n=e.length;n--;)e[n]=i.extend({},t.itemDefaults,e[n]);this._super(t),this.classes.add("menu")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){function t(){i.throbber&&(i.throbber.hide(),i.throbber=null)}var e,i=this;i.settings.itemsFactory&&(i.throbber||(i.throbber=new n(i.getEl("body"),!0),0===i.items().length?(i.throbber.show(),i.fire("loading")):i.throbber.show(100,function(){i.items().remove(),i.fire("loading")}),i.on("hide close",t)),i.requestTime=e=(new Date).getTime(),i.settings.itemsFactory(function(n){return 0===n.length?void i.hide():void(i.requestTime===e&&(i.getEl().style.width="",i.getEl("body").style.width="",t(),i.items().remove(),i.getEl("body").innerHTML="",i.add(n),i.renderNew(),i.fire("loaded")))}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var t=this;return t.items().each(function(e){var n=e.settings;if(n.icon||n.image||n.selectable)return t._hasIcons=!0,!1}),t.settings.itemsFactory&&t.on("postrender",function(){t.settings.itemsFactory&&t.load()}),t._super()}})}),n($e,[We,je],function(t,e){return t.extend({init:function(t){var e,n,i,o,r=this;r._super(t),r._values=e=(t=r.settings).values,e&&(void 0!==t.value&&function e(o){for(var a=0;a<o.length;a++){if(n=o[a].selected||t.value===o[a].value)return i=i||o[a].text,r.state.set("value",o[a].value),!0;if(o[a].menu&&e(o[a].menu))return!0}}(e),!n&&e.length>0&&(i=e[0].text,r.state.set("value",e[0].value)),r.state.set("menu",e)),r.state.set("text",t.text||i),r.classes.add("listbox"),r.on("select",function(e){var n=e.control;o&&(e.lastControl=o),t.multiple?n.active(!n.active()):r.value(e.control.value()),o=n})},bindStates:function(){function t(t,n){t instanceof e&&t.items().each(function(t){t.hasMenus()||t.active(t.value()===n)})}function n(t,e){var i;if(t)for(var o=0;o<t.length;o++){if(t[o].value===e)return t[o];if(t[o].menu&&(i=n(t[o].menu,e)))return i}}var i=this;return i.on("show",function(e){t(e.control,i.value())}),i.state.on("change:value",function(t){var e=n(i.state.get("menu"),t.value);i.text(e?e.text:i.settings.text)}),i._super()}})}),n(qe,[ve],function(t){return t.extend({Defaults:{classes:"radio",role:"radio"}})}),n(Ye,[Et,wt],function(t,e){return t.extend({renderHtml:function(){var t=this,e=t.classPrefix;return t.classes.add("resizehandle"),"both"==t.settings.direction&&t.classes.add("resizehandle-both"),t.canFocus=!1,'<div id="'+t._id+'" class="'+t.classes+'"><i class="'+e+"ico "+e+'i-resize"></i></div>'},postRender:function(){var t=this;t._super(),t.resizeDragHelper=new e(this._id,{start:function(){t.fire("ResizeStart")},drag:function(e){"both"!=t.settings.direction&&(e.deltaX=0),t.fire("Resize",e)},stop:function(){t.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})}),n(Xe,[Et],function(t){function e(t){var e="";if(t)for(var n=0;n<t.length;n++)e+='<option value="'+t[n]+'">'+t[n]+"</option>";return e}return t.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(t){var e=this;e._super(t),e.settings.size&&(e.size=e.settings.size),e.settings.options&&(e._options=e.settings.options),e.on("keydown",function(t){var n;13==t.keyCode&&(t.preventDefault(),e.parents().reverse().each(function(t){if(t.toJSON)return n=t,!1}),e.fire("submit",{data:n.toJSON()}))})},options:function(t){return arguments.length?(this.state.set("options",t),this):this.state.get("options")},renderHtml:function(){var t,n=this,i="";return t=e(n._options),n.size&&(i=' size = "'+n.size+'"'),'<select id="'+n._id+'" class="'+n.classes+'"'+i+">"+t+"</select>"},bindStates:function(){var t=this;return t.state.on("change:options",function(n){t.getEl().innerHTML=e(n.value)}),t._super()}})}),n(Ze,[Et,wt,pt],function(t,e,n){function i(t,e,n){return t<e&&(t=e),t>n&&(t=n),t}function o(t,e,n){t.setAttribute("aria-"+e,n)}function r(t,e){var i,r,a,s,l;"v"==t.settings.orientation?(s="top",a="height",r="h"):(s="left",a="width",r="w"),l=t.getEl("handle"),i=(t.layoutRect()[r]||100)-n.getSize(l)[a],l.style[s]=i*((e-t._minValue)/(t._maxValue-t._minValue))+"px",l.style.height=t.layoutRect().h+"px",o(l,"valuenow",e),o(l,"valuetext",""+t.settings.previewFilter(e)),o(l,"valuemin",t._minValue),o(l,"valuemax",t._maxValue)}return t.extend({init:function(t){var e=this;t.previewFilter||(t.previewFilter=function(t){return Math.round(100*t)/100}),e._super(t),e.classes.add("slider"),"v"==t.orientation&&e.classes.add("vertical"),e._minValue=t.minValue||0,e._maxValue=t.maxValue||100,e._initValue=e.state.get("value")},renderHtml:function(){var t=this,e=t._id;return'<div id="'+e+'" class="'+t.classes+'"><div id="'+e+'-handle" class="'+t.classPrefix+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var t,o,r,a,s,l,c=this;t=c._minValue,o=c._maxValue,"v"==c.settings.orientation?(r="screenY",a="top",s="height",l="h"):(r="screenX",a="left",s="width",l="w"),c._super(),function(t,e){function n(n){var o;o=c.value(),o=i(o=function(t,e,n){return n*(e-t)-t}(t,e,function(t,e,n){return(n+t)/(e-t)}(t,e,o)+.05*n),t,e),c.value(o),c.fire("dragstart",{value:o}),c.fire("drag",{value:o}),c.fire("dragend",{value:o})}c.on("keydown",function(t){switch(t.keyCode){case 37:case 38:n(-1);break;case 39:case 40:n(1)}})}(t,o,c.getEl("handle")),function(t,o,u){var d,h,f,p,g;c._dragHelper=new e(c._id,{handle:c._id+"-handle",start:function(t){d=t[r],h=parseInt(c.getEl("handle").style[a],10),f=(c.layoutRect()[l]||100)-n.getSize(u)[s],c.fire("dragstart",{value:g})},drag:function(e){p=i(h+(e[r]-d),0,f),u.style[a]=p+"px",c.value(g=t+p/f*(o-t)),c.tooltip().text(""+c.settings.previewFilter(g)).show().moveRel(u,"bc tc"),c.fire("drag",{value:g})},stop:function(){c.tooltip().hide(),c.fire("dragend",{value:g})}})}(t,o,c.getEl("handle"))},repaint:function(){this._super(),r(this,this.value())},bindStates:function(){var t=this;return t.state.on("change:value",function(e){r(t,e.value)}),t._super()}})}),n(Ke,[Et],function(t){return t.extend({renderHtml:function(){var t=this;return t.classes.add("spacer"),t.canFocus=!1,'<div id="'+t._id+'" class="'+t.classes+'"></div>'}})}),n(Je,[We,pt,f],function(t,e,n){return t.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var t,i=this,o=i.getEl(),r=i.layoutRect();return i._super(),t=o.lastChild,n(o.firstChild).css({width:r.w-e.getSize(t).width,height:r.h-2}),n(t).css({height:r.h-2}),i},activeMenu:function(t){n(this.getEl().lastChild).toggleClass(this.classPrefix+"active",t)},renderHtml:function(){var t,e=this,n=e._id,i=e.classPrefix,o=e.state.get("icon"),r=e.state.get("text"),a="";return(t=e.settings.image)?(o="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",o=e.settings.icon?i+"ico "+i+"i-"+o:"",r&&(e.classes.add("btn-has-text"),a='<span class="'+i+'txt">'+e.encode(r)+"</span>"),'<div id="'+n+'" class="'+e.classes+'" role="button" tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(o?'<i class="'+o+'"'+t+"></i>":"")+a+'</button><button type="button" class="'+i+'open" hidefocus="1" tabindex="-1">'+(e._menuBtnText?(o?" ":"")+e._menuBtnText:"")+' <i class="'+i+'caret"></i></button></div>'},postRender:function(){var t=this,e=t.settings.onclick;return t.on("click",function(t){var n=t.target;if(t.control==this)for(;n;){if(t.aria&&"down"!=t.aria.key||"BUTTON"==n.nodeName&&-1==n.className.indexOf("open"))return t.stopImmediatePropagation(),void(e&&e.call(this,t));n=n.parentNode}}),delete t.settings.onclick,t._super()}})}),n(Qe,[Ne],function(t){return t.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}})}),n(tn,[Ct,f,pt],function(t,e,n){return t.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(t){var n;this.activeTabId&&(n=this.getEl(this.activeTabId),e(n).removeClass(this.classPrefix+"active"),n.setAttribute("aria-selected","false")),this.activeTabId="t"+t,(n=this.getEl("t"+t)).setAttribute("aria-selected","true"),e(n).addClass(this.classPrefix+"active"),this.items()[t].show().fire("showtab"),this.reflow(),this.items().each(function(e,n){t!=n&&e.hide()})},renderHtml:function(){var t=this,e=t._layout,n="",i=t.classPrefix;return t.preRender(),e.preRender(t),t.items().each(function(e,o){var r=t._id+"-t"+o;e.aria("role","tabpanel"),e.aria("labelledby",r),n+='<div id="'+r+'" class="'+i+'tab" unselectable="on" role="tab" aria-controls="'+e._id+'" aria-selected="false" tabIndex="-1">'+t.encode(e.settings.title)+"</div>"}),'<div id="'+t._id+'" class="'+t.classes+'" hidefocus="1" tabindex="-1"><div id="'+t._id+'-head" class="'+i+'tabs" role="tablist">'+n+'</div><div id="'+t._id+'-body" class="'+t.bodyClasses+'">'+e.renderHtml(t)+"</div></div>"},postRender:function(){var t=this;t._super(),t.settings.activeTab=t.settings.activeTab||0,t.activateTab(t.settings.activeTab),this.on("click",function(e){var n=e.target.parentNode;if(n&&n.id==t._id+"-head")for(var i=n.childNodes.length;i--;)n.childNodes[i]==e.target&&t.activateTab(i)})},initLayoutRect:function(){var t,e,i,o=this;e=(e=n.getSize(o.getEl("head")).width)<0?0:e,i=0,o.items().each(function(t){e=Math.max(e,t.layoutRect().minW),i=Math.max(i,t.layoutRect().minH)}),o.items().each(function(t){t.settings.x=0,t.settings.y=0,t.settings.w=e,t.settings.h=i,t.layoutRect({x:0,y:0,w:e,h:i})});var r=n.getSize(o.getEl("head")).height;return o.settings.minWidth=e,o.settings.minHeight=i+r,(t=o._super()).deltaH+=r,t.innerH=t.h-t.deltaH,t}})}),n(en,[Et,h,pt],function(t,e,n){return t.extend({init:function(t){var e=this;e._super(t),e.classes.add("textbox"),t.multiline?e.classes.add("multiline"):(e.on("keydown",function(t){var n;13==t.keyCode&&(t.preventDefault(),e.parents().reverse().each(function(t){if(t.toJSON)return n=t,!1}),e.fire("submit",{data:n.toJSON()}))}),e.on("keyup",function(t){e.state.set("value",t.target.value)}))},repaint:function(){var t,e,n,i,o,r=this,a=0;t=r.getEl().style,e=r._layoutRect,o=r._lastRepaintRect||{};var s=document;return!r.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)&&(t.lineHeight=e.h-a+"px"),i=(n=r.borderBox).left+n.right+8,a=n.top+n.bottom+(r.settings.multiline?8:0),e.x!==o.x&&(t.left=e.x+"px",o.x=e.x),e.y!==o.y&&(t.top=e.y+"px",o.y=e.y),e.w!==o.w&&(t.width=e.w-i+"px",o.w=e.w),e.h!==o.h&&(t.height=e.h-a+"px",o.h=e.h),r._lastRepaintRect=o,r.fire("repaint",{},!1),r},renderHtml:function(){var t,i,o=this,r=o.settings;return t={id:o._id,hidefocus:"1"},e.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(e){t[e]=r[e]}),o.disabled()&&(t.disabled="disabled"),r.subtype&&(t.type=r.subtype),(i=n.create(r.multiline?"textarea":"input",t)).value=o.state.get("value"),i.className=o.classes,i.outerHTML},value:function(t){return arguments.length?(this.state.set("value",t),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var t=this;t.getEl().value=t.state.get("value"),t._super(),t.$el.on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)})},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.getEl().value!=e.value&&(t.getEl().value=e.value)}),t.state.on("change:disabled",function(e){t.getEl().disabled=e.value}),t._super()},remove:function(){this.$el.off(),this._super()}})}),n("tinymce/Register",[],function(){var t=this||window;return"function"==typeof t.define&&(t.define.amd||t.define("ephox/tinymce",[],function(){return t.tinymce})),"object"==typeof module&&(module.exports=window.tinymce),{}}),function(n){var i,r,a,s,l;for(i=0;i<n.length;i++){r=t,s=(a=n[i]).split(/[.\/]/);for(var c=0;c<s.length-1;++c)r[s[c]]===e&&(r[s[c]]={}),r=r[s[c]];r[s[s.length-1]]=o[a]}if(t.AMDLC_TESTS){for(a in l=t.privateModules||{},o)l[a]=o[a];for(i=0;i<n.length;i++)delete l[n[i]];t.privateModules=l}}([r,a,s,l,c,u,h,f,p,g,v,x,b,_,M,k,A,I,D,P,E,N,R,O,G,U,Y,J,rt,at,st,lt,ut,ht,ft,vt,yt,xt,bt,_t,wt,St,Ct,Mt,Tt,kt,At,It,Dt,Pt,Et,Nt,Lt,Rt,zt,Ft,ie,oe,re,ae,se,le,ce,ue,de,he,fe,pe,ge,me,ve,ye,xe,be,_e,we,Se,Ce,Me,Te,ke,Ae,De,Pe,Ee,Ne,Re,Oe,Be,ze,Ve,Fe,He,We,Ge,Ue,je,$e,qe,Ye,Xe,Ze,Ke,Je,Qe,tn,en])}(window),function(){var t={},e=function(e){for(var i=t[e],o=i.deps,r=i.defn,a=o.length,s=new Array(a),l=0;l<a;++l)s[l]=n(o[l]);var c=r.apply(null,s);if(void 0===c)throw"module ["+e+"] returned undefined";i.instance=c},n=function(n){var i=t[n];if(void 0===i)throw"module ["+n+"] was undefined";return void 0===i.instance&&e(n),i.instance},i=function(e,n,i){if("string"!=typeof e)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+e;if(void 0===i)throw"no definition function for "+e;t[e]={deps:n,defn:i,instance:void 0}},o=function(t,e){i(t,[],function(){return e})};o("1",tinymce.Env),o("2",tinymce.EditorManager),o("3",tinymce.ThemeManager),o("8",tinymce.util.Tools),o("9",tinymce.ui.Factory),o("a",tinymce.DOM),i("b",["8","9"],function(t,e){var n=function(n,i,o){var r,a=[];if(i)return t.each(i.split(/[ ,]/),function(t){var i=function(){var e=n.selection;t.settings.stateSelector&&e.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&e.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})};"|"==t?r=null:e.has(t)?(a.push(t={type:t,size:o}),r=null):(r||a.push(r={type:"buttongroup",items:[]}),n.buttons[t]&&("function"==typeof(t=n.buttons[t])&&(t=t()),t.type=t.type||"button",t.size=o,t=e.create(t),r.items.push(t),n.initialized?i():n.on("init",i)))}),{type:"toolbar",layout:"flow",items:a}};return{createToolbar:n,createToolbars:function(e,i){var o=[],r=e.settings,a=function(t){if(t)return o.push(n(e,t,i)),!0};if(t.isArray(r.toolbar)){if(0===r.toolbar.length)return;t.each(r.toolbar,function(t,e){r["toolbar"+(e+1)]=t}),delete r.toolbar}for(var s=1;s<10&&a(r["toolbar"+s]);s++);if(o.length||!1===r.toolbar||a(r.toolbar||"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"),o.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:o}}}}),i("c",["8"],function(t){var e={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},n=function(t,e){return"|"==e?{text:"|"}:t[e]},i=function(i,o,r){var a,s,l,c,u;if(u=t.makeMap((o.removed_menuitems||"").split(/[ ,]/)),o.menu?(s=o.menu[r],c=!0):s=e[r],s){a={text:s.title},l=[],t.each((s.items||"").split(/[ ,]/),function(t){n(i,t)&&!u[t]&&l.push(n(i,t))}),c||t.each(i,function(t){t.context==r&&("before"==t.separator&&l.push({text:"|"}),t.prependToContext?l.unshift(t):l.push(t),"after"==t.separator&&l.push({text:"|"}))});for(var d=0;d<l.length;d++)"|"==l[d].text&&(0!==d&&d!=l.length-1||l.splice(d,1));if(a.menu=l,!a.menu.length)return null}return a};return{createMenuButtons:function(t){var n,o=[],r=t.settings,a=[];if(r.menu)for(n in r.menu)a.push(n);else for(n in e)a.push(n);for(var s="string"==typeof r.menubar?r.menubar.split(/[ ,]/):a,l=0;l<s.length;l++){var c=s[l];(c=i(t.menuItems,t.settings,c))&&o.push(c)}return o}}}),o("j",tinymce.util.Delay),o("k",tinymce.geom.Rect),i("d",["a","8","j","b","9","k"],function(t,e,n,i,o,r){var a=function(t){return{left:t.x,top:t.y,width:t.w,height:t.h,right:t.x+t.w,bottom:t.y+t.h}},s=function(t){e.each(t.contextToolbars,function(t){t.panel&&t.panel.hide()})},l=function(t,e){t.moveTo(e.left,e.top)},c=function(t,n,i){n=n?n.substr(0,2):"",e.each({t:"down",b:"up"},function(e,o){t.classes.toggle("arrow-"+e,i(o,n.substr(0,1)))}),e.each({l:"left",r:"right"},function(e,o){t.classes.toggle("arrow-"+e,i(o,n.substr(1,1)))})},u=function(t,e,n,i,o,r){return r=a({x:e,y:n,w:r.w,h:r.h}),t&&(r=t({elementRect:a(i),contentAreaRect:a(o),panelRect:r})),r};return{addContextualToolbars:function(a){var d,h=a.settings,f=function(){return a.contextToolbars||[]},p=function(e,n){var i,o,d,f,p,g,m,v=h.inline_toolbar_position_handler;if(!a.removed){if(!e||!e.toolbar.panel)return void s(a);m=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],p=e.toolbar.panel,n&&p.show(),d=function(e){var n,i,o;return n=t.getPos(a.getContentAreaContainer()),i=a.dom.getRect(e),"BODY"===(o=a.dom.getRoot()).nodeName&&(i.x-=o.ownerDocument.documentElement.scrollLeft||o.scrollLeft,i.y-=o.ownerDocument.documentElement.scrollTop||o.scrollTop),i.x+=n.x,i.y+=n.y,i}(e.element),o=t.getRect(p.getEl()),f=t.getRect(a.getContentAreaContainer()||a.getBody()),"inline"!==t.getStyle(e.element,"display",!0)&&(d.w=e.element.clientWidth,d.h=e.element.clientHeight),a.inline||(f.w=a.getDoc().documentElement.offsetWidth),a.selection.controlSelection.isResizable(e.element)&&d.w<25&&(d=r.inflate(d,0,8)),i=r.findBestRelativePosition(o,d,f,m),d=r.clamp(d,f),i?(g=r.relativePosition(o,d,i),l(p,u(v,g.x,g.y,d,f,o))):(f.h+=o.h,(d=r.intersect(f,d))?(i=r.findBestRelativePosition(o,d,f,["bc-tc","bl-tl","br-tr"]))?(g=r.relativePosition(o,d,i),l(p,u(v,g.x,g.y,d,f,o))):l(p,u(v,d.x,d.y,d,f,o)):p.hide()),c(p,i,function(t,e){return t===e})}},g=function(t){return function(){n.requestAnimationFrame(function(){a.selection&&p(y(a.selection.getNode()),t)})}},m=function(){d||(d=a.selection.getScrollContainer()||a.getWin(),t.bind(d,"scroll",g(!0)),a.on("remove",function(){t.unbind(d,"scroll")}))},v=function(){e.each(f(),function(t){t.panel&&t.panel.hide()})},y=function(t){var e,n,i,o=f();for(e=(i=a.$(t).parents().add(t)).length-1;e>=0;e--)for(n=o.length-1;n>=0;n--)if(o[n].predicate(i[e]))return{toolbar:o[n],element:i[e]};return null};a.on("click keyup setContent ObjectResized",function(t){("setcontent"!==t.type||t.selection)&&n.setEditorTimeout(a,function(){var t;(t=y(a.selection.getNode()))?(v(),function(t){var e;t.toolbar.panel?(t.toolbar.panel.show(),p(t)):(m(),e=o.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:i.createToolbar(a,t.toolbar.items),oncancel:function(){a.focus()}}),t.toolbar.panel=e,e.renderTo(document.body).reflow(),p(t))}(t)):v()})}),a.on("blur hide contextmenu",v),a.on("ObjectResizeStart",function(){var t=y(a.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.hide()}),a.on("ResizeEditor ResizeWindow",g(!0)),a.on("nodeChange",g(!1)),a.on("remove",function(){e.each(f(),function(t){t.panel&&t.panel.remove()}),a.contextToolbars={}}),a.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var t=y(a.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.items()[0].focus()})}}}),i("e",[],function(){var t=function(t,e){return function(){var n=t.find(e)[0];n&&n.focus(!0)}};return{addKeys:function(e,n){e.shortcuts.add("Alt+F9","",t(n,"menubar")),e.shortcuts.add("Alt+F10,F10","",t(n,"toolbar")),e.shortcuts.add("Alt+F11","",t(n,"elementpath")),n.on("cancel",function(){e.focus()})}}}),i("f",["8","9","1"],function(t,e,n){var i=function(t,e,n){var i=t.settings[n];i&&i(function(t){return{element:function(){return t}}}(e.getEl("body")))},o=function(e,n,o){t.each(o,function(t){var o=n.items().filter("#"+t.name)[0];o&&o.visible()&&t.name!==e&&(i(t,o,"onhide"),o.visible(!1))})},r=function(e,n){return t.grep(e,function(t){return t.name===n})[0]},a=function(t,n,a){return function(s){var l=s.control,c=l.parents().filter("panel")[0],u=c.find("#"+n)[0],d=r(a,n);o(n,c,a),function(t){t.items().each(function(t){t.active(!1)})}(l.parent()),u&&u.visible()?(i(d,u,"onhide"),u.hide(),l.active(!1)):(u?(u.show(),i(d,u,"onshow")):(u=e.create({type:"container",name:n,layout:"stack",classes:"sidebar-panel",html:""}),c.prepend(u),i(d,u,"onrender"),i(d,u,"onshow")),l.active(!0)),t.fire("ResizeEditor")}};return{hasSidebar:function(t){return!(n.ie&&!(n.ie>=11)||!t.sidebars)&&t.sidebars.length>0},createSidebar:function(e){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:t.map(e.sidebars,function(t){var n=t.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:a(e,t.name,e.sidebars)}})}]}}}}),i("g",[],function(){return{fireSkinLoaded:function(t){var e=function(){t._skinLoaded=!0,t.fire("SkinLoaded")};return function(){t.initialized?e():t.on("init",e)}}}}),i("6",["a"],function(t){var e=function(t){return{width:t.clientWidth,height:t.clientHeight}},n=function(n,i,o){var r,a,s,l,c=n.settings;r=n.getContainer(),a=n.getContentAreaContainer().firstChild,s=e(r),l=e(a),null!==i&&(i=Math.max(c.min_width||100,i),i=Math.min(c.max_width||65535,i),t.setStyle(r,"width",i+(s.width-l.width)),t.setStyle(a,"width",i)),o=Math.max(c.min_height||100,o),o=Math.min(c.max_height||65535,o),t.setStyle(a,"height",o),n.fire("ResizeEditor")};return{resizeTo:n,resizeBy:function(t,e,i){var o=t.getContentAreaContainer();n(t,o.clientWidth+e,o.clientHeight+i)}}}),i("4",["8","9","a","b","c","d","e","f","g","6"],function(t,e,n,i,o,r,a,s,l,c){var u=function(t){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:t,html:""}},d=function(t){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[u("0"),s.createSidebar(t)]}};return{render:function(t,h,f){var p,g,m,v=t.settings;return f.skinUiCss&&n.styleSheetLoader.load(f.skinUiCss,l.fireSkinLoaded(t)),p=h.panel=e.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[!1===v.menubar?null:{type:"menubar",border:"0 0 1 0",items:o.createMenuButtons(t)},i.createToolbars(t,v.toolbar_items_size),s.hasSidebar(t)?d(t):u("1 0 0 0")]}),!1!==v.resize&&(g={type:"resizehandle",direction:v.resize,onResizeStart:function(){var e=t.getContentAreaContainer().firstChild;m={width:e.clientWidth,height:e.clientHeight}},onResize:function(e){c.resizeTo(t,"both"===v.resize?m.width+e.deltaX:null,m.height+e.deltaY)}}),!1!==v.statusbar&&p.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:t},g]}),t.fire("BeforeRenderUI"),t.on("SwitchMode",function(t){return function(e){t.find("*").disabled("readonly"===e.mode)}}(p)),p.renderBefore(f.targetNode).reflow(),v.readonly&&t.setMode("readonly"),v.width&&n.setStyle(p.getEl(),"width",v.width),t.on("remove",function(){p.remove(),p=null}),a.addKeys(t,p),r.addContextualToolbars(t),{iframeContainer:p.find("#iframe")[0].getEl(),editorContainer:p.getEl()}}}}),o("h",tinymce.ui.FloatPanel),i("5",["8","9","a","h","b","c","d","e","g"],function(t,e,n,i,o,r,a,s,l){return{render:function(t,c,u){var d,h,f=t.settings;f.fixed_toolbar_container&&(h=n.select(f.fixed_toolbar_container)[0]);var p=function(){if(d&&d.moveRel&&d.visible()&&!d._fixed){var e=t.selection.getScrollContainer(),i=t.getBody(),o=0,r=0;if(e){var a=n.getPos(i),s=n.getPos(e);o=Math.max(0,s.x-a.x),r=Math.max(0,s.y-a.y)}d.fixed(!1).moveRel(i,t.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(o,r)}},g=function(){d&&(d.show(),p(),n.addClass(t.getBody(),"mce-edit-focus"))},m=function(){d&&(d.hide(),i.hideAll(),n.removeClass(t.getBody(),"mce-edit-focus"))},v=function(){return d?void(d.visible()||g()):(d=c.panel=e.create({type:h?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!h,border:1,items:[!1===f.menubar?null:{type:"menubar",border:"0 0 1 0",items:r.createMenuButtons(t)},o.createToolbars(t,f.toolbar_items_size)]}),t.fire("BeforeRenderUI"),d.renderTo(h||document.body).reflow(),s.addKeys(t,d),g(),a.addContextualToolbars(t),t.on("nodeChange",p),t.on("activate",g),t.on("deactivate",m),void t.nodeChanged())};return f.content_editable=!0,t.on("focus",function(){u.skinUiCss?n.styleSheetLoader.load(u.skinUiCss,v,v):v()}),t.on("blur hide",m),t.on("remove",function(){d&&(d.remove(),d=null)}),u.skinUiCss&&n.styleSheetLoader.load(u.skinUiCss,l.fireSkinLoaded(t)),{}}}}),o("i",tinymce.ui.Throbber),i("7",["i"],function(t){return{setup:function(e,n){var i;e.on("ProgressState",function(e){i=i||new t(n.panel.getEl("body")),e.state?i.show(e.time):i.hide()})}}}),i("0",["1","2","3","4","5","6","7"],function(t,e,n,i,o,r,a){var s=function(n,r,s){var l=n.settings,c=!1!==l.skin&&(l.skin||"lightgray");if(c){var u=l.skin_url;u=u?n.documentBaseURI.toAbsolute(u):e.baseURL+"/skins/"+c,s.skinUiCss=t.documentMode<=7?u+"/skin.ie7.min.css":u+"/skin.min.css",n.contentCSS.push(u+"/content"+(n.inline?".inline":"")+".min.css")}return a.setup(n,r),l.inline?o.render(n,r,s):i.render(n,r,s)};return n.add("modern",function(t){return{renderUI:function(e){return s(t,this,e)},resizeTo:function(e,n){return r.resizeTo(t,e,n)},resizeBy:function(e,n){return r.resizeBy(t,e,n)}}}),function(){}}),n("0")()}(),tinymce.PluginManager.add("link",function(t){function e(t){return t&&"A"===t.nodeName&&t.href}function n(t){return tinymce.util.Tools.grep(t,e).length>0}function i(e){return t.dom.getParent(e,"a[href]")}function o(){return i(t.selection.getStart())}function r(e){if(e){var n=function(t){return t.getAttribute("data-mce-href")||t.getAttribute("href")}(e);if(/^#/.test(n)){var i=t.$(n);i.length&&t.selection.scrollIntoView(i[0],!0)}else!function(t){if(!tinymce.Env.ie||tinymce.Env.ie>10){var e=document.createElement("a");e.target="_blank",e.href=t,e.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(t,e){document.body.appendChild(t),t.dispatchEvent(e),document.body.removeChild(t)}(e,n)}else{var i=window.open("","_blank");if(i){i.opener=null;var o=i.document;o.open(),o.write('<meta http-equiv="refresh" content="0; url='+tinymce.DOM.encode(t)+'">'),o.close()}}}(e.href)}}function a(){r(o())}function s(e){return function(){var n=t.settings.link_list;"string"==typeof n?tinymce.util.XHR.send({url:n,success:function(t){e(tinymce.util.JSON.parse(t))}}):"function"==typeof n?n(e):e(n)}}function l(t,e,n){return function t(n,i){return i=i||[],tinymce.each(n,function(n){var o={text:n.text||n.title};n.menu?o.menu=t(n.menu):(o.value=n.value,e&&e(o)),i.push(o)}),i}(t,n||[])}function c(e){function n(t){var e=s.find("#text");(!e.value()||t.lastControl&&e.value()==t.lastControl.text())&&e.value(t.control.text()),s.find("#href").value(t.control.value())}function i(){!a&&0===y.text.length&&c&&this.parent().parent().find("#text")[0].value(this.value())}var o,r,a,s,c,d,h,f,p,g,m,v,y={},x=t.selection,b=t.dom;o=x.getNode(),r=b.getParent(o,"a[href]"),c=function(t){var e=x.getContent();return!(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||-1==e.indexOf("href=")))}(),y.text=a=r?r.innerText||r.textContent:x.getContent({format:"text"}),y.href=r?b.getAttrib(r,"href"):"",r?y.target=b.getAttrib(r,"target"):t.settings.default_link_target&&(y.target=t.settings.default_link_target),(v=b.getAttrib(r,"rel"))&&(y.rel=v),(v=b.getAttrib(r,"class"))&&(y.class=v),(v=b.getAttrib(r,"title"))&&(y.title=v),c&&(d={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){y.text=this.value()}}),e&&(h={type:"listbox",label:"Link list",values:l(e,function(e){e.value=t.convertURL(e.value||e.url,"href")},[{text:"None",value:""}]),onselect:n,value:t.convertURL(y.href,"href"),onPostRender:function(){h=this}}),!1!==t.settings.target_list&&(t.settings.target_list||(t.settings.target_list=[{text:"None",value:""},{text:"New window",value:"_blank"}]),p={name:"target",type:"listbox",label:"Target",values:l(t.settings.target_list)}),t.settings.rel_list&&(f={name:"rel",type:"listbox",label:"Rel",values:l(t.settings.rel_list)}),t.settings.link_class_list&&(g={name:"class",type:"listbox",label:"Class",values:l(t.settings.link_class_list,function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({inline:"a",classes:[e.value]})})})}),!1!==t.settings.link_title&&(m={name:"title",type:"textbox",label:"Title",value:y.title}),s=t.windowManager.open({title:"Insert link",data:y,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(e){var n=e.meta||{};h&&h.value(t.convertURL(this.value(),"href")),tinymce.each(e.meta,function(t,e){var n=s.find("#"+e);"text"===e?0===a.length&&(n.value(t),y.text=t):n.value(t)}),n.attach&&(u={href:this.value(),attach:n.attach}),n.text||i.call(this)},onkeyup:i,onbeforecall:function(t){t.meta=s.toJSON()}},d,m,function(e){var i=[];if(tinymce.each(t.dom.select("a:not([href])"),function(t){var n=t.name||t.id;n&&i.push({text:n,value:"#"+n,selected:-1!=e.indexOf("#"+n)})}),i.length)return i.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:i,onselect:n}}(y.href),h,f,p,g],onSubmit:function(e){function n(e,n){var i=t.selection.getRng();tinymce.util.Delay.setEditorTimeout(t,function(){t.windowManager.confirm(e,function(e){t.selection.setRng(i),n(e)})})}function i(){var e={href:s,target:y.target?y.target:null,rel:y.rel?y.rel:null,class:y.class?y.class:null,title:y.title?y.title:null};t.settings.allow_unsafe_link_target||(e.rel=function(t,e){function n(t){var e=new RegExp("("+i.replace(" ","|")+")","g");return t&&(t=tinymce.trim(t.replace(e,""))),t||null}var i="noopener noreferrer";return e?function(t){return(t=n(t))?[t,i].join(" "):i}(t):n(t)}(e.rel,"_blank"==e.target)),s===u.href&&(u.attach(),u={}),r?(t.focus(),c&&y.text!=a&&("innerText"in r?r.innerText=y.text:r.textContent=y.text),b.setAttribs(r,e),x.select(r),t.undoManager.add()):c?t.insertContent(b.createHTML("a",e,b.encode(y.text))):t.execCommand("mceInsertLink",!1,e)}function o(){t.undoManager.transact(i)}var s;return y=tinymce.extend(y,e.data),(s=y.href)?s.indexOf("@")>0&&-1==s.indexOf("//")&&-1==s.indexOf("mailto:")?void n("The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(t){t&&(s="mailto:"+s),o()}):t.settings.link_assume_external_targets&&!/^\w+:/i.test(s)||!t.settings.link_assume_external_targets&&/^\s*www[\.|\d\.]/i.test(s)?void n("The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(t){t&&(s="http://"+s),o()}):void o():void t.execCommand("unlink")}})}var u={};t.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onclick:s(c),stateSelector:"a[href]"}),t.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink",stateSelector:"a[href]"}),t.addContextToolbar&&(t.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:a}),t.addContextToolbar(function(n){var i,o,r;return!!(t.settings.link_context_toolbar&&!function(){var e=t.plugins.contextmenu;return!!e&&e.isContextMenuVisible()}()&&e(n)&&(i=t.selection,o=i.getRng(),r=o.startContainer,3==r.nodeType&&i.isCollapsed()&&o.startOffset>0&&o.startOffset<r.data.length))},"openlink | link unlink")),t.addShortcut("Meta+K","",s(c)),t.addCommand("mceLink",s(c)),t.on("click",function(t){var e=i(t.target);e&&tinymce.util.VK.metaKeyPressed(t)&&(t.preventDefault(),r(e))}),t.on("keydown",function(t){var e=o();e&&13===t.keyCode&&function(t){return!0===t.altKey&&!1===t.shiftKey&&!1===t.ctrlKey&&!1===t.metaKey}(t)&&(t.preventDefault(),r(e))}),this.showDialog=c,t.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:a,onPostRender:function(){var e=this,i=function(t){n(t.parents)?e.show():e.hide()};n(t.dom.getParents(t.selection.getStart()))||e.hide(),t.on("nodechange",i),e.on("remove",function(){t.off("nodechange",i)})},prependToContext:!0}),t.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:s(c),stateSelector:"a[href]",context:"insert",prependToContext:!0})}),function(t,e){"use strict";function n(t,e){for(var n,i=[],a=0;a<t.length;++a){if(!(n=r[t[a]]||o(t[a])))throw"module definition dependecy not found: "+t[a];i.push(n)}e.apply(null,i)}function i(t,i,o){if("string"!=typeof t)throw"invalid module definition, module id must be defined and be a string";if(i===e)throw"invalid module definition, dependencies must be specified";if(o===e)throw"invalid module definition, definition function must be specified";n(i,function(){r[t]=o.apply(null,arguments)})}function o(e){for(var n=t,i=e.split(/[.\/]/),o=0;o<i.length;++o){if(!n[i[o]])return;n=n[i[o]]}return n}var r={};i("tinymce/pasteplugin/Utils",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema"],function(t,e,n){function i(e,n){return t.each(n,function(t){e=t.constructor==RegExp?e.replace(t,""):e.replace(t[0],t[1])}),e}return{filter:i,innerText:function(o){var r=new n,a=new e({},r),s="",l=r.getShortEndedElements(),c=t.makeMap("script noscript style textarea video audio iframe object"," "),u=r.getBlockElements();return o=i(o,[/<!\[[^\]]+\]>/g]),function t(e){var n=e.name,i=e;if("br"!==n)if(l[n]&&(s+=" "),c[n])s+=" ";else{if(3==e.type&&(s+=e.value),!e.shortEnded&&(e=e.firstChild))do{t(e)}while(e=e.next);u[n]&&i.next&&(s+="\n","p"==n&&(s+="\n"))}else s+="\n"}(a.parse(o)),s},trimHtml:function(t){return i(function(t){var e="\x3c!--StartFragment--\x3e",n="\x3c!--EndFragment--\x3e",i=t.indexOf(e);if(-1!==i){var o=t.substr(i+e.length),r=o.indexOf(n);if(-1!==r&&/^<\/(p|h[1-6]|li)>/i.test(o.substr(r+n.length,5)))return o.substr(0,r)}return t}(t),[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(t,e,n){return e||n?" ":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(t){var e=0;return function(){return t+e++}}}}),i("tinymce/pasteplugin/SmartPaste",["tinymce/util/Tools"],function(t){var e=function(t){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(t)},n=function(t){return e(t)&&/.(gif|jpe?g|png)$/.test(t)},i=function(t,n,i){return!(!1!==t.selection.isCollapsed()||!e(n))&&function(t,e,n){return t.undoManager.extra(function(){n(t,e)},function(){t.execCommand("mceInsertLink",!1,e)}),!0}(t,n,i)},o=function(t,e,i){return!!n(e)&&function(t,e,n){return t.undoManager.extra(function(){n(t,e)},function(){t.insertContent('<img src="'+e+'">')}),!0}(t,e,i)},r=function(t,e){return t.insertContent(e,{merge:!1!==t.settings.paste_merge_formats,paste:!0}),!0},a=function(e,n){t.each([i,o,r],function(t){return!0!==t(e,n,r)})};return{isImageUrl:n,isAbsoluteUrl:e,insertContent:function(t,e){!1===t.settings.smart_paste?r(t,e):a(t,e)}}}),i("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/dom/RangeUtils","tinymce/util/VK","tinymce/pasteplugin/Utils","tinymce/pasteplugin/SmartPaste","tinymce/util/Delay"],function(t,e,n,i,o,r){return function(a){function s(t){var e,n=a.dom;if(e=a.fire("BeforePastePreProcess",{content:t}),t=(e=a.fire("PastePreProcess",e)).content,!e.isDefaultPrevented()){if(a.hasEventListeners("PastePostProcess")&&!e.isDefaultPrevented()){var i=n.add(a.getBody(),"div",{style:"display:none"},t);e=a.fire("PastePostProcess",{node:i}),n.remove(i),t=e.node.innerHTML}e.isDefaultPrevented()||o.insertContent(a,t)}}function l(t){t=a.dom.encode(t).replace(/\r\n/g,"\n");var e,n=a.dom.getParent(a.selection.getStart(),a.dom.isBlock),o=a.settings.forced_root_block;o&&(e=(e=a.dom.createHTML(o,a.settings.forced_root_block_attrs)).substr(0,e.length-3)+">"),n&&/^(PRE|DIV)$/.test(n.nodeName)||!o?t=i.filter(t,[[/\n/g,"<br>"]]):-1!=(t=i.filter(t,[[/\n\n/g,"</p>"+e],[/^(.*<\/p>)(<p>)$/,e+"$1"],[/\n/g,"<br />"]])).indexOf("<p>")&&(t=e+t),s(t)}function c(){var e,n=a.dom,i=a.getBody(),o=a.dom.getViewPort(a.getWin()).y,r=20;if(_=a.selection.getRng(),a.inline&&(e=a.selection.getScrollContainer())&&e.scrollTop>0&&(o=e.scrollTop),_.getClientRects){var s=function(t){var e,i,o,r=t.startContainer;if((e=t.getClientRects()).length)return e[0];if(t.collapsed&&1==r.nodeType){for(o=r.childNodes[_.startOffset];o&&3==o.nodeType&&!o.data.length;)o=o.nextSibling;if(o)return"BR"==o.tagName&&(i=n.doc.createTextNode("\ufeff"),o.parentNode.insertBefore(i,o),(t=n.createRng()).setStartBefore(i),t.setEndAfter(i),e=t.getClientRects(),n.remove(i)),e.length?e[0]:void 0}}(_);if(s)r=o+(s.top-n.getPos(i).y);else{r=o;var l=_.startContainer;l&&(3==l.nodeType&&l.parentNode!=i&&(l=l.parentNode),1==l.nodeType&&(r=n.getPos(l,e||i).y))}}b=n.add(a.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+r+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},T),(t.ie||t.gecko)&&n.setStyle(b,"left","rtl"==n.getStyle(i,"direction",!0)?65535:-65535),n.bind(b,"beforedeactivate focusin focusout",function(t){t.stopPropagation()}),b.focus(),a.selection.select(b,!0)}function u(){if(b){for(var t;t=a.dom.get("mcepastebin");)a.dom.remove(t),a.dom.unbind(t);_&&a.selection.setRng(_)}b=_=null}function d(){var t,e,n,i="";for(t=a.dom.select("div[id=mcepastebin]"),e=0;e<t.length;e++)(n=t[e]).firstChild&&"mcepastebin"==n.firstChild.id&&(n=n.firstChild),i!=T&&(i+=n.innerHTML);return i}function h(t){var e={};if(t){if(t.getData){var n=t.getData("Text");n&&n.length>0&&-1==n.indexOf(k)&&(e["text/plain"]=n)}if(t.types)for(var i=0;i<t.types.length;i++){var o=t.types[i];e[o]=t.getData(o)}}return e}function f(t){return h(t.clipboardData||a.getDoc().dataTransfer)}function p(t){return y(t,"text/html")||y(t,"text/plain")}function g(t,e,n){t&&(a.selection.setRng(t),t=null);var i=e.result,o=function(t){var e;return-1!==(e=t.indexOf(","))?t.substr(e+1):null}(i),r=new Image;if(r.src=i,function(t,e){return!t.images_dataimg_filter||t.images_dataimg_filter(e)}(a.settings,r)){var l,c,u=a.editorUpload.blobCache;(c=u.findFirst(function(t){return t.base64()===o}))?l=c:(l=u.create(A(),n,o),u.add(l)),s('<img src="'+l.blobUri()+'">')}else s('<img src="'+i+'">')}function m(t,e){function n(n){var i,o,r,a=!1;if(n)for(i=0;i<n.length;i++)if(/^image\/(jpeg|png|gif|bmp)$/.test((o=n[i]).type)){var s=o.getAsFile?o.getAsFile():o;(r=new FileReader).onload=g.bind(null,e,r,s),r.readAsDataURL(s),t.preventDefault(),a=!0}return a}var i=t.clipboardData||t.dataTransfer;if(a.settings.paste_data_images&&i)return n(i.items)||n(i.files)}function v(t){return e.getCaretRangeFromPoint(t.clientX,t.clientY,a.getDoc())}function y(t,e){return e in t&&t[e].length>0}function x(t){return n.metaKeyPressed(t)&&86==t.keyCode||t.shiftKey&&45==t.keyCode}var b,_,w,S=this,C=0,M=!1,T="%MCEPASTEBIN%",k="data:text/mce-internal,",A=i.createIdGenerator("mceclip");S.pasteHtml=s,S.pasteText=l,S.pasteImageData=m,a.on("preInit",function(){(function(){function e(t,e,n){var o;return y(t,"text/html")?o=t["text/html"]:(o=d())==T&&(n=!0),o=i.trimHtml(o),b&&b.firstChild&&"mcepastebin"===b.firstChild.id&&(n=!0),u(),o.length||(n=!0),n&&(o=y(t,"text/plain")&&-1==o.indexOf("</p>")?t["text/plain"]:i.innerText(o)),o==T?void(e||a.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")):void(n?l(o):s(o))}a.on("keydown",function(e){function n(t){x(t)&&!t.isDefaultPrevented()&&u()}if(x(e)&&!e.isDefaultPrevented()){if((w=e.shiftKey&&86==e.keyCode)&&t.webkit&&-1!=navigator.userAgent.indexOf("Version/"))return;if(e.stopImmediatePropagation(),C=(new Date).getTime(),t.ie&&w)return e.preventDefault(),void a.fire("paste",{ieFake:!0});u(),c(),a.once("keyup",n),a.once("paste",function(){a.off("keyup",n)})}}),a.on("paste",function(n){var i=(new Date).getTime(),o=f(n),s=(new Date).getTime()-i,l=(new Date).getTime()-C-s<1e3,h="text"==S.pasteFormat||w;return w=!1,n.isDefaultPrevented()||function(t){var e=t.clipboardData;return-1!=navigator.userAgent.indexOf("Android")&&e&&e.items&&0===e.items.length}(n)||!p(o)&&m(n,_||a.selection.getRng())?void u():(l||n.preventDefault(),!t.ie||l&&!n.ieFake||(c(),a.dom.bind(b,"paste",function(t){t.stopPropagation()}),a.getDoc().execCommand("Paste",!1,null),o["text/html"]=d()),void(y(o,"text/html")?(n.preventDefault(),e(o,l,h)):r.setEditorTimeout(a,function(){e(o,l,h)},0)))}),a.on("dragstart dragend",function(t){M="dragstart"==t.type}),a.on("drop",function(t){var e,n;if(n=v(t),!t.isDefaultPrevented()&&!M&&(p(e=h(t.dataTransfer))&&!function(t){var e=t["text/plain"];return!!e&&0===e.indexOf("file://")}(e)||!m(t,n))&&n&&!1!==a.settings.paste_filter_drop){var o=e["mce-internal"]||e["text/html"]||e["text/plain"];o&&(t.preventDefault(),r.setEditorTimeout(a,function(){a.undoManager.transact(function(){e["mce-internal"]&&a.execCommand("Delete"),a.selection.setRng(n),o=i.trimHtml(o),e["text/html"]?s(o):l(o)})}))}}),a.on("dragover dragend",function(t){a.settings.paste_data_images&&t.preventDefault()})})(),a.parser.addNodeFilter("img",function(e,n,i){function o(e){e.attr("data-mce-object")||c===t.transparentSrc||e.remove()}function r(t){return 0===t.indexOf("webkit-fake-url")}function s(t){return 0===t.indexOf("data:")}if(!a.settings.paste_data_images&&function(t){return t.data&&!0===t.data.paste}(i))for(var l=e.length;l--;){var c=e[l].attributes.map.src;c&&(r(c)||!a.settings.allow_html_data_urls&&s(c))&&o(e[l])}})})}}),i("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer","tinymce/html/Node","tinymce/pasteplugin/Utils"],function(t,e,n,i,o,r){function a(t){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(t)||/class="OutlineElement/.test(t)||/id="?docs\-internal\-guid\-/.test(t)}function s(e){var n,i;return i=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],e=e.replace(/^[\u00a0 ]+/,""),t.each(i,function(t){if(t.test(e))return n=!0,!1}),n}function l(t){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(t)}function c(c){var u=c.settings;c.on("BeforePastePreProcess",function(d){function h(e,n){var i,r={},a=c.dom.parseStyle(n);return t.each(a,function(t,o){switch(o){case"mso-list":(i=/\w+ \w+([0-9]+)/i.exec(n))&&(e._listLevel=parseInt(i[1],10)),/Ignore/i.test(t)&&e.firstChild&&(e._listIgnore=!0,e.firstChild._listIgnore=!0);break;case"horiz-align":o="text-align";break;case"vert-align":o="vertical-align";break;case"font-color":case"mso-foreground":o="color";break;case"mso-background":case"mso-highlight":o="background";break;case"font-weight":case"font-style":return void("normal"!=t&&(r[o]=t));case"mso-element":if(/^(comment|comment-list)$/i.test(t))return void e.remove()}return 0===o.indexOf("mso-comment")?void e.remove():void(0!==o.indexOf("mso-")&&("all"==f||p&&p[o])&&(r[o]=t))}),/(bold)/i.test(r["font-weight"])&&(delete r["font-weight"],e.wrap(new o("b",1))),/(italic)/i.test(r["font-style"])&&(delete r["font-style"],e.wrap(new o("i",1))),(r=c.dom.serializeStyle(r,e.name))||null}var f,p,g=d.content;if(g=(g=g.replace(/<b[^>]+id="?docs-internal-[^>]*>/gi,"")).replace(/<br class="?Apple-interchange-newline"?>/gi,""),(f=u.paste_retain_style_properties)&&(p=t.makeMap(f.split(/[, ]/))),!1!==u.paste_enable_default_filters&&a(d.content)){d.wordContent=!0,g=r.filter(g,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(t,e){return e.length>0?e.replace(/./," ").slice(Math.floor(e.length/2)).split("").join(" "):""}]]);var m=u.paste_word_valid_elements;m||(m="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody");var v=new n({valid_elements:m,valid_children:"-li[p]"});t.each(v.elements,function(t){t.attributes.class||(t.attributes.class={},t.attributesOrder.push("class")),t.attributes.style||(t.attributes.style={},t.attributesOrder.push("style"))});var y=new e({},v);y.addAttributeFilter("style",function(t){for(var e,n=t.length;n--;)(e=t[n]).attr("style",h(e,e.attr("style"))),"span"==e.name&&e.parent&&!e.attributes.length&&e.unwrap()}),y.addAttributeFilter("class",function(t){for(var e,n,i=t.length;i--;)n=(e=t[i]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&e.remove(),e.attr("class",null)}),y.addNodeFilter("del",function(t){for(var e=t.length;e--;)t[e].remove()}),y.addNodeFilter("a",function(t){for(var e,n,i,o=t.length;o--;)if(n=(e=t[o]).attr("href"),i=e.attr("name"),n&&-1!=n.indexOf("#_msocom_"))e.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||i){if(i&&!/^_?(?:toc|edn|ftn)/i.test(i)){e.unwrap();continue}e.attr({href:n,name:i})}else e.unwrap()});var x=y.parse(g);!1!==u.paste_convert_word_fake_lists&&function(t){function e(t){var n="";if(3===t.type)return t.value;if(t=t.firstChild)do{n+=e(t)}while(t=t.next);return n}function n(t,e){if(3===t.type&&e.test(t.value))return t.value=t.value.replace(e,""),!1;if(t=t.firstChild)do{if(!n(t,e))return!1}while(t=t.next);return!0}function i(t){if(t._listIgnore)t.remove();else if(t=t.firstChild)do{i(t)}while(t=t.next)}function r(t,e,r){var s=t._listLevel||u;s!=u&&(s<u?a&&(a=a.parent.parent):(c=a,a=null)),a&&a.name==e?a.append(t):(c=c||a,a=new o(e,1),r>1&&a.attr("start",""+r),t.wrap(a)),t.name="li",s>u&&c&&c.lastChild.append(a),u=s,i(t),n(t,/^\u00a0+/),n(t,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),n(t,/^\u00a0+/)}for(var a,c,u=1,d=[],h=t.firstChild;null!=h;)if(d.push(h),null!==(h=h.walk()))for(;void 0!==h&&h.parent!==t;)h=h.walk();for(var f=0;f<d.length;f++)if("p"==(t=d[f]).name&&t.firstChild){var p=e(t);if(l(p)){r(t,"ul");continue}if(s(p)){var g=/([0-9]+)\./.exec(p),m=1;g&&(m=parseInt(g[1],10)),r(t,"ol",m);continue}if(t._listLevel){r(t,"ul",1);continue}a=null}else c=a,a=null}(x),d.content=new i({validate:u.validate},v).serialize(x)}})}return c.isWordContent=a,c}),i("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],function(t,e,n,i){return function(o){function r(t){o.on("BeforePastePreProcess",function(e){e.content=t(e.content)})}t.webkit&&r(function(t){if(n.isWordContent(t))return t;var e=o.settings.paste_webkit_styles;if(!1===o.settings.paste_remove_styles_if_webkit||"all"==e)return t;if(e&&(e=e.split(/[, ]/)),e){var i=o.dom,r=o.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(t,n,o,a){var s=i.parseStyle(o,"span"),l={};if("none"===e)return n+a;for(var c=0;c<e.length;c++){var u=s[e[c]],d=i.getStyle(r,e[c],!0);/color/.test(e[c])&&(u=i.toHex(u),d=i.toHex(d)),d!=u&&(l[e[c]]=u)}return(l=i.serializeStyle(l,"span"))?n+' style="'+l+'"'+a:n+a})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(t,e,n,i){return e+' style="'+n+'"'+i})}),t.ie&&(r(function(t){if(!n.isWordContent(t))return t;var r=[];e.each(o.schema.getBlockElements(),function(t,e){r.push(e)});var a=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+r.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return t=i.filter(t,[[a,"$1"]]),i.filter(t,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}),o.on("PastePostProcess",function(t){!function(t){o.$("a",t).find("font,u").each(function(t,e){o.dom.remove(e,!0)})}(t.node)}))}}),i("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks"],function(t,e,n,i){var o;t.add("paste",function(r){function a(){if("text"==l.pasteFormat)l.pasteFormat="html",r.fire("PastePlainTextToggle",{state:!1});else if(l.pasteFormat="text",r.fire("PastePlainTextToggle",{state:!0}),!o&&!1!==r.settings.paste_plaintext_inform){var t=r.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.");r.notificationManager.open({text:t,type:"info"}),o=!0}r.focus()}function s(){var t=this;t.active("text"===l.pasteFormat),r.on("PastePlainTextToggle",function(e){t.active(e.state)})}var l,c=this,u=r.settings;return/(^|[ ,])powerpaste([, ]|$)/.test(u.plugins)&&t.get("powerpaste")?void("undefined"!=typeof console&&console.log&&console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option.")):(c.clipboard=l=new e(r),c.quirks=new i(r),c.wordFilter=new n(r),r.settings.paste_as_text&&(c.clipboard.pasteFormat="text"),u.paste_preprocess&&r.on("PastePreProcess",function(t){u.paste_preprocess.call(c,c,t)}),u.paste_postprocess&&r.on("PastePostProcess",function(t){u.paste_postprocess.call(c,c,t)}),r.addCommand("mceInsertClipboardContent",function(t,e){e.content&&c.clipboard.pasteHtml(e.content),e.text&&c.clipboard.pasteText(e.text)}),r.settings.paste_block_drop&&r.on("dragend dragover draggesture dragdrop drop drag",function(t){t.preventDefault(),t.stopPropagation()}),r.settings.paste_data_images||r.on("drop",function(t){var e=t.dataTransfer;e&&e.files&&e.files.length>0&&t.preventDefault()}),r.addCommand("mceTogglePlainTextPaste",a),r.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:a,onPostRender:s}),void r.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:l.pasteFormat,onclick:a,onPostRender:s}))})}),function(n){var i,o,a,s,l;for(i=0;i<n.length;i++){o=t,s=(a=n[i]).split(/[.\/]/);for(var c=0;c<s.length-1;++c)o[s[c]]===e&&(o[s[c]]={}),o=o[s[c]];o[s[s.length-1]]=r[a]}if(t.AMDLC_TESTS){for(a in l=t.privateModules||{},r)l[a]=r[a];for(i=0;i<n.length;i++)delete l[n[i]];t.privateModules=l}}(["tinymce/pasteplugin/Utils"])}(window),function(t,e){"use strict";function n(t,e){for(var n,i=[],a=0;a<t.length;++a){if(!(n=r[t[a]]||o(t[a])))throw"module definition dependecy not found: "+t[a];i.push(n)}e.apply(null,i)}function i(t,i,o){if("string"!=typeof t)throw"invalid module definition, module id must be defined and be a string";if(i===e)throw"invalid module definition, dependencies must be specified";if(o===e)throw"invalid module definition, definition function must be specified";n(i,function(){r[t]=o.apply(null,arguments)})}function o(e){for(var n=t,i=e.split(/[.\/]/),o=0;o<i.length;++o){if(!n[i[o]])return;n=n[i[o]]}return n}var r={};i("tinymce/tableplugin/Utils",["tinymce/Env"],function(t){var e=function(t){return function(e,n){e&&(1===(n=parseInt(n,10))||0===n?e.removeAttribute(t,1):e.setAttribute(t,n,1))}},n=function(t){return function(e){return parseInt(e.getAttribute(t)||1,10)}};return{setColSpan:e("colSpan"),setRowSpan:e("rowspan"),getColSpan:n("colSpan"),getRowSpan:n("rowSpan"),setSpanVal:function(t,n,i){e(n)(t,i)},getSpanVal:function(t,e){return n(e)(t)},paddCell:function(e){(!t.ie||t.ie>9)&&(e.hasChildNodes()||(e.innerHTML='<br data-mce-bogus="1" />'))}}}),i("tinymce/tableplugin/SplitCols",["tinymce/util/Tools","tinymce/tableplugin/Utils"],function(t,e){var n=function(t,e,n){return t[n]?t[n][e]:null},i=function(t,e,i){var o=n(t,e,i);return o?o.elm:null},o=function(t,e,o,r){var a,s=0,l=i(t,e,o);for(a=o;(r>0?a<t.length:a>=0)&&l===n(t,e,a).elm;a+=r)s++;return s},r=function(t,e,n){for(var i,o=t[n],r=e;r<o.length;r++)if((i=o[r]).real)return i.elm;return null},a=function(t,n){for(var i,r=[],a=t[n],s=0;s<a.length;s++)r.push({elm:(i=a[s]).elm,above:o(t,s,n,-1)-1,below:o(t,s,n,1)-1}),s+=e.getColSpan(i.elm)-1;return r},s=function(t,n){var i=t.elm.ownerDocument.createElement("td");return e.setColSpan(i,e.getColSpan(t.elm)),e.setRowSpan(i,n),e.paddCell(i),i},l=function(t,e,n,i){var o=r(t,n+1,i);o?o.parentNode.insertBefore(e,o):(o=r(t,0,i)).parentNode.appendChild(e)},c=function(t,n,i,o){if(0!==n.above){e.setRowSpan(n.elm,n.above);var r=s(n,n.below+1);return l(t,r,i,o),r}return null},u=function(t,n,i,o){if(0!==n.below){e.setRowSpan(n.elm,n.above+1);var r=s(n,n.below);return l(t,r,i,o+1),r}return null};return{splitAt:function(e,n,o,r){var s=a(e,o),l=i(e,n,o).parentNode,d=[];return t.each(s,function(t,n){null!==(r?c(e,t,n,o):u(e,t,n,o))&&d.push(d)}),{cells:d,row:l}}}}),i("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils","tinymce/tableplugin/SplitCols"],function(t,n,i,o){var r=t.each,a=i.getSpanVal,s=i.setSpanVal;return function(l,c,u){function d(){l.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}function h(t){return t===l.getBody()}function f(e,n){return e?(n=t.map(n.split(","),function(t){return t.toLowerCase()}),t.grep(e.childNodes,function(e){return-1!==t.inArray(n,e.nodeName.toLowerCase())})):[]}function p(){var t=0;O=[],B=0,r(["thead","tbody","tfoot"],function(e){var n=f(c,e)[0],i=f(n,"tr");r(i,function(n,i){i+=t,r(f(n,"td,th"),function(t,n){var o,r,s,l;if(O[i])for(;O[i][n];)n++;for(s=a(t,"rowspan"),l=a(t,"colspan"),r=i;r<i+s;r++)for(O[r]||(O[r]=[]),o=n;o<n+l;o++)O[r][o]={part:e,real:r==i&&o==n,elm:t,rowspan:s,colspan:l};B=Math.max(B,n+1)})}),t+=i.length})}function g(t){return l.fire("newrow",{node:t}),t}function m(t){return l.fire("newcell",{node:t}),t}function v(t,e){return(t=t.cloneNode(e)).removeAttribute("id"),t}function y(t,e){var n;if(n=O[e])return n[t]}function x(t,e){return t[e]?t[e]:null}function b(t,e){for(var n=[],i=0;i<t.length;i++)n.push(y(e,i));return n}function _(t){return t&&(!!H.getAttrib(t.elm,"data-mce-selected")||t==u)}function w(){var t=[];return r(c.rows,function(e){r(e.cells,function(n){if(H.getAttrib(n,"data-mce-selected")||u&&n==u.elm)return t.push(e),!1})}),t}function S(e){var o,a={};return!1!==l.settings.table_clone_elements&&(a=t.makeMap((l.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),t.walk(e,function(t){var i;if(3==t.nodeType)return r(H.getParents(t.parentNode,null,e).reverse(),function(t){a[t.nodeName]&&(t=v(t,!1),o?i&&i.appendChild(t):o=i=t,i=t)}),i&&(i.innerHTML=n.ie&&n.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes"),m(e=v(e,!1)),s(e,"rowSpan",1),s(e,"colSpan",1),o?e.appendChild(o):i.paddCell(e),e}function C(){var t,e=H.createRng();return r(H.select("tr",c),function(t){0===t.cells.length&&H.remove(t)}),0===H.select("tr",c).length?(e.setStartBefore(c),e.setEndBefore(c),F.setRng(e),void H.remove(c)):(r(H.select("thead,tbody,tfoot",c),function(t){0===t.rows.length&&H.remove(t)}),p(),void(z&&(t=O[Math.min(O.length-1,z.y)],t&&(F.select(t[Math.min(t.length-1,z.x)].elm,!0),F.collapse(!0)))))}function M(t,e,n,i){var o,r,a,s,l;for(o=O[e][t].elm.parentNode,a=1;a<=n;a++)if(o=H.getNext(o,"tr")){for(r=t;r>=0;r--)if((l=O[e+a][r].elm).parentNode==o){for(s=1;s<=i;s++)H.insertAfter(S(l),l);break}if(-1==r)for(s=1;s<=i;s++)o.insertBefore(S(o.cells[0]),o.cells[0])}}function T(){r(O,function(t,e){r(t,function(t,n){var i,o,r;if(_(t)&&(i=a(t=t.elm,"colspan"),o=a(t,"rowspan"),i>1||o>1)){for(s(t,"rowSpan",1),s(t,"colSpan",1),r=0;r<i-1;r++)H.insertAfter(S(t),t);M(n,e,o-1,i)}})})}function k(t,e,n){for(var i=[],o=0;o<t.length;o++)(o<e||o>n)&&i.push(t[o]);return i}function A(e){return t.grep(e,function(t){return!1===t.real})}function I(t){for(var e=[],n=0;n<t.length;n++){var i=t[n].elm;e[e.length-1]!==i&&e.push(i)}return e}function D(e,n,o,r,a){var s=0;if(a-o<1)return 0;for(var l=o+1;l<=a;l++){var c=k(x(e,l),n,r),u=A(c);c.length===u.length&&(t.each(I(u),function(t){i.setRowSpan(t,i.getRowSpan(t)-1)}),s++)}return s}function P(e,n,o,r,a){var s=0;if(r-n<1)return 0;for(var l=n+1;l<=r;l++){var c=k(b(e,l),o,a),u=A(c);c.length===u.length&&(t.each(I(u),function(t){i.setColSpan(t,i.getColSpan(t)-1)}),s++)}return s}function E(t){var n,i,o,l,c,u,d,h,f,p;if(r(O,function(i,o){if(r(i,function(e){if(_(e)&&(u=g(v(c=(e=e.elm).parentNode,!1)),n=o,t))return!1}),t)return n===e}),n!==e){for(l=0,p=0;l<O[0].length;l+=p)if(O[n][l]&&(p=a(i=O[n][l].elm,"colspan"),i!=o)){if(t){if(n>0&&O[n-1][l]&&(f=a(h=O[n-1][l].elm,"rowSpan"))>1){s(h,"rowSpan",f+1);continue}}else if((f=a(i,"rowspan"))>1){s(i,"rowSpan",f+1);continue}d=S(i),s(d,"colSpan",i.colSpan),u.appendChild(d),o=i}u.hasChildNodes()&&(t?c.parentNode.insertBefore(u,c):H.insertAfter(u,c))}}function N(t){var n,i;r(O,function(i){if(r(i,function(e,i){if(_(e)&&(n=i,t))return!1}),t)return n===e}),r(O,function(e,o){var r,l,c;e[n]&&(r=e[n].elm)!=i&&(c=a(r,"colspan"),l=a(r,"rowspan"),1==c?t?(r.parentNode.insertBefore(S(r),r),M(n,o,l-1,c)):(H.insertAfter(S(r),r),M(n,o,l-1,c)):s(r,"colSpan",r.colSpan+1),i=r)})}function L(t){var e=[];return r(t,function(t){r(t,function(t){e.push(t)})}),e}function R(t){var e;return r(O,function(n,i){return r(n,function(n,o){if(n.elm==t)return e={x:o,y:i},!1}),!e}),e}var O,B,z,V,F=l.selection,H=F.dom;c=c||H.getParent(F.getStart(!0),"table"),p(),(u=u||H.getParent(F.getStart(!0),"th,td"))&&(z=R(u),V=function(){var t,e;return t=e=0,r(O,function(n,i){r(n,function(n,o){var r,a;_(n)&&(o>t&&(t=o),i>e&&(e=i),(n=O[i][o]).real&&((r=n.colspan-1)&&o+r>t&&(t=o+r),(a=n.rowspan-1)&&i+a>e&&(e=i+a)))})}),{x:t,y:e}}(),u=y(z.x,z.y)),t.extend(this,{deleteTable:function(){var t=H.createRng();h(c)||(t.setStartAfter(c),t.setEndAfter(c),F.setRng(t),H.remove(c))},split:T,merge:function(e,n,i){var o,a,l,c,u,d,h,f,g,m,v,x,b;if(e?(c=(a=(o=R(e)).x)+(n-1),u=(l=o.y)+(i-1)):(z=V=null,r(O,function(t,e){r(t,function(t,n){_(t)&&(z||(z={x:n,y:e}),V={x:n,y:e})})}),z&&(a=z.x,l=z.y,c=V.x,u=V.y)),f=y(a,l),g=y(c,u),f&&g&&f.part==g.part){T(),p(),x=D(O,a,l,c,u),b=P(O,a,l,c,u),f=y(a,l).elm;var w=c-a-b+1,S=u-l-x+1;for(w===B&&S===O.length&&(w=1,S=1),w===B&&S>1&&(S=1),s(f,"colSpan",w),s(f,"rowSpan",S),h=l;h<=u;h++)for(d=a;d<=c;d++)O[h]&&O[h][d]&&(e=O[h][d].elm)!=f&&(m=t.grep(e.childNodes),r(m,function(t){f.appendChild(t)}),m.length&&(m=t.grep(f.childNodes),v=0,r(m,function(t){"BR"==t.nodeName&&v++<m.length-1&&f.removeChild(t)})),H.remove(e));C()}},insertRow:E,insertRows:function(t,e){e=e||w().length||1;for(var n=0;n<e;n++)E(t)},insertCol:N,insertCols:function(t,e){e=e||function(){var t=0;return r(O,function(e){if(r(e,function(e){_(e)&&t++}),t)return!1}),t}()||1;for(var n=0;n<e;n++)N(t)},splitCols:function(e){if(z){var n=o.splitAt(O,z.x,z.y,e);t.each(n.cells,m)}},deleteCols:function(){var e=[];if(h(c)){if(1==O[0].length)return;if(function(e){return t.grep(L(e),_)}(O).length==L(O).length)return}r(O,function(n){r(n,function(n,i){_(n)&&-1===t.inArray(e,i)&&(r(O,function(t){var e,n=t[i].elm;(e=a(n,"colSpan"))>1?s(n,"colSpan",e-1):H.remove(n)}),e.push(i))})}),C()},deleteRows:function(){var t;t=w(),h(c)&&t.length==c.rows.length||(r(t.reverse(),function(t){!function(t){var e,n;r(t.cells,function(t){var n=a(t,"rowSpan");n>1&&(s(t,"rowSpan",n-1),M((e=R(t)).x,e.y,1,1))}),e=R(t.cells[0]),r(O[e.y],function(t){var e;(t=t.elm)!=n&&((e=a(t,"rowSpan"))<=1?H.remove(t):s(t,"rowSpan",e-1),n=t)})}(t)}),C())},cutRows:function(){var t=w();if(!h(c)||t.length!=c.rows.length)return H.remove(t),C(),t},copyRows:function(){var t=w();return r(t,function(e,n){t[n]=v(e,!0)}),t},pasteRows:function(e,n){var i,a,l;e&&(i=o.splitAt(O,z.x,z.y,n),a=i.row,t.each(i.cells,m),l=t.map(e,function(t){return t.cloneNode(!0)}),n||l.reverse(),r(l,function(t){var e,i,o=t.cells.length;for(g(t),e=0;e<o;e++)m(i=t.cells[e]),s(i,"colSpan",1),s(i,"rowSpan",1);for(e=o;e<B;e++)t.appendChild(m(S(t.cells[o-1])));for(e=B;e<o;e++)H.remove(t.cells[e]);n?a.parentNode.insertBefore(t,a):H.insertAfter(t,a)}),d())},getPos:R,setStartCell:function(t){z=R(t)},setEndCell:function(t){var e,n,i,o,r,a,s,l,c,u;if(V=R(t),z&&V){for(e=Math.min(z.x,V.x),n=Math.min(z.y,V.y),r=i=Math.max(z.x,V.x),a=o=Math.max(z.y,V.y),u=n;u<=o;u++)for(c=e;c<=i;c++)(t=O[u][c]).real&&((s=t.colspan-1)&&c+s>r&&(r=c+s),(l=t.rowspan-1)&&u+l>a&&(a=u+l));for(d(),u=n;u<=a;u++)for(c=e;c<=r;c++)O[u][c]&&H.setAttrib(O[u][c].elm,"data-mce-selected","1")}},moveRelIdx:function(t,e){var n,i,o;i=(n=R(t)).y*B+n.x;do{if(!(o=y((i+=e)%B,Math.floor(i/B))))break;if(o.elm!=t)return F.select(o.elm,!0),H.isEmpty(o.elm)&&F.collapse(!0),!0}while(o.elm==t);return!1},refresh:p})}}),i("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/util/Delay","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(t,e,n,i,o){var r=i.each,a=o.getSpanVal;return function(s){function l(){s.on("KeyDown",function(t){var e,n,i=s.dom;37!=t.keyCode&&38!=t.keyCode||(e=s.selection.getRng(),(n=i.getParent(e.startContainer,"table"))&&s.getBody().firstChild==n&&function(t,e){var n,i=e.ownerDocument,o=i.createRange();return o.setStartBefore(e),o.setEnd(t.endContainer,t.endOffset),(n=i.createElement("body")).appendChild(o.cloneContents()),0===n.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}(e,n)&&((e=i.createRng()).setStartBefore(n),e.setEndBefore(n),s.selection.setRng(e),t.preventDefault()))})}function c(){s.on("KeyDown SetContent VisualAid",function(){var t;for(t=s.getBody().lastChild;t;t=t.previousSibling)if(3==t.nodeType){if(t.nodeValue.length>0)break}else if(1==t.nodeType&&("BR"==t.tagName||!t.getAttribute("data-mce-bogus")))break;t&&"TABLE"==t.nodeName&&(s.settings.forced_root_block?s.dom.add(s.getBody(),s.settings.forced_root_block,s.settings.forced_root_block_attrs,n.ie&&n.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'):s.dom.add(s.getBody(),"br",{"data-mce-bogus":"1"}))}),s.on("PreProcess",function(t){var e=t.node.lastChild;e&&("BR"==e.nodeName||1==e.childNodes.length&&("BR"==e.firstChild.nodeName||" "==e.firstChild.nodeValue))&&e.previousSibling&&"TABLE"==e.previousSibling.nodeName&&s.dom.remove(e)})}(function(){function e(t){s.selection.select(t,!0),s.selection.collapse(!0)}function n(t){s.$(t).empty(),o.paddCell(t)}s.on("keydown",function(o){var r,a,l,c;if((o.keyCode==t.DELETE||o.keyCode==t.BACKSPACE)&&!o.isDefaultPrevented()&&(r=s.dom.getParent(s.selection.getStart(),"table"))){if(a=s.dom.select("td,th",r),0===(l=i.grep(a,function(t){return!!s.dom.getAttrib(t,"data-mce-selected")})).length)return c=s.dom.getParent(s.selection.getStart(),"td,th"),void(s.selection.isCollapsed()&&c&&s.dom.isEmpty(c)&&(o.preventDefault(),n(c),e(c)));o.preventDefault(),s.undoManager.transact(function(){a.length==l.length?s.execCommand("mceTableDelete"):(i.each(l,n),e(l[0]))})}})})(),function(){var e=function(t,e){var n=s.selection.getRng(),i=t.ownerDocument.createTextNode(" ");n.startOffset?t.insertBefore(i,t.firstChild):t.appendChild(i),e&&(s.selection.select(i,!0),s.selection.collapse(!0))},i=function(e){return(e.keyCode==t.DELETE||e.keyCode==t.BACKSPACE)&&!e.isDefaultPrevented()},o=function(t){return t.firstChild===t.lastChild&&t.firstChild},r=function(t){return t&&3===t.nodeType},a=function(t){var e=o(t);return r(e)&&1===e.data.length?e.data:null},l=function(t){var e=o(t),n=a(t);return e&&!r(e)||n&&!u(n)},c=function(t){return s.dom.isEmpty(t)||u(a(t))},u=function(t){return" "===t};s.on("keydown",function(t){if(i(t)){var o=s.dom.getParent(s.selection.getStart(),"caption");(function(t){return t&&"CAPTION"==t.nodeName&&"TABLE"==t.parentNode.nodeName})(o)&&(n.ie&&(s.selection.isCollapsed()?l(o)&&e(o):(s.undoManager.transact(function(){s.execCommand("Delete"),c(o)&&e(o,!0)}),t.preventDefault())),c(o)&&t.preventDefault())}})}(),n.webkit&&(function(){function n(n){function i(t,e){var i=t?"previousSibling":"nextSibling",r=s.dom.getParent(e,"tr"),a=r[i];if(a)return f(0,e,a,t),n.preventDefault(),!0;var c=s.dom.getParent(r,"table"),u=r.parentNode,d=u.nodeName.toLowerCase();if("tbody"===d||d===(t?"tfoot":"thead")){var h=function(t,e,n,i){var o=s.dom.select(">tbody",e),r=o.indexOf(n);return t&&0===r||!t&&r===o.length-1?function(t,e){var n=s.dom.select(">"+(t?"thead":"tfoot"),e);return 0!==n.length?n[0]:null}(t,e):-1===r?o["thead"===n.tagName.toLowerCase()?0:o.length-1]:o[r+(t?-1:1)]}(t,c,u);if(null!==h)return o(t,h,e)}return l(t,r,i,c)}function o(t,e,i){var o=c(e,t);return o&&f(0,i,o,t),n.preventDefault(),!0}function l(t,e,o,r){var a=r[o];if(a)return u(a),!0;var l=s.dom.getParent(r,"td,th");return l?i(t,l):(u(c(e,!t)),n.preventDefault(),!1)}function c(t,e){var n=t&&t[e?"lastChild":"firstChild"];return n&&"BR"===n.nodeName?s.dom.getParent(n,"td,th"):n}function u(t){s.selection.setCursorLocation(t,0)}function d(t){for(var e=0,n=t;n.previousSibling;)e+=a(n=n.previousSibling,"colspan");return e}function h(t,e){var n=0,i=0;return r(t.children,function(t,o){if(n+=a(t,"colspan"),i=o,n>e)return!1}),i}function f(t,e,n,i){var o=h(n,d(s.dom.getParent(e,"td,th"))),r=n.childNodes[o];u(c(r,i)||r)}var p=n.keyCode;if((p==t.UP||p==t.DOWN)&&function(t){var e=t.selection.getNode();return null!==t.dom.getParent(e,"tr")}(s)){var g=s.selection.getNode();e.setEditorTimeout(s,function(){(function(t){var e=s.selection.getNode(),n=s.dom.getParent(e,"td,th"),i=s.dom.getParent(t,"td,th");return n&&n!==i&&function(t,e){return s.dom.getParent(t,"TABLE")===s.dom.getParent(e,"TABLE")}(n,i)})(g)&&i(!n.shiftKey&&p===t.UP,g)},0)}}s.on("KeyDown",function(t){n(t)})}(),function(){function t(){var t=s.selection.getRng(),e=s.selection.getNode(),n=s.dom.getParent(t.startContainer,"TD,TH");if(function(t,e,n,i){var o,r=t.dom.getParent(e.startContainer,"TABLE");return r&&(o=r.parentNode),3==e.startContainer.nodeType&&0===e.startOffset&&0===e.endOffset&&i&&("TR"==n.nodeName||n==o)||("TD"==n.nodeName||"TH"==n.nodeName)&&!i}(s,t,e,n)){n||(n=e);for(var i=n.lastChild;i.lastChild;)i=i.lastChild;3==i.nodeType&&(t.setEnd(i,i.data.length),s.selection.setRng(t))}}s.on("KeyDown",function(){t()}),s.on("MouseDown",function(e){2!=e.button&&t()})}()),n.gecko&&(l(),c()),n.ie>9&&(l(),c())}}),i("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(t,e,n){return function(i,o){function r(t){i.getBody().style.webkitUserSelect="",(t||g)&&(i.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected"),g=!1)}function a(t,e){return!(!t||!e)&&t===p.getParent(e,"table")}function s(e){var n,r,s=e.target;if(!h&&!f&&s!==d&&(d=s,u&&c)){if(r=p.getParent(s,"td,th"),a(u,r)||(r=p.getParent(u,"td,th")),c===r&&!g)return;if(o(!0),a(u,r)){e.preventDefault(),l||(l=new t(i,u,c),i.getBody().style.webkitUserSelect="none"),l.setEndCell(r),g=!0,n=i.selection.getSel();try{n.removeAllRanges?n.removeAllRanges():n.empty()}catch(t){}}}}var l,c,u,d,h,f,p=i.dom,g=!0,m=function(){c=l=u=d=null,o(!1)};return i.on("SelectionChange",function(t){g&&t.stopImmediatePropagation()},!0),i.on("MouseDown",function(t){2==t.button||h||f||(r(),c=p.getParent(t.target,"td,th"),u=p.getParent(c,"table"))}),i.on("mouseover",s),i.on("remove",function(){p.unbind(i.getDoc(),"mouseover",s),r()}),i.on("MouseUp",function(){function t(t,i){var r=new e(t,t);do{if(3==t.nodeType&&0!==n.trim(t.nodeValue).length)return void(i?o.setStart(t,0):o.setEnd(t,t.nodeValue.length));if("BR"==t.nodeName)return void(i?o.setStartBefore(t):o.setEndBefore(t))}while(t=i?r.next():r.prev())}var o,r,a,s,u,d=i.selection;if(c){if(l&&(i.getBody().style.webkitUserSelect=""),(r=p.select("td[data-mce-selected],th[data-mce-selected]")).length>0){(o=p.createRng()).setStartBefore(s=r[0]),o.setEndAfter(s),t(s,1),a=new e(s,p.getParent(r[0],"table"));do{if("TD"==s.nodeName||"TH"==s.nodeName){if(!p.getAttrib(s,"data-mce-selected"))break;u=s}}while(s=a.next());t(u),d.setRng(o)}i.nodeChanged(),m()}}),i.on("KeyUp Drop SetContent",function(t){r("setcontent"==t.type),m(),h=!1}),i.on("ObjectResizeStart ObjectResized",function(t){h="objectresized"!=t.type}),i.on("dragstart",function(){f=!0}),i.on("drop dragend",function(){f=!1}),{clear:r}}}),i("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(t,e){var n=t.each;return function(i){function o(){var t=i.settings.color_picker_callback;if(t)return function(){var e=this;t.call(i,function(t){e.value(t).fire("change")},e.value())}}function r(t){return{title:"Advanced",type:"form",defaults:{onchange:function(){u(t,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:o()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:o()}]}]}}function a(t){return t?t.replace(/px$/,""):""}function s(t){return/^[0-9]+$/.test(t)&&(t+="px"),t}function l(t){n("left center right".split(" "),function(e){i.formatter.remove("align"+e,{},t)})}function c(e,n,i){return function e(i,o){return o=o||[],t.each(i,function(t){var i={text:t.text||t.title};t.menu?i.menu=e(t.menu):(i.value=t.value,n&&n(i)),o.push(i)}),o}(e,i||[])}function u(t,e,n){var i=e.toJSON(),o=t.parseStyle(i.style);n?(e.find("#borderColor").value(o["border-color"]||"")[0].fire("change"),e.find("#backgroundColor").value(o["background-color"]||"")[0].fire("change")):(o["border-color"]=i.borderColor,o["background-color"]=i.backgroundColor),e.find("#style").value(t.serializeStyle(t.parseStyle(t.serializeStyle(o))))}function d(t,e,n){var i=t.parseStyle(t.getAttrib(n,"style"));i["border-color"]&&(e.borderColor=i["border-color"]),i["background-color"]&&(e.backgroundColor=i["background-color"]),e.style=t.serializeStyle(i)}function h(t,e,i){var o=t.parseStyle(t.getAttrib(e,"style"));n(i,function(t){o[t.name]=t.value}),t.setAttrib(e,"style",t.serializeStyle(t.parseStyle(t.serializeStyle(o))))}var f=this;f.tableProps=function(){f.table(!0)},f.table=function(o){function f(){function n(t,e,i){if("TD"===t.tagName||"TH"===t.tagName)_.setStyle(t,e,i);else if(t.children)for(var o=0;o<t.children.length;o++)n(t.children[o],e,i)}var o;u(_,this),!1===(w=t.extend(w,this.toJSON())).class&&delete w.class,i.undoManager.transact(function(){if(g||(g=i.plugins.table.insertTable(w.cols||1,w.rows||1)),i.dom.setAttribs(g,{style:w.style,class:w.class}),i.settings.table_style_by_css){if((b=[]).push({name:"border",value:w.border}),b.push({name:"border-spacing",value:s(w.cellspacing)}),h(_,g,b),_.setAttribs(g,{"data-mce-border-color":w.borderColor,"data-mce-cell-padding":w.cellpadding,"data-mce-border":w.border}),g.children)for(var t=0;t<g.children.length;t++)n(g.children[t],"border",w.border),n(g.children[t],"padding",s(w.cellpadding))}else i.dom.setAttribs(g,{border:w.border,cellpadding:w.cellpadding,cellspacing:w.cellspacing});_.getAttrib(g,"width")&&!i.settings.table_style_by_css?_.setAttrib(g,"width",a(w.width)):_.setStyle(g,"width",s(w.width)),_.setStyle(g,"height",s(w.height)),(o=_.select("caption",g)[0])&&!w.caption&&_.remove(o),!o&&w.caption&&((o=_.create("caption")).innerHTML=e.ie?" ":'<br data-mce-bogus="1"/>',g.insertBefore(o,g.firstChild)),l(g),w.align&&i.formatter.apply("align"+w.align,{},g),i.focus(),i.addVisual()})}function p(t,e){return function(t,n){for(var i=0;i<n.length;i++){var o=_.getStyle(n[i],e);if(void 0===t&&(t=o),t!=o)return""}return t}(void 0,i.dom.select("td,th",t))}var g,m,v,y,x,b,_=i.dom,w={};!0===o?(g=_.getParent(i.selection.getStart(),"table"))&&(w={width:a(_.getStyle(g,"width")||_.getAttrib(g,"width")),height:a(_.getStyle(g,"height")||_.getAttrib(g,"height")),cellspacing:a(_.getStyle(g,"border-spacing")||_.getAttrib(g,"cellspacing")),cellpadding:_.getAttrib(g,"data-mce-cell-padding")||_.getAttrib(g,"cellpadding")||p(g,"padding"),border:_.getAttrib(g,"data-mce-border")||_.getAttrib(g,"border")||p(g,"border"),borderColor:_.getAttrib(g,"data-mce-border-color"),caption:!!_.select("caption",g)[0],class:_.getAttrib(g,"class")},n("left center right".split(" "),function(t){i.formatter.matchNode(g,"align"+t)&&(w.align=t)})):(m={label:"Cols",name:"cols"},v={label:"Rows",name:"rows"}),i.settings.table_class_list&&(w.class&&(w.class=w.class.replace(/\s*mce\-item\-table\s*/g,"")),y={name:"class",type:"listbox",label:"Class",values:c(i.settings.table_class_list,function(t){t.value&&(t.textStyle=function(){return i.formatter.getCssText({block:"table",classes:[t.value]})})})}),x={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:!1!==i.settings.table_appearance_options?[m,v,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[m,v,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},y]},!1!==i.settings.table_advtab?(d(_,w,g),i.windowManager.open({title:"Table properties",data:w,bodyType:"tabpanel",body:[{title:"General",type:"form",items:x},r(_)],onsubmit:f})):i.windowManager.open({title:"Table properties",data:w,body:x,onsubmit:f})},f.merge=function(t,e){i.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var n=this.toJSON();i.undoManager.transact(function(){t.merge(e,n.cols,n.rows)})}})},f.cell=function(){function e(t,e,n){(1===v.length||n)&&m.setAttrib(t,e,n)}function o(t,e,n){(1===v.length||n)&&m.setStyle(t,e,n)}function h(){u(m,this),p=t.extend(p,this.toJSON()),i.undoManager.transact(function(){n(v,function(t){e(t,"scope",p.scope),e(t,"style",p.style),e(t,"class",p.class),o(t,"width",s(p.width)),o(t,"height",s(p.height)),p.type&&t.nodeName.toLowerCase()!==p.type&&(t=m.rename(t,p.type)),1===v.length&&(l(t),function(t){n("top middle bottom".split(" "),function(e){i.formatter.remove("valign"+e,{},t)})}(t)),p.align&&i.formatter.apply("align"+p.align,{},t),p.valign&&i.formatter.apply("valign"+p.valign,{},t)}),i.focus()})}var f,p,g,m=i.dom,v=[];if(v=i.dom.select("td[data-mce-selected],th[data-mce-selected]"),f=i.dom.getParent(i.selection.getStart(),"td,th"),!v.length&&f&&v.push(f),f=f||v[0]){v.length>1?p={width:"",height:"",scope:"",class:"",align:"",style:"",type:f.nodeName.toLowerCase()}:((p={width:a(m.getStyle(f,"width")||m.getAttrib(f,"width")),height:a(m.getStyle(f,"height")||m.getAttrib(f,"height")),scope:m.getAttrib(f,"scope"),class:m.getAttrib(f,"class")}).type=f.nodeName.toLowerCase(),n("left center right".split(" "),function(t){i.formatter.matchNode(f,"align"+t)&&(p.align=t)}),n("top middle bottom".split(" "),function(t){i.formatter.matchNode(f,"valign"+t)&&(p.valign=t)}),d(m,p,f)),i.settings.table_cell_class_list&&(g={name:"class",type:"listbox",label:"Class",values:c(i.settings.table_cell_class_list,function(t){t.value&&(t.textStyle=function(){return i.formatter.getCssText({block:"td",classes:[t.value]})})})});var y={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},g]};i.windowManager.open(!1!==i.settings.table_cell_advtab?{title:"Cell properties",bodyType:"tabpanel",data:p,body:[{title:"General",type:"form",items:y},r(m)],onsubmit:h}:{title:"Cell properties",data:p,body:y,onsubmit:h})}},f.row=function(){function e(t,e,n){(1===x.length||n)&&y.setAttrib(t,e,n)}function o(){var o,r,a;u(y,this),m=t.extend(m,this.toJSON()),i.undoManager.transact(function(){var t=m.type;n(x,function(n){e(n,"scope",m.scope),e(n,"style",m.style),e(n,"class",m.class),function(t,e,n){(1===x.length||n)&&y.setStyle(t,"height",n)}(n,0,s(m.height)),t!==n.parentNode.nodeName.toLowerCase()&&(o=y.getParent(n,"table"),r=n.parentNode,(a=y.select(t,o)[0])||(a=y.create(t),o.firstChild?o.insertBefore(a,o.firstChild):o.appendChild(a)),a.appendChild(n),r.hasChildNodes()||y.remove(r)),1===x.length&&l(n),m.align&&i.formatter.apply("align"+m.align,{},n)}),i.focus()})}var h,f,p,g,m,v,y=i.dom,x=[];h=i.dom.getParent(i.selection.getStart(),"table"),f=i.dom.getParent(i.selection.getStart(),"td,th"),n(h.rows,function(t){n(t.cells,function(e){if(y.getAttrib(e,"data-mce-selected")||e==f)return x.push(t),!1})}),(p=x[0])&&(x.length>1?m={height:"",scope:"",class:"",align:"",type:p.parentNode.nodeName.toLowerCase()}:((m={height:a(y.getStyle(p,"height")||y.getAttrib(p,"height")),scope:y.getAttrib(p,"scope"),class:y.getAttrib(p,"class")}).type=p.parentNode.nodeName.toLowerCase(),n("left center right".split(" "),function(t){i.formatter.matchNode(p,"align"+t)&&(m.align=t)}),d(y,m,p)),i.settings.table_row_class_list&&(g={name:"class",type:"listbox",label:"Class",values:c(i.settings.table_row_class_list,function(t){t.value&&(t.textStyle=function(){return i.formatter.getCssText({block:"tr",classes:[t.value]})})})}),v={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},g]},i.windowManager.open(!1!==i.settings.table_row_advtab?{title:"Row properties",data:m,bodyType:"tabpanel",body:[{title:"General",type:"form",items:v},r(y)],onsubmit:o}:{title:"Row properties",data:m,body:v,onsubmit:o}))}}}),i("tinymce/tableplugin/ResizeBars",["tinymce/util/Tools","tinymce/util/VK"],function(t,n){var i;return function(o){function r(t,e){return{index:t,y:o.dom.getPos(e).y}}function a(t,e){return{index:t,y:o.dom.getPos(e).y+e.offsetHeight}}function s(t,e){return{index:t,x:o.dom.getPos(e).x}}function l(t,e){return{index:t,x:o.dom.getPos(e).x+e.offsetWidth}}function c(){return"rtl"===o.getBody().dir}function u(){return o.inline}function d(){return u?o.getBody().ownerDocument.body:o.getBody()}function h(t,e){return c()?l(t,e):s(t,e)}function f(t,e){return c()?s(t,e):l(t,e)}function p(t,e){var n=o.dom.getStyle(t,e,!0);return parseInt(n,10)}function g(t){return p(t,"width")/p(t.parentElement,"width")*100}function m(t,e,n){for(var i=[],o=1;o<n.length;o++)i.push(t(o-1,n[o].element));return i.push(e(n.length-1,n[n.length-1].element)),i}function v(){var e=o.dom.select("."+rt,d());t.each(e,function(t){o.dom.remove(t)})}function y(t){v(),A(t)}function x(t,e,n,i,o,r,a,s){var l={"data-mce-bogus":"all",class:rt+" "+t,unselectable:"on","data-mce-resize":!1,style:"cursor: "+e+"; margin: 0; padding: 0; position: absolute; left: "+n+"px; top: "+i+"px; height: "+o+"px; width: "+r+"px; "};return l[a]=s,l}function b(e,n,i){t.each(e,function(t){var e=i.x,r=t.y-pt/2,a=pt,s=n;o.dom.add(d(),"div",x(at,st,e,r,a,s,lt,t.index))})}function _(e,n,i){t.each(e,function(t){var e=t.x-pt/2,r=i.y,a=n,s=pt;o.dom.add(d(),"div",x(ut,dt,e,r,a,s,ht,t.index))})}function w(e){return t.map(e.rows,function(e){return{element:e,cells:t.map(e.cells,function(t){var e=t.hasAttribute("rowspan")?parseInt(t.getAttribute("rowspan"),10):1,n=t.hasAttribute("colspan")?parseInt(t.getAttribute("colspan"),10):1;return{element:t,rowspan:e,colspan:n}})}})}function S(n){function i(t,e){return t+","+e}var o={},r=[],a=0,s=0;return t.each(n,function(n,l){var c=[];t.each(n.cells,function(t){for(var n=0;o[i(l,n)]!==e;)n++;for(var r={element:t.element,colspan:t.colspan,rowspan:t.rowspan,rowIndex:l,colIndex:n},u=0;u<t.colspan;u++)for(var d=0;d<t.rowspan;d++){var h=l+d,f=n+u;o[i(h,f)]=r,a=Math.max(a,h+1),s=Math.max(s,f+1)}c.push(r)}),r.push({element:n.element,cells:c})}),{grid:{maxRows:a,maxCols:s},getAt:function(t,e){return o[i(t,e)]},getAllCells:function(){var e=[];return t.each(r,function(t){e=e.concat(t.cells)}),e},getAllRows:function(){return r}}}function C(t,e){for(var n=[],i=t;i<e;i++)n.push(i);return n}function M(t,e,n){for(var i,o=t(),r=0;r<o.length;r++)e(o[r])&&(i=o[r]);return i||n()}function T(e){var n=C(0,e.grid.maxCols),i=C(0,e.grid.maxRows);return t.map(n,function(t){return M(function(){for(var n=[],o=0;o<i.length;o++){var r=e.getAt(o,t);r&&r.colIndex===t&&n.push(r)}return n},function(t){return 1===t.colspan},function(){for(var n,o=0;o<i.length;o++)if(n=e.getAt(o,t))return n;return null})})}function k(e){var n=C(0,e.grid.maxCols),i=C(0,e.grid.maxRows);return t.map(i,function(t){return M(function(){for(var i=[],o=0;o<n.length;o++){var r=e.getAt(t,o);r&&r.rowIndex===t&&i.push(r)}return i},function(t){return 1===t.rowspan},function(){return e.getAt(t,0)})})}function A(t){var e=S(w(t)),n=k(e),i=T(e),s=o.dom.getPos(t),l=n.length>0?m(r,a,n):[],c=i.length>0?m(h,f,i):[];b(l,t.offsetWidth,s),_(c,t.offsetHeight,s)}function I(t,e,n,i){if(e<0||e>=t.length-1)return"";var o=t[e];if(o)o={value:o,delta:0};else for(var r=t.slice(0,e).reverse(),a=0;a<r.length;a++)r[a]&&(o={value:r[a],delta:a+1});var s=t[e+1];if(s)s={value:s,delta:1};else for(var l=t.slice(e+1),c=0;c<l.length;c++)l[c]&&(s={value:l[c],delta:c+1});var u=s.delta-o.delta,d=Math.abs(s.value-o.value)/u;return n?d/p(i,"width")*100:d}function D(t,e){var n=o.dom.getStyle(t,e);return n||(n=o.dom.getAttrib(t,e)),n||(n=o.dom.getStyle(t,e,!0)),n}function P(t,e,n){var i=D(t,"width"),o=parseInt(i,10),r=e?function(t,e){return p(t,"width")/p(e,"width")*100}(t,n):p(t,"width");return(e&&!F(i)||!e&&!H(i))&&(o=0),!isNaN(o)&&o>0?o:r}function E(e,n,i){for(var o=T(e),r=t.map(o,function(t){return h(t.colIndex,t.element).x}),a=[],s=0;s<o.length;s++){var l=(o[s].element.hasAttribute("colspan")?parseInt(o[s].element.getAttribute("colspan"),10):1)>1?I(r,s):P(o[s].element,n,i);a.push(l=l||gt)}return a}function N(t){var e=D(t,"height"),n=parseInt(e,10);return F(e)&&(n=0),!isNaN(n)&&n>0?n:p(t,"height")}function L(e){for(var n=k(e),i=t.map(n,function(t){return r(t.rowIndex,t.element).y}),o=[],a=0;a<n.length;a++){var s=(n[a].element.hasAttribute("rowspan")?parseInt(n[a].element.getAttribute("rowspan"),10):1)>1?I(i,a):N(n[a].element);o.push(s=s||mt)}return o}function R(e,n,i,o,r){function a(e){return t.map(e,function(){return 0})}function s(t,e){var n,r=a(l.slice(0,t)),s=a(l.slice(e+1));if(i>=0){var c=Math.max(o,l[e]-i);n=r.concat([i,c-l[e]]).concat(s)}else{var u=Math.max(o,l[t]+i);n=r.concat([u-l[t],l[t]-u]).concat(s)}return n}var l=e.slice(0);return 0===e.length?[]:1===e.length?r?[100-l[0]]:[Math.max(o,l[0]+i)-l[0]]:0===n?s(0,1):n>0&&n<e.length-1?s(n,n+1):n===e.length-1?function(t,e){var n,r=a(l.slice(0,e));if(i>=0)n=r.concat([i]);else{var s=Math.max(o,l[e]+i);n=r.concat([s-l[e]])}return n}(0,n):[]}function O(t,e,n){for(var i=0,o=t;o<e;o++)i+=n[o];return i}function B(e,n){var i=e.getAllCells();return t.map(i,function(t){var e=O(t.colIndex,t.colIndex+t.colspan,n);return{element:t.element,width:e,colspan:t.colspan}})}function z(e,n){var i=e.getAllCells();return t.map(i,function(t){var e=O(t.rowIndex,t.rowIndex+t.rowspan,n);return{element:t.element,height:e,rowspan:t.rowspan}})}function V(e,n){var i=e.getAllRows();return t.map(i,function(t,e){return{element:t.element,height:n[e]}})}function F(t){return yt.test(t)}function H(t){return xt.test(t)}function W(e,n,i){for(var r=S(w(e)),a=F(e.width)||F(e.style.width),s=E(r,a,e),l=a?function(t,e){return e/p(t,"width")*100}(e,n):n,c=R(s,i,l,gt,a),u=[],d=0;d<c.length;d++)u.push(c[d]+s[d]);var h=B(r,u),f=a?"%":"px",m=a?i<r.grid.maxCols-1?g(e):g(e)+function(t,e){return e/p(t.parentElement,"width")*100}(e,n):i<r.grid.maxCols-1?p(e,"width"):p(e,"width")+n;o.undoManager.transact(function(){(function(e,n){t.each(e,function(t){o.dom.setStyle(t.element,"width",t.width+n),o.dom.setAttrib(t.element,"width",null)})})(h,f),function(t,n,a){i!=r.grid.maxCols-1&&a||(o.dom.setStyle(e,"width",t+n),o.dom.setAttrib(e,"width",null))}(m,f,a)})}function G(e,n,i){for(var r=S(w(e)),a=L(r),s=[],l=0,c=0;c<a.length;c++)s.push(c===i?n+a[c]:a[c]),l+=l[c];var u=z(r,s),d=V(r,s);o.undoManager.transact(function(){t.each(d,function(t){o.dom.setStyle(t.element,"height",t.height+"px"),o.dom.setAttrib(t.element,"height",null)}),t.each(u,function(t){o.dom.setStyle(t.element,"height",t.height+"px"),o.dom.setAttrib(t.element,"height",null)}),o.dom.setStyle(e,"height",l+"px"),o.dom.setAttrib(e,"height",null)})}function U(){if(o.dom.remove(et),tt){var t,e;if(o.dom.removeClass(nt,vt),tt=!1,$(nt)){var n=parseInt(o.dom.getAttrib(nt,ft),10),r=o.dom.getPos(nt).x;t=parseInt(o.dom.getAttrib(nt,ht),10),e=c()?n-r:r-n,Math.abs(e)>=1&&W(i,e,t)}else if(q(nt)){var a=parseInt(o.dom.getAttrib(nt,ct),10),s=o.dom.getPos(nt).y;t=parseInt(o.dom.getAttrib(nt,lt),10),e=s-a,Math.abs(e)>=1&&G(i,e,t)}y(i),o.nodeChanged()}}function j(t,e){et=et||function(){var t=document.createElement("div");return t.setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;"),t.setAttribute("data-mce-bogus","all"),t}(),tt=!0,o.dom.addClass(t,vt),nt=t,function(t,e){o.dom.bind(t,"mouseup",function(){U()}),o.dom.bind(t,"mousemove",function(t){clearTimeout(Q),tt&&e(t)}),o.dom.bind(t,"mouseout",function(){Q=setTimeout(function(){U()},200)})}(et,e),o.dom.add(d(),et)}function $(t){return o.dom.hasClass(t,ut)}function q(t){return o.dom.hasClass(t,at)}function Y(t){var n=t.clientX-(it=it!==e?it:t.clientX);it=t.clientX;var i=o.dom.getPos(nt).x;o.dom.setStyle(nt,"left",i+n+"px")}function X(t){var n=t.clientY-(ot=ot!==e?ot:t.clientY);ot=t.clientY;var i=o.dom.getPos(nt).y;o.dom.setStyle(nt,"top",i+n+"px")}function Z(t){it=e,j(t,Y)}function K(t){ot=e,j(t,X)}function J(t){var e=t.target,n=o.getBody();if(o.$.contains(n,i)||i===n)if($(e)){t.preventDefault();var r=o.dom.getPos(e).x;o.dom.setAttrib(e,ft,r),Z(e)}else if(q(e)){t.preventDefault();var a=o.dom.getPos(e).y;o.dom.setAttrib(e,ct,a),K(e)}else v()}var Q,tt,et,nt,it,ot,rt="mce-resize-bar",at="mce-resize-bar-row",st="row-resize",lt="data-row",ct="data-initial-top",ut="mce-resize-bar-col",dt="col-resize",ht="data-col",ft="data-initial-left",pt=4,gt=10,mt=10,vt="mce-resize-bar-dragging",yt=new RegExp(/(\d+(\.\d+)?%)/),xt=new RegExp(/px|em/);return o.on("init",function(){o.dom.bind(d(),"mousedown",J)}),o.on("ObjectResized",function(e){var n=e.target;if("TABLE"===n.nodeName){var i=[];t.each(n.rows,function(e){t.each(e.cells,function(t){var e=o.dom.getStyle(t,"width",!0);i.push({cell:t,width:e})})}),t.each(i,function(t){o.dom.setStyle(t.cell,"width",t.width),o.dom.setAttrib(t.cell,"width",null)})}}),o.on("mouseover",function(t){if(!tt){var e=o.dom.getParent(t.target,"table");("TABLE"===t.target.nodeName||e)&&(i=e,y(e))}}),o.on("keydown",function(t){switch(t.keyCode){case n.LEFT:case n.RIGHT:case n.UP:case n.DOWN:v()}}),o.on("remove",function(){v(),o.dom.unbind(d(),"mousedown",J)}),{adjustWidth:W,adjustHeight:G,clearBars:v,drawBars:A,determineDeltas:R,getTableGrid:S,getTableDetails:w,getWidths:E,getPixelHeights:L,isPercentageBasedSize:F,isPixelBasedSize:H,recalculateWidths:B,recalculateCellHeights:z,recalculateRowHeights:V}}}),i("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/tableplugin/ResizeBars","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(t,e,n,i,o,r,a,s,l){var c=r.each;l.add("table",function(r){function a(t){return function(){r.execCommand(t)}}function l(t,e){var n,i,o,a;for(o='<table id="__mce"><tbody>',n=0;n<e;n++){for(o+="<tr>",i=0;i<t;i++)o+="<td>"+(s.ie&&s.ie<10?"&nbsp;":"<br>")+"</td>";o+="</tr>"}return o+="</tbody></table>",r.undoManager.transact(function(){r.insertContent(o),a=r.dom.get("__mce"),r.dom.setAttrib(a,"id",null),r.$("tr",a).each(function(t,e){r.fire("newrow",{node:e}),r.$("th,td",e).each(function(t,e){r.fire("newcell",{node:e})})}),r.dom.setAttribs(a,r.settings.table_default_attributes||{}),r.dom.setStyles(a,r.settings.table_default_styles||{})}),a}function u(t,e,n){function i(){var i,o,a,s={},l=0;(i=(o=r.dom.select("td[data-mce-selected],th[data-mce-selected]"))[0])||(i=r.selection.getStart()),n&&o.length>0?(c(o,function(t){return s[t.parentNode.parentNode.nodeName]=1}),c(s,function(t){l+=t}),a=1!==l):a=!r.dom.getParent(i,e),t.disabled(a),r.selection.selectorChanged(e,function(e){t.disabled(!e)})}r.initialized?i():r.on("init",i)}function d(){u(this,"table")}function h(){u(this,"td,th")}function f(t,e,n){var i,o,a,s,l,c=n.getEl().getElementsByTagName("table")[0],u=n.isRtl()||"tl-tr"==n.parent().rel;for(c.nextSibling.innerHTML=t+1+" x "+(e+1),u&&(t=9-t),o=0;o<10;o++)for(i=0;i<10;i++)r.dom.toggleClass(s=c.rows[o].childNodes[i].firstChild,"mce-active",l=(u?i>=t:i<=t)&&o<=e),l&&(a=s);return a.parentNode}function p(t){return r.dom.is(t,"table")&&r.getBody().contains(t)}var g,m,v=this,y=new i(r);!r.settings.object_resizing||!1===r.settings.table_resize_bars||!0!==r.settings.object_resizing&&"table"!==r.settings.object_resizing||(m=o(r)),r.addMenuItem("inserttable",!1===r.settings.table_grid?{text:"Table",icon:"table",context:"table",onclick:y.table}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(t){t.aria&&(this.parent().hideAll(),t.stopImmediatePropagation(),y.table())},onshow:function(){f(0,0,this.menu.items()[0])},onhide:function(){var t=this.menu.items()[0].getEl().getElementsByTagName("a");r.dom.removeClass(t,"mce-active"),r.dom.addClass(t[0],"mce-active")},menu:[{type:"container",html:function(){var t="";t='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var e=0;e<10;e++){t+="<tr>";for(var n=0;n<10;n++)t+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*e+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+e+'"></a></td>';t+="</tr>"}return(t+="</table>")+'<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(t){var e,n,i=t.target;"A"==i.tagName.toUpperCase()&&(e=parseInt(i.getAttribute("data-mce-x"),10),n=parseInt(i.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(e=9-e),e===this.lastX&&n===this.lastY||(f(e,n,t.control),this.lastX=e,this.lastY=n))},onclick:function(t){var e=this;"A"==t.target.tagName.toUpperCase()&&(t.preventDefault(),t.stopPropagation(),e.parent().cancel(),r.undoManager.transact(function(){l(e.lastX+1,e.lastY+1)}),r.addVisual())}}]}),r.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:d,onclick:y.tableProps}),r.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:d,cmd:"mceTableDelete"}),r.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:a("mceTableCellProps"),onPostRender:h},{text:"Merge cells",onclick:a("mceTableMergeCells"),onPostRender:function(){u(this,"td,th",!0)}},{text:"Split cell",onclick:a("mceTableSplitCells"),onPostRender:h}]}),r.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:a("mceTableInsertRowBefore"),onPostRender:h},{text:"Insert row after",onclick:a("mceTableInsertRowAfter"),onPostRender:h},{text:"Delete row",onclick:a("mceTableDeleteRow"),onPostRender:h},{text:"Row properties",onclick:a("mceTableRowProps"),onPostRender:h},{text:"-"},{text:"Cut row",onclick:a("mceTableCutRow"),onPostRender:h},{text:"Copy row",onclick:a("mceTableCopyRow"),onPostRender:h},{text:"Paste row before",onclick:a("mceTablePasteRowBefore"),onPostRender:h},{text:"Paste row after",onclick:a("mceTablePasteRowAfter"),onPostRender:h}]}),r.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:a("mceTableInsertColBefore"),onPostRender:h},{text:"Insert column after",onclick:a("mceTableInsertColAfter"),onPostRender:h},{text:"Delete column",onclick:a("mceTableDeleteCol"),onPostRender:h}]});var x=[];c("inserttable tableprops deletetable | cell row column".split(" "),function(t){x.push("|"==t?{text:"-"}:r.menuItems[t])}),r.addButton("table",{type:"menubutton",title:"Table",menu:x}),s.isIE||r.on("click",function(t){"TABLE"===(t=t.target).nodeName&&(r.selection.select(t),r.nodeChanged())}),v.quirks=new e(r),r.on("Init",function(){v.cellSelection=new n(r,function(t){t&&m&&m.clearBars()}),v.resizeBars=m}),r.on("PreInit",function(){r.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(t,e){for(var n=t.length;n--;)t[n].attr(e,null)})}),c({mceTableSplitCells:function(t){t.split()},mceTableMergeCells:function(t){var e;e=r.dom.getParent(r.selection.getStart(),"th,td"),r.dom.select("td[data-mce-selected],th[data-mce-selected]").length?t.merge():y.merge(t,e)},mceTableInsertRowBefore:function(t){t.insertRows(!0)},mceTableInsertRowAfter:function(t){t.insertRows()},mceTableInsertColBefore:function(t){t.insertCols(!0)},mceTableInsertColAfter:function(t){t.insertCols()},mceTableDeleteCol:function(t){t.deleteCols()},mceTableDeleteRow:function(t){t.deleteRows()},mceTableCutRow:function(t){g=t.cutRows()},mceTableCopyRow:function(t){g=t.copyRows()},mceTablePasteRowBefore:function(t){t.pasteRows(g,!0)},mceTablePasteRowAfter:function(t){t.pasteRows(g)},mceSplitColsBefore:function(t){t.splitCols(!0)},mceSplitColsAfter:function(t){t.splitCols(!1)},mceTableDelete:function(t){m&&m.clearBars(),t.deleteTable()}},function(e,n){r.addCommand(n,function(){var n=new t(r);n&&(e(n),r.execCommand("mceRepaint"),v.cellSelection.clear())})}),c({mceInsertTable:y.table,mceTableProps:function(){y.table(!0)},mceTableRowProps:y.row,mceTableCellProps:y.cell},function(t,e){r.addCommand(e,function(e,n){t(n)})}),r.addButton("tableprops",{title:"Table properties",onclick:y.tableProps,icon:"table"}),r.addButton("tabledelete",{title:"Delete table",onclick:a("mceTableDelete")}),r.addButton("tablecellprops",{title:"Cell properties",onclick:a("mceTableCellProps")}),r.addButton("tablemergecells",{title:"Merge cells",onclick:a("mceTableMergeCells")}),r.addButton("tablesplitcells",{title:"Split cell",onclick:a("mceTableSplitCells")}),r.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:a("mceTableInsertRowBefore")}),r.addButton("tableinsertrowafter",{title:"Insert row after",onclick:a("mceTableInsertRowAfter")}),r.addButton("tabledeleterow",{title:"Delete row",onclick:a("mceTableDeleteRow")}),r.addButton("tablerowprops",{title:"Row properties",onclick:a("mceTableRowProps")}),r.addButton("tablecutrow",{title:"Cut row",onclick:a("mceTableCutRow")}),r.addButton("tablecopyrow",{title:"Copy row",onclick:a("mceTableCopyRow")}),r.addButton("tablepasterowbefore",{title:"Paste row before",onclick:a("mceTablePasteRowBefore")}),r.addButton("tablepasterowafter",{title:"Paste row after",onclick:a("mceTablePasteRowAfter")}),r.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:a("mceTableInsertColBefore")}),r.addButton("tableinsertcolafter",{title:"Insert column after",onclick:a("mceTableInsertColAfter")}),r.addButton("tabledeletecol",{title:"Delete column",onclick:a("mceTableDeleteCol")}),function(){var t=r.settings.table_toolbar;""!==t&&!1!==t&&(t||(t="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),r.addContextToolbar(p,t))}(),!1!==r.settings.table_tab_navigation&&r.on("keydown",function(e){var n,i,o;9==e.keyCode&&(n=r.dom.getParent(r.selection.getStart(),"th,td"))&&(e.preventDefault(),i=new t(r),o=e.shiftKey?-1:1,r.undoManager.transact(function(){!i.moveRelIdx(n,o)&&o>0&&(i.insertRow(),i.refresh(),i.moveRelIdx(n,o))}))}),v.insertTable=l,v.setClipboardRows=function(t){g=t},v.getClipboardRows=function(){return g}})})}(window),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.echarts={})}(this,function(t){"use strict";var e,n=2311,i=function(){return n++},o="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:function(t){var e={},n=t.match(/Firefox\/([\d.]+)/),i=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),o=t.match(/Edge\/([\d.]+)/),r=/micromessenger/i.test(t);return n&&(e.firefox=!0,e.version=n[1]),i&&(e.ie=!0,e.version=i[1]),o&&(e.edge=!0,e.version=o[1]),r&&(e.weChat=!0),{browser:e,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!e.ie&&!e.edge,pointerEventsSupported:"onpointerdown"in window&&(e.edge||e.ie&&11<=e.version),domSupported:"undefined"!=typeof document}}(navigator.userAgent),r={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},a={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},s=Object.prototype.toString,l=Array.prototype,c=l.forEach,u=l.filter,d=l.slice,h=l.map,f=l.reduce,p={};function g(t,n){"createCanvas"===t&&(e=null),p[t]=n}function m(t){if(null==t||"object"!=typeof t)return t;var e=t,n=s.call(t);if("[object Array]"===n){if(!K(t)){e=[];for(var i=0,o=t.length;i<o;i++)e[i]=m(t[i])}}else if(a[n]){if(!K(t)){var l=t.constructor;if(t.constructor.from)e=l.from(t);else for(e=new l(t.length),i=0,o=t.length;i<o;i++)e[i]=m(t[i])}}else if(!r[n]&&!K(t)&&!F(t))for(var c in e={},t)t.hasOwnProperty(c)&&(e[c]=m(t[c]));return e}function v(t,e,n){if(!B(e)||!B(t))return n?m(e):t;for(var i in e)if(e.hasOwnProperty(i)){var o=t[i],r=e[i];!B(r)||!B(o)||L(r)||L(o)||F(r)||F(o)||z(r)||z(o)||K(r)||K(o)?!n&&i in t||(t[i]=m(e[i])):v(o,r,n)}return t}function y(t,e){for(var n=t[0],i=1,o=t.length;i<o;i++)n=v(n,t[i],e);return n}function x(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function b(t,e,n){for(var i in e)e.hasOwnProperty(i)&&(n?null!=e[i]:null==t[i])&&(t[i]=e[i]);return t}function _(){return p.createCanvas()}function w(){return e=e||_().getContext("2d")}function S(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n}return-1}function C(t,e){var n=t.prototype;function i(){}for(var o in i.prototype=e.prototype,t.prototype=new i,n)n.hasOwnProperty(o)&&(t.prototype[o]=n[o]);(t.prototype.constructor=t).superClass=e}function M(t,e,n){b(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,n)}function T(t){if(t)return"string"!=typeof t&&"number"==typeof t.length}function k(t,e,n){if(t&&e)if(t.forEach&&t.forEach===c)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,o=t.length;i<o;i++)e.call(n,t[i],i,t);else for(var r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function A(t,e,n){if(t&&e){if(t.map&&t.map===h)return t.map(e,n);for(var i=[],o=0,r=t.length;o<r;o++)i.push(e.call(n,t[o],o,t));return i}}function I(t,e,n,i){if(t&&e){if(t.reduce&&t.reduce===f)return t.reduce(e,n,i);for(var o=0,r=t.length;o<r;o++)n=e.call(i,n,t[o],o,t);return n}}function D(t,e,n){if(t&&e){if(t.filter&&t.filter===u)return t.filter(e,n);for(var i=[],o=0,r=t.length;o<r;o++)e.call(n,t[o],o,t)&&i.push(t[o]);return i}}function P(t,e,n){if(t&&e)for(var i=0,o=t.length;i<o;i++)if(e.call(n,t[i],i,t))return t[i]}function E(t,e){var n=d.call(arguments,2);return function(){return t.apply(e,n.concat(d.call(arguments)))}}function N(t){var e=d.call(arguments,1);return function(){return t.apply(this,e.concat(d.call(arguments)))}}function L(t){return"[object Array]"===s.call(t)}function R(t){return"function"==typeof t}function O(t){return"[object String]"===s.call(t)}function B(t){var e=typeof t;return"function"==e||!!t&&"object"==e}function z(t){return!!r[s.call(t)]}function V(t){return!!a[s.call(t)]}function F(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}function H(t){return t!=t}function W(t){for(var e=0,n=arguments.length;e<n;e++)if(null!=arguments[e])return arguments[e]}function G(t,e){return null!=t?t:e}function U(t,e,n){return null!=t?t:null!=e?e:n}function j(){return Function.call.apply(d,arguments)}function $(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t}function q(t,e){if(!t)throw new Error(e)}function Y(t){return null==t?null:"function"==typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}p.createCanvas=function(){return document.createElement("canvas")};var X="__ec_primitive__";function Z(t){t[X]=!0}function K(t){return t[X]}function J(t){var e=L(t);this.data={};var n=this;function i(t,i){e?n.set(t,i):n.set(i,t)}t instanceof J?t.each(i):t&&k(t,i)}function Q(t){return new J(t)}function tt(t,e){for(var n=new t.constructor(t.length+e.length),i=0;i<t.length;i++)n[i]=t[i];var o=t.length;for(i=0;i<e.length;i++)n[i+o]=e[i];return n}function et(){}J.prototype={constructor:J,get:function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},set:function(t,e){return this.data[t]=e},each:function(t,e){for(var n in void 0!==e&&(t=E(t,e)),this.data)this.data.hasOwnProperty(n)&&t(this.data[n],n)},removeKey:function(t){delete this.data[t]}};var nt=(Object.freeze||Object)({$override:g,clone:m,merge:v,mergeAll:y,extend:x,defaults:b,createCanvas:_,getContext:w,indexOf:S,inherits:C,mixin:M,isArrayLike:T,each:k,map:A,reduce:I,filter:D,find:P,bind:E,curry:N,isArray:L,isFunction:R,isString:O,isObject:B,isBuiltInObject:z,isTypedArray:V,isDom:F,eqNaN:H,retrieve:W,retrieve2:G,retrieve3:U,slice:j,normalizeCssArray:$,assert:q,trim:Y,setAsPrimitive:Z,isPrimitive:K,createHashMap:Q,concatArray:tt,noop:et}),it="undefined"==typeof Float32Array?Array:Float32Array;function ot(t,e){var n=new it(2);return null==t&&(t=0),null==e&&(e=0),n[0]=t,n[1]=e,n}function rt(t,e){return t[0]=e[0],t[1]=e[1],t}function at(t){var e=new it(2);return e[0]=t[0],e[1]=t[1],e}function st(t,e,n){return t[0]=e,t[1]=n,t}function lt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function ct(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t}function ut(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function dt(t){return Math.sqrt(ht(t))}function ht(t){return t[0]*t[0]+t[1]*t[1]}function ft(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function pt(t,e){var n=dt(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}function gt(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var mt=gt;function vt(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var yt=vt;function xt(t,e,n,i){return t[0]=e[0]+i*(n[0]-e[0]),t[1]=e[1]+i*(n[1]-e[1]),t}function bt(t,e,n){var i=e[0],o=e[1];return t[0]=n[0]*i+n[2]*o+n[4],t[1]=n[1]*i+n[3]*o+n[5],t}function _t(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function wt(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}var St=(Object.freeze||Object)({create:ot,copy:rt,clone:at,set:st,add:lt,scaleAndAdd:ct,sub:ut,len:dt,length:dt,lenSquare:ht,lengthSquare:ht,mul:function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},div:function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},scale:ft,normalize:pt,distance:gt,dist:mt,distanceSquare:vt,distSquare:yt,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},lerp:xt,applyTransform:bt,min:_t,max:wt});function Ct(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}function Mt(t,e){return{target:t,topTarget:e&&e.topTarget}}Ct.prototype={constructor:Ct,_dragStart:function(t){for(var e=t.target;e&&!e.draggable;)e=e.parent;e&&((this._draggingTarget=e).dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.dispatchToElement(Mt(e,t),"dragstart",t.event))},_drag:function(t){var e=this._draggingTarget;if(e){var n=t.offsetX,i=t.offsetY,o=n-this._x,r=i-this._y;this._x=n,this._y=i,e.drift(o,r,t),this.dispatchToElement(Mt(e,t),"drag",t.event);var a=this.findHover(n,i,e).target,s=this._dropTarget;e!==(this._dropTarget=a)&&(s&&a!==s&&this.dispatchToElement(Mt(s,t),"dragleave",t.event),a&&a!==s&&this.dispatchToElement(Mt(a,t),"dragenter",t.event))}},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.dispatchToElement(Mt(e,t),"dragend",t.event),this._dropTarget&&this.dispatchToElement(Mt(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null}};var Tt=Array.prototype.slice,kt=function(t){this._$handlers={},this._$eventProcessor=t};function At(t,e,n,i,o,r){var a=t._$handlers;if("function"==typeof n&&(o=i,i=n,n=null),!i||!e)return t;n=function(t,e){var n=t._$eventProcessor;return null!=e&&n&&n.normalizeQuery&&(e=n.normalizeQuery(e)),e}(t,n),a[e]||(a[e]=[]);for(var s=0;s<a[e].length;s++)if(a[e][s].h===i)return t;var l={h:i,one:r,query:n,ctx:o||t,callAtLast:i.zrEventfulCallAtLast},c=a[e].length-1,u=a[e][c];return u&&u.callAtLast?a[e].splice(c,0,l):a[e].push(l),t}kt.prototype={constructor:kt,one:function(t,e,n,i){return At(this,t,e,n,i,!0)},on:function(t,e,n,i){return At(this,t,e,n,i,!1)},isSilent:function(t){var e=this._$handlers;return!e[t]||!e[t].length},off:function(t,e){var n=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var i=[],o=0,r=n[t].length;o<r;o++)n[t][o].h!==e&&i.push(n[t][o]);n[t]=i}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this},trigger:function(t){var e=this._$handlers[t],n=this._$eventProcessor;if(e){var i=arguments,o=i.length;3<o&&(i=Tt.call(i,1));for(var r=e.length,a=0;a<r;){var s=e[a];if(n&&n.filter&&null!=s.query&&!n.filter(t,s.query))a++;else{switch(o){case 1:s.h.call(s.ctx);break;case 2:s.h.call(s.ctx,i[1]);break;case 3:s.h.call(s.ctx,i[1],i[2]);break;default:s.h.apply(s.ctx,i)}s.one?(e.splice(a,1),r--):a++}}}return n&&n.afterTrigger&&n.afterTrigger(t),this},triggerWithContext:function(t){var e=this._$handlers[t],n=this._$eventProcessor;if(e){var i=arguments,o=i.length;4<o&&(i=Tt.call(i,1,i.length-1));for(var r=i[i.length-1],a=e.length,s=0;s<a;){var l=e[s];if(n&&n.filter&&null!=l.query&&!n.filter(t,l.query))s++;else{switch(o){case 1:l.h.call(r);break;case 2:l.h.call(r,i[1]);break;case 3:l.h.call(r,i[1],i[2]);break;default:l.h.apply(r,i)}l.one?(e.splice(s,1),a--):s++}}}return n&&n.afterTrigger&&n.afterTrigger(t),this}};var It=Math.log(2);function Dt(t,e,n,i,o,r){var a=i+"-"+o,s=t.length;if(r.hasOwnProperty(a))return r[a];if(1===e){var l=Math.round(Math.log((1<<s)-1&~o)/It);return t[n][l]}for(var c=i|1<<n,u=n+1;i&1<<u;)u++;for(var d=0,h=0,f=0;h<s;h++){var p=1<<h;p&o||(d+=(f%2?-1:1)*t[n][h]*Dt(t,e-1,u,c,o|p,r),f++)}return r[a]=d}function Pt(t,e){var n=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],i={},o=Dt(n,8,0,0,0,i);if(0!==o){for(var r=[],a=0;a<8;a++)for(var s=0;s<8;s++)null==r[s]&&(r[s]=0),r[s]+=((a+s)%2?-1:1)*Dt(n,7,0===a?1:0,1<<a,1<<s,i)/o*e[a];return function(t,e,n){var i=e*r[6]+n*r[7]+1;t[0]=(e*r[0]+n*r[1]+r[2])/i,t[1]=(e*r[3]+n*r[4]+r[5])/i}}}var Et="___zrEVENTSAVED",Nt=[];function Lt(t,e,n,i,r){if(e.getBoundingClientRect&&o.domSupported&&!Rt(e)){var a=e[Et]||(e[Et]={}),s=function(t,e,n){for(var i=n?"invTrans":"trans",o=e[i],r=e.srcCoords,a=!0,s=[],l=[],c=0;c<4;c++){var u=t[c].getBoundingClientRect(),d=2*c,h=u.left,f=u.top;s.push(h,f),a=a&&r&&h===r[d]&&f===r[1+d],l.push(t[c].offsetLeft,t[c].offsetTop)}return a&&o?o:(e.srcCoords=s,e[i]=n?Pt(l,s):Pt(s,l))}(function(t,e){var n=e.markers;if(n)return n;n=e.markers=[];for(var i=["left","right"],o=["top","bottom"],r=0;r<4;r++){var a=document.createElement("div"),s=r%2,l=(r>>1)%2;a.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[s]+":0",o[l]+":0",i[1-s]+":auto",o[1-l]+":auto",""].join("!important;"),t.appendChild(a),n.push(a)}return n}(e,a),a,r);if(s)return s(t,n,i),!0}return!1}function Rt(t){return"CANVAS"===t.nodeName.toUpperCase()}var Ot="undefined"!=typeof window&&!!window.addEventListener,Bt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,zt=[];function Vt(t,e,n,i){return n=n||{},i||!o.canvasSupported?Ft(t,e,n):o.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):null!=e.offsetX?(n.zrX=e.offsetX,n.zrY=e.offsetY):Ft(t,e,n),n}function Ft(t,e,n){if(o.domSupported&&t.getBoundingClientRect){var i=e.clientX,r=e.clientY;if(Rt(t)){var a=t.getBoundingClientRect();return n.zrX=i-a.left,void(n.zrY=r-a.top)}if(Lt(zt,t,i,r))return n.zrX=zt[0],void(n.zrY=zt[1])}n.zrX=n.zrY=0}function Ht(t){return t||window.event}function Wt(t,e,n){if(null!=(e=Ht(e)).zrX)return e;var i=e.type;if(i&&0<=i.indexOf("touch")){var o="touchend"!==i?e.targetTouches[0]:e.changedTouches[0];o&&Vt(t,o,e,n)}else Vt(t,e,e,n),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;var r=e.button;return null==e.which&&void 0!==r&&Bt.test(e.type)&&(e.which=1&r?1:2&r?3:4&r?2:0),e}function Gt(t,e,n,i){Ot?t.addEventListener(e,n,i):t.attachEvent("on"+e,n)}var Ut=Ot?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};function jt(t){return 2===t.which||3===t.which}function $t(){this._track=[]}function qt(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}$t.prototype={constructor:$t,recognize:function(t,e,n){return this._doTrack(t,e,n),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e,n){var i=t.touches;if(i){for(var o={points:[],touches:[],target:e,event:t},r=0,a=i.length;r<a;r++){var s=i[r],l=Vt(n,s,{});o.points.push([l.zrX,l.zrY]),o.touches.push(s)}this._track.push(o)}},_recognize:function(t){for(var e in Yt)if(Yt.hasOwnProperty(e)){var n=Yt[e](this._track,t);if(n)return n}}};var Yt={pinch:function(t,e){var n=t.length;if(n){var i=(t[n-1]||{}).points,o=(t[n-2]||{}).points||i;if(o&&1<o.length&&i&&1<i.length){var r=qt(i)/qt(o);isFinite(r)||(r=1),e.pinchScale=r;var a=function(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}(i);return e.pinchX=a[0],e.pinchY=a[1],{type:"pinch",target:t[0].target,event:e}}}}},Xt="silent";function Zt(){Ut(this.event)}function Kt(){}function Jt(t,e,n,i){kt.call(this),this.storage=t,this.painter=e,this.painterRoot=i,n=n||new Kt,this.proxy=null,this._hovered={},Ct.call(this),this.setHandlerProxy(n)}Kt.prototype.dispose=function(){};var Qt=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];function te(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var i,o=t;o;){if(o.clipPath&&!o.clipPath.contain(e,n))return!1;o.silent&&(i=!0),o=o.parent}return!i||Xt}return!1}function ee(t,e,n){var i=t.painter;return e<0||e>i.getWidth()||n<0||n>i.getHeight()}Jt.prototype={constructor:Jt,setHandlerProxy:function(t){this.proxy&&this.proxy.dispose(),t&&(k(Qt,function(e){t.on&&t.on(e,this[e],this)},this),t.handler=this),this.proxy=t},mousemove:function(t){var e=t.zrX,n=t.zrY,i=ee(this,e,n),o=this._hovered,r=o.target;r&&!r.__zr&&(r=(o=this.findHover(o.x,o.y)).target);var a=this._hovered=i?{x:e,y:n}:this.findHover(e,n),s=a.target,l=this.proxy;l.setCursor&&l.setCursor(s?s.cursor:"default"),r&&s!==r&&this.dispatchToElement(o,"mouseout",t),this.dispatchToElement(a,"mousemove",t),s&&s!==r&&this.dispatchToElement(a,"mouseover",t)},mouseout:function(t){var e=t.zrEventControl,n=t.zrIsToLocalDOM;"only_globalout"!==e&&this.dispatchToElement(this._hovered,"mouseout",t),"no_globalout"!==e&&(n||this.trigger("globalout",{type:"globalout",event:t}))},resize:function(t){this._hovered={}},dispatch:function(t,e){var n=this[t];n&&n.call(this,e)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,n){var i=(t=t||{}).target;if(!i||!i.silent){for(var o="on"+e,r=function(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:Zt}}(e,t,n);i&&(i[o]&&(r.cancelBubble=i[o].call(i,r)),i.trigger(e,r),i=i.parent,!r.cancelBubble););r.cancelBubble||(this.trigger(e,r),this.painter&&this.painter.eachOtherLayer(function(t){"function"==typeof t[o]&&t[o].call(t,r),t.trigger&&t.trigger(e,r)}))}},findHover:function(t,e,n){for(var i=this.storage.getDisplayList(),o={x:t,y:e},r=i.length-1;0<=r;r--){var a;if(i[r]!==n&&!i[r].ignore&&(a=te(i[r],t,e))&&(o.topTarget||(o.topTarget=i[r]),a!==Xt)){o.target=i[r];break}}return o},processGesture:function(t,e){this._gestureMgr||(this._gestureMgr=new $t);var n=this._gestureMgr;"start"===e&&n.clear();var i=n.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if("end"===e&&n.clear(),i){var o=i.type;t.gestureEvent=o,this.dispatchToElement({target:i.target},o,i.event)}}},k(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){Jt.prototype[t]=function(e){var n,i,o=e.zrX,r=e.zrY,a=ee(this,o,r);if("mouseup"===t&&a||(i=(n=this.findHover(o,r)).target),"mousedown"===t)this._downEl=i,this._downPoint=[e.zrX,e.zrY],this._upEl=i;else if("mouseup"===t)this._upEl=i;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||4<mt(this._downPoint,[e.zrX,e.zrY]))return;this._downPoint=null}this.dispatchToElement(n,t,e)}}),M(Jt,kt),M(Jt,Ct);var ne="undefined"==typeof Float32Array?Array:Float32Array;function ie(){var t=new ne(6);return oe(t),t}function oe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function re(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function ae(t,e,n){var i=e[1]*n[0]+e[3]*n[1],o=e[0]*n[2]+e[2]*n[3],r=e[1]*n[2]+e[3]*n[3],a=e[0]*n[4]+e[2]*n[5]+e[4],s=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=e[0]*n[0]+e[2]*n[1],t[1]=i,t[2]=o,t[3]=r,t[4]=a,t[5]=s,t}function se(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}function le(t,e,n){var i=e[0],o=e[2],r=e[4],a=e[1],s=e[3],l=e[5],c=Math.sin(n),u=Math.cos(n);return t[0]=i*u+a*c,t[1]=-i*c+a*u,t[2]=o*u+s*c,t[3]=-o*c+u*s,t[4]=u*r+c*l,t[5]=u*l-c*r,t}function ce(t,e,n){var i=n[0],o=n[1];return t[0]=e[0]*i,t[1]=e[1]*o,t[2]=e[2]*i,t[3]=e[3]*o,t[4]=e[4]*i,t[5]=e[5]*o,t}function ue(t,e){var n=e[0],i=e[2],o=e[4],r=e[1],a=e[3],s=e[5],l=n*a-r*i;return l?(t[0]=a*(l=1/l),t[1]=-r*l,t[2]=-i*l,t[3]=n*l,t[4]=(i*s-a*o)*l,t[5]=(r*o-n*s)*l,t):null}function de(t){var e=ie();return re(e,t),e}var he=(Object.freeze||Object)({create:ie,identity:oe,copy:re,mul:ae,translate:se,rotate:le,scale:ce,invert:ue,clone:de}),fe=oe;function pe(t){return 5e-5<t||t<-5e-5}var ge=function(t){(t=t||{}).position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},me=ge.prototype;me.transform=null,me.needLocalTransform=function(){return pe(this.rotation)||pe(this.position[0])||pe(this.position[1])||pe(this.scale[0]-1)||pe(this.scale[1]-1)};var ve=[];me.updateTransform=function(){var t=this.parent,e=t&&t.transform,n=this.needLocalTransform(),i=this.transform;if(n||e){i=i||ie(),n?this.getLocalTransform(i):fe(i),e&&(n?ae(i,t.transform,i):re(i,t.transform)),this.transform=i;var o=this.globalScaleRatio;if(null!=o&&1!==o){this.getGlobalScale(ve);var r=ve[0]<0?-1:1,a=ve[1]<0?-1:1,s=((ve[0]-r)*o+r)/ve[0]||0,l=((ve[1]-a)*o+a)/ve[1]||0;i[0]*=s,i[1]*=s,i[2]*=l,i[3]*=l}this.invTransform=this.invTransform||ie(),ue(this.invTransform,i)}else i&&fe(i)},me.getLocalTransform=function(t){return ge.getLocalTransform(this,t)},me.setTransform=function(t){var e=this.transform,n=t.dpr||1;e?t.setTransform(n*e[0],n*e[1],n*e[2],n*e[3],n*e[4],n*e[5]):t.setTransform(n,0,0,n,0,0)},me.restoreTransform=function(t){var e=t.dpr||1;t.setTransform(e,0,0,e,0,0)};var ye=[],xe=ie();me.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=this.position,o=this.scale;pe(e-1)&&(e=Math.sqrt(e)),pe(n-1)&&(n=Math.sqrt(n)),t[0]<0&&(e=-e),t[3]<0&&(n=-n),i[0]=t[4],i[1]=t[5],o[0]=e,o[1]=n,this.rotation=Math.atan2(-t[1]/n,t[0]/e)}},me.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(ae(ye,t.invTransform,e),e=ye);var n=this.origin;n&&(n[0]||n[1])&&(xe[4]=n[0],xe[5]=n[1],ae(ye,e,xe),ye[4]-=n[0],ye[5]-=n[1],e=ye),this.setLocalTransform(e)}},me.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1])):(t[0]=1,t[1]=1),t},me.transformCoordToLocal=function(t,e){var n=[t,e],i=this.invTransform;return i&&bt(n,n,i),n},me.transformCoordToGlobal=function(t,e){var n=[t,e],i=this.transform;return i&&bt(n,n,i),n},ge.getLocalTransform=function(t,e){fe(e=e||[]);var n=t.origin,i=t.scale||[1,1],o=t.rotation||0,r=t.position||[0,0];return n&&(e[4]-=n[0],e[5]-=n[1]),ce(e,e,i),o&&le(e,e,o),n&&(e[4]+=n[0],e[5]+=n[1]),e[4]+=r[0],e[5]+=r[1],e};var be={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1;return 0===t?0:1===t?1:(e=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(e=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(e=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)},backIn:function(t){return t*t*(2.70158*t-1.70158)},backOut:function(t){return--t*t*(2.70158*t+1.70158)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)},bounceIn:function(t){return 1-be.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*be.bounceIn(2*t):.5*be.bounceOut(2*t-1)+.5}};function _e(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}function we(){this.head=null,this.tail=null,this._len=0}_e.prototype={constructor:_e,step:function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),this._paused)this._pausedTime+=e;else{var n=(t-this._startTime-this._pausedTime)/this._life;if(!(n<0)){n=Math.min(n,1);var i=this.easing,o="string"==typeof i?be[i]:i,r="function"==typeof o?o(n):n;return this.fire("frame",r),1===n?this.loop?(this.restart(t),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(t){this._startTime=t-(t-this._startTime-this._pausedTime)%this._life+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(t,e){this[t="on"+t]&&this[t](this._target,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var Se=we.prototype;function Ce(t){this._list=new we,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null}Se.insert=function(t){var e=new Me(t);return this.insertEntry(e),e},Se.insertEntry=function(t){this.head?((this.tail.next=t).prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},Se.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},Se.len=function(){return this._len},Se.clear=function(){this.head=this.tail=null,this._len=0};var Me=function(t){this.value=t},Te=Ce.prototype;Te.put=function(t,e){var n=this._list,i=this._map,o=null;if(null==i[t]){var r=n.len(),a=this._lastRemovedEntry;if(r>=this._maxSize&&0<r){var s=n.head;n.remove(s),delete i[s.key],o=s.value,this._lastRemovedEntry=s}a?a.value=e:a=new Me(e),a.key=t,n.insertEntry(a),i[t]=a}return o},Te.get=function(t){var e=this._map[t],n=this._list;if(null!=e)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},Te.clear=function(){this._list.clear(),this._map={}};var ke={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ae(t){return(t=Math.round(t))<0?0:255<t?255:t}function Ie(t){return t<0?0:1<t?1:t}function De(t){return t.length&&"%"===t.charAt(t.length-1)?Ae(parseFloat(t)/100*255):Ae(parseInt(t,10))}function Pe(t){return t.length&&"%"===t.charAt(t.length-1)?Ie(parseFloat(t)/100):Ie(parseFloat(t))}function Ee(t,e,n){return n<0?n+=1:1<n&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function Ne(t,e,n){return t+(e-t)*n}function Le(t,e,n,i,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t}function Re(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var Oe=new Ce(20),Be=null;function ze(t,e){Be&&Re(Be,e),Be=Oe.put(t,Be||e.slice())}function Ve(t,e){if(t){e=e||[];var n=Oe.get(t);if(n)return Re(e,n);var i,o=(t+="").replace(/ /g,"").toLowerCase();if(o in ke)return Re(e,ke[o]),ze(t,e),e;if("#"===o.charAt(0))return 4===o.length?0<=(i=parseInt(o.substr(1),16))&&i<=4095?(Le(e,(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1),ze(t,e),e):void Le(e,0,0,0,1):7===o.length?0<=(i=parseInt(o.substr(1),16))&&i<=16777215?(Le(e,(16711680&i)>>16,(65280&i)>>8,255&i,1),ze(t,e),e):void Le(e,0,0,0,1):void 0;var r=o.indexOf("("),a=o.indexOf(")");if(-1!==r&&a+1===o.length){var s=o.substr(0,r),l=o.substr(r+1,a-(r+1)).split(","),c=1;switch(s){case"rgba":if(4!==l.length)return void Le(e,0,0,0,1);c=Pe(l.pop());case"rgb":return 3!==l.length?void Le(e,0,0,0,1):(Le(e,De(l[0]),De(l[1]),De(l[2]),c),ze(t,e),e);case"hsla":return 4!==l.length?void Le(e,0,0,0,1):(l[3]=Pe(l[3]),Fe(l,e),ze(t,e),e);case"hsl":return 3!==l.length?void Le(e,0,0,0,1):(Fe(l,e),ze(t,e),e);default:return}}Le(e,0,0,0,1)}}function Fe(t,e){var n=(parseFloat(t[0])%360+360)%360/360,i=Pe(t[1]),o=Pe(t[2]),r=o<=.5?o*(i+1):o+i-o*i,a=2*o-r;return Le(e=e||[],Ae(255*Ee(a,r,n+1/3)),Ae(255*Ee(a,r,n)),Ae(255*Ee(a,r,n-1/3)),1),4===t.length&&(e[3]=t[3]),e}function He(t,e){var n=Ve(t);if(n){for(var i=0;i<3;i++)n[i]=e<0?n[i]*(1-e)|0:(255-n[i])*e+n[i]|0,255<n[i]?n[i]=255:t[i]<0&&(n[i]=0);return qe(n,4===n.length?"rgba":"rgb")}}function We(t){var e=Ve(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}function Ge(t,e,n){if(e&&e.length&&0<=t&&t<=1){n=n||[];var i=t*(e.length-1),o=Math.floor(i),r=Math.ceil(i),a=e[o],s=e[r],l=i-o;return n[0]=Ae(Ne(a[0],s[0],l)),n[1]=Ae(Ne(a[1],s[1],l)),n[2]=Ae(Ne(a[2],s[2],l)),n[3]=Ie(Ne(a[3],s[3],l)),n}}function Ue(t,e,n){if(e&&e.length&&0<=t&&t<=1){var i=t*(e.length-1),o=Math.floor(i),r=Math.ceil(i),a=Ve(e[o]),s=Ve(e[r]),l=i-o,c=qe([Ae(Ne(a[0],s[0],l)),Ae(Ne(a[1],s[1],l)),Ae(Ne(a[2],s[2],l)),Ie(Ne(a[3],s[3],l))],"rgba");return n?{color:c,leftIndex:o,rightIndex:r,value:i}:c}}function je(t,e,n,i){if(t=Ve(t))return t=function(t){if(t){var e,n,i=t[0]/255,o=t[1]/255,r=t[2]/255,a=Math.min(i,o,r),s=Math.max(i,o,r),l=s-a,c=(s+a)/2;if(0==l)n=e=0;else{n=c<.5?l/(s+a):l/(2-s-a);var u=((s-i)/6+l/2)/l,d=((s-o)/6+l/2)/l,h=((s-r)/6+l/2)/l;i===s?e=h-d:o===s?e=1/3+u-h:r===s&&(e=2/3+d-u),e<0&&(e+=1),1<e&&(e-=1)}var f=[360*e,n,c];return null!=t[3]&&f.push(t[3]),f}}(t),null!=e&&(t[0]=function(t){return(t=Math.round(t))<0?0:360<t?360:t}(e)),null!=n&&(t[1]=Pe(n)),null!=i&&(t[2]=Pe(i)),qe(Fe(t),"rgba")}function $e(t,e){if((t=Ve(t))&&null!=e)return t[3]=Ie(e),qe(t,"rgba")}function qe(t,e){if(t&&t.length){var n=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(n+=","+t[3]),e+"("+n+")"}}var Ye=(Object.freeze||Object)({parse:Ve,lift:He,toHex:We,fastLerp:Ge,fastMapToColor:Ge,lerp:Ue,mapToColor:Ue,modifyHSL:je,modifyAlpha:$e,stringify:qe}),Xe=Array.prototype.slice;function Ze(t,e){return t[e]}function Ke(t,e,n){t[e]=n}function Je(t,e,n){return(e-t)*n+t}function Qe(t,e,n){return.5<n?e:t}function tn(t,e,n,i,o){var r=t.length;if(1===o)for(var a=0;a<r;a++)i[a]=Je(t[a],e[a],n);else{var s=r&&t[0].length;for(a=0;a<r;a++)for(var l=0;l<s;l++)i[a][l]=Je(t[a][l],e[a][l],n)}}function en(t,e,n){var i=t.length,o=e.length;if(i!==o)if(o<i)t.length=o;else for(var r=i;r<o;r++)t.push(1===n?e[r]:Xe.call(e[r]));var a=t[0]&&t[0].length;for(r=0;r<t.length;r++)if(1===n)isNaN(t[r])&&(t[r]=e[r]);else for(var s=0;s<a;s++)isNaN(t[r][s])&&(t[r][s]=e[r][s])}function nn(t,e,n){if(t===e)return!0;var i=t.length;if(i!==e.length)return!1;if(1===n){for(var o=0;o<i;o++)if(t[o]!==e[o])return!1}else{var r=t[0].length;for(o=0;o<i;o++)for(var a=0;a<r;a++)if(t[o][a]!==e[o][a])return!1}return!0}function on(t,e,n,i,o,r,a,s,l){var c=t.length;if(1===l)for(var u=0;u<c;u++)s[u]=rn(t[u],e[u],n[u],i[u],o,r,a);else{var d=t[0].length;for(u=0;u<c;u++)for(var h=0;h<d;h++)s[u][h]=rn(t[u][h],e[u][h],n[u][h],i[u][h],o,r,a)}}function rn(t,e,n,i,o,r,a){var s=.5*(n-t),l=.5*(i-e);return(2*(e-n)+s+l)*a+(-3*(e-n)-2*s-l)*r+s*o+e}function an(t){if(T(t)){var e=t.length;if(T(t[0])){for(var n=[],i=0;i<e;i++)n.push(Xe.call(t[i]));return n}return Xe.call(t)}return t}function sn(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function ln(t,e,n,i,o,r){var a=t._getter,s=t._setter,l="spline"===e,c=i.length;if(c){var u,d=T(i[0].value),h=!1,f=!1,p=d?function(t){var e=t[t.length-1].value;return T(e&&e[0])?2:1}(i):0;i.sort(function(t,e){return t.time-e.time}),u=i[c-1].time;for(var g=[],m=[],v=i[0].value,y=!0,x=0;x<c;x++){g.push(i[x].time/u);var b=i[x].value;if(d&&nn(b,v,p)||!d&&b===v||(y=!1),"string"==typeof(v=b)){var _=Ve(b);_?(b=_,h=!0):f=!0}m.push(b)}if(r||!y){var w=m[c-1];for(x=0;x<c-1;x++)d?en(m[x],w,p):!isNaN(m[x])||isNaN(w)||f||h||(m[x]=w);d&&en(a(t._target,o),w,p);var S,C,M,k,A,I=0,D=0;if(h)var P=[0,0,0,0];var E=new _e({target:t._target,life:u,loop:t._loop,delay:t._delay,onframe:function(t,e){var n;if(e<0)n=0;else if(e<D){for(n=Math.min(I+1,c-1);0<=n&&!(g[n]<=e);n--);n=Math.min(n,c-2)}else{for(n=I;n<c&&!(g[n]>e);n++);n=Math.min(n-1,c-2)}D=e;var i=g[(I=n)+1]-g[n];if(0!=i)if(S=(e-g[n])/i,l)if(M=m[n],C=m[0===n?n:n-1],k=m[c-2<n?c-1:n+1],A=m[c-3<n?c-1:n+2],d)on(C,M,k,A,S,S*S,S*S*S,a(t,o),p);else{if(h)r=on(C,M,k,A,S,S*S,S*S*S,P,1),r=sn(P);else{if(f)return Qe(M,k,S);r=rn(C,M,k,A,S,S*S,S*S*S)}s(t,o,r)}else if(d)tn(m[n],m[n+1],S,a(t,o),p);else{var r;if(h)tn(m[n],m[n+1],S,P,1),r=sn(P);else{if(f)return Qe(m[n],m[n+1],S);r=Je(m[n],m[n+1],S)}s(t,o,r)}},ondestroy:n});return e&&"spline"!==e&&(E.easing=e),E}}}function cn(t,e,n,i){this._tracks={},this._target=t,this._loop=e||!1,this._getter=n||Ze,this._setter=i||Ke,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]}cn.prototype={when:function(t,e){var n=this._tracks;for(var i in e)if(e.hasOwnProperty(i)){if(!n[i]){n[i]=[];var o=this._getter(this._target,i);if(null==o)continue;0!==t&&n[i].push({time:0,value:an(o)})}n[i].push({time:t,value:e[i]})}return this},during:function(t){return this._onframeList.push(t),this},pause:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].pause();this._paused=!0},resume:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,n=0;n<e;n++)t[n].call(this)},start:function(t,e){function n(){--r||o._doneCallback()}var i,o=this,r=0;for(var a in this._tracks)if(this._tracks.hasOwnProperty(a)){var s=ln(this,t,n,this._tracks[a],a,e);s&&(this._clipList.push(s),r++,this.animation&&this.animation.addClip(s),i=s)}if(i){var l=i.onframe;i.onframe=function(t,e){l(t,e);for(var n=0;n<o._onframeList.length;n++)o._onframeList[n](t,e)}}return r||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,n=this.animation,i=0;i<e.length;i++){var o=e[i];t&&o.onframe(this._target,1),n&&n.removeClip(o)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}};var un=1;"undefined"!=typeof window&&(un=Math.max(window.devicePixelRatio||1,1));var dn=un;function hn(){this.animators=[]}function fn(t,e,n,i,o,r,a,s){O(i)?(r=o,o=i,i=0):R(o)?(r=o,o="linear",i=0):R(i)?(r=i,i=0):n=R(n)?(r=n,500):n||500,t.stopAnimation(),function t(e,n,i,o,r,a,s){var l={},c=0;for(var u in o)o.hasOwnProperty(u)&&(null!=i[u]?B(o[u])&&!T(o[u])?t(e,n?n+"."+u:u,i[u],o[u],r,a,s):(s?(l[u]=i[u],pn(e,n,u,o[u])):l[u]=o[u],c++):null==o[u]||s||pn(e,n,u,o[u]));0<c&&e.animate(n,!1).when(null==r?500:r,l).delay(a||0)}(t,"",t,e,n,i,s);var l=t.animators.slice(),c=l.length;function u(){--c||r&&r()}c||r&&r();for(var d=0;d<l.length;d++)l[d].done(u).start(o,a)}function pn(t,e,n,i){if(e){var o={};o[e]={},o[e][n]=i,t.attr(o)}else t.attr(n,i)}hn.prototype={constructor:hn,animate:function(t,e){var n,i=!1,o=this,r=this.__zr;if(t){var a=t.split("."),s=o;i="shape"===a[0];for(var l=0,c=a.length;l<c;l++)s=s&&s[a[l]];s&&(n=s)}else n=o;if(n){var u=o.animators,d=new cn(n,e);return d.during(function(t){o.dirty(i)}).done(function(){u.splice(S(u,d),1)}),u.push(d),r&&r.animation.addAnimator(d),d}},stopAnimation:function(t){for(var e=this.animators,n=e.length,i=0;i<n;i++)e[i].stop(t);return e.length=0,this},animateTo:function(t,e,n,i,o,r){fn(this,t,e,n,i,o,r)},animateFrom:function(t,e,n,i,o,r){fn(this,t,e,n,i,o,r,!0)}};var gn=function(t){ge.call(this,t),kt.call(this,t),hn.call(this,t),this.id=t.id||i()};gn.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var n=this.transform;(n=n||(this.transform=[1,0,0,1,0,0]))[4]+=t,n[5]+=e,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){var n=this[t];(n=n||(this[t]=[]))[0]=e[0],n[1]=e[1]}}else this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(B(t))for(var n in t)t.hasOwnProperty(n)&&this.attrKV(n,t[n]);return this.dirty(!1),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),(this.clipPath=t).__zr=e,(t.__clipTarget=this).dirty(!1)},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},M(gn,hn),M(gn,ge),M(gn,kt);var mn,vn,yn,xn,bn=bt,_n=Math.min,wn=Math.max;function Sn(t,e,n,i){n<0&&(t+=n,n=-n),i<0&&(e+=i,i=-i),this.x=t,this.y=e,this.width=n,this.height=i}Sn.prototype={constructor:Sn,union:function(t){var e=_n(t.x,this.x),n=_n(t.y,this.y);this.width=wn(t.x+t.width,this.x+this.width)-e,this.height=wn(t.y+t.height,this.y+this.height)-n,this.x=e,this.y=n},applyTransform:(mn=[],vn=[],yn=[],xn=[],function(t){if(t){mn[0]=yn[0]=this.x,mn[1]=xn[1]=this.y,vn[0]=xn[0]=this.x+this.width,vn[1]=yn[1]=this.y+this.height,bn(mn,mn,t),bn(vn,vn,t),bn(yn,yn,t),bn(xn,xn,t),this.x=_n(mn[0],vn[0],yn[0],xn[0]),this.y=_n(mn[1],vn[1],yn[1],xn[1]);var e=wn(mn[0],vn[0],yn[0],xn[0]),n=wn(mn[1],vn[1],yn[1],xn[1]);this.width=e-this.x,this.height=n-this.y}}),calculateTransform:function(t){var e=t.width/this.width,n=t.height/this.height,i=ie();return se(i,i,[-this.x,-this.y]),ce(i,i,[e,n]),se(i,i,[t.x,t.y]),i},intersect:function(t){if(!t)return!1;t instanceof Sn||(t=Sn.create(t));var e=this;return!(e.x+e.width<t.x||t.x+t.width<e.x||e.y+e.height<t.y||t.y+t.height<e.y)},contain:function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},clone:function(){return new Sn(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},Sn.create=function(t){return new Sn(t.x,t.y,t.width,t.height)};var Cn=function(t){for(var e in gn.call(this,t=t||{}),t)t.hasOwnProperty(e)&&(this[e]=t[e]);this._children=[],this.__storage=null,this.__dirty=!0};function Mn(t,e,n,i){var o=e+1;if(o===n)return 1;if(i(t[o++],t[e])<0){for(;o<n&&i(t[o],t[o-1])<0;)o++;!function(t,e,n){for(n--;e<n;){var i=t[e];t[e++]=t[n],t[n--]=i}}(t,e,o)}else for(;o<n&&0<=i(t[o],t[o-1]);)o++;return o-e}function Tn(t,e,n,i,o){for(i===e&&i++;i<n;i++){for(var r,a=t[i],s=e,l=i;s<l;)o(a,t[r=s+l>>>1])<0?l=r:s=1+r;var c=i-s;switch(c){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:for(;0<c;)t[s+c]=t[s+c-1],c--}t[s]=a}}function kn(t,e,n,i,o,r){var a=0,s=0,l=1;if(0<r(t,e[n+o])){for(s=i-o;l<s&&0<r(t,e[n+o+l]);)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s),a+=o,l+=o}else{for(s=o+1;l<s&&r(t,e[n+o-l])<=0;)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s);var c=a;a=o-l,l=o-c}for(a++;a<l;){var u=a+(l-a>>>1);0<r(t,e[n+u])?a=u+1:l=u}return l}function An(t,e,n,i,o,r){var a=0,s=0,l=1;if(r(t,e[n+o])<0){for(s=o+1;l<s&&r(t,e[n+o-l])<0;)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s);var c=a;a=o-l,l=o-c}else{for(s=i-o;l<s&&0<=r(t,e[n+o+l]);)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s),a+=o,l+=o}for(a++;a<l;){var u=a+(l-a>>>1);r(t,e[n+u])<0?l=u:a=u+1}return l}function In(t,e){var n,i,o=7,r=0,a=[];function s(s){var l=n[s],c=i[s],u=n[s+1],d=i[s+1];i[s]=c+d,s===r-3&&(n[s+1]=n[s+2],i[s+1]=i[s+2]),r--;var h=An(t[u],t,l,c,0,e);l+=h,0!=(c-=h)&&0!==(d=kn(t[l+c-1],t,u,d,d-1,e))&&(c<=d?function(n,i,r,s){var l=0;for(l=0;l<i;l++)a[l]=t[n+l];var c=0,u=r,d=n;if(t[d++]=t[u++],0!=--s){if(1===i){for(l=0;l<s;l++)t[d+l]=t[u+l];return t[d+s]=a[c]}for(var h,f,p,g=o;;){f=h=0,p=!1;do{if(e(t[u],a[c])<0){if(t[d++]=t[u++],f++,(h=0)==--s){p=!0;break}}else if(t[d++]=a[c++],h++,f=0,1==--i){p=!0;break}}while((h|f)<g);if(p)break;do{if(0!==(h=An(t[u],a,c,i,0,e))){for(l=0;l<h;l++)t[d+l]=a[c+l];if(d+=h,c+=h,(i-=h)<=1){p=!0;break}}if(t[d++]=t[u++],0==--s){p=!0;break}if(0!==(f=kn(a[c],t,u,s,0,e))){for(l=0;l<f;l++)t[d+l]=t[u+l];if(d+=f,u+=f,0==(s-=f)){p=!0;break}}if(t[d++]=a[c++],1==--i){p=!0;break}g--}while(7<=h||7<=f);if(p)break;g<0&&(g=0),g+=2}if((o=g)<1&&(o=1),1===i){for(l=0;l<s;l++)t[d+l]=t[u+l];t[d+s]=a[c]}else{if(0===i)throw new Error;for(l=0;l<i;l++)t[d+l]=a[c+l]}}else for(l=0;l<i;l++)t[d+l]=a[c+l]}(l,c,u,d):function(n,i,r,s){var l=0;for(l=0;l<s;l++)a[l]=t[r+l];var c=n+i-1,u=s-1,d=r+s-1,h=0,f=0;if(t[d--]=t[c--],0!=--i){if(1===s){for(f=1+(d-=i),h=1+(c-=i),l=i-1;0<=l;l--)t[f+l]=t[h+l];return t[d]=a[u]}for(var p=o;;){var g=0,m=0,v=!1;do{if(e(a[u],t[c])<0){if(t[d--]=t[c--],g++,(m=0)==--i){v=!0;break}}else if(t[d--]=a[u--],m++,g=0,1==--s){v=!0;break}}while((g|m)<p);if(v)break;do{if(0!=(g=i-An(a[u],t,n,i,i-1,e))){for(i-=g,f=1+(d-=g),h=1+(c-=g),l=g-1;0<=l;l--)t[f+l]=t[h+l];if(0===i){v=!0;break}}if(t[d--]=a[u--],1==--s){v=!0;break}if(0!=(m=s-kn(t[c],a,0,s,s-1,e))){for(s-=m,f=1+(d-=m),h=1+(u-=m),l=0;l<m;l++)t[f+l]=a[h+l];if(s<=1){v=!0;break}}if(t[d--]=t[c--],0==--i){v=!0;break}p--}while(7<=g||7<=m);if(v)break;p<0&&(p=0),p+=2}if((o=p)<1&&(o=1),1===s){for(f=1+(d-=i),h=1+(c-=i),l=i-1;0<=l;l--)t[f+l]=t[h+l];t[d]=a[u]}else{if(0===s)throw new Error;for(h=d-(s-1),l=0;l<s;l++)t[h+l]=a[l]}}else for(h=d-(s-1),l=0;l<s;l++)t[h+l]=a[l]}(l,c,u,d))}n=[],i=[],this.mergeRuns=function(){for(;1<r;){var t=r-2;if(1<=t&&i[t-1]<=i[t]+i[t+1]||2<=t&&i[t-2]<=i[t]+i[t-1])i[t-1]<i[t+1]&&t--;else if(i[t]>i[t+1])break;s(t)}},this.forceMergeRuns=function(){for(;1<r;){var t=r-2;0<t&&i[t-1]<i[t+1]&&t--,s(t)}},this.pushRun=function(t,e){n[r]=t,i[r]=e,r+=1}}function Dn(t,e,n,i){var o=(i=i||t.length)-(n=n||0);if(!(o<2)){var r=0;if(o<32)Tn(t,n,i,n+(r=Mn(t,n,i,e)),e);else{var a=new In(t,e),s=function(t){for(var e=0;32<=t;)e|=1&t,t>>=1;return t+e}(o);do{if((r=Mn(t,n,i,e))<s){var l=o;s<l&&(l=s),Tn(t,n,n+l,n+r,e),r=l}a.pushRun(n,r),a.mergeRuns(),o-=r,n+=r}while(0!==o);a.forceMergeRuns()}}}function Pn(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}function En(){this._roots=[],this._displayList=[],this._displayListLen=0}Cn.prototype={constructor:Cn,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var n=this._children,i=n.indexOf(e);0<=i&&(n.splice(i,0,t),this._doAdd(t))}return this},_doAdd:function(t){t.parent&&t.parent.remove(t);var e=(t.parent=this).__storage,n=this.__zr;e&&e!==t.__storage&&(e.addToStorage(t),t instanceof Cn&&t.addChildrenToStorage(e)),n&&n.refresh()},remove:function(t){var e=this.__zr,n=this.__storage,i=this._children,o=S(i,t);return o<0||(i.splice(o,1),t.parent=null,n&&(n.delFromStorage(t),t instanceof Cn&&t.delChildrenFromStorage(n)),e&&e.refresh()),this},removeAll:function(){var t,e,n=this._children,i=this.__storage;for(e=0;e<n.length;e++)t=n[e],i&&(i.delFromStorage(t),t instanceof Cn&&t.delChildrenFromStorage(i)),t.parent=null;return n.length=0,this},eachChild:function(t,e){for(var n=this._children,i=0;i<n.length;i++)t.call(e,n[i],i);return this},traverse:function(t,e){for(var n=0;n<this._children.length;n++){var i=this._children[n];t.call(e,i),"group"===i.type&&i.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.addToStorage(n),n instanceof Cn&&n.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.delFromStorage(n),n instanceof Cn&&n.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,n=new Sn(0,0,0,0),i=t||this._children,o=[],r=0;r<i.length;r++){var a=i[r];if(!a.ignore&&!a.invisible){var s=a.getBoundingRect(),l=a.getLocalTransform(o);l?(n.copy(s),n.applyTransform(l),(e=e||n.clone()).union(n)):(e=e||s.clone()).union(s)}}return e||n}},C(Cn,gn),En.prototype={constructor:En,traverse:function(t,e){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,e)},getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,i=0,r=e.length;i<r;i++)this._updateAndAddDisplayable(e[i],null,t);n.length=this._displayListLen,o.canvasSupported&&Dn(n,Pn)},_updateAndAddDisplayable:function(t,e,n){if(!t.ignore||n){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();var i=t.clipPath;if(i){e=e?e.slice():[];for(var o=i,r=t;o;)o.parent=r,o.updateTransform(),e.push(o),o=(r=o).clipPath}if(t.isGroup){for(var a=t._children,s=0;s<a.length;s++){var l=a[s];t.__dirty&&(l.__dirty=!0),this._updateAndAddDisplayable(l,e,n)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){t.__storage!==this&&(t instanceof Cn&&t.addChildrenToStorage(this),this.addToStorage(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(var e=0;e<this._roots.length;e++){var n=this._roots[e];n instanceof Cn&&n.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array){e=0;for(var i=t.length;e<i;e++)this.delRoot(t[e])}else{var o=S(this._roots,t);0<=o&&(this.delFromStorage(t),this._roots.splice(o,1),t instanceof Cn&&t.delChildrenFromStorage(this))}},addToStorage:function(t){return t&&(t.__storage=this,t.dirty(!1)),this},delFromStorage:function(t){return t&&(t.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:Pn};var Nn={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1},Ln=function(t,e,n){return Nn.hasOwnProperty(e)?n*t.dpr:n},Rn=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],On=function(t){this.extendFrom(t,!1)};function Bn(t,e,n){var i=null==e.x?0:e.x,o=null==e.x2?1:e.x2,r=null==e.y?0:e.y,a=null==e.y2?0:e.y2;return e.global||(i=i*n.width+n.x,o=o*n.width+n.x,r=r*n.height+n.y,a=a*n.height+n.y),i=isNaN(i)?0:i,o=isNaN(o)?1:o,r=isNaN(r)?0:r,a=isNaN(a)?0:a,t.createLinearGradient(i,r,o,a)}function zn(t,e,n){var i=n.width,o=n.height,r=Math.min(i,o),a=null==e.x?.5:e.x,s=null==e.y?.5:e.y,l=null==e.r?.5:e.r;return e.global||(a=a*i+n.x,s=s*o+n.y,l*=r),t.createRadialGradient(a,s,0,a,s,l)}for(var Vn=On.prototype={constructor:On,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(t,e,n){var i=this,o=n&&n.style,r=!o||1!==t.__attrCachedBy;t.__attrCachedBy=1;for(var a=0;a<Rn.length;a++){var s=Rn[a],l=s[0];!r&&i[l]===o[l]||(t[l]=Ln(t,l,i[l]||s[1]))}!r&&i.fill===o.fill||(t.fillStyle=i.fill),!r&&i.stroke===o.stroke||(t.strokeStyle=i.stroke),!r&&i.opacity===o.opacity||(t.globalAlpha=null==i.opacity?1:i.opacity),!r&&i.blend===o.blend||(t.globalCompositeOperation=i.blend||"source-over"),this.hasStroke()&&(t.lineWidth=i.lineWidth/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1))},hasFill:function(){var t=this.fill;return null!=t&&"none"!==t},hasStroke:function(){var t=this.stroke;return null!=t&&"none"!==t&&0<this.lineWidth},extendFrom:function(t,e){if(t)for(var n in t)!t.hasOwnProperty(n)||!0!==e&&(!1===e?this.hasOwnProperty(n):null==t[n])||(this[n]=t[n])},set:function(t,e){"string"==typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t},getGradient:function(t,e,n){for(var i=("radial"===e.type?zn:Bn)(t,e,n),o=e.colorStops,r=0;r<o.length;r++)i.addColorStop(o[r].offset,o[r].color);return i}},Fn=0;Fn<Rn.length;Fn++){var Hn=Rn[Fn];Hn[0]in Vn||(Vn[Hn[0]]=Hn[1])}function Wn(t,e){this.image=t,this.repeat=e,this.type="pattern"}function Gn(){return!1}function Un(t,e,n){var i=_(),o=e.getWidth(),r=e.getHeight(),a=i.style;return a&&(a.position="absolute",a.left=0,a.top=0,a.width=o+"px",a.height=r+"px",i.setAttribute("data-zr-dom-id",t)),i.width=o*n,i.height=r*n,i}function jn(t,e,n){var i;n=n||dn,"string"==typeof t?i=Un(t,e,n):B(t)&&(t=(i=t).id),this.id=t;var o=(this.dom=i).style;o&&(i.onselectstart=Gn,o["-webkit-user-select"]="none",o["user-select"]="none",o["-webkit-touch-callout"]="none",o["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",o.padding=0,o.margin=0,o["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=n}On.getGradient=Vn.getGradient,jn.prototype={constructor:jn,__dirty:!0,__used:!(Wn.prototype.getCanvasPattern=function(t){return t.createPattern(this.image,this.repeat||"repeat")}),__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var t=this.dpr;this.domBack=Un("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},resize:function(t,e){var n=this.dpr,i=this.dom,o=i.style,r=this.domBack;o&&(o.width=t+"px",o.height=e+"px"),i.width=t*n,i.height=e*n,r&&(r.width=t*n,r.height=e*n,1!==n&&this.ctxBack.scale(n,n))},clear:function(t,e){var n,i=this.dom,o=this.ctx,r=i.width,a=i.height,s=(e=e||this.clearColor,this.motionBlur&&!t),l=this.lastFrameAlpha,c=this.dpr;if(s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,r/c,a/c)),o.clearRect(0,0,r,a),e&&"transparent"!==e&&(e.colorStops?(n=e.__canvasGradient||On.getGradient(o,e,{x:0,y:0,width:r,height:a}),e.__canvasGradient=n):e.image&&(n=Wn.prototype.getCanvasPattern.call(e,o)),o.save(),o.fillStyle=n||e,o.fillRect(0,0,r,a),o.restore()),s){var u=this.domBack;o.save(),o.globalAlpha=l,o.drawImage(u,0,0,r,a),o.restore()}}};var $n="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)},qn=new Ce(50);function Yn(t){if("string"!=typeof t)return t;var e=qn.get(t);return e&&e.image}function Xn(t,e,n,i,o){if(t){if("string"!=typeof t)return t;if(e&&e.__zrImageSrc===t||!n)return e;var r=qn.get(t),a={hostEl:n,cb:i,cbPayload:o};return r?Kn(e=r.image)||r.pending.push(a):((e=new Image).onload=e.onerror=Zn,qn.put(t,e.__cachedImgObj={image:e,pending:[a]}),e.src=e.__zrImageSrc=t),e}return e}function Zn(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],i=n.cb;i&&i(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function Kn(t){return t&&t.width&&t.height}var Jn={},Qn=0,ti=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,ei="12px sans-serif",ni={};function ii(t,e){var n=t+":"+(e=e||ei);if(Jn[n])return Jn[n];for(var i,o,r=(t+"").split("\n"),a=0,s=0,l=r.length;s<l;s++)a=Math.max((i=r[s],o=e,ni.measureText(i,o)).width,a);return 5e3<Qn&&(Qn=0,Jn={}),Qn++,Jn[n]=a}function oi(t,e,n,i,o,r,a,s){return a?function(t,e,n,i,o,r,a,s){var l=pi(t,{rich:a,truncate:s,font:e,textAlign:n,textPadding:o,textLineHeight:r}),c=l.outerWidth,u=l.outerHeight;return new Sn(ri(0,c,n),ai(0,u,i),c,u)}(t,e,n,i,o,r,a,s):function(t,e,n,i,o,r,a){var s=fi(t,e,o,r,a),l=ii(t,e);o&&(l+=o[1]+o[3]);var c=s.outerHeight,u=new Sn(ri(0,l,n),ai(0,c,i),l,c);return u.lineHeight=s.lineHeight,u}(t,e,n,i,o,r,s)}function ri(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function ai(t,e,n){return"middle"===n?t-=e/2:"bottom"===n&&(t-=e),t}function si(t,e,n){var i=e.textDistance,o=n.x,r=n.y;i=i||0;var a=n.height,s=n.width,l=a/2,c="left",u="top";switch(e.textPosition){case"left":o-=i,r+=l,c="right",u="middle";break;case"right":o+=i+s,r+=l,u="middle";break;case"top":o+=s/2,r-=i,c="center",u="bottom";break;case"bottom":o+=s/2,r+=a+i,c="center";break;case"inside":o+=s/2,r+=l,c="center",u="middle";break;case"insideLeft":o+=i,r+=l,u="middle";break;case"insideRight":o+=s-i,r+=l,c="right",u="middle";break;case"insideTop":o+=s/2,r+=i,c="center";break;case"insideBottom":o+=s/2,r+=a-i,c="center",u="bottom";break;case"insideTopLeft":o+=i,r+=i;break;case"insideTopRight":o+=s-i,r+=i,c="right";break;case"insideBottomLeft":o+=i,r+=a-i,u="bottom";break;case"insideBottomRight":o+=s-i,r+=a-i,c="right",u="bottom"}return(t=t||{}).x=o,t.y=r,t.textAlign=c,t.textVerticalAlign=u,t}function li(t,e,n,i,o){if(!e)return"";var r=(t+"").split("\n");o=ci(e,n,i,o);for(var a=0,s=r.length;a<s;a++)r[a]=ui(r[a],o);return r.join("\n")}function ci(t,e,n,i){(i=x({},i)).font=e,n=G(n,"..."),i.maxIterations=G(i.maxIterations,2);var o=i.minChar=G(i.minChar,0);i.cnCharWidth=ii("国",e);var r=i.ascCharWidth=ii("a",e);i.placeholder=G(i.placeholder,"");for(var a=t=Math.max(0,t-1),s=0;s<o&&r<=a;s++)a-=r;var l=ii(n,e);return a<l&&(n="",l=0),a=t-l,i.ellipsis=n,i.ellipsisWidth=l,i.contentWidth=a,i.containerWidth=t,i}function ui(t,e){var n=e.containerWidth,i=e.font,o=e.contentWidth;if(!n)return"";var r=ii(t,i);if(r<=n)return t;for(var a=0;;a++){if(r<=o||a>=e.maxIterations){t+=e.ellipsis;break}var s=0===a?di(t,o,e.ascCharWidth,e.cnCharWidth):0<r?Math.floor(t.length*o/r):0;r=ii(t=t.substr(0,s),i)}return""===t&&(t=e.placeholder),t}function di(t,e,n,i){for(var o=0,r=0,a=t.length;r<a&&o<e;r++){var s=t.charCodeAt(r);o+=0<=s&&s<=127?n:i}return r}function hi(t){return ii("国",t)}function fi(t,e,n,i,o){null!=t&&(t+="");var r=G(i,hi(e)),a=t?t.split("\n"):[],s=a.length*r,l=s,c=!0;if(n&&(l+=n[0]+n[2]),t&&o){c=!1;var u=o.outerHeight,d=o.outerWidth;if(null!=u&&u<l)t="",a=[];else if(null!=d)for(var h=ci(d-(n?n[1]+n[3]:0),e,o.ellipsis,{minChar:o.minChar,placeholder:o.placeholder}),f=0,p=a.length;f<p;f++)a[f]=ui(a[f],h)}return{lines:a,height:s,outerHeight:l,lineHeight:r,canCacheByTextString:c}}function pi(t,e){var n={lines:[],width:0,height:0};if(null!=t&&(t+=""),!t)return n;for(var i,o=ti.lastIndex=0;null!=(i=ti.exec(t));){var r=i.index;o<r&&gi(n,t.substring(o,r)),gi(n,i[2],i[1]),o=ti.lastIndex}o<t.length&&gi(n,t.substring(o,t.length));var a=n.lines,s=0,l=0,c=[],u=e.textPadding,d=e.truncate,h=d&&d.outerWidth,f=d&&d.outerHeight;u&&(null!=h&&(h-=u[1]+u[3]),null!=f&&(f-=u[0]+u[2]));for(var p=0;p<a.length;p++){for(var g=a[p],m=0,v=0,y=0;y<g.tokens.length;y++){var x=(I=g.tokens[y]).styleName&&e.rich[I.styleName]||{},b=I.textPadding=x.textPadding,_=I.font=x.font||e.font,w=I.textHeight=G(x.textHeight,hi(_));if(b&&(w+=b[0]+b[2]),I.height=w,I.lineHeight=U(x.textLineHeight,e.textLineHeight,w),I.textAlign=x&&x.textAlign||e.textAlign,I.textVerticalAlign=x&&x.textVerticalAlign||"middle",null!=f&&s+I.lineHeight>f)return{lines:[],width:0,height:0};I.textWidth=ii(I.text,_);var S=x.textWidth,C=null==S||"auto"===S;if("string"==typeof S&&"%"===S.charAt(S.length-1))I.percentWidth=S,c.push(I),S=0;else{if(C){S=I.textWidth;var M=x.textBackgroundColor,T=M&&M.image;T&&Kn(T=Yn(T))&&(S=Math.max(S,T.width*w/T.height))}var k=b?b[1]+b[3]:0;S+=k;var A=null!=h?h-v:null;null!=A&&A<S&&(!C||A<k?(I.text="",I.textWidth=S=0):(I.text=li(I.text,A-k,_,d.ellipsis,{minChar:d.minChar}),I.textWidth=ii(I.text,_),S=I.textWidth+k))}v+=I.width=S,x&&(m=Math.max(m,I.lineHeight))}g.width=v,s+=g.lineHeight=m,l=Math.max(l,v)}for(n.outerWidth=n.width=G(e.textWidth,l),n.outerHeight=n.height=G(e.textHeight,s),u&&(n.outerWidth+=u[1]+u[3],n.outerHeight+=u[0]+u[2]),p=0;p<c.length;p++){var I,D=(I=c[p]).percentWidth;I.width=parseInt(D,10)/100*l}return n}function gi(t,e,n){for(var i=""===e,o=e.split("\n"),r=t.lines,a=0;a<o.length;a++){var s=o[a],l={styleName:n,text:s,isLineHolder:!s&&!i};if(a)r.push({tokens:[l]});else{var c=(r[r.length-1]||(r[0]={tokens:[]})).tokens,u=c.length;1===u&&c[0].isLineHolder?c[0]=l:!s&&u&&!i||c.push(l)}}}function mi(t){var e=(t.fontSize||t.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize||12)+"px",t.fontFamily||"sans-serif"].join(" ");return e&&Y(e)||t.textFont||t.font}function vi(t,e){var n,i,o,r,a,s=e.x,l=e.y,c=e.width,u=e.height,d=e.r;c<0&&(s+=c,c=-c),u<0&&(l+=u,u=-u),"number"==typeof d?n=i=o=r=d:d instanceof Array?1===d.length?n=i=o=r=d[0]:2===d.length?(n=o=d[0],i=r=d[1]):3===d.length?(n=d[0],i=r=d[1],o=d[2]):(n=d[0],i=d[1],o=d[2],r=d[3]):n=i=o=r=0,c<n+i&&(n*=c/(a=n+i),i*=c/a),c<o+r&&(o*=c/(a=o+r),r*=c/a),u<i+o&&(i*=u/(a=i+o),o*=u/a),u<n+r&&(n*=u/(a=n+r),r*=u/a),t.moveTo(s+n,l),t.lineTo(s+c-i,l),0!==i&&t.arc(s+c-i,l+i,i,-Math.PI/2,0),t.lineTo(s+c,l+u-o),0!==o&&t.arc(s+c-o,l+u-o,o,0,Math.PI/2),t.lineTo(s+r,l+u),0!==r&&t.arc(s+r,l+u-r,r,Math.PI/2,Math.PI),t.lineTo(s,l+n),0!==n&&t.arc(s+n,l+n,n,Math.PI,1.5*Math.PI)}ni.measureText=function(t,e){var n=w();return n.font=e||ei,n.measureText(t)};var yi=ei,xi={left:1,right:1,center:1},bi={top:1,bottom:1,middle:1},_i=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],wi={},Si={};function Ci(t){return Mi(t),k(t.rich,Mi),t}function Mi(t){if(t){t.font=mi(t);var e=t.textAlign;"middle"===e&&(e="center"),t.textAlign=null==e||xi[e]?e:"left";var n=t.textVerticalAlign||t.textBaseline;"center"===n&&(n="middle"),t.textVerticalAlign=null==n||bi[n]?n:"top",t.textPadding&&(t.textPadding=$(t.textPadding))}}function Ti(t,e,n,i,o,r){i.rich?function(t,e,n,i,o,r){9!==r&&(e.__attrCachedBy=0);var a=t.__textCotentBlock;a&&!t.__dirtyText||(a=t.__textCotentBlock=pi(n,i)),function(t,e,n,i,o){var r=n.width,a=n.outerWidth,s=n.outerHeight,l=i.textPadding,c=Ei(Si,t,i,o),u=c.baseX,d=c.baseY,h=c.textAlign,f=c.textVerticalAlign;ki(e,i,o,u,d);var p=ri(u,a,h),g=ai(d,s,f),m=p,v=g;l&&(m+=l[3],v+=l[0]);var y=m+r;Ii(i)&&Di(t,e,i,p,g,a,s);for(var x=0;x<n.lines.length;x++){for(var b,_=n.lines[x],w=_.tokens,S=w.length,C=_.lineHeight,M=_.width,T=0,k=m,A=y,I=S-1;T<S&&(!(b=w[T]).textAlign||"left"===b.textAlign);)Ai(t,e,b,i,C,v,k,"left"),M-=b.width,k+=b.width,T++;for(;0<=I&&"right"===(b=w[I]).textAlign;)Ai(t,e,b,i,C,v,A,"right"),M-=b.width,A-=b.width,I--;for(k+=(r-(k-m)-(y-A)-M)/2;T<=I;)Ai(t,e,b=w[T],i,C,v,k+b.width/2,"center"),k+=b.width,T++;v+=C}}(t,e,a,i,o)}(t,e,n,i,o,r):function(t,e,n,i,o,r){var a,s=Ii(i),l=!1,c=2===e.__attrCachedBy;9!==r?(r&&(a=r.style,l=!s&&c&&a),e.__attrCachedBy=s?0:2):c&&(e.__attrCachedBy=0);var u=i.font||yi;l&&u===(a.font||yi)||(e.font=u);var d=t.__computedFont;t.__styleFont!==u&&(t.__styleFont=u,d=t.__computedFont=e.font);var h=i.textPadding,f=t.__textCotentBlock;f&&!t.__dirtyText||(f=t.__textCotentBlock=fi(n,d,h,i.textLineHeight,i.truncate));var p=f.outerHeight,g=f.lines,m=f.lineHeight,v=Ei(Si,t,i,o),y=v.baseX,x=v.baseY,b=v.textAlign||"left",_=v.textVerticalAlign;ki(e,i,o,y,x);var w=ai(x,p,_),S=y,C=w;if(s||h){var M=ii(n,d);h&&(M+=h[1]+h[3]);var T=ri(y,M,b);s&&Di(t,e,i,T,w,M,p),h&&(S=Bi(y,b,h),C+=h[0])}e.textAlign=b,e.textBaseline="middle",e.globalAlpha=i.opacity||1;for(var k=0;k<_i.length;k++){var A=_i[k],I=A[0],D=A[1],P=i[I];l&&P===a[I]||(e[D]=Ln(e,D,P||A[2]))}C+=m/2;var E=i.textStrokeWidth,N=!l||E!==(l?a.textStrokeWidth:null),L=!l||N||i.textStroke!==a.textStroke,R=Li(i.textStroke,E),O=Ri(i.textFill);if(R&&(N&&(e.lineWidth=E),L&&(e.strokeStyle=R)),O&&(l&&i.textFill===a.textFill||(e.fillStyle=O)),1===g.length)R&&e.strokeText(g[0],S,C),O&&e.fillText(g[0],S,C);else for(k=0;k<g.length;k++)R&&e.strokeText(g[k],S,C),O&&e.fillText(g[k],S,C),C+=m}(t,e,n,i,o,r)}function ki(t,e,n,i,o){if(n&&e.textRotation){var r=e.textOrigin;"center"===r?(i=n.width/2+n.x,o=n.height/2+n.y):r&&(i=r[0]+n.x,o=r[1]+n.y),t.translate(i,o),t.rotate(-e.textRotation),t.translate(-i,-o)}}function Ai(t,e,n,i,o,r,a,s){var l=i.rich[n.styleName]||{};l.text=n.text;var c=n.textVerticalAlign,u=r+o/2;"top"===c?u=r+n.height/2:"bottom"===c&&(u=r+o-n.height/2),!n.isLineHolder&&Ii(l)&&Di(t,e,l,"right"===s?a-n.width:"center"===s?a-n.width/2:a,u-n.height/2,n.width,n.height);var d=n.textPadding;d&&(a=Bi(a,s,d),u-=n.height/2-d[2]-n.textHeight/2),Ni(e,"shadowBlur",U(l.textShadowBlur,i.textShadowBlur,0)),Ni(e,"shadowColor",l.textShadowColor||i.textShadowColor||"transparent"),Ni(e,"shadowOffsetX",U(l.textShadowOffsetX,i.textShadowOffsetX,0)),Ni(e,"shadowOffsetY",U(l.textShadowOffsetY,i.textShadowOffsetY,0)),Ni(e,"textAlign",s),Ni(e,"textBaseline","middle"),Ni(e,"font",n.font||yi);var h=Li(l.textStroke||i.textStroke,p),f=Ri(l.textFill||i.textFill),p=G(l.textStrokeWidth,i.textStrokeWidth);h&&(Ni(e,"lineWidth",p),Ni(e,"strokeStyle",h),e.strokeText(n.text,a,u)),f&&(Ni(e,"fillStyle",f),e.fillText(n.text,a,u))}function Ii(t){return!!(t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor)}function Di(t,e,n,i,o,r,a){var s=n.textBackgroundColor,l=n.textBorderWidth,c=n.textBorderColor,u=O(s);if(Ni(e,"shadowBlur",n.textBoxShadowBlur||0),Ni(e,"shadowColor",n.textBoxShadowColor||"transparent"),Ni(e,"shadowOffsetX",n.textBoxShadowOffsetX||0),Ni(e,"shadowOffsetY",n.textBoxShadowOffsetY||0),u||l&&c){e.beginPath();var d=n.textBorderRadius;d?vi(e,{x:i,y:o,width:r,height:a,r:d}):e.rect(i,o,r,a),e.closePath()}if(u)if(Ni(e,"fillStyle",s),null!=n.fillOpacity){var h=e.globalAlpha;e.globalAlpha=n.fillOpacity*n.opacity,e.fill(),e.globalAlpha=h}else e.fill();else if(B(s)){var f=s.image;(f=Xn(f,null,t,Pi,s))&&Kn(f)&&e.drawImage(f,i,o,r,a)}l&&c&&(Ni(e,"lineWidth",l),Ni(e,"strokeStyle",c),null!=n.strokeOpacity?(h=e.globalAlpha,e.globalAlpha=n.strokeOpacity*n.opacity,e.stroke(),e.globalAlpha=h):e.stroke())}function Pi(t,e){e.image=t}function Ei(t,e,n,i){var o=n.x||0,r=n.y||0,a=n.textAlign,s=n.textVerticalAlign;if(i){var l=n.textPosition;if(l instanceof Array)o=i.x+Oi(l[0],i.width),r=i.y+Oi(l[1],i.height);else{var c=e&&e.calculateTextPosition?e.calculateTextPosition(wi,n,i):si(wi,n,i);o=c.x,r=c.y,a=a||c.textAlign,s=s||c.textVerticalAlign}var u=n.textOffset;u&&(o+=u[0],r+=u[1])}return(t=t||{}).baseX=o,t.baseY=r,t.textAlign=a,t.textVerticalAlign=s,t}function Ni(t,e,n){return t[e]=Ln(t,e,n),t[e]}function Li(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function Ri(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function Oi(t,e){return"string"==typeof t?0<=t.lastIndexOf("%")?parseFloat(t)/100*e:parseFloat(t):t}function Bi(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}function zi(t,e){return null!=t&&(t||e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor||e.textPadding)}function Vi(){}var Fi=new Sn;function Hi(t){for(var e in gn.call(this,t=t||{}),t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new On(t.style,this),this._rect=null,this.__clipPaths=null}function Wi(t){Hi.call(this,t)}Hi.prototype={constructor:Hi,type:"displayable",__dirty:!0,invisible:!(Vi.prototype={constructor:Vi,drawRectText:function(t,e){var n=this.style;e=n.textRect||e,this.__dirty&&Ci(n);var i=n.text;if(null!=i&&(i+=""),zi(i,n)){t.save();var o=this.transform;n.transformText?this.setTransform(t):o&&(Fi.copy(e),Fi.applyTransform(o),e=Fi),Ti(this,t,i,n,e,9),t.restore()}}}),z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var n=this.transformCoordToLocal(t,e);return this.getBoundingRect().contain(n[0],n[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?gn.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(!1),this},useStyle:function(t){return this.style=new On(t,this),this.dirty(!1),this},calculateTextPosition:null},C(Hi,gn),M(Hi,Vi),Wi.prototype={constructor:Wi,type:"image",brush:function(t,e){var n=this.style,i=n.image;n.bind(t,this,e);var o=this._image=Xn(i,this._image,this,this.onload);if(o&&Kn(o)){var r=n.x||0,a=n.y||0,s=n.width,l=n.height,c=o.width/o.height;if(null==s&&null!=l?s=l*c:null==l&&null!=s?l=s/c:null==s&&null==l&&(s=o.width,l=o.height),this.setTransform(t),n.sWidth&&n.sHeight){var u=n.sx||0,d=n.sy||0;t.drawImage(o,u,d,n.sWidth,n.sHeight,r,a,s,l)}else if(n.sx&&n.sy){var h=s-(u=n.sx),f=l-(d=n.sy);t.drawImage(o,u,d,h,f,r,a,s,l)}else t.drawImage(o,r,a,s,l);null!=n.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))}},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new Sn(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},C(Wi,Hi);var Gi=314159;function Ui(t){return parseInt(t,10)}var ji=new Sn(0,0,0,0),$i=new Sn(0,0,0,0);function qi(t,e,n){this.type="canvas";var i=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=n=x({},n||{}),this.dpr=n.devicePixelRatio||dn,this._singleCanvas=i;var o=(this.root=t).style;o&&(o["-webkit-tap-highlight-color"]="transparent",o["-webkit-user-select"]=o["user-select"]=o["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var r=this._zlevelList=[],a=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,i){var s=t.width,l=t.height;null!=n.width&&(s=n.width),null!=n.height&&(l=n.height),this.dpr=n.devicePixelRatio||1,t.width=s*this.dpr,t.height=l*this.dpr,this._width=s,this._height=l;var c=new jn(t,this,this.dpr);c.__builtin__=!0,c.initContext(),(a[Gi]=c).zlevel=Gi,r.push(Gi),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var u=this._domRoot=function(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}(this._width,this._height);t.appendChild(u)}this._hoverlayer=null,this._hoverElements=[]}function Yi(t){this.stage=(t=t||{}).stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._paused=!1,kt.call(this)}qi.prototype={constructor:qi,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(t){var e=this.storage.getDisplayList(!0),n=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,t,this._redrawId);for(var i=0;i<n.length;i++){var o=this._layers[n[i]];!o.__builtin__&&o.refresh&&o.refresh(0===i?this._backgroundColor:null)}return this.refreshHover(),this},addHover:function(t,e){if(!t.__hoverMir){var n=new t.constructor({style:t.style,shape:t.shape,z:t.z,z2:t.z2,silent:t.silent});return(n.__from=t).__hoverMir=n,e&&n.setStyle(e),this._hoverElements.push(n),n}},removeHover:function(t){var e=this._hoverElements,n=S(e,t.__hoverMir);0<=n&&e.splice(n,1),t.__hoverMir=null},clearHover:function(t){for(var e=this._hoverElements,n=0;n<e.length;n++){var i=e[n].__from;i&&(i.__hoverMir=null)}e.length=0},refreshHover:function(){var t=this._hoverElements,e=t.length,n=this._hoverlayer;if(n&&n.clear(),e){Dn(t,this.storage.displayableSortFunc);var i={};(n=n||(this._hoverlayer=this.getLayer(1e5))).ctx.save();for(var o=0;o<e;){var r=t[o],a=r.__from;a&&a.__zr?(o++,a.invisible||(r.transform=a.transform,r.invTransform=a.invTransform,r.__clipPaths=a.__clipPaths,this._doPaintEl(r,n,!0,i))):(t.splice(o,1),a.__hoverMir=null,e--)}n.ctx.restore()}},getHoverLayer:function(){return this.getLayer(1e5)},_paintList:function(t,e,n){if(this._redrawId===n){e=e||!1,this._updateLayerStatus(t);var i=this._doPaintList(t,e);if(this._needsManuallyCompositing&&this._compositeManually(),!i){var o=this;$n(function(){o._paintList(t,e,n)})}}},_compositeManually:function(){var t=this.getLayer(Gi).ctx,e=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,e,n),this.eachBuiltinLayer(function(i){i.virtual&&t.drawImage(i.dom,0,0,e,n)})},_doPaintList:function(t,e){for(var n=[],i=0;i<this._zlevelList.length;i++)(s=this._layers[this._zlevelList[i]]).__builtin__&&s!==this._hoverlayer&&(s.__dirty||e)&&n.push(s);for(var r=!0,a=0;a<n.length;a++){var s,l=(s=n[a]).ctx,c={};l.save();var u=e?s.__startIndex:s.__drawIndex,d=!e&&s.incremental&&Date.now,h=d&&Date.now(),f=s.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(s.__startIndex===s.__endIndex)s.clear(!1,f);else if(u===s.__startIndex){var p=t[u];p.incremental&&p.notClear&&!e||s.clear(!1,f)}-1===u&&(console.error("For some unknown reason. drawIndex is -1"),u=s.__startIndex);for(var g=u;g<s.__endIndex;g++){var m=t[g];if(this._doPaintEl(m,s,e,c),m.__dirty=m.__dirtyText=!1,d&&15<Date.now()-h)break}s.__drawIndex=g,s.__drawIndex<s.__endIndex&&(r=!1),c.prevElClipPaths&&l.restore(),l.restore()}return o.wxa&&k(this._layers,function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()}),r},_doPaintEl:function(t,e,n,i){var o=e.ctx,r=t.transform;if((e.__dirty||n)&&!t.invisible&&0!==t.style.opacity&&(!r||r[0]||r[3])&&(!t.culling||!function(t,e,n){return ji.copy(t.getBoundingRect()),t.transform&&ji.applyTransform(t.transform),$i.width=e,$i.height=n,!ji.intersect($i)}(t,this._width,this._height))){var a=t.__clipPaths,s=i.prevElClipPaths;s&&!function(t,e){if(t===e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}(a,s)||(s&&(o.restore(),i.prevElClipPaths=null,i.prevEl=null),a&&(o.save(),function(t,e){for(var n=0;n<t.length;n++){var i=t[n];i.setTransform(e),e.beginPath(),i.buildPath(e,i.shape),e.clip(),i.restoreTransform(e)}}(a,o),i.prevElClipPaths=a)),t.beforeBrush&&t.beforeBrush(o),t.brush(o,i.prevEl||null),(i.prevEl=t).afterBrush&&t.afterBrush(o)}},getLayer:function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=Gi);var n=this._layers[t];return n||((n=new jn("zr_"+t,this,this.dpr)).zlevel=t,n.__builtin__=!0,this._layerConfig[t]?v(n,this._layerConfig[t],!0):this._layerConfig[t-.01]&&v(n,this._layerConfig[t-.01],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},insertLayer:function(t,e){var n=this._layers,i=this._zlevelList,o=i.length,r=null,a=-1,s=this._domRoot;if(n[t]);else if(function(t){return!!t&&(!!t.__builtin__||"function"==typeof t.resize&&"function"==typeof t.refresh)}(e)){if(0<o&&t>i[0]){for(a=0;a<o-1&&!(i[a]<t&&i[a+1]>t);a++);r=n[i[a]]}if(i.splice(a+1,0,t),!(n[t]=e).virtual)if(r){var l=r.dom;l.nextSibling?s.insertBefore(e.dom,l.nextSibling):s.appendChild(e.dom)}else s.firstChild?s.insertBefore(e.dom,s.firstChild):s.appendChild(e.dom)}},eachLayer:function(t,e){var n,i,o=this._zlevelList;for(i=0;i<o.length;i++)t.call(e,this._layers[n=o[i]],n)},eachBuiltinLayer:function(t,e){var n,i,o,r=this._zlevelList;for(o=0;o<r.length;o++)(n=this._layers[i=r[o]]).__builtin__&&t.call(e,n,i)},eachOtherLayer:function(t,e){var n,i,o,r=this._zlevelList;for(o=0;o<r.length;o++)(n=this._layers[i=r[o]]).__builtin__||t.call(e,n,i)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){function e(t){o&&(o.__endIndex!==t&&(o.__dirty=!0),o.__endIndex=t)}if(this.eachBuiltinLayer(function(t,e){t.__dirty=t.__used=!1}),this._singleCanvas)for(var n=1;n<t.length;n++)if((a=t[n]).zlevel!==t[n-1].zlevel||a.incremental){this._needsManuallyCompositing=!0;break}var i,o=null,r=0;for(n=0;n<t.length;n++){var a,s,l=(a=t[n]).zlevel;i!==l&&(i=l,r=0),a.incremental?((s=this.getLayer(l+.001,this._needsManuallyCompositing)).incremental=!0,r=1):s=this.getLayer(l+(0<r?.01:0),this._needsManuallyCompositing),s!==o&&(s.__used=!0,s.__startIndex!==n&&(s.__dirty=!0),s.__startIndex=n,s.__drawIndex=s.incremental?-1:n,e(n),o=s),a.__dirty&&(s.__dirty=!0,s.incremental&&s.__drawIndex<0&&(s.__drawIndex=n))}e(n),this.eachBuiltinLayer(function(t,e){!t.__used&&0<t.getElementCount()&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},setBackgroundColor:function(t){this._backgroundColor=t},configLayer:function(t,e){if(e){var n=this._layerConfig;n[t]?v(n[t],e,!0):n[t]=e;for(var i=0;i<this._zlevelList.length;i++){var o=this._zlevelList[i];o!==t&&o!==t+.01||v(this._layers[o],n[t],!0)}}},delLayer:function(t){var e=this._layers,n=this._zlevelList,i=e[t];i&&(i.dom.parentNode.removeChild(i.dom),delete e[t],n.splice(S(n,t),1))},resize:function(t,e){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts;if(null!=t&&(i.width=t),null!=e&&(i.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||e!==this._height){for(var o in n.style.width=t+"px",n.style.height=e+"px",this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(t,e);k(this._progressiveLayers,function(n){n.resize(t,e)}),this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(Gi).resize(t,e)}return this},clearLayer:function(t){var e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(this._singleCanvas&&!this._compositeManually)return this._layers[Gi].dom;var e=new jn("image",this,(t=t||{}).pixelRatio||this.dpr);if(e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor),t.pixelRatio<=this.dpr){this.refresh();var n=e.dom.width,i=e.dom.height,o=e.ctx;this.eachLayer(function(t){t.__builtin__?o.drawImage(t.dom,0,0,n,i):t.renderToCanvas&&(e.ctx.save(),t.renderToCanvas(e.ctx),e.ctx.restore())})}else for(var r={},a=this.storage.getDisplayList(!0),s=0;s<a.length;s++)this._doPaintEl(a[s],e,!0,r);return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],i=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],r=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var a=this.root,s=document.defaultView.getComputedStyle(a);return(a[i]||Ui(s[n])||Ui(a.style[n]))-(Ui(s[o])||0)-(Ui(s[r])||0)|0},pathToImage:function(t,e){e=e||this.dpr;var n=document.createElement("canvas"),i=n.getContext("2d"),o=t.getBoundingRect(),r=t.style,a=r.shadowBlur*e,s=r.shadowOffsetX*e,l=r.shadowOffsetY*e,c=r.hasStroke()?r.lineWidth:0,u=Math.max(c/2,a-s),d=Math.max(c/2,s+a),h=Math.max(c/2,a-l),f=Math.max(c/2,l+a),p=o.width+u+d,g=o.height+h+f;n.width=p*e,n.height=g*e,i.scale(e,e),i.clearRect(0,0,p,g),i.dpr=e;var m={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[u-o.x,h-o.y],t.rotation=0,t.scale=[1,1],t.updateTransform(),t&&t.brush(i);var v=new Wi({style:{x:0,y:0,image:n}});return null!=m.position&&(v.position=t.position=m.position),null!=m.rotation&&(v.rotation=t.rotation=m.rotation),null!=m.scale&&(v.scale=t.scale=m.scale),v}},Yi.prototype={constructor:Yi,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),n=0;n<e.length;n++)this.addClip(e[n])},removeClip:function(t){var e=S(this._clips,t);0<=e&&this._clips.splice(e,1)},removeAnimator:function(t){for(var e=t.getClips(),n=0;n<e.length;n++)this.removeClip(e[n]);t.animation=null},_update:function(){for(var t=(new Date).getTime()-this._pausedTime,e=t-this._time,n=this._clips,i=n.length,o=[],r=[],a=0;a<i;a++){var s=n[a],l=s.step(t,e);l&&(o.push(l),r.push(s))}for(a=0;a<i;)n[a]._needsRemove?(n[a]=n[i-1],n.pop(),i--):a++;for(i=o.length,a=0;a<i;a++)r[a].fire(o[a]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},_startLoop:function(){var t=this;this._running=!0,$n(function e(){t._running&&($n(e),t._paused||t._update())})},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(t,e){var n=new cn(t,(e=e||{}).loop,e.getter,e.setter);return this.addAnimator(n),n}},M(Yi,kt);var Xi,Zi,Ki=o.domSupported,Ji=(Zi={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:Xi=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:A(Xi,function(t){var e=t.replace("mouse","pointer");return Zi.hasOwnProperty(e)?e:t})}),Qi=["mousemove","mouseup"],to=["pointermove","pointerup"];function eo(t){return"mousewheel"===t&&o.browser.firefox?"DOMMouseScroll":t}function no(t){var e=t.pointerType;return"pen"===e||"touch"===e}function io(t){t&&(t.zrByTouch=!0)}function oo(t,e){for(var n=e,i=!1;n&&9!==n.nodeType&&!(i=n.domBelongToZr||n!==e&&n===t.painterRoot);)n=n.parentNode;return i}function ro(t,e){this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY}var ao=ro.prototype;ao.stopPropagation=ao.stopImmediatePropagation=ao.preventDefault=et;var so={mousedown:function(t){t=Wt(this.dom,t),this._mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=Wt(this.dom,t);var e=this._mayPointerCapture;!e||t.zrX===e[0]&&t.zrY===e[1]||ho(this,!0),this.trigger("mousemove",t)},mouseup:function(t){t=Wt(this.dom,t),ho(this,!1),this.trigger("mouseup",t)},mouseout:function(t){t=Wt(this.dom,t),this._pointerCapturing&&(t.zrEventControl="no_globalout"),t.zrIsToLocalDOM=oo(this,t.toElement||t.relatedTarget),this.trigger("mouseout",t)},touchstart:function(t){io(t=Wt(this.dom,t)),this._lastTouchMoment=new Date,this.handler.processGesture(t,"start"),so.mousemove.call(this,t),so.mousedown.call(this,t)},touchmove:function(t){io(t=Wt(this.dom,t)),this.handler.processGesture(t,"change"),so.mousemove.call(this,t)},touchend:function(t){io(t=Wt(this.dom,t)),this.handler.processGesture(t,"end"),so.mouseup.call(this,t),+new Date-this._lastTouchMoment<300&&so.click.call(this,t)},pointerdown:function(t){so.mousedown.call(this,t)},pointermove:function(t){no(t)||so.mousemove.call(this,t)},pointerup:function(t){so.mouseup.call(this,t)},pointerout:function(t){no(t)||so.mouseout.call(this,t)}};k(["click","mousewheel","dblclick","contextmenu"],function(t){so[t]=function(e){e=Wt(this.dom,e),this.trigger(t,e)}});var lo={pointermove:function(t){no(t)||lo.mousemove.call(this,t)},pointerup:function(t){lo.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this._pointerCapturing;ho(this,!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function co(t,e,n,i){t.mounted[e]=n,t.listenerOpts[e]=i,Gt(t.domTarget,eo(e),n,i)}function uo(t){var e,n,i,o=t.mounted;for(var r in o)o.hasOwnProperty(r)&&(e=t.domTarget,n=eo(r),i=o[r],Ot?e.removeEventListener(n,i,t.listenerOpts[r]):e.detachEvent("on"+n,i));t.mounted={}}function ho(t,e){if(t._mayPointerCapture=null,Ki&&t._pointerCapturing^e){t._pointerCapturing=e;var n=t._globalHandlerScope;e?function(t,e){function n(n){co(e,n,function(i){i=Ht(i),oo(t,i.target)||(i=function(t,e){return Wt(t.dom,new ro(t,e),!0)}(t,i),e.domHandlers[n].call(t,i))},{capture:!0})}o.pointerEventsSupported?k(to,n):o.touchEventsSupported||k(Qi,n)}(t,n):uo(n)}}function fo(t,e){this.domTarget=t,this.domHandlers=e,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function po(t,e){kt.call(this),this.dom=t,this.painterRoot=e,this._localHandlerScope=new fo(t,so),Ki&&(this._globalHandlerScope=new fo(document,lo)),this._pointerCapturing=!1,this._mayPointerCapture=null,function(t,e){var n=e.domHandlers;o.pointerEventsSupported?k(Ji.pointer,function(i){co(e,i,function(e){n[i].call(t,e)})}):(o.touchEventsSupported&&k(Ji.touch,function(i){co(e,i,function(o){n[i].call(t,o),function(t){t.touching=!0,null!=t.touchTimer&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout(function(){t.touching=!1,t.touchTimer=null},700)}(e)})}),k(Ji.mouse,function(i){co(e,i,function(o){o=Ht(o),e.touching||n[i].call(t,o)})}))}(this,this._localHandlerScope)}var go=po.prototype;go.dispose=function(){uo(this._localHandlerScope),Ki&&uo(this._globalHandlerScope)},go.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},M(po,kt);var mo=!o.canvasSupported,vo={canvas:qi},yo={};function xo(t,e){var n=new _o(i(),t,e);return yo[n.id]=n}function bo(t,e){vo[t]=e}var _o=function(t,e,n){n=n||{},this.dom=e,this.id=t;var i=this,r=new En,a=n.renderer;if(mo){if(!vo.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");a="vml"}else a&&vo[a]||(a="canvas");var s=new vo[a](e,r,n,t);this.storage=r,this.painter=s;var l=o.node||o.worker?null:new po(s.getViewportRoot(),s.root);this.handler=new Jt(r,s,l,s.root),this.animation=new Yi({stage:{update:E(this.flush,this)}}),this.animation.start();var c=r.delFromStorage,u=r.addToStorage;r.delFromStorage=function(t){c.call(r,t),t&&t.removeSelfFromZr(i)},r.addToStorage=function(t){u.call(r,t),t.addSelfToZr(i)}};_o.prototype={constructor:_o,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer&&this.painter.configLayer(t,e),this._needsRefresh=!0},setBackgroundColor:function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var t;this._needsRefresh&&(t=!0,this.refreshImmediately()),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately()),t&&this.trigger("rendered")},addHover:function(t,e){if(this.painter.addHover){var n=this.painter.addHover(t,e);return this.refreshHover(),n}},removeHover:function(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){this.painter.resize((t=t||{}).width,t.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e)},setCursorStyle:function(t){this.handler.setCursorStyle(t)},findHover:function(t,e){return this.handler.findHover(t,e)},on:function(t,e,n){this.handler.on(t,e,n)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function(t){delete yo[t]}(this.id)}};var wo=(Object.freeze||Object)({version:"4.3.2",init:xo,dispose:function(t){if(t)t.dispose();else{for(var e in yo)yo.hasOwnProperty(e)&&yo[e].dispose();yo={}}return this},getInstance:function(t){return yo[t]},registerPainter:bo}),So=k,Co=B,Mo=L,To="series\0";function ko(t){return t instanceof Array?t:null==t?[]:[t]}function Ao(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var i=0,o=n.length;i<o;i++){var r=n[i];!t.emphasis[e].hasOwnProperty(r)&&t[e].hasOwnProperty(r)&&(t.emphasis[e][r]=t[e][r])}}}var Io=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Do(t){return!Co(t)||Mo(t)||t instanceof Date?t:t.value}function Po(t,e){e=(e||[]).slice();var n=A(t||[],function(t,e){return{exist:t}});return So(e,function(t,i){if(Co(t)){for(var o=0;o<n.length;o++)if(!n[o].option&&null!=t.id&&n[o].exist.id===t.id+"")return n[o].option=t,void(e[i]=null);for(o=0;o<n.length;o++){var r=n[o].exist;if(!(n[o].option||null!=r.id&&null!=t.id||null==t.name||Lo(t)||Lo(r)||r.name!==t.name+""))return n[o].option=t,void(e[i]=null)}}}),So(e,function(t,e){if(Co(t)){for(var i=0;i<n.length;i++)if(!n[i].option&&!Lo(n[i].exist)&&null==t.id){n[i].option=t;break}i>=n.length&&n.push({option:t})}}),n}function Eo(t){var e=Q();So(t,function(t,n){var i=t.exist;i&&e.set(i.id,t)}),So(t,function(t,n){var i=t.option;q(!i||null==i.id||!e.get(i.id)||e.get(i.id)===t,"id duplicates: "+(i&&i.id)),i&&null!=i.id&&e.set(i.id,t),t.keyInfo||(t.keyInfo={})}),So(t,function(t,n){var i=t.exist,o=t.option,r=t.keyInfo;if(Co(o)){if(r.name=null!=o.name?o.name+"":i?i.name:To+n,i)r.id=i.id;else if(null!=o.id)r.id=o.id+"";else for(var a=0;r.id="\0"+r.name+"\0"+a++,e.get(r.id););e.set(r.id,t)}})}function No(t){var e=t.name;return!(!e||!e.indexOf(To))}function Lo(t){return Co(t)&&t.id&&0===(t.id+"").indexOf("\0_ec_\0")}function Ro(t,e){return null!=e.dataIndexInside?e.dataIndexInside:null!=e.dataIndex?L(e.dataIndex)?A(e.dataIndex,function(e){return t.indexOfRawIndex(e)}):t.indexOfRawIndex(e.dataIndex):null!=e.name?L(e.name)?A(e.name,function(e){return t.indexOfName(e)}):t.indexOfName(e.name):void 0}function Oo(){var t="__\0ec_inner_"+Bo+++"_"+Math.random().toFixed(5);return function(e){return e[t]||(e[t]={})}}var Bo=0;function zo(t,e,n){if(O(e)){var i={};i[e+"Index"]=0,e=i}var o=n&&n.defaultMainType;!o||Vo(e,o+"Index")||Vo(e,o+"Id")||Vo(e,o+"Name")||(e[o+"Index"]=0);var r={};return So(e,function(i,o){if(i=e[o],"dataIndex"!==o&&"dataIndexInside"!==o){var a=o.match(/^(\w+)(Index|Id|Name)$/)||[],s=a[1],l=(a[2]||"").toLowerCase();if(!(!s||!l||null==i||"index"===l&&"none"===i||n&&n.includeMainTypes&&S(n.includeMainTypes,s)<0)){var c={mainType:s};"index"===l&&"all"===i||(c[l]=i);var u=t.queryComponents(c);r[s+"Models"]=u,r[s+"Model"]=u[0]}}else r[o]=i}),r}function Vo(t,e){return t&&t.hasOwnProperty(e)}function Fo(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n}function Ho(t){return"auto"===t?o.domSupported?"html":"richText":t||"html"}function Wo(t,e){var n=Q(),i=[];return k(t,function(t){var o=e(t);(n.get(o)||(i.push(o),n.set(o,[]))).push(t)}),{keys:i,buckets:n}}var Go="___EC__COMPONENT__CONTAINER___";function Uo(t){var e={main:"",sub:""};return t&&(t=t.split("."),e.main=t[0]||"",e.sub=t[1]||""),e}function jo(t){(t.$constructor=t).extend=function(t){function e(){t.$constructor?t.$constructor.apply(this,arguments):n.apply(this,arguments)}var n=this;return x(e.prototype,t),e.extend=this.extend,e.superCall=Yo,e.superApply=Xo,C(e,this),e.superClass=n,e}}var $o=0;function qo(t){var e=["__\0is_clz",$o++,Math.random().toFixed(3)].join("_");t.prototype[e]=!0,t.isInstance=function(t){return!(!t||!t[e])}}function Yo(t,e){var n=j(arguments,2);return this.superClass.prototype[e].apply(t,n)}function Xo(t,e,n){return this.superClass.prototype[e].apply(t,n)}function Zo(t,e){e=e||{};var n={};if(t.registerClass=function(t,e){return e&&(function(t){q(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}(e),(e=Uo(e)).sub?e.sub!==Go&&((function(t){var e=n[t.main];return e&&e[Go]||((e=n[t.main]={})[Go]=!0),e}(e))[e.sub]=t):n[e.main]=t),t},t.getClass=function(t,e,i){var o=n[t];if(o&&o[Go]&&(o=e?o[e]:null),i&&!o)throw new Error(e?"Component "+t+"."+(e||"")+" not exists. Load it first.":t+".type should be specified.");return o},t.getClassesByMainType=function(t){t=Uo(t);var e=[],i=n[t.main];return i&&i[Go]?k(i,function(t,n){n!==Go&&e.push(t)}):e.push(i),e},t.hasClass=function(t){return t=Uo(t),!!n[t.main]},t.getAllClassMainTypes=function(){var t=[];return k(n,function(e,n){t.push(n)}),t},t.hasSubTypes=function(t){t=Uo(t);var e=n[t.main];return e&&e[Go]},t.parseClassType=Uo,e.registerWhenExtend){var i=t.extend;i&&(t.extend=function(e){var n=i.call(this,e);return t.registerClass(n,e.type)})}return t}function Ko(t){for(var e=0;e<t.length;e++)t[e][1]||(t[e][1]=t[e][0]);return function(e,n,i){for(var o={},r=0;r<t.length;r++){var a=t[r][1];if(!(n&&0<=S(n,a)||i&&S(i,a)<0)){var s=e.getShallow(a);null!=s&&(o[t[r][0]]=s)}}return o}}var Jo=Ko([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Qo={getLineStyle:function(t){var e=Jo(this,t);return e.lineDash=this.getLineDash(e.lineWidth),e},getLineDash:function(t){null==t&&(t=1);var e=this.get("type"),n=Math.max(t,2),i=4*t;return"solid"!==e&&null!=e&&("dashed"===e?[i,i]:[n,n])}},tr=Ko([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),er={getAreaStyle:function(t,e){return tr(this,t,e)}},nr=Math.pow,ir=Math.sqrt,or=1e-8,rr=1e-4,ar=ir(3),sr=1/3,lr=ot(),cr=ot(),ur=ot();function dr(t){return-or<t&&t<or}function hr(t){return or<t||t<-or}function fr(t,e,n,i,o){var r=1-o;return r*r*(r*t+3*o*e)+o*o*(o*i+3*r*n)}function pr(t,e,n,i,o){var r=1-o;return 3*(((e-t)*r+2*(n-e)*o)*r+(i-n)*o*o)}function gr(t,e,n,i,o){var r=6*n-12*e+6*t,a=9*e+3*i-3*t-9*n,s=3*e-3*t,l=0;if(dr(a))hr(r)&&0<=(u=-s/r)&&u<=1&&(o[l++]=u);else{var c=r*r-4*a*s;if(dr(c))o[0]=-r/(2*a);else if(0<c){var u,d=ir(c),h=(-r-d)/(2*a);0<=(u=(-r+d)/(2*a))&&u<=1&&(o[l++]=u),0<=h&&h<=1&&(o[l++]=h)}}return l}function mr(t,e,n,i,o,r){var a=(e-t)*o+t,s=(n-e)*o+e,l=(i-n)*o+n,c=(s-a)*o+a,u=(l-s)*o+s,d=(u-c)*o+c;r[0]=t,r[1]=a,r[2]=c,r[3]=d,r[4]=d,r[5]=u,r[6]=l,r[7]=i}function vr(t,e,n,i){var o=1-i;return o*(o*t+2*i*e)+i*i*n}function yr(t,e,n,i){return 2*((1-i)*(e-t)+i*(n-e))}function xr(t,e,n){var i=t+n-2*e;return 0==i?.5:(t-e)/i}function br(t,e,n,i,o){var r=(e-t)*i+t,a=(n-e)*i+e,s=(a-r)*i+r;o[0]=t,o[1]=r,o[2]=s,o[3]=s,o[4]=a,o[5]=n}var _r=Math.min,wr=Math.max,Sr=Math.sin,Cr=Math.cos,Mr=2*Math.PI,Tr=ot(),kr=ot(),Ar=ot();function Ir(t,e,n){if(0!==t.length){var i,o=t[0],r=o[0],a=o[0],s=o[1],l=o[1];for(i=1;i<t.length;i++)r=_r(r,(o=t[i])[0]),a=wr(a,o[0]),s=_r(s,o[1]),l=wr(l,o[1]);e[0]=r,e[1]=s,n[0]=a,n[1]=l}}function Dr(t,e,n,i,o,r){o[0]=_r(t,n),o[1]=_r(e,i),r[0]=wr(t,n),r[1]=wr(e,i)}var Pr=[],Er=[];function Nr(t,e,n,i,o,r,a,s,l,c){var u,d=gr,h=fr,f=d(t,n,o,a,Pr);for(l[0]=1/0,l[1]=1/0,c[0]=-1/0,c[1]=-1/0,u=0;u<f;u++){var p=h(t,n,o,a,Pr[u]);l[0]=_r(p,l[0]),c[0]=wr(p,c[0])}for(f=d(e,i,r,s,Er),u=0;u<f;u++){var g=h(e,i,r,s,Er[u]);l[1]=_r(g,l[1]),c[1]=wr(g,c[1])}l[0]=_r(t,l[0]),c[0]=wr(t,c[0]),l[0]=_r(a,l[0]),c[0]=wr(a,c[0]),l[1]=_r(e,l[1]),c[1]=wr(e,c[1]),l[1]=_r(s,l[1]),c[1]=wr(s,c[1])}function Lr(t,e,n,i,o,r,a,s,l){var c=_t,u=wt,d=Math.abs(o-r);if(d%Mr<1e-4&&1e-4<d)return s[0]=t-n,s[1]=e-i,l[0]=t+n,void(l[1]=e+i);if(Tr[0]=Cr(o)*n+t,Tr[1]=Sr(o)*i+e,kr[0]=Cr(r)*n+t,kr[1]=Sr(r)*i+e,c(s,Tr,kr),u(l,Tr,kr),(o%=Mr)<0&&(o+=Mr),(r%=Mr)<0&&(r+=Mr),r<o&&!a?r+=Mr:o<r&&a&&(o+=Mr),a){var h=r;r=o,o=h}for(var f=0;f<r;f+=Math.PI/2)o<f&&(Ar[0]=Cr(f)*n+t,Ar[1]=Sr(f)*i+e,c(s,Ar,s),u(l,Ar,l))}var Rr={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Or=[],Br=[],zr=[],Vr=[],Fr=Math.min,Hr=Math.max,Wr=Math.cos,Gr=Math.sin,Ur=Math.sqrt,jr=Math.abs,$r="undefined"!=typeof Float32Array,qr=function(t){this._saveData=!t,this._saveData&&(this.data=[]),this._ctx=null};function Yr(t,e,n,i,o,r,a){if(0===o)return!1;var s,l=o;if(e+l<a&&i+l<a||a<e-l&&a<i-l||t+l<r&&n+l<r||r<t-l&&r<n-l)return!1;if(t===n)return Math.abs(r-t)<=l/2;var c=(s=(e-i)/(t-n))*r-a+(t*i-n*e)/(t-n);return c*c/(s*s+1)<=l/2*l/2}function Xr(t,e,n,i,o,r,a,s,l,c,u){if(0===l)return!1;var d=l;return!(e+d<u&&i+d<u&&r+d<u&&s+d<u||u<e-d&&u<i-d&&u<r-d&&u<s-d||t+d<c&&n+d<c&&o+d<c&&a+d<c||c<t-d&&c<n-d&&c<o-d&&c<a-d)&&function(t,e,n,i,o,r,a,s,l,c,u){var d,h,f,p,g,m=.005,v=1/0;lr[0]=l,lr[1]=c;for(var y=0;y<1;y+=.05)cr[0]=fr(t,n,o,a,y),cr[1]=fr(e,i,r,s,y),(p=yt(lr,cr))<v&&(d=y,v=p);v=1/0;for(var x=0;x<32&&!(m<rr);x++)f=d+m,cr[0]=fr(t,n,o,a,h=d-m),cr[1]=fr(e,i,r,s,h),p=yt(cr,lr),0<=h&&p<v?(d=h,v=p):(ur[0]=fr(t,n,o,a,f),ur[1]=fr(e,i,r,s,f),g=yt(ur,lr),f<=1&&g<v?(d=f,v=g):m*=.5);return ir(v)}(t,e,n,i,o,r,a,s,c,u)<=d/2}function Zr(t,e,n,i,o,r,a,s,l){if(0===a)return!1;var c=a;return!(e+c<l&&i+c<l&&r+c<l||l<e-c&&l<i-c&&l<r-c||t+c<s&&n+c<s&&o+c<s||s<t-c&&s<n-c&&s<o-c)&&function(t,e,n,i,o,r,a,s,l){var c,u=.005,d=1/0;lr[0]=a,lr[1]=s;for(var h=0;h<1;h+=.05)cr[0]=vr(t,n,o,h),cr[1]=vr(e,i,r,h),(m=yt(lr,cr))<d&&(c=h,d=m);d=1/0;for(var f=0;f<32&&!(u<rr);f++){var p=c-u,g=c+u;cr[0]=vr(t,n,o,p),cr[1]=vr(e,i,r,p);var m=yt(cr,lr);if(0<=p&&m<d)c=p,d=m;else{ur[0]=vr(t,n,o,g),ur[1]=vr(e,i,r,g);var v=yt(ur,lr);g<=1&&v<d?(c=g,d=v):u*=.5}}return ir(d)}(t,e,n,i,o,r,s,l)<=c/2}qr.prototype={constructor:qr,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e,n){this._ux=jr((n=n||0)/dn/t)||0,this._uy=jr(n/dn/e)||0},getContext:function(){return this._ctx},beginPath:function(t){return(this._ctx=t)&&t.beginPath(),t&&(this.dpr=t.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(Rr.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){var n=jr(t-this._xi)>this._ux||jr(e-this._yi)>this._uy||this._len<5;return this.addData(Rr.L,t,e),this._ctx&&n&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),n&&(this._xi=t,this._yi=e),this},bezierCurveTo:function(t,e,n,i,o,r){return this.addData(Rr.C,t,e,n,i,o,r),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,n,i,o,r):this._ctx.bezierCurveTo(t,e,n,i,o,r)),this._xi=o,this._yi=r,this},quadraticCurveTo:function(t,e,n,i){return this.addData(Rr.Q,t,e,n,i),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,n,i):this._ctx.quadraticCurveTo(t,e,n,i)),this._xi=n,this._yi=i,this},arc:function(t,e,n,i,o,r){return this.addData(Rr.A,t,e,n,n,i,o-i,0,r?0:1),this._ctx&&this._ctx.arc(t,e,n,i,o,r),this._xi=Wr(o)*n+t,this._yi=Gr(o)*n+e,this},arcTo:function(t,e,n,i,o){return this._ctx&&this._ctx.arcTo(t,e,n,i,o),this},rect:function(t,e,n,i){return this._ctx&&this._ctx.rect(t,e,n,i),this.addData(Rr.R,t,e,n,i),this},closePath:function(){this.addData(Rr.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,n),t.closePath()),this._xi=e,this._yi=n,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t;for(var e=this._dashIdx=0,n=0;n<t.length;n++)e+=t[n];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length===e||!$r||(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,n=0,i=this._len,o=0;o<e;o++)n+=t[o].len();for($r&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n)),o=0;o<e;o++)for(var r=t[o].data,a=0;a<r.length;a++)this.data[i++]=r[a];this._len=i},addData:function(t){if(this._saveData){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var n=0;n<arguments.length;n++)e[this._len++]=arguments[n];this._prevCmd=t}},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var n,i,o=this._dashSum,r=this._dashOffset,a=this._lineDash,s=this._ctx,l=this._xi,c=this._yi,u=t-l,d=e-c,h=Ur(u*u+d*d),f=l,p=c,g=a.length;for(r<0&&(r=o+r),f-=(r%=o)*(u/=h),p-=r*(d/=h);0<u&&f<=t||u<0&&t<=f||0===u&&(0<d&&p<=e||d<0&&e<=p);)f+=u*(n=a[i=this._dashIdx]),p+=d*n,this._dashIdx=(i+1)%g,0<u&&f<l||u<0&&l<f||0<d&&p<c||d<0&&c<p||s[i%2?"moveTo":"lineTo"](0<=u?Fr(f,t):Hr(f,t),0<=d?Fr(p,e):Hr(p,e));this._dashOffset=-Ur((u=f-t)*u+(d=p-e)*d)},_dashedBezierTo:function(t,e,n,i,o,r){var a,s,l,c,u,d=this._dashSum,h=this._dashOffset,f=this._lineDash,p=this._ctx,g=this._xi,m=this._yi,v=fr,y=0,x=this._dashIdx,b=f.length,_=0;for(h<0&&(h=d+h),h%=d,a=0;a<1;a+=.1)s=v(g,t,n,o,a+.1)-v(g,t,n,o,a),l=v(m,e,i,r,a+.1)-v(m,e,i,r,a),y+=Ur(s*s+l*l);for(;x<b&&!(h<(_+=f[x]));x++);for(a=(_-h)/y;a<=1;)c=v(g,t,n,o,a),u=v(m,e,i,r,a),x%2?p.moveTo(c,u):p.lineTo(c,u),a+=f[x]/y,x=(x+1)%b;x%2!=0&&p.lineTo(o,r),this._dashOffset=-Ur((s=o-c)*s+(l=r-u)*l)},_dashedQuadraticTo:function(t,e,n,i){var o=n,r=i;n=(n+2*t)/3,i=(i+2*e)/3,this._dashedBezierTo(t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,n,i,o,r)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,$r&&(this.data=new Float32Array(t)))},getBoundingRect:function(){Or[0]=Or[1]=zr[0]=zr[1]=Number.MAX_VALUE,Br[0]=Br[1]=Vr[0]=Vr[1]=-Number.MAX_VALUE;for(var t,e,n,i,o,r,a,s,l,c,u,d,h,f,p=this.data,g=0,m=0,v=0,y=0,x=0;x<p.length;){var b=p[x++];switch(1===x&&(v=g=p[x],y=m=p[x+1]),b){case Rr.M:g=v=p[x++],m=y=p[x++],zr[0]=v,zr[1]=y,Vr[0]=v,Vr[1]=y;break;case Rr.L:Dr(g,m,p[x],p[x+1],zr,Vr),g=p[x++],m=p[x++];break;case Rr.C:Nr(g,m,p[x++],p[x++],p[x++],p[x++],p[x],p[x+1],zr,Vr),g=p[x++],m=p[x++];break;case Rr.Q:e=m,n=p[x++],i=p[x++],r=p[x+1],a=zr,s=Vr,c=l=void 0,c=vr,u=wr(_r((l=xr)(t=g,n,o=p[x]),1),0),d=wr(_r(l(e,i,r),1),0),h=c(t,n,o,u),f=c(e,i,r,d),a[0]=_r(t,o,h),a[1]=_r(e,r,f),s[0]=wr(t,o,h),s[1]=wr(e,r,f),g=p[x++],m=p[x++];break;case Rr.A:var _=p[x++],w=p[x++],S=p[x++],C=p[x++],M=p[x++],T=p[x++]+M;x+=1;var k=1-p[x++];1===x&&(v=Wr(M)*S+_,y=Gr(M)*C+w),Lr(_,w,S,C,M,T,k,zr,Vr),g=Wr(T)*S+_,m=Gr(T)*C+w;break;case Rr.R:Dr(v=g=p[x++],y=m=p[x++],v+p[x++],y+p[x++],zr,Vr);break;case Rr.Z:g=v,m=y}_t(Or,Or,zr),wt(Br,Br,Vr)}return 0===x&&(Or[0]=Or[1]=Br[0]=Br[1]=0),new Sn(Or[0],Or[1],Br[0]-Or[0],Br[1]-Or[1])},rebuildPath:function(t){for(var e,n,i,o,r,a,s=this.data,l=this._ux,c=this._uy,u=this._len,d=0;d<u;){var h=s[d++];switch(1===d&&(e=i=s[d],n=o=s[d+1]),h){case Rr.M:e=i=s[d++],n=o=s[d++],t.moveTo(i,o);break;case Rr.L:r=s[d++],a=s[d++],(jr(r-i)>l||jr(a-o)>c||d===u-1)&&(t.lineTo(r,a),i=r,o=a);break;case Rr.C:t.bezierCurveTo(s[d++],s[d++],s[d++],s[d++],s[d++],s[d++]),i=s[d-2],o=s[d-1];break;case Rr.Q:t.quadraticCurveTo(s[d++],s[d++],s[d++],s[d++]),i=s[d-2],o=s[d-1];break;case Rr.A:var f=s[d++],p=s[d++],g=s[d++],m=s[d++],v=s[d++],y=s[d++],x=s[d++],b=s[d++],_=m<g?g:m,w=m<g?1:g/m,S=m<g?m/g:1,C=v+y;.001<Math.abs(g-m)?(t.translate(f,p),t.rotate(x),t.scale(w,S),t.arc(0,0,_,v,C,1-b),t.scale(1/w,1/S),t.rotate(-x),t.translate(-f,-p)):t.arc(f,p,_,v,C,1-b),1===d&&(e=Wr(v)*g+f,n=Gr(v)*m+p),i=Wr(C)*g+f,o=Gr(C)*m+p;break;case Rr.R:e=i=s[d],n=o=s[d+1],t.rect(s[d++],s[d++],s[d++],s[d++]);break;case Rr.Z:t.closePath(),i=e,o=n}}}},qr.CMD=Rr;var Kr=2*Math.PI;function Jr(t){return(t%=Kr)<0&&(t+=Kr),t}var Qr=2*Math.PI;function ta(t,e,n,i,o,r,a,s,l){if(0===a)return!1;var c=a;s-=t,l-=e;var u=Math.sqrt(s*s+l*l);if(n<u-c||u+c<n)return!1;if(Math.abs(i-o)%Qr<1e-4)return!0;if(r){var d=i;i=Jr(o),o=Jr(d)}else i=Jr(i),o=Jr(o);o<i&&(o+=Qr);var h=Math.atan2(l,s);return h<0&&(h+=Qr),i<=h&&h<=o||i<=h+Qr&&h+Qr<=o}function ea(t,e,n,i,o,r){if(e<r&&i<r||r<e&&r<i)return 0;if(i===e)return 0;var a=i<e?1:-1,s=(r-e)/(i-e);1!=s&&0!=s||(a=i<e?.5:-.5);var l=s*(n-t)+t;return l===o?1/0:o<l?a:0}var na=qr.CMD,ia=2*Math.PI,oa=[-1,-1,-1],ra=[-1,-1];function aa(t,e,n,i,o,r,a,s,l,c){if(e<c&&i<c&&r<c&&s<c||c<e&&c<i&&c<r&&c<s)return 0;var u,d=function(t,e,n,i,o,r){var a=i+3*(e-n)-t,s=3*(n-2*e+t),l=3*(e-t),c=t-o,u=s*s-3*a*l,d=s*l-9*a*c,h=l*l-3*s*c,f=0;if(dr(u)&&dr(d))dr(s)?r[0]=0:0<=(C=-l/s)&&C<=1&&(r[f++]=C);else{var p=d*d-4*u*h;if(dr(p)){var g=d/u,m=-g/2;0<=(C=-s/a+g)&&C<=1&&(r[f++]=C),0<=m&&m<=1&&(r[f++]=m)}else if(0<p){var v=ir(p),y=u*s+1.5*a*(-d+v),x=u*s+1.5*a*(-d-v);0<=(C=(-s-((y=y<0?-nr(-y,sr):nr(y,sr))+(x=x<0?-nr(-x,sr):nr(x,sr))))/(3*a))&&C<=1&&(r[f++]=C)}else{var b=(2*u*s-3*a*d)/(2*ir(u*u*u)),_=Math.acos(b)/3,w=ir(u),S=Math.cos(_),C=(-s-2*w*S)/(3*a),M=(m=(-s+w*(S+ar*Math.sin(_)))/(3*a),(-s+w*(S-ar*Math.sin(_)))/(3*a));0<=C&&C<=1&&(r[f++]=C),0<=m&&m<=1&&(r[f++]=m),0<=M&&M<=1&&(r[f++]=M)}}return f}(e,i,r,s,c,oa);if(0===d)return 0;for(var h,f,p=0,g=-1,m=0;m<d;m++){var v=oa[m],y=0===v||1===v?.5:1;fr(t,n,o,a,v)<l||(g<0&&(g=gr(e,i,r,s,ra),ra[1]<ra[0]&&1<g&&(u=ra[0],ra[0]=ra[1],ra[1]=u),h=fr(e,i,r,s,ra[0]),1<g&&(f=fr(e,i,r,s,ra[1]))),p+=2===g?v<ra[0]?h<e?y:-y:v<ra[1]?f<h?y:-y:s<f?y:-y:v<ra[0]?h<e?y:-y:s<h?y:-y)}return p}function sa(t,e,n,i,o,r,a,s){if(e<s&&i<s&&r<s||s<e&&s<i&&s<r)return 0;var l=function(t,e,n,i,o){var r=t-2*e+n,a=2*(e-t),s=t-i,l=0;if(dr(r))hr(a)&&0<=(u=-s/a)&&u<=1&&(o[l++]=u);else{var c=a*a-4*r*s;if(dr(c))0<=(u=-a/(2*r))&&u<=1&&(o[l++]=u);else if(0<c){var u,d=ir(c),h=(-a-d)/(2*r);0<=(u=(-a+d)/(2*r))&&u<=1&&(o[l++]=u),0<=h&&h<=1&&(o[l++]=h)}}return l}(e,i,r,s,oa);if(0===l)return 0;var c=xr(e,i,r);if(0<=c&&c<=1){for(var u=0,d=vr(e,i,r,c),h=0;h<l;h++){var f=0===oa[h]||1===oa[h]?.5:1;vr(t,n,o,oa[h])<a||(u+=oa[h]<c?d<e?f:-f:r<d?f:-f)}return u}return f=0===oa[0]||1===oa[0]?.5:1,vr(t,n,o,oa[0])<a?0:r<e?f:-f}function la(t,e,n,i,o,r,a,s){if(n<(s-=e)||s<-n)return 0;var l=Math.sqrt(n*n-s*s);oa[0]=-l,oa[1]=l;var c=Math.abs(i-o);if(c<1e-4)return 0;if(c%ia<1e-4){o=ia;var u=r?1:-1;return a>=oa[i=0]+t&&a<=oa[1]+t?u:0}r?(l=i,i=Jr(o),o=Jr(l)):(i=Jr(i),o=Jr(o)),o<i&&(o+=ia);for(var d=0,h=0;h<2;h++){var f=oa[h];if(a<f+t){var p=Math.atan2(s,f);u=r?1:-1,p<0&&(p=ia+p),(i<=p&&p<=o||i<=p+ia&&p+ia<=o)&&(p>Math.PI/2&&p<1.5*Math.PI&&(u=-u),d+=u)}}return d}function ca(t,e,n,i,o){for(var r=0,a=0,s=0,l=0,c=0,u=0;u<t.length;){var d=t[u++];switch(d===na.M&&1<u&&(n||(r+=ea(a,s,l,c,i,o))),1===u&&(l=a=t[u],c=s=t[u+1]),d){case na.M:a=l=t[u++],s=c=t[u++];break;case na.L:if(n){if(Yr(a,s,t[u],t[u+1],e,i,o))return!0}else r+=ea(a,s,t[u],t[u+1],i,o)||0;a=t[u++],s=t[u++];break;case na.C:if(n){if(Xr(a,s,t[u++],t[u++],t[u++],t[u++],t[u],t[u+1],e,i,o))return!0}else r+=aa(a,s,t[u++],t[u++],t[u++],t[u++],t[u],t[u+1],i,o)||0;a=t[u++],s=t[u++];break;case na.Q:if(n){if(Zr(a,s,t[u++],t[u++],t[u],t[u+1],e,i,o))return!0}else r+=sa(a,s,t[u++],t[u++],t[u],t[u+1],i,o)||0;a=t[u++],s=t[u++];break;case na.A:var h=t[u++],f=t[u++],p=t[u++],g=t[u++],m=t[u++],v=t[u++];u+=1;var y=1-t[u++],x=Math.cos(m)*p+h,b=Math.sin(m)*g+f;1<u?r+=ea(a,s,x,b,i,o):(l=x,c=b);var _=(i-h)*g/p+h;if(n){if(ta(h,f,g,m,m+v,y,e,_,o))return!0}else r+=la(h,f,g,m,m+v,y,_,o);a=Math.cos(m+v)*p+h,s=Math.sin(m+v)*g+f;break;case na.R:if(l=a=t[u++],c=s=t[u++],x=l+t[u++],b=c+t[u++],n){if(Yr(l,c,x,c,e,i,o)||Yr(x,c,x,b,e,i,o)||Yr(x,b,l,b,e,i,o)||Yr(l,b,l,c,e,i,o))return!0}else r+=ea(x,c,x,b,i,o),r+=ea(l,b,l,c,i,o);break;case na.Z:if(n){if(Yr(a,s,l,c,e,i,o))return!0}else r+=ea(a,s,l,c,i,o);a=l,s=c}}return n||function(t,e){return Math.abs(t-e)<1e-4}(s,c)||(r+=ea(a,s,l,c,i,o)||0),0!==r}var ua=Wn.prototype.getCanvasPattern,da=Math.abs,ha=new qr(!0);function fa(t){Hi.call(this,t),this.path=null}function pa(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}fa.prototype={constructor:fa,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(t,e){var n,i=this.style,o=this.path||ha,r=i.hasStroke(),a=i.hasFill(),s=i.fill,l=i.stroke,c=a&&!!s.colorStops,u=r&&!!l.colorStops,d=a&&!!s.image,h=r&&!!l.image;i.bind(t,this,e),this.setTransform(t),this.__dirty&&(c&&(n=n||this.getBoundingRect(),this._fillGradient=i.getGradient(t,s,n)),u&&(n=n||this.getBoundingRect(),this._strokeGradient=i.getGradient(t,l,n))),c?t.fillStyle=this._fillGradient:d&&(t.fillStyle=ua.call(s,t)),u?t.strokeStyle=this._strokeGradient:h&&(t.strokeStyle=ua.call(l,t));var f=i.lineDash,p=i.lineDashOffset,g=!!t.setLineDash,m=this.getGlobalScale();if(o.setScale(m[0],m[1],this.segmentIgnoreThreshold),this.__dirtyPath||f&&!g&&r?(o.beginPath(t),f&&!g&&(o.setLineDash(f),o.setLineDashOffset(p)),this.buildPath(o,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(t.beginPath(),this.path.rebuildPath(t)),a)if(null!=i.fillOpacity){var v=t.globalAlpha;t.globalAlpha=i.fillOpacity*i.opacity,o.fill(t),t.globalAlpha=v}else o.fill(t);f&&g&&(t.setLineDash(f),t.lineDashOffset=p),r&&(null!=i.strokeOpacity?(v=t.globalAlpha,t.globalAlpha=i.strokeOpacity*i.opacity,o.stroke(t),t.globalAlpha=v):o.stroke(t)),f&&g&&t.setLineDash([]),null!=i.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))},buildPath:function(t,e,n){},createPathProxy:function(){this.path=new qr},getBoundingRect:function(){var t=this._rect,e=this.style,n=!t;if(n){var i=this.path;i=i||(this.path=new qr),this.__dirtyPath&&(i.beginPath(),this.buildPath(i,this.shape,!1)),t=i.getBoundingRect()}if(this._rect=t,e.hasStroke()){var o=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||n){o.copy(t);var r=e.lineWidth,a=e.strokeNoScale?this.getLineScale():1;e.hasFill()||(r=Math.max(r,this.strokeContainThreshold||4)),1e-10<a&&(o.width+=r/a,o.height+=r/a,o.x-=r/a/2,o.y-=r/a/2)}return o}return t},contain:function(t,e){var n=this.transformCoordToLocal(t,e),i=this.getBoundingRect(),o=this.style;if(i.contain(t=n[0],e=n[1])){var r=this.path.data;if(o.hasStroke()){var a=o.lineWidth,s=o.strokeNoScale?this.getLineScale():1;if(1e-10<s&&(o.hasFill()||(a=Math.max(a,this.strokeContainThreshold)),function(t,e,n,i){return ca(t,e,!0,n,i)}(r,a/s,t,e)))return!0}if(o.hasFill())return function(t,e,n){return ca(t,0,!1,e,n)}(r,t,e)}return!1},dirty:function(t){null==t&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?(this.setShape(e),this.__dirtyPath=!0,this._rect=null):Hi.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var n=this.shape;if(n){if(B(t))for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);else n[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&1e-10<da(t[0]-1)&&1e-10<da(t[3]-1)?Math.sqrt(da(t[0]*t[3]-t[2]*t[1])):1}},fa.extend=function(t){function e(e){fa.call(this,e),t.style&&this.style.extendFrom(t.style,!1);var n=t.shape;if(n){this.shape=this.shape||{};var i=this.shape;for(var o in n)!i.hasOwnProperty(o)&&n.hasOwnProperty(o)&&(i[o]=n[o])}t.init&&t.init.call(this,e)}for(var n in C(e,fa),t)"style"!==n&&"shape"!==n&&(e.prototype[n]=t[n]);return e},C(fa,Hi);var ga=qr.CMD,ma=[[],[],[]],va=Math.sqrt,ya=Math.atan2,xa=Math.sqrt,ba=Math.sin,_a=Math.cos,wa=Math.PI,Sa=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(pa(t)*pa(e))},Ca=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Sa(t,e))};function Ma(t,e,n,i,o,r,a,s,l,c,u){var d=l*(wa/180),h=_a(d)*(t-n)/2+ba(d)*(e-i)/2,f=-1*ba(d)*(t-n)/2+_a(d)*(e-i)/2,p=h*h/(a*a)+f*f/(s*s);1<p&&(a*=xa(p),s*=xa(p));var g=(o===r?-1:1)*xa((a*a*(s*s)-a*a*(f*f)-s*s*(h*h))/(a*a*(f*f)+s*s*(h*h)))||0,m=g*a*f/s,v=g*-s*h/a,y=(t+n)/2+_a(d)*m-ba(d)*v,x=(e+i)/2+ba(d)*m+_a(d)*v,b=Ca([1,0],[(h-m)/a,(f-v)/s]),_=[(h-m)/a,(f-v)/s],w=[(-1*h-m)/a,(-1*f-v)/s],S=Ca(_,w);Sa(_,w)<=-1&&(S=wa),1<=Sa(_,w)&&(S=0),0===r&&0<S&&(S-=2*wa),1===r&&S<0&&(S+=2*wa),u.addData(c,y,x,a,s,b,S,d,r)}var Ta=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,ka=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Aa(t,e){var n=function(t){if(!t)return new qr;for(var e,n=0,i=0,o=n,r=i,a=new qr,s=qr.CMD,l=t.match(Ta),c=0;c<l.length;c++){for(var u,d=l[c],h=d.charAt(0),f=d.match(ka)||[],p=f.length,g=0;g<p;g++)f[g]=parseFloat(f[g]);for(var m=0;m<p;){var v,y,x,b,_,w,S,C=n,M=i;switch(h){case"l":n+=f[m++],i+=f[m++],a.addData(u=s.L,n,i);break;case"L":n=f[m++],i=f[m++],a.addData(u=s.L,n,i);break;case"m":n+=f[m++],i+=f[m++],a.addData(u=s.M,n,i),o=n,r=i,h="l";break;case"M":n=f[m++],i=f[m++],a.addData(u=s.M,n,i),o=n,r=i,h="L";break;case"h":n+=f[m++],a.addData(u=s.L,n,i);break;case"H":n=f[m++],a.addData(u=s.L,n,i);break;case"v":i+=f[m++],a.addData(u=s.L,n,i);break;case"V":i=f[m++],a.addData(u=s.L,n,i);break;case"C":a.addData(u=s.C,f[m++],f[m++],f[m++],f[m++],f[m++],f[m++]),n=f[m-2],i=f[m-1];break;case"c":a.addData(u=s.C,f[m++]+n,f[m++]+i,f[m++]+n,f[m++]+i,f[m++]+n,f[m++]+i),n+=f[m-2],i+=f[m-1];break;case"S":v=n,y=i;var T=a.len(),k=a.data;e===s.C&&(v+=n-k[T-4],y+=i-k[T-3]),C=f[m++],M=f[m++],n=f[m++],i=f[m++],a.addData(u=s.C,v,y,C,M,n,i);break;case"s":v=n,y=i,T=a.len(),k=a.data,e===s.C&&(v+=n-k[T-4],y+=i-k[T-3]),C=n+f[m++],M=i+f[m++],n+=f[m++],i+=f[m++],a.addData(u=s.C,v,y,C,M,n,i);break;case"Q":C=f[m++],M=f[m++],n=f[m++],i=f[m++],a.addData(u=s.Q,C,M,n,i);break;case"q":C=f[m++]+n,M=f[m++]+i,n+=f[m++],i+=f[m++],a.addData(u=s.Q,C,M,n,i);break;case"T":v=n,y=i,T=a.len(),k=a.data,e===s.Q&&(v+=n-k[T-4],y+=i-k[T-3]),n=f[m++],i=f[m++],a.addData(u=s.Q,v,y,n,i);break;case"t":v=n,y=i,T=a.len(),k=a.data,e===s.Q&&(v+=n-k[T-4],y+=i-k[T-3]),n+=f[m++],i+=f[m++],a.addData(u=s.Q,v,y,n,i);break;case"A":x=f[m++],b=f[m++],_=f[m++],w=f[m++],S=f[m++],Ma(C=n,M=i,n=f[m++],i=f[m++],w,S,x,b,_,u=s.A,a);break;case"a":x=f[m++],b=f[m++],_=f[m++],w=f[m++],S=f[m++],Ma(C=n,M=i,n+=f[m++],i+=f[m++],w,S,x,b,_,u=s.A,a)}}"z"!==h&&"Z"!==h||(a.addData(u=s.Z),n=o,i=r),e=u}return a.toStatic(),a}(t);return(e=e||{}).buildPath=function(t){if(t.setData)t.setData(n.data),(e=t.getContext())&&t.rebuildPath(e);else{var e=t;n.rebuildPath(e)}},e.applyTransform=function(t){(function(t,e){var n,i,o,r,a,s=t.data,l=ga.M,c=ga.C,u=ga.L,d=ga.R,h=ga.A,f=ga.Q;for(r=o=0;o<s.length;){switch(n=s[o++],r=o,i=0,n){case l:case u:i=1;break;case c:i=3;break;case f:i=2;break;case h:var p=e[4],g=e[5],m=va(e[0]*e[0]+e[1]*e[1]),v=va(e[2]*e[2]+e[3]*e[3]),y=ya(-e[1]/v,e[0]/m);s[o]*=m,s[o++]+=p,s[o]*=v,s[o++]+=g,s[o++]*=m,s[o++]*=v,s[o++]+=y,s[o++]+=y,r=o+=2;break;case d:x[0]=s[o++],x[1]=s[o++],bt(x,x,e),s[r++]=x[0],s[r++]=x[1],x[0]+=s[o++],x[1]+=s[o++],bt(x,x,e),s[r++]=x[0],s[r++]=x[1]}for(a=0;a<i;a++){var x;(x=ma[a])[0]=s[o++],x[1]=s[o++],bt(x,x,e),s[r++]=x[0],s[r++]=x[1]}}})(n,t),this.dirty(!0)},e}function Ia(t,e){return new fa(Aa(t,e))}var Da=function(t){Hi.call(this,t)};function Pa(t){return o.browser.ie&&11<=o.browser.version?function(){var e,n=this.__clipPaths,i=this.style;if(n)for(var o=0;o<n.length;o++){var r=n[o],a=r&&r.shape,s=r&&r.type;if(a&&("sector"===s&&a.startAngle===a.endAngle||"rect"===s&&(!a.width||!a.height))){for(var l=0;l<Na.length;l++)Na[l][2]=i[Na[l][0]],i[Na[l][0]]=Na[l][1];e=!0;break}}if(t.apply(this,arguments),e)for(l=0;l<Na.length;l++)i[Na[l][0]]=Na[l][2]}:t}Da.prototype={constructor:Da,type:"text",brush:function(t,e){var n=this.style;this.__dirty&&Ci(n),n.fill=n.stroke=n.shadowBlur=n.shadowColor=n.shadowOffsetX=n.shadowOffsetY=null;var i=n.text;null!=i&&(i+=""),zi(i,n)?(this.setTransform(t),Ti(this,t,i,n,null,e),this.restoreTransform(t)):t.__attrCachedBy=0},getBoundingRect:function(){var t=this.style;if(this.__dirty&&Ci(t),!this._rect){var e=t.text;null!=e?e+="":e="";var n=oi(t.text+"",t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.textLineHeight,t.rich);if(n.x+=t.x||0,n.y+=t.y||0,Li(t.textStroke,t.textStrokeWidth)){var i=t.textStrokeWidth;n.x-=i/2,n.y-=i/2,n.width+=i,n.height+=i}this._rect=n}return this._rect}},C(Da,Hi);var Ea=fa.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,n){n&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}}),Na=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]],La=fa.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:Pa(fa.prototype.brush),buildPath:function(t,e){var n=e.cx,i=e.cy,o=Math.max(e.r0||0,0),r=Math.max(e.r,0),a=e.startAngle,s=e.endAngle,l=e.clockwise,c=Math.cos(a),u=Math.sin(a);t.moveTo(c*o+n,u*o+i),t.lineTo(c*r+n,u*r+i),t.arc(n,i,r,a,s,!l),t.lineTo(Math.cos(s)*o+n,Math.sin(s)*o+i),0!==o&&t.arc(n,i,o,s,a,l),t.closePath()}}),Ra=fa.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var n=e.cx,i=e.cy,o=2*Math.PI;t.moveTo(n+e.r,i),t.arc(n,i,e.r,0,o,!1),t.moveTo(n+e.r0,i),t.arc(n,i,e.r0,0,o,!0)}});function Oa(t,e,n,i,o,r,a){var s=.5*(n-t),l=.5*(i-e);return(2*(e-n)+s+l)*a+(-3*(e-n)-2*s-l)*r+s*o+e}function Ba(t,e,n){var i=e.points,o=e.smooth;if(i&&2<=i.length){if(o&&"spline"!==o){var r=function(t,e,n,i){var o,r,a,s,l=[],c=[],u=[],d=[];if(i){a=[1/0,1/0],s=[-1/0,-1/0];for(var h=0,f=t.length;h<f;h++)_t(a,a,t[h]),wt(s,s,t[h]);_t(a,a,i[0]),wt(s,s,i[1])}for(h=0,f=t.length;h<f;h++){var p=t[h];if(n)o=t[h?h-1:f-1],r=t[(h+1)%f];else{if(0===h||h===f-1){l.push(at(t[h]));continue}o=t[h-1],r=t[h+1]}ut(c,r,o),ft(c,c,e);var g=gt(p,o),m=gt(p,r),v=g+m;0!==v&&(g/=v,m/=v),ft(u,c,-g),ft(d,c,m);var y=lt([],p,u),x=lt([],p,d);i&&(wt(y,y,a),_t(y,y,s),wt(x,x,a),_t(x,x,s)),l.push(y),l.push(x)}return n&&l.push(l.shift()),l}(i,o,n,e.smoothConstraint);t.moveTo(i[0][0],i[0][1]);for(var a=i.length,s=0;s<(n?a:a-1);s++){var l=r[2*s],c=r[2*s+1],u=i[(s+1)%a];t.bezierCurveTo(l[0],l[1],c[0],c[1],u[0],u[1])}}else{"spline"===o&&(i=function(t,e){for(var n=t.length,i=[],o=0,r=1;r<n;r++)o+=gt(t[r-1],t[r]);var a=o/2;for(a=a<n?n:a,r=0;r<a;r++){var s,l,c,u=r/(a-1)*(e?n:n-1),d=Math.floor(u),h=u-d,f=t[d%n];c=e?(s=t[(d-1+n)%n],l=t[(d+1)%n],t[(d+2)%n]):(s=t[0===d?d:d-1],l=t[n-2<d?n-1:d+1],t[n-3<d?n-1:d+2]);var p=h*h,g=h*p;i.push([Oa(s[0],f[0],l[0],c[0],h,p,g),Oa(s[1],f[1],l[1],c[1],h,p,g)])}return i}(i,n)),t.moveTo(i[0][0],i[0][1]),s=1;for(var d=i.length;s<d;s++)t.lineTo(i[s][0],i[s][1])}n&&t.closePath()}}var za=fa.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){Ba(t,e,!0)}}),Va=fa.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){Ba(t,e,!1)}}),Fa=Math.round;function Ha(t,e,n){if(e){var i=e.x1,o=e.x2,r=e.y1,a=e.y2;t.x1=i,t.x2=o,t.y1=r,t.y2=a;var s=n&&n.lineWidth;s&&(Fa(2*i)===Fa(2*o)&&(t.x1=t.x2=Ga(i,s,!0)),Fa(2*r)===Fa(2*a)&&(t.y1=t.y2=Ga(r,s,!0)))}}function Wa(t,e,n){if(e){var i=e.x,o=e.y,r=e.width,a=e.height;t.x=i,t.y=o,t.width=r,t.height=a;var s=n&&n.lineWidth;s&&(t.x=Ga(i,s,!0),t.y=Ga(o,s,!0),t.width=Math.max(Ga(i+r,s,!1)-t.x,0===r?0:1),t.height=Math.max(Ga(o+a,s,!1)-t.y,0===a?0:1))}}function Ga(t,e,n){if(!e)return t;var i=Fa(2*t);return(i+Fa(e))%2==0?i/2:(i+(n?1:-1))/2}var Ua={},ja=fa.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var n,i,o,r;this.subPixelOptimize?(Wa(Ua,e,this.style),n=Ua.x,i=Ua.y,o=Ua.width,r=Ua.height,Ua.r=e.r,e=Ua):(n=e.x,i=e.y,o=e.width,r=e.height),e.r?vi(t,e):t.rect(n,i,o,r),t.closePath()}}),$a={},qa=fa.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n,i,o,r;r=this.subPixelOptimize?(Ha($a,e,this.style),n=$a.x1,i=$a.y1,o=$a.x2,$a.y2):(n=e.x1,i=e.y1,o=e.x2,e.y2);var a=e.percent;0!==a&&(t.moveTo(n,i),a<1&&(o=n*(1-a)+o*a,r=i*(1-a)+r*a),t.lineTo(o,r))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}}),Ya=[];function Xa(t,e,n){return null===t.cpx2||null===t.cpy2?[(n?pr:fr)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?pr:fr)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?yr:vr)(t.x1,t.cpx1,t.x2,e),(n?yr:vr)(t.y1,t.cpy1,t.y2,e)]}function Za(t){this.colorStops=t||[]}var Ka=fa.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.x1,i=e.y1,o=e.x2,r=e.y2,a=e.cpx1,s=e.cpy1,l=e.cpx2,c=e.cpy2,u=e.percent;0!==u&&(t.moveTo(n,i),null==l||null==c?(u<1&&(br(n,a,o,u,Ya),a=Ya[1],o=Ya[2],br(i,s,r,u,Ya),s=Ya[1],r=Ya[2]),t.quadraticCurveTo(a,s,o,r)):(u<1&&(mr(n,a,l,o,u,Ya),a=Ya[1],l=Ya[2],o=Ya[3],mr(i,s,c,r,u,Ya),s=Ya[1],c=Ya[2],r=Ya[3]),t.bezierCurveTo(a,s,l,c,o,r)))},pointAt:function(t){return Xa(this.shape,t,!1)},tangentAt:function(t){var e=Xa(this.shape,t,!0);return pt(e,e)}}),Ja=fa.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.cx,i=e.cy,o=Math.max(e.r,0),r=e.startAngle,a=e.endAngle,s=e.clockwise,l=Math.cos(r),c=Math.sin(r);t.moveTo(l*o+n,c*o+i),t.arc(n,i,o,r,a,!s)}}),Qa=fa.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var t=this.__dirtyPath,e=this.shape.paths,n=0;n<e.length;n++)t=t||e[n].__dirtyPath;this.__dirtyPath=t,this.__dirty=this.__dirty||t},beforeBrush:function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(e[0],e[1],t[n].segmentIgnoreThreshold)},buildPath:function(t,e){for(var n=e.paths||[],i=0;i<n.length;i++)n[i].buildPath(t,n[i].shape,!0)},afterBrush:function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),fa.prototype.getBoundingRect.call(this)}});function ts(t,e,n,i,o,r){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==n?1:n,this.y2=null==i?0:i,this.type="linear",this.global=r||!1,Za.call(this,o)}function es(t,e,n,i,o){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==n?.5:n,this.type="radial",this.global=o||!1,Za.call(this,i)}function ns(t){Hi.call(this,t),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}Za.prototype={constructor:Za,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}},ts.prototype={constructor:ts},C(ts,Za),es.prototype={constructor:es},C(es,Za),ns.prototype.incremental=!0,ns.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},ns.prototype.addDisplayable=function(t,e){e?this._temporaryDisplayables.push(t):this._displayables.push(t),this.dirty()},ns.prototype.addDisplayables=function(t,e){e=e||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],e)},ns.prototype.eachPendingDisplayable=function(t){for(var e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},ns.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++)(e=this._displayables[t]).parent=this,e.update(),e.parent=null;for(t=0;t<this._temporaryDisplayables.length;t++){var e;(e=this._temporaryDisplayables[t]).parent=this,e.update(),e.parent=null}},ns.prototype.brush=function(t,e){for(var n=this._cursor;n<this._displayables.length;n++)(i=this._displayables[n]).beforeBrush&&i.beforeBrush(t),i.brush(t,n===this._cursor?null:this._displayables[n-1]),i.afterBrush&&i.afterBrush(t);for(this._cursor=n,n=0;n<this._temporaryDisplayables.length;n++){var i;(i=this._temporaryDisplayables[n]).beforeBrush&&i.beforeBrush(t),i.brush(t,0===n?null:this._temporaryDisplayables[n-1]),i.afterBrush&&i.afterBrush(t)}this._temporaryDisplayables=[],this.notClear=!0};var is=[];ns.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new Sn(1/0,1/0,-1/0,-1/0),e=0;e<this._displayables.length;e++){var n=this._displayables[e],i=n.getBoundingRect().clone();n.needLocalTransform()&&i.applyTransform(n.getLocalTransform(is)),t.union(i)}this._rect=t}return this._rect},ns.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e);if(this.getBoundingRect().contain(n[0],n[1]))for(var i=0;i<this._displayables.length;i++)if(this._displayables[i].contain(t,e))return!0;return!1},C(ns,Hi);var os=Math.max,rs=Math.min,as={},ss={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},ls="emphasis",cs="normal",us=1,ds={},hs={};function fs(t){return fa.extend(t)}function ps(t,e){hs[t]=e}function gs(t){if(hs.hasOwnProperty(t))return hs[t]}function ms(t,e,n,i){var o=Ia(t,e);return n&&("center"===i&&(n=ys(n,o.getBoundingRect())),bs(o,n)),o}function vs(t,e,n){var i=new Wi({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(t){"center"===n&&i.setStyle(ys(e,{width:t.width,height:t.height}))}});return i}function ys(t,e){var n,i=e.width/e.height,o=t.height*i;return n=o<=t.width?t.height:(o=t.width)/i,{x:t.x+t.width/2-o/2,y:t.y+t.height/2-n/2,width:o,height:n}}var xs=function(t,e){for(var n=[],i=t.length,o=0;o<i;o++){var r=t[o];r.path||r.createPathProxy(),r.__dirtyPath&&r.buildPath(r.path,r.shape,!0),n.push(r.path)}var a=new fa(e);return a.createPathProxy(),a.buildPath=function(t){t.appendPath(n);var e=t.getContext();e&&t.rebuildPath(e)},a};function bs(t,e){if(t.applyTransform){var n=t.getBoundingRect().calculateTransform(e);t.applyTransform(n)}}var _s=Ga;function ws(t){return null!=t&&"none"!==t}var Ss=Q(),Cs=0;function Ms(t){var e=t.__hoverStl;if(e&&!t.__highlighted){var n=t.__zr,i=t.useHoverLayer&&n&&"canvas"===n.painter.type;if(t.__highlighted=i?"layer":"plain",!(t.isGroup||!n&&t.useHoverLayer)){var o=t,r=t.style;i&&(r=(o=n.addHover(t)).style),$s(r),i||function(t){if(t.__hoverStlDirty){t.__hoverStlDirty=!1;var e=t.__hoverStl;if(e){var n=t.__cachedNormalStl={};t.__cachedNormalZ2=t.z2;var i=t.style;for(var o in e)null!=e[o]&&(n[o]=i[o]);n.fill=i.fill,n.stroke=i.stroke}else t.__cachedNormalStl=t.__cachedNormalZ2=null}}(o),r.extendFrom(e),Ts(r,e,"fill"),Ts(r,e,"stroke"),js(r),i||(t.dirty(!1),t.z2+=1)}}}function Ts(t,e,n){!ws(e[n])&&ws(t[n])&&(t[n]=function(t){if("string"!=typeof t)return t;var e=Ss.get(t);return e||(e=He(t,-.1),Cs<1e4&&(Ss.set(t,e),Cs++)),e}(t[n]))}function ks(t){var e=t.__highlighted;if(e&&(t.__highlighted=!1,!t.isGroup))if("layer"===e)t.__zr&&t.__zr.removeHover(t);else{var n=t.style,i=t.__cachedNormalStl;i&&($s(n),t.setStyle(i),js(n));var o=t.__cachedNormalZ2;null!=o&&t.z2-o==1&&(t.z2=o)}}function As(t,e,n){var i,o=cs,r=cs;t.__highlighted&&(o=ls,i=!0),e(t,n),t.__highlighted&&(r=ls,i=!0),t.isGroup&&t.traverse(function(t){t.isGroup||e(t,n)}),i&&t.__highDownOnUpdate&&t.__highDownOnUpdate(o,r)}function Is(t,e){e=t.__hoverStl=!1!==e&&(t.hoverStyle||e||{}),t.__hoverStlDirty=!0,t.__highlighted&&(t.__cachedNormalStl=null,ks(t),Ms(t))}function Ds(t){Ls(this,t)||this.__highByOuter||As(this,Ms)}function Ps(t){Ls(this,t)||this.__highByOuter||As(this,ks)}function Es(t){this.__highByOuter|=1<<(t||0),As(this,Ms)}function Ns(t){(this.__highByOuter&=~(1<<(t||0)))||As(this,ks)}function Ls(t,e){return t.__highDownSilentOnTouch&&e.zrByTouch}function Rs(t,e){Os(t,!0),As(t,Is,e)}function Os(t,e){var n=!1===e;if(t.__highDownSilentOnTouch=t.highDownSilentOnTouch,t.__highDownOnUpdate=t.highDownOnUpdate,!n||t.__highDownDispatcher){var i=n?"off":"on";t[i]("mouseover",Ds)[i]("mouseout",Ps),t[i]("emphasis",Es)[i]("normal",Ns),t.__highByOuter=t.__highByOuter||0,t.__highDownDispatcher=!n}}function Bs(t){return!(!t||!t.__highDownDispatcher)}function zs(t){var e=ds[t];return null==e&&us<=32&&(e=ds[t]=us++),e}function Vs(t,e,n,i,o,r,a){var s,l=(o=o||as).labelFetcher,c=o.labelDataIndex,u=o.labelDimIndex,d=o.labelProp,h=n.getShallow("show"),f=i.getShallow("show");(h||f)&&(l&&(s=l.getFormattedLabel(c,"normal",null,u,d)),null==s&&(s=R(o.defaultText)?o.defaultText(c,o):o.defaultText));var p=h?s:null,g=f?G(l?l.getFormattedLabel(c,"emphasis",null,u,d):null,s):null;null==p&&null==g||(Hs(t,n,r,o),Hs(e,i,a,o,!0)),t.text=p,e.text=g}function Fs(t,e,n){var i=t.style;e&&($s(i),t.setStyle(e),js(i)),i=t.__hoverStl,n&&i&&($s(i),x(i,n),js(i))}function Hs(t,e,n,i,o){return Ws(t,e,i,o),n&&x(t,n),t}function Ws(t,e,n,i){if((n=n||as).isRectText){var o;n.getTextPosition?o=n.getTextPosition(e,i):"outside"===(o=e.getShallow("position")||(i?null:"inside"))&&(o="top"),t.textPosition=o,t.textOffset=e.getShallow("offset");var r=e.getShallow("rotate");null!=r&&(r*=Math.PI/180),t.textRotation=r,t.textDistance=G(e.getShallow("distance"),i?null:5)}var a,s=e.ecModel,l=s&&s.option.textStyle,c=function(t){for(var e;t&&t!==t.ecModel;){var n=(t.option||as).rich;if(n)for(var i in e=e||{},n)n.hasOwnProperty(i)&&(e[i]=1);t=t.parentModel}return e}(e);if(c)for(var u in a={},c)if(c.hasOwnProperty(u)){var d=e.getModel(["rich",u]);Gs(a[u]={},d,l,n,i)}return t.rich=a,Gs(t,e,l,n,i,!0),n.forceRich&&!n.textStyle&&(n.textStyle={}),t}function Gs(t,e,n,i,o,r){n=!o&&n||as,t.textFill=Us(e.getShallow("color"),i)||n.color,t.textStroke=Us(e.getShallow("textBorderColor"),i)||n.textBorderColor,t.textStrokeWidth=G(e.getShallow("textBorderWidth"),n.textBorderWidth),o||(r&&(t.insideRollbackOpt=i,js(t)),null==t.textFill&&(t.textFill=i.autoColor)),t.fontStyle=e.getShallow("fontStyle")||n.fontStyle,t.fontWeight=e.getShallow("fontWeight")||n.fontWeight,t.fontSize=e.getShallow("fontSize")||n.fontSize,t.fontFamily=e.getShallow("fontFamily")||n.fontFamily,t.textAlign=e.getShallow("align"),t.textVerticalAlign=e.getShallow("verticalAlign")||e.getShallow("baseline"),t.textLineHeight=e.getShallow("lineHeight"),t.textWidth=e.getShallow("width"),t.textHeight=e.getShallow("height"),t.textTag=e.getShallow("tag"),r&&i.disableBox||(t.textBackgroundColor=Us(e.getShallow("backgroundColor"),i),t.textPadding=e.getShallow("padding"),t.textBorderColor=Us(e.getShallow("borderColor"),i),t.textBorderWidth=e.getShallow("borderWidth"),t.textBorderRadius=e.getShallow("borderRadius"),t.textBoxShadowColor=e.getShallow("shadowColor"),t.textBoxShadowBlur=e.getShallow("shadowBlur"),t.textBoxShadowOffsetX=e.getShallow("shadowOffsetX"),t.textBoxShadowOffsetY=e.getShallow("shadowOffsetY")),t.textShadowColor=e.getShallow("textShadowColor")||n.textShadowColor,t.textShadowBlur=e.getShallow("textShadowBlur")||n.textShadowBlur,t.textShadowOffsetX=e.getShallow("textShadowOffsetX")||n.textShadowOffsetX,t.textShadowOffsetY=e.getShallow("textShadowOffsetY")||n.textShadowOffsetY}function Us(t,e){return"auto"!==t?t:e&&e.autoColor?e.autoColor:null}function js(t){var e,n=t.textPosition,i=t.insideRollbackOpt;if(i&&null==t.textFill){var o=i.autoColor,r=i.useInsideStyle,a=!1!==r&&(!0===r||i.isRectText&&n&&"string"==typeof n&&0<=n.indexOf("inside")),s=!a&&null!=o;(a||s)&&(e={textFill:t.textFill,textStroke:t.textStroke,textStrokeWidth:t.textStrokeWidth}),a&&(t.textFill="#fff",null==t.textStroke&&(t.textStroke=o,null==t.textStrokeWidth&&(t.textStrokeWidth=2))),s&&(t.textFill=o)}t.insideRollback=e}function $s(t){var e=t.insideRollback;e&&(t.textFill=e.textFill,t.textStroke=e.textStroke,t.textStrokeWidth=e.textStrokeWidth,t.insideRollback=null)}function qs(t,e){var n=e&&e.getModel("textStyle");return Y([t.fontStyle||n&&n.getShallow("fontStyle")||"",t.fontWeight||n&&n.getShallow("fontWeight")||"",(t.fontSize||n&&n.getShallow("fontSize")||12)+"px",t.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}function Ys(t,e,n,i,o,r){if("function"==typeof o&&(r=o,o=null),i&&i.isAnimationEnabled()){var a=t?"Update":"",s=i.getShallow("animationDuration"+a),l=i.getShallow("animationEasing"+a),c=i.getShallow("animationDelay"+a);"function"==typeof c&&(c=c(o,i.getAnimationDelayParams?i.getAnimationDelayParams(e,o):null)),"function"==typeof s&&(s=s(o)),0<s?e.animateTo(n,s,c||0,l,r,!!r):(e.stopAnimation(),e.attr(n),r&&r())}else e.stopAnimation(),e.attr(n),r&&r()}function Xs(t,e,n,i,o){Ys(!0,t,e,n,i,o)}function Zs(t,e,n,i,o){Ys(!1,t,e,n,i,o)}function Ks(t,e){for(var n=oe([]);t&&t!==e;)ae(n,t.getLocalTransform(),n),t=t.parent;return n}function Js(t,e,n){return e&&!T(e)&&(e=ge.getLocalTransform(e)),n&&(e=ue([],e)),bt([],t,e)}function Qs(t,e,n){var i=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),o=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),r=["left"===t?-i:"right"===t?i:0,"top"===t?-o:"bottom"===t?o:0];return r=Js(r,e,n),Math.abs(r[0])>Math.abs(r[1])?0<r[0]?"right":"left":0<r[1]?"bottom":"top"}function tl(t,e,n,i){if(t&&e){var o,r=(o={},t.traverse(function(t){!t.isGroup&&t.anid&&(o[t.anid]=t)}),o);e.traverse(function(t){if(!t.isGroup&&t.anid){var e=r[t.anid];if(e){var i=a(t);t.attr(a(e)),Xs(t,i,n,t.dataIndex)}}})}function a(t){var e={position:at(t.position),rotation:t.rotation};return t.shape&&(e.shape=x({},t.shape)),e}}function el(t,e){return A(t,function(t){var n=t[0];n=os(n,e.x),n=rs(n,e.x+e.width);var i=t[1];return i=os(i,e.y),[n,i=rs(i,e.y+e.height)]})}function nl(t,e,n){var i=(e=x({rectHover:!0},e)).style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return 0===t.indexOf("image://")?(i.image=t.slice(8),b(i,n),new Wi(e)):ms(t.replace("path://",""),e,n,"center")}function il(t,e,n,i,o){for(var r=0,a=o[o.length-1];r<o.length;r++){var s=o[r];if(ol(t,e,n,i,s[0],s[1],a[0],a[1]))return!0;a=s}}function ol(t,e,n,i,o,r,a,s){var l=n-t,c=i-e,u=a-o,d=s-r,h=rl(u,d,l,c);if(function(t){return t<=1e-6&&-1e-6<=t}(h))return!1;var f=t-o,p=e-r,g=rl(f,p,l,c)/h;if(g<0||1<g)return!1;var m=rl(f,p,u,d)/h;return!(m<0||1<m)}function rl(t,e,n,i){return t*i-n*e}ps("circle",Ea),ps("sector",La),ps("ring",Ra),ps("polygon",za),ps("polyline",Va),ps("rect",ja),ps("line",qa),ps("bezierCurve",Ka),ps("arc",Ja);var al=(Object.freeze||Object)({Z2_EMPHASIS_LIFT:1,CACHED_LABEL_STYLE_PROPERTIES:ss,extendShape:fs,extendPath:function(t,e){return function(t,e){return fa.extend(Aa(t,e))}(t,e)},registerShape:ps,getShapeClass:gs,makePath:ms,makeImage:vs,mergePath:xs,resizePath:bs,subPixelOptimizeLine:function(t){return Ha(t.shape,t.shape,t.style),t},subPixelOptimizeRect:function(t){return Wa(t.shape,t.shape,t.style),t},subPixelOptimize:_s,setElementHoverStyle:Is,setHoverStyle:Rs,setAsHighDownDispatcher:Os,isHighDownDispatcher:Bs,getHighlightDigit:zs,setLabelStyle:Vs,modifyLabelStyle:Fs,setTextStyle:Hs,setText:function(t,e,n){var i,o={isRectText:!0};!1===n?i=!0:o.autoColor=n,Ws(t,e,o,i)},getFont:qs,updateProps:Xs,initProps:Zs,getTransform:Ks,applyTransform:Js,transformDirection:Qs,groupTransition:tl,clipPointsByRect:el,clipRectByRect:function(t,e){var n=os(t.x,e.x),i=rs(t.x+t.width,e.x+e.width),o=os(t.y,e.y),r=rs(t.y+t.height,e.y+e.height);if(n<=i&&o<=r)return{x:n,y:o,width:i-n,height:r-o}},createIcon:nl,linePolygonIntersect:il,lineLineIntersect:ol,Group:Cn,Image:Wi,Text:Da,Circle:Ea,Sector:La,Ring:Ra,Polygon:za,Polyline:Va,Rect:ja,Line:qa,BezierCurve:Ka,Arc:Ja,IncrementalDisplayable:ns,CompoundPath:Qa,LinearGradient:ts,RadialGradient:es,BoundingRect:Sn}),sl=["textStyle","color"],ll={getTextColor:function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(sl):null)},getFont:function(){return qs({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(t){return oi(t,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}},cl=Ko([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),ul={getItemStyle:function(t,e){var n=cl(this,t,e),i=this.getBorderLineDash();return i&&(n.lineDash=i),n},getBorderLineDash:function(){var t=this.get("borderType");return"solid"===t||null==t?null:"dashed"===t?[5,5]:[1,1]}},dl=M,hl=Oo();function fl(t,e,n){this.parentModel=e,this.ecModel=n,this.option=t}function pl(t,e,n){for(var i=0;i<e.length&&(!e[i]||null!=(t=t&&"object"==typeof t?t[e[i]]:null));i++);return null==t&&n&&(t=n.get(e)),t}function gl(t,e){var n=hl(t).getParent;return n?n.call(t,e):t.parentModel}fl.prototype={constructor:fl,init:null,mergeOption:function(t){v(this.option,t,!0)},get:function(t,e){return null==t?this.option:pl(this.option,this.parsePath(t),!e&&gl(this,t))},getShallow:function(t,e){var n=this.option,i=null==n?n:n[t],o=!e&&gl(this,t);return null==i&&o&&(i=o.getShallow(t)),i},getModel:function(t,e){var n;return new fl(null==t?this.option:pl(this.option,t=this.parsePath(t)),e=e||(n=gl(this,t))&&n.getModel(t),this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new this.constructor(m(this.option))},setReadOnly:function(t){},parsePath:function(t){return"string"==typeof t&&(t=t.split(".")),t},customizeGetParent:function(t){hl(this).getParent=t},isAnimationEnabled:function(){if(!o.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},jo(fl),qo(fl),dl(fl,Qo),dl(fl,er),dl(fl,ll),dl(fl,ul);var ml=0;function vl(t){return[t||"",ml++,Math.random().toFixed(5)].join("_")}var yl=1e-4;function xl(t,e,n,i){var o=e[1]-e[0],r=n[1]-n[0];if(0==o)return 0==r?n[0]:(n[0]+n[1])/2;if(i)if(0<o){if(t<=e[0])return n[0];if(t>=e[1])return n[1]}else{if(t>=e[0])return n[0];if(t<=e[1])return n[1]}else{if(t===e[0])return n[0];if(t===e[1])return n[1]}return(t-e[0])/o*r+n[0]}function bl(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}return"string"==typeof t?function(t){return t.replace(/^\s+|\s+$/g,"")}(t).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t}function _l(t,e,n){return null==e&&(e=10),e=Math.min(Math.max(0,e),20),t=(+t).toFixed(e),n?t:+t}function wl(t){return t.sort(function(t,e){return t-e}),t}function Sl(t){if(t=+t,isNaN(t))return 0;for(var e=1,n=0;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Cl(t){var e=t.toString(),n=e.indexOf("e");if(0<n){var i=+e.slice(n+1);return i<0?-i:0}var o=e.indexOf(".");return o<0?0:e.length-1-o}function Ml(t,e){var n=Math.log,i=Math.LN10,o=Math.floor(n(t[1]-t[0])/i),r=Math.round(n(Math.abs(e[1]-e[0]))/i),a=Math.min(Math.max(-o+r,0),20);return isFinite(a)?a:20}function Tl(t,e,n){if(!t[e])return 0;var i=I(t,function(t,e){return t+(isNaN(e)?0:e)},0);if(0===i)return 0;for(var o=Math.pow(10,n),r=A(t,function(t){return(isNaN(t)?0:t)/i*o*100}),a=100*o,s=A(r,function(t){return Math.floor(t)}),l=I(s,function(t,e){return t+e},0),c=A(r,function(t,e){return t-s[e]});l<a;){for(var u=Number.NEGATIVE_INFINITY,d=null,h=0,f=c.length;h<f;++h)c[h]>u&&(u=c[h],d=h);++s[d],c[d]=0,++l}return s[e]/o}var kl=9007199254740991;function Al(t){var e=2*Math.PI;return(t%e+e)%e}function Il(t){return-yl<t&&t<yl}var Dl=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Pl(t){if(t instanceof Date)return t;if("string"!=typeof t)return null==t?new Date(NaN):new Date(Math.round(t));var e=Dl.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(n-=e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,+e[7]||0))}return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,+e[7]||0)}function El(t){return Math.pow(10,Nl(t))}function Nl(t){if(0===t)return 0;var e=Math.floor(Math.log(t)/Math.LN10);return 10<=t/Math.pow(10,e)&&e++,e}function Ll(t,e){var n=Nl(t),i=Math.pow(10,n),o=t/i;return t=(e?o<1.5?1:o<2.5?2:o<4?3:o<7?5:10:o<1?1:o<2?2:o<3?3:o<5?5:10)*i,-20<=n?+t.toFixed(n<0?-n:0):t}function Rl(t){t.sort(function(t,e){return function t(e,n,i){return e.interval[i]<n.interval[i]||e.interval[i]===n.interval[i]&&(e.close[i]-n.close[i]==(i?-1:1)||!i&&t(e,n,1))}(t,e,0)?-1:1});for(var e=-1/0,n=1,i=0;i<t.length;){for(var o=t[i].interval,r=t[i].close,a=0;a<2;a++)o[a]<=e&&(o[a]=e,r[a]=a?1:1-n),e=o[a],n=r[a];o[0]===o[1]&&r[0]*r[1]!=1?t.splice(i,1):i++}return t}function Ol(t){return 0<=t-parseFloat(t)}var Bl=(Object.freeze||Object)({linearMap:xl,parsePercent:bl,round:_l,asc:wl,getPrecision:Sl,getPrecisionSafe:Cl,getPixelPrecision:Ml,getPercentWithPrecision:Tl,MAX_SAFE_INTEGER:kl,remRadian:Al,isRadianAroundZero:Il,parseDate:Pl,quantity:El,quantityExponent:Nl,nice:Ll,quantile:function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),o=+t[i-1],r=n-i;return r?o+r*(t[i]-o):o},reformIntervals:Rl,isNumeric:Ol});function zl(t){return isNaN(t)?"-":(t=(t+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(1<t.length?"."+t[1]:"")}function Vl(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()}),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var Fl=$,Hl=/([&<>"'])/g,Wl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Gl(t){return null==t?"":(t+"").replace(Hl,function(t,e){return Wl[e]})}function Ul(t,e){return"{"+t+(null==e?"":e)+"}"}var jl=["a","b","c","d","e","f","g"];function $l(t,e,n){L(e)||(e=[e]);var i=e.length;if(!i)return"";for(var o=e[0].$vars||[],r=0;r<o.length;r++){var a=jl[r];t=t.replace(Ul(a),Ul(a,0))}for(var s=0;s<i;s++)for(var l=0;l<o.length;l++){var c=e[s][o[l]];t=t.replace(Ul(jl[l],s),n?Gl(c):c)}return t}function ql(t,e,n){return k(e,function(e,i){t=t.replace("{"+i+"}",n?Gl(e):e)}),t}function Yl(t,e){var n=(t=O(t)?{color:t,extraCssText:e}:t||{}).color,i=(e=t.extraCssText,t.renderMode||"html"),o=t.markerId||"X";return n?"html"===i?"subItem"===t.type?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Gl(n)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+Gl(n)+";"+(e||"")+'"></span>':{renderMode:i,content:"{marker"+o+"|}  ",style:{color:n}}:""}function Xl(t,e){return"0000".substr(0,e-(t+="").length)+t}function Zl(t,e,n){"week"!==t&&"month"!==t&&"quarter"!==t&&"half-year"!==t&&"year"!==t||(t="MM-dd\nyyyy");var i=Pl(e),o=n?"UTC":"",r=i["get"+o+"FullYear"](),a=i["get"+o+"Month"]()+1,s=i["get"+o+"Date"](),l=i["get"+o+"Hours"](),c=i["get"+o+"Minutes"](),u=i["get"+o+"Seconds"](),d=i["get"+o+"Milliseconds"]();return t.replace("MM",Xl(a,2)).replace("M",a).replace("yyyy",r).replace("yy",r%100).replace("dd",Xl(s,2)).replace("d",s).replace("hh",Xl(l,2)).replace("h",l).replace("mm",Xl(c,2)).replace("m",c).replace("ss",Xl(u,2)).replace("s",u).replace("SSS",Xl(d,3))}function Kl(t){return t?t.charAt(0).toUpperCase()+t.substr(1):t}var Jl=li;function Ql(t,e){if("_blank"===e||"blank"===e){var n=window.open();n.opener=null,n.location=t}else window.open(t,e)}var tc=(Object.freeze||Object)({addCommas:zl,toCamelCase:Vl,normalizeCssArray:Fl,encodeHTML:Gl,formatTpl:$l,formatTplSimple:ql,getTooltipMarker:Yl,formatTime:Zl,capitalFirst:Kl,truncateText:Jl,getTextBoundingRect:function(t){return oi(t.text,t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.textLineHeight,t.rich,t.truncate)},getTextRect:function(t,e,n,i,o,r,a,s){return oi(t,e,n,i,o,s,r,a)},windowOpen:Ql}),ec=k,nc=["left","right","top","bottom","width","height"],ic=[["width","left","right"],["height","top","bottom"]];function oc(t,e,n,i,o){var r=0,a=0;null==i&&(i=1/0),null==o&&(o=1/0);var s=0;e.eachChild(function(l,c){var u,d,h=l.position,f=l.getBoundingRect(),p=e.childAt(c+1),g=p&&p.getBoundingRect();if("horizontal"===t){var m=f.width+(g?-g.x+f.x:0);s=i<(u=r+m)||l.newline?(r=0,u=m,a+=s+n,f.height):Math.max(s,f.height)}else{var v=f.height+(g?-g.y+f.y:0);s=o<(d=a+v)||l.newline?(r+=s+n,a=0,d=v,f.width):Math.max(s,f.width)}l.newline||(h[0]=r,h[1]=a,"horizontal"===t?r=u+n:a=d+n)})}var rc=oc;function ac(t,e,n){n=Fl(n||0);var i=e.width,o=e.height,r=bl(t.left,i),a=bl(t.top,o),s=bl(t.right,i),l=bl(t.bottom,o),c=bl(t.width,i),u=bl(t.height,o),d=n[2]+n[0],h=n[1]+n[3],f=t.aspect;switch(isNaN(c)&&(c=i-s-h-r),isNaN(u)&&(u=o-l-d-a),null!=f&&(isNaN(c)&&isNaN(u)&&(i/o<f?c=.8*i:u=.8*o),isNaN(c)&&(c=f*u),isNaN(u)&&(u=c/f)),isNaN(r)&&(r=i-s-c-h),isNaN(a)&&(a=o-l-u-d),t.left||t.right){case"center":r=i/2-c/2-n[3];break;case"right":r=i-c-h}switch(t.top||t.bottom){case"middle":case"center":a=o/2-u/2-n[0];break;case"bottom":a=o-u-d}r=r||0,a=a||0,isNaN(c)&&(c=i-h-r-(s||0)),isNaN(u)&&(u=o-d-a-(l||0));var p=new Sn(r+n[3],a+n[0],c,u);return p.margin=n,p}function sc(t,e,n,i,o){var r=!o||!o.hv||o.hv[0],a=!o||!o.hv||o.hv[1],s=o&&o.boundingMode||"all";if(r||a){var l;if("raw"===s)l="group"===t.type?new Sn(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(l=t.getBoundingRect(),t.needLocalTransform()){var c=t.getLocalTransform();(l=l.clone()).applyTransform(c)}e=ac(b({width:l.width,height:l.height},e),n,i);var u=t.position,d=r?e.x-l.x:0,h=a?e.y-l.y:0;t.attr("position","raw"===s?[d,h]:[u[0]+d,u[1]+h])}}function lc(t,e,n){B(n)||(n={});var i=n.ignoreSize;L(i)||(i=[i,i]);var o=a(ic[0],0),r=a(ic[1],1);function a(n,o){var r={},a=0,c={},u=0;if(ec(n,function(e){c[e]=t[e]}),ec(n,function(t){s(e,t)&&(r[t]=c[t]=e[t]),l(r,t)&&a++,l(c,t)&&u++}),i[o])return l(e,n[1])?c[n[2]]=null:l(e,n[2])&&(c[n[1]]=null),c;if(2!==u&&a){if(2<=a)return r;for(var d=0;d<n.length;d++){var h=n[d];if(!s(r,h)&&s(t,h)){r[h]=t[h];break}}return r}return c}function s(t,e){return t.hasOwnProperty(e)}function l(t,e){return null!=t[e]&&"auto"!==t[e]}function c(t,e,n){ec(t,function(t){e[t]=n[t]})}c(ic[0],t,o),c(ic[1],t,r)}function cc(t){return uc({},t)}function uc(t,e){return e&&t&&ec(nc,function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}N(oc,"vertical"),N(oc,"horizontal");var dc,hc,fc,pc=Oo(),gc=fl.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(t,e,n,i){fl.call(this,t,e,n,i),this.uid=vl("ec_cpt_model")},init:function(t,e,n,i){this.mergeDefaultAndTheme(t,n)},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,i=n?cc(t):{};v(t,e.getTheme().get(this.mainType)),v(t,this.getDefaultOption()),n&&lc(t,i,n)},mergeOption:function(t,e){v(this.option,t,!0);var n=this.layoutMode;n&&lc(this.option,t,n)},optionUpdated:function(t,e){},getDefaultOption:function(){var t=pc(this);if(!t.defaultOption){for(var e=[],n=this.constructor;n;){var i=n.prototype.defaultOption;i&&e.push(i),n=n.superClass}for(var o={},r=e.length-1;0<=r;r--)o=v(o,e[r],!0);t.defaultOption=o}return t.defaultOption},getReferringComponents:function(t){return this.ecModel.queryComponents({mainType:t,index:this.get(t+"Index",!0),id:this.get(t+"Id",!0)})}});function mc(t,e){return t[e]||(t[e]={predecessor:[],successor:[]}),t[e]}Zo(gc,{registerWhenExtend:!0}),hc={},(dc=gc).registerSubTypeDefaulter=function(t,e){t=Uo(t),hc[t.main]=e},dc.determineSubType=function(t,e){var n=e.type;if(!n){var i=Uo(t).main;dc.hasSubTypes(t)&&hc[i]&&(n=hc[i](e))}return n},fc=function(t){var e=[];return k(gc.getClassesByMainType(t),function(t){e=e.concat(t.prototype.dependencies||[])}),e=A(e,function(t){return Uo(t).main}),"dataset"!==t&&S(e,"dataset")<=0&&e.unshift("dataset"),e},gc.topologicalTravel=function(t,e,n,i){if(t.length){var o=function(t){var e={},n=[];return k(t,function(i){var o=mc(e,i),r=function(t,e){var n=[];return k(t,function(t){0<=S(e,t)&&n.push(t)}),n}(o.originalDeps=fc(i),t);o.entryCount=r.length,0===o.entryCount&&n.push(i),k(r,function(t){S(o.predecessor,t)<0&&o.predecessor.push(t);var n=mc(e,t);S(n.successor,t)<0&&n.successor.push(i)})}),{graph:e,noEntryList:n}}(e),r=o.graph,a=o.noEntryList,s={};for(k(t,function(t){s[t]=!0});a.length;){var l=a.pop(),c=r[l],u=!!s[l];u&&(n.call(i,l,c.originalDeps.slice()),delete s[l]),k(c.successor,u?h:d)}k(s,function(){throw new Error("Circle dependency may exists")})}function d(t){r[t].entryCount--,0===r[t].entryCount&&a.push(t)}function h(t){s[t]=!0,d(t)}},M(gc,{getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}});var vc="";"undefined"!=typeof navigator&&(vc=navigator.platform||"");var yc={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:vc.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},xc=Oo(),bc={clearColorPalette:function(){xc(this).colorIdx=0,xc(this).colorNameMap={}},getColorFromPalette:function(t,e,n){var i=xc(e=e||this),o=i.colorIdx||0,r=i.colorNameMap=i.colorNameMap||{};if(r.hasOwnProperty(t))return r[t];var a=ko(this.get("color",!0)),s=this.get("colorLayer",!0),l=null!=n&&s?function(t,e){for(var n=t.length,i=0;i<n;i++)if(t[i].length>e)return t[i];return t[n-1]}(s,n):a;if((l=l||a)&&l.length){var c=l[o];return t&&(r[t]=c),i.colorIdx=(o+1)%l.length,c}}},_c="original",wc="arrayRows",Sc="objectRows",Cc="keyedColumns",Mc="unknown",Tc="typedArray",kc="column",Ac="row";function Ic(t){this.fromDataset=t.fromDataset,this.data=t.data||(t.sourceFormat===Cc?{}:[]),this.sourceFormat=t.sourceFormat||Mc,this.seriesLayoutBy=t.seriesLayoutBy||kc,this.dimensionsDefine=t.dimensionsDefine,this.encodeDefine=t.encodeDefine&&Q(t.encodeDefine),this.startIndex=t.startIndex||0,this.dimensionsDetectCount=t.dimensionsDetectCount}Ic.seriesDataToSource=function(t){return new Ic({data:t,sourceFormat:V(t)?Tc:_c,fromDataset:!1})},qo(Ic);var Dc=Oo();function Pc(t){var e=t.option,n=e.data,i=V(n)?Tc:_c,o=!1,r=e.seriesLayoutBy,a=e.sourceHeader,s=e.dimensions,l=Oc(t);if(l){var c=l.option;n=c.source,i=Dc(l).sourceFormat,o=!0,r=r||c.seriesLayoutBy,null==a&&(a=c.sourceHeader),s=s||c.dimensions}var u=function(t,e,n,i,o){if(!t)return{dimensionsDefine:Ec(o)};var r,a;if(e===wc)"auto"===i||null==i?Nc(function(t){null!=t&&"-"!==t&&(O(t)?null==a&&(a=1):a=0)},n,t,10):a=i?1:0,o||1!==a||(o=[],Nc(function(t,e){o[e]=null!=t?t:""},n,t)),r=o?o.length:n===Ac?t.length:t[0]?t[0].length:null;else if(e===Sc)o=o||function(t){for(var e,n=0;n<t.length&&!(e=t[n++]););if(e){var i=[];return k(e,function(t,e){i.push(e)}),i}}(t);else if(e===Cc)o||(o=[],k(t,function(t,e){o.push(e)}));else if(e===_c){var s=Do(t[0]);r=L(s)&&s.length||1}return{startIndex:a,dimensionsDefine:Ec(o),dimensionsDetectCount:r}}(n,i,r,a,s);Dc(t).source=new Ic({data:n,fromDataset:o,seriesLayoutBy:r,sourceFormat:i,dimensionsDefine:u.dimensionsDefine,startIndex:u.startIndex,dimensionsDetectCount:u.dimensionsDetectCount,encodeDefine:e.encode})}function Ec(t){if(t){var e=Q();return A(t,function(t,n){if(null==(t=x({},B(t)?t:{name:t})).name)return t;t.name+="",null==t.displayName&&(t.displayName=t.name);var i=e.get(t.name);return i?t.name+="-"+i.count++:e.set(t.name,{count:1}),t})}}function Nc(t,e,n,i){if(null==i&&(i=1/0),e===Ac)for(var o=0;o<n.length&&o<i;o++)t(n[o]?n[o][0]:null,o);else{var r=n[0]||[];for(o=0;o<r.length&&o<i;o++)t(r[o],o)}}function Lc(t,e,n){var i={},o=Oc(e);if(!o||!t)return i;var r,a,s=[],l=[],c=Dc(e.ecModel).datasetMap,u=o.uid+"_"+n.seriesLayoutBy;k(t=t.slice(),function(e,n){B(e)||(t[n]={name:e}),"ordinal"===e.type&&null==r&&(a=f(t[r=n])),i[e.name]=[]});var d=c.get(u)||c.set(u,{categoryWayDim:a,valueWayDim:0});function h(t,e,n){for(var i=0;i<n;i++)t.push(e+i)}function f(t){var e=t.dimsDef;return e?e.length:1}return k(t,function(t,e){var n=t.name,o=f(t);if(null==r){var a=d.valueWayDim;h(i[n],a,o),h(l,a,o),d.valueWayDim+=o}else r===e?(h(i[n],0,o),h(s,0,o)):(h(i[n],a=d.categoryWayDim,o),h(l,a,o),d.categoryWayDim+=o)}),s.length&&(i.itemName=s),l.length&&(i.seriesName=l),i}function Rc(t,e,n){var i={};if(!Oc(t))return i;var o,r=e.sourceFormat,a=e.dimensionsDefine;r!==Sc&&r!==Cc||k(a,function(t,e){"name"===(B(t)?t.name:t)&&(o=e)});var s=function(){for(var t={},i={},s=[],l=0,c=Math.min(5,n);l<c;l++){var u=Bc(e.data,r,e.seriesLayoutBy,a,e.startIndex,l);s.push(u);var d=3===u;if(d&&null==t.v&&l!==o&&(t.v=l),null!=t.n&&t.n!==t.v&&(d||3!==s[t.n])||(t.n=l),h(t)&&3!==s[t.n])return t;d||(2===u&&null==i.v&&l!==o&&(i.v=l),null!=i.n&&i.n!==i.v||(i.n=l))}function h(t){return null!=t.v&&null!=t.n}return h(t)?t:h(i)?i:null}();if(s){i.value=s.v;var l=null!=o?o:s.n;i.itemName=[l],i.seriesName=[l]}return i}function Oc(t){var e=t.option;if(!e.data)return t.ecModel.getComponent("dataset",e.datasetIndex||0)}function Bc(t,e,n,i,o,r){var a,s,l;if(V(t))return 3;if(i){var c=i[r];B(c)?(s=c.name,l=c.type):O(c)&&(s=c)}if(null!=l)return"ordinal"===l?1:3;if(e===wc)if(n===Ac){for(var u=t[r],d=0;d<(u||[]).length&&d<5;d++)if(null!=(a=g(u[o+d])))return a}else for(d=0;d<t.length&&d<5;d++){var h=t[o+d];if(h&&null!=(a=g(h[r])))return a}else if(e===Sc){if(!s)return 3;for(d=0;d<t.length&&d<5;d++)if((f=t[d])&&null!=(a=g(f[s])))return a}else if(e===Cc){if(!s)return 3;if(!(u=t[s])||V(u))return 3;for(d=0;d<u.length&&d<5;d++)if(null!=(a=g(u[d])))return a}else if(e===_c)for(d=0;d<t.length&&d<5;d++){var f,p=Do(f=t[d]);if(!L(p))return 3;if(null!=(a=g(p[r])))return a}function g(t){var e=O(t);return null!=t&&isFinite(t)&&""!==t?e?2:3:e&&"-"!==t?1:void 0}return 3}var zc="\0_ec_inner",Vc=fl.extend({init:function(t,e,n,i){n=n||{},this.option=null,this._theme=new fl(n),this._optionManager=i},setOption:function(t,e){q(!(zc in t),"please use chart.getOption()"),this._optionManager.setOption(t,e),this.resetOption(null)},resetOption:function(t){var e=!1,n=this._optionManager;if(!t||"recreate"===t){var i=n.mountOption("recreate"===t);this.option&&"recreate"!==t?(this.restoreData(),this.mergeOption(i)):(function(t){t=t,this.option={},this.option[zc]=1,this._componentsMap=Q({series:[]}),function(t,e){var n=t.color&&!t.colorLayer;k(e,function(e,i){"colorLayer"===i&&n||gc.hasClass(i)||("object"==typeof e?t[i]=t[i]?v(t[i],e,!1):m(e):null==t[i]&&(t[i]=e))})}(t,this._theme.option),v(t,yc,!1),this.mergeOption(t)}).call(this,i),e=!0}if("timeline"!==t&&"media"!==t||this.restoreData(),!t||"recreate"===t||"timeline"===t){var o=n.getTimelineOption(this);o&&(this.mergeOption(o),e=!0)}if(!t||"recreate"===t||"media"===t){var r=n.getMediaOption(this,this._api);r.length&&k(r,function(t){this.mergeOption(t,e=!0)},this)}return e},mergeOption:function(t){var e=this.option,n=this._componentsMap,i=[];!function(t){Dc(t).datasetMap=Q()}(this),k(t,function(t,n){null!=t&&(gc.hasClass(n)?n&&i.push(n):e[n]=null==e[n]?m(t):v(e[n],t,!0))}),gc.topologicalTravel(i,gc.getAllClassMainTypes(),function(i,o){var r=ko(t[i]),a=Po(n.get(i),r);Eo(a),k(a,function(t,e){var n=t.option;B(n)&&(t.keyInfo.mainType=i,t.keyInfo.subType=function(t,e,n){return e.type?e.type:n?n.subType:gc.determineSubType(t,e)}(i,n,t.exist))});var s=function(t,e){L(e)||(e=e?[e]:[]);var n={};return k(e,function(e){n[e]=(t.get(e)||[]).slice()}),n}(n,o);e[i]=[],n.set(i,[]),k(a,function(t,o){var r=t.exist,a=t.option;if(q(B(a)||r,"Empty component definition"),a){var l=gc.getClass(i,t.keyInfo.subType,!0);if(r&&r.constructor===l)r.name=t.keyInfo.name,r.mergeOption(a,this),r.optionUpdated(a,!1);else{var c=x({dependentModels:s,componentIndex:o},t.keyInfo);x(r=new l(a,this,this,c),c),r.init(a,this,this,c),r.optionUpdated(null,!0)}}else r.mergeOption({},this),r.optionUpdated({},!1);n.get(i)[o]=r,e[i][o]=r.option},this),"series"===i&&Fc(this,n.get("series"))},this),this._seriesIndicesMap=Q(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var t=m(this.option);return k(t,function(e,n){if(gc.hasClass(n)){for(var i=(e=ko(e)).length-1;0<=i;i--)Lo(e[i])&&e.splice(i,1);t[n]=e}}),delete t[zc],t},getTheme:function(){return this._theme},getComponent:function(t,e){var n=this._componentsMap.get(t);if(n)return n[e||0]},queryComponents:function(t){var e=t.mainType;if(!e)return[];var n,i=t.index,o=t.id,r=t.name,a=this._componentsMap.get(e);if(!a||!a.length)return[];if(null!=i)L(i)||(i=[i]),n=D(A(i,function(t){return a[t]}),function(t){return!!t});else if(null!=o){var s=L(o);n=D(a,function(t){return s&&0<=S(o,t.id)||!s&&t.id===o})}else if(null!=r){var l=L(r);n=D(a,function(t){return l&&0<=S(r,t.name)||!l&&t.name===r})}else n=a.slice();return Hc(n,t)},findComponents:function(t){var e,n,i,o,r,a=t.mainType,s=(n=a+"Index",i=a+"Id",o=a+"Name",!(e=t.query)||null==e[n]&&null==e[i]&&null==e[o]?null:{mainType:a,index:e[n],id:e[i],name:e[o]});return r=Hc(s?this.queryComponents(s):this._componentsMap.get(a),t),t.filter?D(r,t.filter):r},eachComponent:function(t,e,n){var i=this._componentsMap;"function"==typeof t?(n=e,e=t,i.each(function(t,i){k(t,function(t,o){e.call(n,i,t,o)})})):O(t)?k(i.get(t),e,n):B(t)&&k(this.findComponents(t),e,n)},getSeriesByName:function(t){return D(this._componentsMap.get("series"),function(e){return e.name===t})},getSeriesByIndex:function(t){return this._componentsMap.get("series")[t]},getSeriesByType:function(t){return D(this._componentsMap.get("series"),function(e){return e.subType===t})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(t,e){k(this._seriesIndices,function(n){var i=this._componentsMap.get("series")[n];t.call(e,i,n)},this)},eachRawSeries:function(t,e){k(this._componentsMap.get("series"),t,e)},eachSeriesByType:function(t,e,n){k(this._seriesIndices,function(i){var o=this._componentsMap.get("series")[i];o.subType===t&&e.call(n,o,i)},this)},eachRawSeriesByType:function(t,e,n){return k(this.getSeriesByType(t),e,n)},isSeriesFiltered:function(t){return null==this._seriesIndicesMap.get(t.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(t,e){Fc(this,D(this._componentsMap.get("series"),t,e))},restoreData:function(t){var e=this._componentsMap;Fc(this,e.get("series"));var n=[];e.each(function(t,e){n.push(e)}),gc.topologicalTravel(n,gc.getAllClassMainTypes(),function(n,i){k(e.get(n),function(e){"series"===n&&function(t,e){if(e){var n=e.seiresIndex,i=e.seriesId,o=e.seriesName;return null!=n&&t.componentIndex!==n||null!=i&&t.id!==i||null!=o&&t.name!==o}}(e,t)||e.restoreData()})})}});function Fc(t,e){t._seriesIndicesMap=Q(t._seriesIndices=A(e,function(t){return t.componentIndex})||[])}function Hc(t,e){return e.hasOwnProperty("subType")?D(t,function(t){return t.subType===e.subType}):t}M(Vc,bc);var Wc=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function Gc(t){k(Wc,function(e){this[e]=E(t[e],t)},this)}var Uc={};function jc(){this._coordinateSystems=[]}jc.prototype={constructor:jc,create:function(t,e){var n=[];k(Uc,function(i,o){var r=i.create(t,e);n=n.concat(r||[])}),this._coordinateSystems=n},update:function(t,e){k(this._coordinateSystems,function(n){n.update&&n.update(t,e)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},jc.register=function(t,e){Uc[t]=e},jc.get=function(t){return Uc[t]};var $c=k,qc=m,Yc=A,Xc=v,Zc=/^(min|max)?(.+)$/;function Kc(t){this._api=t,this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[]}function Jc(t,e,n){var i={width:e,height:n,aspectratio:e/n},o=!0;return k(t,function(t,e){var n=e.match(Zc);if(n&&n[1]&&n[2]){var r=n[1],a=n[2].toLowerCase();!function(t,e,n){return"min"===n?e<=t:"max"===n?t<=e:t===e}(i[a],t,r)&&(o=!1)}}),o}Kc.prototype={constructor:Kc,setOption:function(t,e){t&&k(ko(t.series),function(t){t&&t.data&&V(t.data)&&Z(t.data)}),t=qc(t);var n=this._optionBackup,i=(function(t,e,n){var i,o,r=[],a=[],s=t.timeline;return t.baseOption&&(o=t.baseOption),(s||t.options)&&(o=o||{},r=(t.options||[]).slice()),t.media&&(o=o||{},$c(t.media,function(t){t&&t.option&&(t.query?a.push(t):i=i||t)})),(o=o||t).timeline||(o.timeline=s),$c([o].concat(r).concat(A(a,function(t){return t.option})),function(t){$c(e,function(e){e(t,n)})}),{baseOption:o,timelineOptions:r,mediaDefault:i,mediaList:a}}).call(this,t,e,!n);this._newBaseOption=i.baseOption,n?(function(t,e){$c(e=e||{},function(e,n){if(null!=e){var i=t[n];if(gc.hasClass(n)){e=ko(e);var o=Po(i=ko(i),e);t[n]=Yc(o,function(t){return t.option&&t.exist?Xc(t.exist,t.option,!0):t.exist||t.option})}else t[n]=Xc(i,e,!0)}})}(n.baseOption,i.baseOption),i.timelineOptions.length&&(n.timelineOptions=i.timelineOptions),i.mediaList.length&&(n.mediaList=i.mediaList),i.mediaDefault&&(n.mediaDefault=i.mediaDefault)):this._optionBackup=i},mountOption:function(t){var e=this._optionBackup;return this._timelineOptions=Yc(e.timelineOptions,qc),this._mediaList=Yc(e.mediaList,qc),this._mediaDefault=qc(e.mediaDefault),this._currentMediaIndices=[],qc(t?e.baseOption:this._newBaseOption)},getTimelineOption:function(t){var e,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(e=qc(n[i.getCurrentIndex()],!0))}return e},getMediaOption:function(t){var e=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,o=this._mediaDefault,r=[],a=[];if(!i.length&&!o)return a;for(var s=0,l=i.length;s<l;s++)Jc(i[s].query,e,n)&&r.push(s);return!r.length&&o&&(r=[-1]),r.length&&!function(t,e){return t.join(",")===e.join(",")}(r,this._currentMediaIndices)&&(a=Yc(r,function(t){return qc(-1===t?o.option:i[t].option)})),this._currentMediaIndices=r,a}};var Qc=k,tu=B,eu=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function nu(t){var e=t&&t.itemStyle;if(e)for(var n=0,i=eu.length;n<i;n++){var o=eu[n],r=e.normal,a=e.emphasis;r&&r[o]&&(t[o]=t[o]||{},t[o].normal?v(t[o].normal,r[o]):t[o].normal=r[o],r[o]=null),a&&a[o]&&(t[o]=t[o]||{},t[o].emphasis?v(t[o].emphasis,a[o]):t[o].emphasis=a[o],a[o]=null)}}function iu(t,e,n){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var i=t[e].normal,o=t[e].emphasis;i&&(n?(t[e].normal=t[e].emphasis=null,b(t[e],i)):t[e]=i),o&&(t.emphasis=t.emphasis||{},t.emphasis[e]=o)}}function ou(t){iu(t,"itemStyle"),iu(t,"lineStyle"),iu(t,"areaStyle"),iu(t,"label"),iu(t,"labelLine"),iu(t,"upperLabel"),iu(t,"edgeLabel")}function ru(t,e){var n=tu(t)&&t[e],i=tu(n)&&n.textStyle;if(i)for(var o=0,r=Io.length;o<r;o++)i.hasOwnProperty(e=Io[o])&&(n[e]=i[e])}function au(t){t&&(ou(t),ru(t,"label"),t.emphasis&&ru(t.emphasis,"label"))}function su(t){return L(t)?t:t?[t]:[]}function lu(t){return(L(t)?t[0]:t)||{}}function cu(t){k(uu,function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])})}var uu=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],du=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],hu=function(t,e){(function(t,e){Qc(su(t.series),function(t){tu(t)&&function(t){if(tu(t)){nu(t),ou(t),ru(t,"label"),ru(t,"upperLabel"),ru(t,"edgeLabel"),t.emphasis&&(ru(t.emphasis,"label"),ru(t.emphasis,"upperLabel"),ru(t.emphasis,"edgeLabel")),(n=t.markPoint)&&(nu(n),au(n)),(i=t.markLine)&&(nu(i),au(i));var e=t.markArea;e&&au(e);var n,i,o=t.data;if("graph"===t.type){o=o||t.nodes;var r=t.links||t.edges;if(r&&!V(r))for(var a=0;a<r.length;a++)au(r[a]);k(t.categories,function(t){ou(t)})}if(o&&!V(o))for(a=0;a<o.length;a++)au(o[a]);if((n=t.markPoint)&&n.data){var s=n.data;for(a=0;a<s.length;a++)au(s[a])}if((i=t.markLine)&&i.data){var l=i.data;for(a=0;a<l.length;a++)L(l[a])?(au(l[a][0]),au(l[a][1])):au(l[a])}"gauge"===t.type?(ru(t,"axisLabel"),ru(t,"title"),ru(t,"detail")):"treemap"===t.type?(iu(t.breadcrumb,"itemStyle"),k(t.levels,function(t){ou(t)})):"tree"===t.type&&ou(t.leaves)}}(t)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),Qc(n,function(e){Qc(su(t[e]),function(t){t&&(ru(t,"axisLabel"),ru(t.axisPointer,"label"))})}),Qc(su(t.parallel),function(t){var e=t&&t.parallelAxisDefault;ru(e,"axisLabel"),ru(e&&e.axisPointer,"label")}),Qc(su(t.calendar),function(t){iu(t,"itemStyle"),ru(t,"dayLabel"),ru(t,"monthLabel"),ru(t,"yearLabel")}),Qc(su(t.radar),function(t){ru(t,"name")}),Qc(su(t.geo),function(t){tu(t)&&(au(t),Qc(su(t.regions),function(t){au(t)}))}),Qc(su(t.timeline),function(t){au(t),iu(t,"label"),iu(t,"itemStyle"),iu(t,"controlStyle",!0);var e=t.data;L(e)&&k(e,function(t){B(t)&&(iu(t,"label"),iu(t,"itemStyle"))})}),Qc(su(t.toolbox),function(t){iu(t,"iconStyle"),Qc(t.feature,function(t){iu(t,"iconStyle")})}),ru(lu(t.axisPointer),"label"),ru(lu(t.tooltip).axisPointer,"label")})(t,e),t.series=ko(t.series),k(t.series,function(t){if(B(t)){var e=t.type;if("line"===e)null!=t.clipOverflow&&(t.clip=t.clipOverflow);else if("pie"===e||"gauge"===e)null!=t.clockWise&&(t.clockwise=t.clockWise);else if("gauge"===e){var n=function(t,e){e=e.split(",");for(var n=t,i=0;i<e.length&&null!=(n=n&&n[e[i]]);i++);return n}(t,"pointer.color");null!=n&&function(t,e,n,i){e=e.split(",");for(var o,r=t,a=0;a<e.length-1;a++)null==r[o=e[a]]&&(r[o]={}),r=r[o];null!=r[e[a]]||(r[e[a]]=n)}(t,"itemStyle.color",n)}cu(t)}}),t.dataRange&&(t.visualMap=t.dataRange),k(du,function(e){var n=t[e];n&&(L(n)||(n=[n]),k(n,function(t){cu(t)}))})};function fu(t){k(t,function(e,n){var i=[],o=[NaN,NaN],r=e.data,a=e.isStackedByIndex,s=r.map([e.stackResultDimension,e.stackedOverDimension],function(s,l,c){var u,d,h=r.get(e.stackedDimension,c);if(isNaN(h))return o;a?d=r.getRawIndex(c):u=r.get(e.stackedByDimension,c);for(var f=NaN,p=n-1;0<=p;p--){var g=t[p];if(a||(d=g.data.rawIndexOf(g.stackedByDimension,u)),0<=d){var m=g.data.getByRawIndex(g.stackResultDimension,d);if(0<=h&&0<m||h<=0&&m<0){h+=m,f=m;break}}}return i[0]=h,i[1]=f,i});r.hostModel.setData(s),e.data=s})}function pu(t,e){Ic.isInstance(t)||(t=Ic.seriesDataToSource(t)),this._source=t;var n=this._data=t.data,i=t.sourceFormat;i===Tc&&(this._offset=0,this._dimSize=e,this._data=n),x(this,mu[i===wc?i+"_"+t.seriesLayoutBy:i])}var gu=pu.prototype;gu.pure=!1;var mu={arrayRows_column:{pure:gu.persistent=!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(t){return this._data[t+this._source.startIndex]},appendData:xu},arrayRows_row:{pure:!0,count:function(){var t=this._data[0];return t?Math.max(0,t.length-this._source.startIndex):0},getItem:function(t){t+=this._source.startIndex;for(var e=[],n=this._data,i=0;i<n.length;i++){var o=n[i];e.push(o?o[t]:null)}return e},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:vu,getItem:yu,appendData:xu},keyedColumns:{pure:!0,count:function(){var t=this._data[this._source.dimensionsDefine[0].name];return t?t.length:0},getItem:function(t){for(var e=[],n=this._source.dimensionsDefine,i=0;i<n.length;i++){var o=this._data[n[i].name];e.push(o?o[t]:null)}return e},appendData:function(t){var e=this._data;k(t,function(t,n){for(var i=e[n]||(e[n]=[]),o=0;o<(t||[]).length;o++)i.push(t[o])})}},original:{count:vu,getItem:yu,appendData:xu},typedArray:{persistent:!(gu.getSource=function(){return this._source}),pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(t,e){e=e||[];for(var n=this._dimSize*(t-=this._offset),i=0;i<this._dimSize;i++)e[i]=this._data[n+i];return e},appendData:function(t){this._data=t},clean:function(){this._offset+=this.count(),this._data=null}}};function vu(){return this._data.length}function yu(t){return this._data[t]}function xu(t){for(var e=0;e<t.length;e++)this._data.push(t[e])}var bu={arrayRows:_u,objectRows:function(t,e,n,i){return null!=n?t[i]:t},keyedColumns:_u,original:function(t,e,n,i){var o=Do(t);return null!=n&&o instanceof Array?o[n]:o},typedArray:_u};function _u(t,e,n,i){return null!=n?t[n]:t}var wu={arrayRows:Su,objectRows:function(t,e,n,i){return Cu(t[e],this._dimensionInfos[e])},keyedColumns:Su,original:function(t,e,n,i){var o=t&&(null==t.value?t:t.value);return!this._rawData.pure&&function(t){return Co(t)&&!(t instanceof Array)}(t)&&(this.hasItemOption=!0),Cu(o instanceof Array?o[i]:o,this._dimensionInfos[e])},typedArray:function(t,e,n,i){return t[i]}};function Su(t,e,n,i){return Cu(t[i],this._dimensionInfos[e])}function Cu(t,e){var n=e&&e.type;if("ordinal"!==n)return"time"===n&&"number"!=typeof t&&null!=t&&"-"!==t&&(t=+Pl(t)),null==t||""===t?NaN:+t;var i=e&&e.ordinalMeta;return i?i.parseAndCollect(t):t}function Mu(t,e,n){if(t){var i=t.getRawDataItem(e);if(null!=i){var o,r,a=t.getProvider().getSource().sourceFormat,s=t.getDimensionInfo(n);return s&&(o=s.name,r=s.index),bu[a](i,e,r,o)}}}function Tu(t,e,n){if(t){var i=t.getProvider().getSource().sourceFormat;if(i===_c||i===Sc){var o=t.getRawDataItem(e);return i!==_c||B(o)||(o=null),o?o[n]:void 0}}}var ku=/\{@(.+?)\}/g,Au={getDataParams:function(t,e){var n=this.getData(e),i=this.getRawValue(t,e),o=n.getRawIndex(t),r=n.getName(t),a=n.getRawDataItem(t),s=n.getItemVisual(t,"color"),l=n.getItemVisual(t,"borderColor"),c=this.ecModel.getComponent("tooltip"),u=Ho(c&&c.get("renderMode")),d=this.mainType,h="series"===d,f=n.userOutput;return{componentType:d,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:r,dataIndex:o,data:a,dataType:e,value:i,color:s,borderColor:l,dimensionNames:f?f.dimensionNames:null,encode:f?f.encode:null,marker:Yl({color:s,renderMode:u}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(t,e,n,i,o){e=e||"normal";var r=this.getData(n),a=r.getItemModel(t),s=this.getDataParams(t,n);null!=i&&s.value instanceof Array&&(s.value=s.value[i]);var l=a.get("normal"===e?[o||"label","formatter"]:[e,o||"label","formatter"]);return"function"==typeof l?(s.status=e,s.dimensionIndex=i,l(s)):"string"==typeof l?$l(l,s).replace(ku,function(e,n){var i=n.length;return"["===n.charAt(0)&&"]"===n.charAt(i-1)&&(n=+n.slice(1,i-1)),Mu(r,t,n)}):void 0},getRawValue:function(t,e){return Mu(this.getData(e),t)},formatTooltip:function(){}};function Iu(t){return new Du(t)}function Du(t){this._reset=(t=t||{}).reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}var Pu=Du.prototype;Pu.perform=function(t){var e,n=this._upstream,i=t&&t.skip;if(this._dirty&&n){var o=this.context;o.data=o.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!i&&(e=this._plan(this.context));var r,a=u(this._modBy),s=this._modDataCount||0,l=u(t&&t.modBy),c=t&&t.modDataCount||0;function u(t){return 1<=t||(t=1),t}a===l&&s===c||(e="reset"),!this._dirty&&"reset"!==e||(this._dirty=!1,r=function(t,e){var n,i;t._dueIndex=t._outputDueEnd=t._dueEnd=0,t._settedOutputEnd=null,!e&&t._reset&&((n=t._reset(t.context))&&n.progress&&(i=n.forceFirstProgress,n=n.progress),L(n)&&!n.length&&(n=null)),t._progress=n,t._modBy=t._modDataCount=null;var o=t._downstream;return o&&o.dirty(),i}(this,i)),this._modBy=l,this._modDataCount=c;var d=t&&t.step;if(this._dueEnd=n?n._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var h=this._dueIndex,f=Math.min(null!=d?this._dueIndex+d:1/0,this._dueEnd);if(!i&&(r||h<f)){var p=this._progress;if(L(p))for(var g=0;g<p.length;g++)Hu(this,p[g],h,f,l,c);else Hu(this,p,h,f,l,c)}this._dueIndex=f,this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:f}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var Eu,Nu,Lu,Ru,Ou,Bu,zu=Bu={reset:function(t,e,n,i){Nu=t,Eu=e,Lu=n,Ru=i,Ou=Math.ceil(Ru/Lu),Bu.next=1<Lu&&0<Ru?Fu:Vu}};function Vu(){return Nu<Eu?Nu++:null}function Fu(){var t=Nu%Ou*Lu+Math.ceil(Nu/Ou),e=Eu<=Nu?null:t<Ru?t:Nu;return Nu++,e}function Hu(t,e,n,i,o,r){zu.reset(n,i,o,r),t._callingProgress=e,t._callingProgress({start:n,end:i,count:i-n,next:zu.next},t.context)}Pu.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},Pu.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},Pu.pipe=function(t){this._downstream===t&&!this._dirty||((this._downstream=t)._upstream=this,t.dirty())},Pu.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},Pu.getUpstream=function(){return this._upstream},Pu.getDownstream=function(){return this._downstream},Pu.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t};var Wu=Oo(),Gu=gc.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendVisualProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(t,e,n,i){this.seriesIndex=this.componentIndex,this.dataTask=Iu({count:ju,reset:$u}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,n),Pc(this);var o=this.getInitialData(t,n);Yu(o,this),this.dataTask.context.data=o,Wu(this).dataBeforeProcessed=o,Uu(this)},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,i=n?cc(t):{},o=this.subType;gc.hasClass(o)&&(o+="Series"),v(t,e.getTheme().get(this.subType)),v(t,this.getDefaultOption()),Ao(t,"label",["show"]),this.fillDataTextStyle(t.data),n&&lc(t,i,n)},mergeOption:function(t,e){t=v(this.option,t,!0),this.fillDataTextStyle(t.data);var n=this.layoutMode;n&&lc(this.option,t,n),Pc(this);var i=this.getInitialData(t,e);Yu(i,this),this.dataTask.dirty(),this.dataTask.context.data=i,Wu(this).dataBeforeProcessed=i,Uu(this)},fillDataTextStyle:function(t){if(t&&!V(t))for(var e=["show"],n=0;n<t.length;n++)t[n]&&t[n].label&&Ao(t[n],"label",e)},getInitialData:function(){},appendData:function(t){this.getRawData().appendData(t.data)},getData:function(t){var e=Zu(this);if(e){var n=e.context.data;return null==t?n:n.getLinkedData(t)}return Wu(this).data},setData:function(t){var e=Zu(this);if(e){var n=e.context;n.data!==t&&e.modifyOutputEnd&&e.setOutputEnd(t.count()),n.outputData=t,e!==this.dataTask&&(n.data=t)}Wu(this).data=t},getSource:function(){return function(t){return Dc(t).source}(this)},getRawData:function(){return Wu(this).dataBeforeProcessed},getBaseAxis:function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},formatTooltip:function(t,e,n,i){var o=this,r="html"===(i=i||"html")?"<br/>":"\n",a="richText"===i,s={},l=0,c=this.getData(),u=c.mapDimension("defaultedTooltip",!0),d=u.length,h=this.getRawValue(t),f=L(h),p=c.getItemVisual(t,"color");B(p)&&p.colorStops&&(p=(p.colorStops[0]||{}).color),p=p||"transparent";var g=(1<d||f&&!d?function(n){var r=I(n,function(t,e,n){var i=c.getDimensionInfo(n);return t|(i&&!1!==i.tooltip&&null!=i.displayName)},0),d=[];function h(t,n){var u=c.getDimensionInfo(n);if(u&&!1!==u.otherDims.tooltip){var h=u.type,f="sub"+o.seriesIndex+"at"+l,g=Yl({color:p,type:"subItem",renderMode:i,markerId:f}),m=(r?("string"==typeof g?g:g.content)+Gl(u.displayName||"-")+": ":"")+Gl("ordinal"===h?t+"":"time"===h?e?"":Zl("yyyy/MM/dd hh:mm:ss",t):zl(t));m&&d.push(m),a&&(s[f]=p,++l)}}u.length?k(u,function(e){h(Mu(c,t,e),e)}):k(n,h);var f=r?a?"\n":"<br/>":"",g=f+d.join(f||", ");return{renderMode:i,content:g,style:s}}(h):function(t){return{renderMode:i,content:Gl(zl(t)),style:s}}(d?Mu(c,t,u[0]):f?h[0]:h)).content,m=o.seriesIndex+"at"+l,v=Yl({color:p,type:"item",renderMode:i,markerId:m});s[m]=p,++l;var y=c.getName(t),x=this.name;No(this)||(x=""),x=x?Gl(x)+(e?": ":r):"";var b="string"==typeof v?v:v.content;return{html:e?b+x+g:x+b+(y?Gl(y)+": "+g:g),markers:s}},isAnimationEnabled:function(){if(o.node)return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),t},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(t,e,n){var i=this.ecModel;return bc.getColorFromPalette.call(this,t,e,n)||i.getColorFromPalette(t,e,n)},coordDimToDataDim:function(t){return this.getRawData().mapDimension(t,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function Uu(t){var e=t.name;No(t)||(t.name=function(t){var e=t.getRawData(),n=e.mapDimension("seriesName",!0),i=[];return k(n,function(t){var n=e.getDimensionInfo(t);n.displayName&&i.push(n.displayName)}),i.join(" ")}(t)||e)}function ju(t){return t.model.getRawData().count()}function $u(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),qu}function qu(t,e){e.outputData&&t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function Yu(t,e){k(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,N(Xu,e))})}function Xu(t){var e=Zu(t);e&&e.setOutputEnd(this.count())}function Zu(t){var e=(t.ecModel||{}).scheduler,n=e&&e.getPipeline(t.uid);if(n){var i=n.currentTask;if(i){var o=i.agentStubMap;o&&(i=o.get(t.uid))}return i}}M(Gu,Au),M(Gu,bc);var Ku=function(){this.group=new Cn,this.uid=vl("viewComponent")},Ju=Ku.prototype={constructor:Ku,init:function(t,e){},render:function(t,e,n,i){},dispose:function(){},filterForExposedEvent:null};function Qu(){var t=Oo();return function(e){var n=t(e),i=e.pipelineContext,o=n.large,r=n.progressiveRender,a=n.large=i&&i.large,s=n.progressiveRender=i&&i.progressiveRender;return!!(o^a||r^s)&&"reset"}}Ju.updateView=Ju.updateLayout=Ju.updateVisual=function(t,e,n,i){},jo(Ku),Zo(Ku,{registerWhenExtend:!0});var td=Oo(),ed=Qu();function nd(){this.group=new Cn,this.uid=vl("viewChart"),this.renderTask=Iu({plan:ad,reset:sd}),this.renderTask.context={view:this}}var id=nd.prototype={type:"chart",init:function(t,e){},render:function(t,e,n,i){},highlight:function(t,e,n,i){rd(t.getData(),i,"emphasis")},downplay:function(t,e,n,i){rd(t.getData(),i,"normal")},remove:function(t,e){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};function od(t,e,n){if(t&&(t.trigger(e,n),t.isGroup&&!Bs(t)))for(var i=0,o=t.childCount();i<o;i++)od(t.childAt(i),e,n)}function rd(t,e,n){var i=Ro(t,e),o=e&&null!=e.highlightKey?zs(e.highlightKey):null;null!=i?k(ko(i),function(e){od(t.getItemGraphicEl(e),n,o)}):t.eachItemGraphicEl(function(t){od(t,n,o)})}function ad(t){return ed(t.model)}function sd(t){var e=t.model,n=t.ecModel,i=t.api,o=t.payload,r=e.pipelineContext.progressiveRender,a=t.view,s=o&&td(o).updateMethod,l=r?"incrementalPrepareRender":s&&a[s]?s:"render";return"render"!==l&&a[l](e,n,i,o),ld[l]}id.updateView=id.updateLayout=id.updateVisual=function(t,e,n,i){this.render(t,e,n,i)},jo(nd),Zo(nd,{registerWhenExtend:!0}),nd.markUpdateMethod=function(t,e){td(t).updateMethod=e};var ld={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},cd="\0__throttleOriginMethod",ud="\0__throttleRate",dd="\0__throttleType";function hd(t,e,n){var i,o,r,a,s,l=0,c=0,u=null;function d(){c=(new Date).getTime(),u=null,t.apply(r,a||[])}function h(){i=(new Date).getTime(),r=this,a=arguments;var t=s||e,h=s||n;s=null,o=i-(h?l:c)-t,clearTimeout(u),h?u=setTimeout(d,t):0<=o?d():u=setTimeout(d,-o),l=i}return e=e||0,h.clear=function(){u&&(clearTimeout(u),u=null)},h.debounceNextCall=function(t){s=t},h}function fd(t,e,n,i){var o=t[e];if(o){var r=o[cd]||o;if(o[ud]!==n||o[dd]!==i){if(null==n||!i)return t[e]=r;(o=t[e]=hd(r,n,"debounce"===i))[cd]=r,o[dd]=i,o[ud]=n}return o}}function pd(t,e){var n=t[e];n&&n[cd]&&(t[e]=n[cd])}var gd={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData(),i=(t.visualColorAccessPath||"itemStyle.color").split("."),o=t.get(i),r=!R(o)||o instanceof Za?null:o;o&&!r||(o=t.getColorFromPalette(t.name,null,e.getSeriesCount())),n.setVisual("color",o);var a=(t.visualBorderColorAccessPath||"itemStyle.borderColor").split("."),s=t.get(a);if(n.setVisual("borderColor",s),!e.isSeriesFiltered(t))return r&&n.each(function(e){n.setItemVisual(e,"color",r(t.getDataParams(e)))}),{dataEach:n.hasItemOption?function(t,e){var n=t.getItemModel(e),o=n.get(i,!0),r=n.get(a,!0);null!=o&&t.setItemVisual(e,"color",o),null!=r&&t.setItemVisual(e,"borderColor",r)}:null}}},md={legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}},vd=Math.PI;function yd(t,e,n,i){this.ecInstance=t,this.api=e,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i),this._stageTaskMap=Q()}var xd=yd.prototype;function bd(t,e,n,i,o){var r;function a(t,e){return t.setDirty&&(!t.dirtyMap||t.dirtyMap.get(e.__pipeline.id))}o=o||{},k(e,function(e,s){if(!o.visualType||o.visualType===e.visualType){var l=t._stageTaskMap.get(e.uid),c=l.seriesTaskMap,u=l.overallTask;if(u){var d,h=u.agentStubMap;h.each(function(t){a(o,t)&&(t.dirty(),d=!0)}),d&&u.dirty(),_d(u,i);var f=t.getPerformArgs(u,o.block);h.each(function(t){t.perform(f)}),r|=u.perform(f)}else c&&c.each(function(s,l){a(o,s)&&s.dirty();var c=t.getPerformArgs(s,o.block);c.skip=!e.performRawSeries&&n.isSeriesFiltered(s.context.model),_d(s,i),r|=s.perform(c)})}}),t.unfinished|=r}xd.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each(function(t){var e=t.overallTask;e&&e.dirty()})},xd.getPerformArgs=function(t,e){if(t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,o=!e&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex?n.step:null,r=i&&i.modDataCount;return{step:o,modBy:null!=r?Math.ceil(r/o):null,modDataCount:r}}},xd.getPipeline=function(t){return this._pipelineMap.get(t)},xd.updateStreamModes=function(t,e){var n=this._pipelineMap.get(t.uid),i=t.getData().count(),o=n.progressiveEnabled&&e.incrementalPrepareRender&&i>=n.threshold,r=t.get("large")&&i>=t.get("largeThreshold"),a="mod"===t.get("progressiveChunkMode")?i:null;t.pipelineContext=n.context={progressiveRender:o,modDataCount:a,large:r}},xd.restorePipelines=function(t){var e=this,n=e._pipelineMap=Q();t.eachSeries(function(t){var i=t.getProgressive(),o=t.uid;n.set(o,{id:o,head:null,tail:null,threshold:t.getProgressiveThreshold(),progressiveEnabled:i&&!(t.preventIncremental&&t.preventIncremental()),blockIndex:-1,step:Math.round(i||700),count:0}),Pd(e,t,t.dataTask)})},xd.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.ecInstance.getModel(),n=this.api;k(this._allHandlers,function(i){var o=t.get(i.uid)||t.set(i.uid,[]);i.reset&&function(t,e,n,i,o){var r=n.seriesTaskMap||(n.seriesTaskMap=Q()),a=e.seriesType,s=e.getTargetSeries;function l(n){var a=n.uid,s=r.get(a)||r.set(a,Iu({plan:Td,reset:kd,count:Dd}));s.context={model:n,ecModel:i,api:o,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:t},Pd(t,n,s)}e.createOnAllSeries?i.eachRawSeries(l):a?i.eachRawSeriesByType(a,l):s&&s(i,o).each(l);var c=t._pipelineMap;r.each(function(t,e){c.get(e)||(t.dispose(),r.removeKey(e))})}(this,i,o,e,n),i.overallReset&&function(t,e,n,i,o){var r=n.overallTask=n.overallTask||Iu({reset:wd});r.context={ecModel:i,api:o,overallReset:e.overallReset,scheduler:t};var a=r.agentStubMap=r.agentStubMap||Q(),s=e.seriesType,l=e.getTargetSeries,c=!0,u=e.modifyOutputEnd;function d(e){var n=e.uid,i=a.get(n);i||(i=a.set(n,Iu({reset:Sd,onDirty:Md})),r.dirty()),i.context={model:e,overallProgress:c,modifyOutputEnd:u},i.agent=r,i.__block=c,Pd(t,e,i)}s?i.eachRawSeriesByType(s,d):l?l(i,o).each(d):(c=!1,k(i.getSeries(),d));var h=t._pipelineMap;a.each(function(t,e){h.get(e)||(t.dispose(),r.dirty(),a.removeKey(e))})}(this,i,o,e,n)},this)},xd.prepareView=function(t,e,n,i){var o=t.renderTask,r=o.context;r.model=e,r.ecModel=n,r.api=i,o.__block=!t.incrementalPrepareRender,Pd(this,e,o)},xd.performDataProcessorTasks=function(t,e){bd(this,this._dataProcessorHandlers,t,e,{block:!0})},xd.performVisualTasks=function(t,e,n){bd(this,this._visualHandlers,t,e,n)},xd.performSeriesTasks=function(t){var e;t.eachSeries(function(t){e|=t.dataTask.perform()}),this.unfinished|=e},xd.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)})};var _d=xd.updatePayload=function(t,e){"remain"!==e&&(t.context.payload=e)};function wd(t){t.overallReset(t.ecModel,t.api,t.payload)}function Sd(t,e){return t.overallProgress&&Cd}function Cd(){this.agent.dirty(),this.getDownstream().dirty()}function Md(){this.agent&&this.agent.dirty()}function Td(t){return t.plan&&t.plan(t.model,t.ecModel,t.api,t.payload)}function kd(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=ko(t.reset(t.model,t.ecModel,t.api,t.payload));return 1<e.length?A(e,function(t,e){return Id(e)}):Ad}var Ad=Id(0);function Id(t){return function(e,n){var i=n.data,o=n.resetDefines[t];if(o&&o.dataEach)for(var r=e.start;r<e.end;r++)o.dataEach(i,r);else o&&o.progress&&o.progress(e,i)}}function Dd(t){return t.data.count()}function Pd(t,e,n){var i=t._pipelineMap.get(e.uid);i.head||(i.head=n),i.tail&&i.tail.pipe(n),(i.tail=n).__idxInPipeline=i.count++,n.__pipeline=i}yd.wrapStageHandler=function(t,e){return R(t)&&(t={overallReset:t,seriesType:function(t){Ed=null;try{t(Nd,Ld)}catch(t){}return Ed}(t)}),t.uid=vl("stageHandler"),e&&(t.visualType=e),t};var Ed,Nd={},Ld={};function Rd(t,e){for(var n in e.prototype)t[n]=et}function Od(){return{axisLine:{lineStyle:{color:Vd}},axisTick:{lineStyle:{color:Vd}},axisLabel:{textStyle:{color:Vd}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:Vd}}}}Rd(Nd,Vc),Rd(Ld,Gc),Nd.eachSeriesByType=Nd.eachRawSeriesByType=function(t){Ed=t},Nd.eachComponent=function(t){"series"===t.mainType&&t.subType&&(Ed=t.subType)};var Bd=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],zd={color:Bd,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],Bd]},Vd="#eee",Fd=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],Hd={color:Fd,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:Vd},crossStyle:{color:Vd},label:{color:"#000"}}},legend:{textStyle:{color:Vd}},textStyle:{color:Vd},title:{textStyle:{color:Vd}},toolbox:{iconStyle:{normal:{borderColor:Vd}}},dataZoom:{textStyle:{color:Vd}},visualMap:{textStyle:{color:Vd}},timeline:{lineStyle:{color:Vd},itemStyle:{normal:{color:Fd[1]}},label:{normal:{textStyle:{color:Vd}}},controlStyle:{normal:{color:Vd,borderColor:Vd}}},timeAxis:Od(),logAxis:Od(),valueAxis:Od(),categoryAxis:Od(),line:{symbol:"circle"},graph:{color:Fd},gauge:{title:{textStyle:{color:Vd}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};Hd.categoryAxis.splitLine.show=!1,gc.extend({type:"dataset",defaultOption:{seriesLayoutBy:kc,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){!function(t){var e=t.option.source,n=Mc;if(V(e))n=Tc;else if(L(e)){0===e.length&&(n=wc);for(var i=0,o=e.length;i<o;i++){var r=e[i];if(null!=r){if(L(r)){n=wc;break}if(B(r)){n=Sc;break}}}}else if(B(e)){for(var a in e)if(e.hasOwnProperty(a)&&T(e[a])){n=Cc;break}}else if(null!=e)throw new Error("Invalid data");Dc(t).sourceFormat=n}(this)}}),Ku.extend({type:"dataset"});var Wd=fa.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(t,e){var n=e.cx,i=e.cy,o=e.rx,r=e.ry,a=.5522848*o,s=.5522848*r;t.moveTo(n-o,i),t.bezierCurveTo(n-o,i-s,n-a,i-r,n,i-r),t.bezierCurveTo(n+a,i-r,n+o,i-s,n+o,i),t.bezierCurveTo(n+o,i+s,n+a,i+r,n,i+r),t.bezierCurveTo(n-a,i+r,n-o,i+s,n-o,i),t.closePath()}}),Gd=/[\s,]+/;function Ud(t){for(O(t)&&(t=(new DOMParser).parseFromString(t,"text/xml")),9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}function jd(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}jd.prototype.parse=function(t,e){e=e||{};var n=Ud(t);if(!n)throw new Error("Illegal svg");var i=new Cn;this._root=i;var o=n.getAttribute("viewBox")||"",r=parseFloat(n.getAttribute("width")||e.width),a=parseFloat(n.getAttribute("height")||e.height);isNaN(r)&&(r=null),isNaN(a)&&(a=null),Kd(n,i,null,!0);for(var s,l,c=n.firstChild;c;)this._parseNode(c,i),c=c.nextSibling;if(o){var u=Y(o).split(Gd);4<=u.length&&(s={x:parseFloat(u[0]||0),y:parseFloat(u[1]||0),width:parseFloat(u[2]),height:parseFloat(u[3])})}if(s&&null!=r&&null!=a&&(l=nh(s,r,a),!e.ignoreViewBox)){var d=i;(i=new Cn).add(d),d.scale=l.scale.slice(),d.position=l.position.slice()}return e.ignoreRootClip||null==r||null==a||i.setClipPath(new ja({shape:{x:0,y:0,width:r,height:a}})),{root:i,width:r,height:a,viewBoxRect:s,viewBoxTransform:l}},jd.prototype._parseNode=function(t,e){var n,i,o=t.nodeName.toLowerCase();if("defs"===o?this._isDefine=!0:"text"===o&&(this._isText=!0),this._isDefine){if(i=qd[o]){var r=i.call(this,t),a=t.getAttribute("id");a&&(this._defs[a]=r)}}else(i=$d[o])&&(n=i.call(this,t,e),e.add(n));for(var s=t.firstChild;s;)1===s.nodeType&&this._parseNode(s,n),3===s.nodeType&&this._isText&&this._parseText(s,n),s=s.nextSibling;"defs"===o?this._isDefine=!1:"text"===o&&(this._isText=!1)},jd.prototype._parseText=function(t,e){if(1===t.nodeType){var n=t.getAttribute("dx")||0,i=t.getAttribute("dy")||0;this._textX+=parseFloat(n),this._textY+=parseFloat(i)}var o=new Da({style:{text:t.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});Yd(e,o),Kd(t,o,this._defs);var r=o.style.fontSize;r&&r<9&&(o.style.fontSize=9,o.scale=o.scale||[1,1],o.scale[0]*=r/9,o.scale[1]*=r/9);var a=o.getBoundingRect();return this._textX+=a.width,e.add(o),o};var $d={g:function(t,e){var n=new Cn;return Yd(e,n),Kd(t,n,this._defs),n},rect:function(t,e){var n=new ja;return Yd(e,n),Kd(t,n,this._defs),n.setShape({x:parseFloat(t.getAttribute("x")||0),y:parseFloat(t.getAttribute("y")||0),width:parseFloat(t.getAttribute("width")||0),height:parseFloat(t.getAttribute("height")||0)}),n},circle:function(t,e){var n=new Ea;return Yd(e,n),Kd(t,n,this._defs),n.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),r:parseFloat(t.getAttribute("r")||0)}),n},line:function(t,e){var n=new qa;return Yd(e,n),Kd(t,n,this._defs),n.setShape({x1:parseFloat(t.getAttribute("x1")||0),y1:parseFloat(t.getAttribute("y1")||0),x2:parseFloat(t.getAttribute("x2")||0),y2:parseFloat(t.getAttribute("y2")||0)}),n},ellipse:function(t,e){var n=new Wd;return Yd(e,n),Kd(t,n,this._defs),n.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),rx:parseFloat(t.getAttribute("rx")||0),ry:parseFloat(t.getAttribute("ry")||0)}),n},polygon:function(t,e){var n=t.getAttribute("points");n=n&&Xd(n);var i=new za({shape:{points:n||[]}});return Yd(e,i),Kd(t,i,this._defs),i},polyline:function(t,e){var n=new fa;Yd(e,n),Kd(t,n,this._defs);var i=t.getAttribute("points");return i=i&&Xd(i),new Va({shape:{points:i||[]}})},image:function(t,e){var n=new Wi;return Yd(e,n),Kd(t,n,this._defs),n.setStyle({image:t.getAttribute("xlink:href"),x:t.getAttribute("x"),y:t.getAttribute("y"),width:t.getAttribute("width"),height:t.getAttribute("height")}),n},text:function(t,e){var n=t.getAttribute("x")||0,i=t.getAttribute("y")||0,o=t.getAttribute("dx")||0,r=t.getAttribute("dy")||0;this._textX=parseFloat(n)+parseFloat(o),this._textY=parseFloat(i)+parseFloat(r);var a=new Cn;return Yd(e,a),Kd(t,a,this._defs),a},tspan:function(t,e){var n=t.getAttribute("x"),i=t.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=i&&(this._textY=parseFloat(i));var o=t.getAttribute("dx")||0,r=t.getAttribute("dy")||0,a=new Cn;return Yd(e,a),Kd(t,a,this._defs),this._textX+=o,this._textY+=r,a},path:function(t,e){var n=Ia(t.getAttribute("d")||"");return Yd(e,n),Kd(t,n,this._defs),n}},qd={lineargradient:function(t){var e=new ts(parseInt(t.getAttribute("x1")||0,10),parseInt(t.getAttribute("y1")||0,10),parseInt(t.getAttribute("x2")||10,10),parseInt(t.getAttribute("y2")||0,10));return function(t,e){for(var n=t.firstChild;n;){if(1===n.nodeType){var i=n.getAttribute("offset");i=0<i.indexOf("%")?parseInt(i,10)/100:i?parseFloat(i):0;var o=n.getAttribute("stop-color")||"#000000";e.addColorStop(i,o)}n=n.nextSibling}}(t,e),e},radialgradient:function(t){}};function Yd(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),b(e.__inheritedStyle,t.__inheritedStyle))}function Xd(t){for(var e=Y(t).split(Gd),n=[],i=0;i<e.length;i+=2){var o=parseFloat(e[i]),r=parseFloat(e[i+1]);n.push([o,r])}return n}var Zd={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function Kd(t,e,n,i){var o=e.__inheritedStyle||{},r="text"===e.type;if(1===t.nodeType&&(function(t,e){var n=t.getAttribute("transform");if(n){n=n.replace(/,/g," ");var i=null,o=[];n.replace(th,function(t,e,n){o.push(e,n)});for(var r=o.length-1;0<r;r-=2){var a=o[r],s=o[r-1];switch(i=i||ie(),s){case"translate":a=Y(a).split(Gd),se(i,i,[parseFloat(a[0]),parseFloat(a[1]||0)]);break;case"scale":a=Y(a).split(Gd),ce(i,i,[parseFloat(a[0]),parseFloat(a[1]||a[0])]);break;case"rotate":a=Y(a).split(Gd),le(i,i,parseFloat(a[0]));break;case"skew":a=Y(a).split(Gd),console.warn("Skew transform is not supported yet");break;case"matrix":a=Y(a).split(Gd),i[0]=parseFloat(a[0]),i[1]=parseFloat(a[1]),i[2]=parseFloat(a[2]),i[3]=parseFloat(a[3]),i[4]=parseFloat(a[4]),i[5]=parseFloat(a[5])}}e.setLocalTransform(i)}}(t,e),x(o,function(t){var e=t.getAttribute("style"),n={};if(!e)return n;var i,o={};for(eh.lastIndex=0;null!=(i=eh.exec(e));)o[i[1]]=i[2];for(var r in Zd)Zd.hasOwnProperty(r)&&null!=o[r]&&(n[Zd[r]]=o[r]);return n}(t)),!i))for(var a in Zd)if(Zd.hasOwnProperty(a)){var s=t.getAttribute(a);null!=s&&(o[Zd[a]]=s)}var l=r?"textFill":"fill",c=r?"textStroke":"stroke";e.style=e.style||new On;var u=e.style;null!=o.fill&&u.set(l,Qd(o.fill,n)),null!=o.stroke&&u.set(c,Qd(o.stroke,n)),k(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(t){null!=o[t]&&u.set("lineWidth"===t&&r?"textStrokeWidth":t,parseFloat(o[t]))}),o.textBaseline&&"auto"!==o.textBaseline||(o.textBaseline="alphabetic"),"alphabetic"===o.textBaseline&&(o.textBaseline="bottom"),"start"===o.textAlign&&(o.textAlign="left"),"end"===o.textAlign&&(o.textAlign="right"),k(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(t){null!=o[t]&&u.set(t,o[t])}),o.lineDash&&(e.style.lineDash=Y(o.lineDash).split(Gd)),u[c]&&"none"!==u[c]&&(e[c]=!0),e.__inheritedStyle=o}var Jd=/url\(\s*#(.*?)\)/;function Qd(t,e){var n=e&&t&&t.match(Jd);return n?e[Y(n[1])]:t}var th=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g,eh=/([^\s:;]+)\s*:\s*([^:;]+)/g;function nh(t,e,n){var i=Math.min(e/t.width,n/t.height);return{scale:[i,i],position:[-(t.x+t.width/2)*i+e/2,-(t.y+t.height/2)*i+n/2]}}var ih=Q(),oh=function(t){return ih.get(t)},rh={geoJSON:function(t){var e=t.source;t.geoJSON=O(e)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")():e},svg:function(t){t.svgXML=Ud(t.source)}},ah=q,sh=k,lh=R,ch=B,uh=gc.parseClassType,dh={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:3500,COMPONENT:4e3,BRUSH:5e3}},hh="__flagInMainProcess",fh="__optionUpdated",ph=/^[a-zA-Z0-9_]+$/;function gh(t,e){return function(n,i,o){!e&&this._disposed||(n=n&&n.toLowerCase(),kt.prototype[t].call(this,n,i,o))}}function mh(){kt.call(this)}function vh(t,e,n){n=n||{},"string"==typeof e&&(e=Hh[e]),this._dom=t;var i=this._zr=xo(t,{renderer:n.renderer||"canvas",devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height});this._throttledZrFlush=hd(E(i.flush,i),17),(e=m(e))&&hu(e,!0),this._theme=e,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new jc;var o=this._api=function(t){var e=t._coordSysMgr;return x(new Gc(t),{getCoordinateSystems:E(e.getCoordinateSystems,e),getComponentByElement:function(e){for(;e;){var n=e.__ecComponentInfo;if(null!=n)return t._model.getComponent(n.mainType,n.index);e=e.parent}}})}(this);function r(t,e){return t.__prio-e.__prio}Dn(Fh,r),Dn(Bh,r),this._scheduler=new yd(this,o,Bh,Fh),kt.call(this,this._ecEventProcessor=new Lh),this._messageCenter=new mh,this._initEvents(),this.resize=E(this.resize,this),this._pendingActions=[],i.animation.on("frame",this._onframe,this),function(t,e){t.on("rendered",function(){e.trigger("rendered"),!t.animation.isFinished()||e[fh]||e._scheduler.unfinished||e._pendingActions.length||e.trigger("finished")})}(i,this),Z(this)}mh.prototype.on=gh("on",!0),mh.prototype.off=gh("off",!0),mh.prototype.one=gh("one",!0),M(mh,kt);var yh=vh.prototype;function xh(t,e,n){if(!this._disposed){var i,o=this._model,r=this._coordSysMgr.getCoordinateSystems();e=zo(o,e);for(var a=0;a<r.length;a++){var s=r[a];if(s[t]&&null!=(i=s[t](o,e,n)))return i}}}yh._onframe=function(){if(!this._disposed){var t=this._scheduler;if(this[fh]){var e=this[fh].silent;this[hh]=!0,_h(this),bh.update.call(this),this[hh]=!1,this[fh]=!1,Mh.call(this,e),Th.call(this,e)}else if(t.unfinished){var n=1,i=this._model;t.unfinished=!1;do{var o=+new Date;t.performSeriesTasks(i),t.performDataProcessorTasks(i),Sh(this,i),t.performVisualTasks(i),Dh(this,this._model,0,"remain"),n-=+new Date-o}while(0<n&&t.unfinished);t.unfinished||this._zr.flush()}}},yh.getDom=function(){return this._dom},yh.getZr=function(){return this._zr},yh.setOption=function(t,e,n){if(!this._disposed){var i;if(ch(e)&&(n=e.lazyUpdate,i=e.silent,e=e.notMerge),this[hh]=!0,!this._model||e){var o=new Kc(this._api),r=this._theme,a=this._model=new Vc;a.scheduler=this._scheduler,a.init(null,null,r,o)}this._model.setOption(t,zh),n?(this[fh]={silent:i},this[hh]=!1):(_h(this),bh.update.call(this),this._zr.flush(),this[fh]=!1,this[hh]=!1,Mh.call(this,i),Th.call(this,i))}},yh.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},yh.getModel=function(){return this._model},yh.getOption=function(){return this._model&&this._model.getOption()},yh.getWidth=function(){return this._zr.getWidth()},yh.getHeight=function(){return this._zr.getHeight()},yh.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},yh.getRenderedCanvas=function(t){if(o.canvasSupported)return(t=t||{}).pixelRatio=t.pixelRatio||1,t.backgroundColor=t.backgroundColor||this._model.get("backgroundColor"),this._zr.painter.getRenderedCanvas(t)},yh.getSvgDataURL=function(){if(o.svgSupported){var t=this._zr;return k(t.storage.getDisplayList(),function(t){t.stopAnimation(!0)}),t.painter.toDataURL()}},yh.getDataURL=function(t){if(!this._disposed){var e=(t=t||{}).excludeComponents,n=this._model,i=[],o=this;sh(e,function(t){n.eachComponent({mainType:t},function(t){var e=o._componentsMap[t.__viewId];e.group.ignore||(i.push(e),e.group.ignore=!0)})});var r="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.getRenderedCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return sh(i,function(t){t.group.ignore=!1}),r}},yh.getConnectedDataURL=function(t){if(!this._disposed&&o.canvasSupported){var e="svg"===t.type,n=this.group,i=Math.min,r=Math.max;if(Uh[n]){var a=1/0,s=1/0,l=-1/0,c=-1/0,u=[],d=t&&t.pixelRatio||1;k(Gh,function(o,d){if(o.group===n){var h=e?o.getZr().painter.getSvgDom().innerHTML:o.getRenderedCanvas(m(t)),f=o.getDom().getBoundingClientRect();a=i(f.left,a),s=i(f.top,s),l=r(f.right,l),c=r(f.bottom,c),u.push({dom:h,left:f.left,top:f.top})}});var h=(l*=d)-(a*=d),f=(c*=d)-(s*=d),p=_(),g=xo(p,{renderer:e?"svg":"canvas"});if(g.resize({width:h,height:f}),e){var v="";return sh(u,function(t){v+='<g transform="translate('+(t.left-a)+","+(t.top-s)+')">'+t.dom+"</g>"}),g.painter.getSvgRoot().innerHTML=v,t.connectedBackgroundColor&&g.painter.setBackgroundColor(t.connectedBackgroundColor),g.refreshImmediately(),g.painter.toDataURL()}return t.connectedBackgroundColor&&g.add(new ja({shape:{x:0,y:0,width:h,height:f},style:{fill:t.connectedBackgroundColor}})),sh(u,function(t){var e=new Wi({style:{x:t.left*d-a,y:t.top*d-s,image:t.dom}});g.add(e)}),g.refreshImmediately(),p.toDataURL("image/"+(t&&t.type||"png"))}return this.getDataURL(t)}},yh.convertToPixel=N(xh,"convertToPixel"),yh.convertFromPixel=N(xh,"convertFromPixel"),yh.containPixel=function(t,e){var n;if(!this._disposed)return k(t=zo(this._model,t),function(t,i){0<=i.indexOf("Models")&&k(t,function(t){var o=t.coordinateSystem;if(o&&o.containPoint)n|=!!o.containPoint(e);else if("seriesModels"===i){var r=this._chartsMap[t.__viewId];r&&r.containPoint&&(n|=r.containPoint(e,t))}},this)},this),!!n},yh.getVisual=function(t,e){var n=(t=zo(this._model,t,{defaultMainType:"series"})).seriesModel.getData(),i=t.hasOwnProperty("dataIndexInside")?t.dataIndexInside:t.hasOwnProperty("dataIndex")?n.indexOfRawIndex(t.dataIndex):null;return null!=i?n.getItemVisual(i,e):n.getVisual(e)},yh.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},yh.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]};var bh={prepareAndUpdate:function(t){_h(this),bh.update.call(this,t)},update:function(t){var e=this._model,n=this._api,i=this._zr,r=this._coordSysMgr,a=this._scheduler;if(e){a.restoreData(e,t),a.performSeriesTasks(e),r.create(e,n),a.performDataProcessorTasks(e,t),Sh(this,e),r.update(e,n),Ah(e),a.performVisualTasks(e,t),Ih(this,e,n,t);var s=e.get("backgroundColor")||"transparent";if(o.canvasSupported)i.setBackgroundColor(s);else{var l=Ve(s);s=qe(l,"rgb"),0===l[3]&&(s="transparent")}Ph(e,n)}},updateTransform:function(t){var e=this._model,n=this,i=this._api;if(e){var o=[];e.eachComponent(function(r,a){var s=n.getViewOfComponentModel(a);if(s&&s.__alive)if(s.updateTransform){var l=s.updateTransform(a,e,i,t);l&&l.update&&o.push(s)}else o.push(s)});var r=Q();e.eachSeries(function(o){var a=n._chartsMap[o.__viewId];if(a.updateTransform){var s=a.updateTransform(o,e,i,t);s&&s.update&&r.set(o.uid,1)}else r.set(o.uid,1)}),Ah(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0,dirtyMap:r}),Dh(n,e,0,t,r),Ph(e,this._api)}},updateView:function(t){var e=this._model;e&&(nd.markUpdateMethod(t,"updateView"),Ah(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0}),Ih(this,this._model,this._api,t),Ph(e,this._api))},updateVisual:function(t){bh.update.call(this,t)},updateLayout:function(t){bh.update.call(this,t)}};function _h(t){var e=t._model,n=t._scheduler;n.restorePipelines(e),n.prepareStageTasks(),kh(t,"component",e,n),kh(t,"chart",e,n),n.plan()}function wh(t,e,n,i,o){var r=t._model;if(i){var a={};a[i+"Id"]=n[i+"Id"],a[i+"Index"]=n[i+"Index"],a[i+"Name"]=n[i+"Name"];var s={mainType:i,query:a};o&&(s.subType=o);var l=n.excludeSeriesId;null!=l&&(l=Q(ko(l))),r&&r.eachComponent(s,function(e){l&&null!=l.get(e.id)||c(t["series"===i?"_chartsMap":"_componentsMap"][e.__viewId])},t)}else sh(t._componentsViews.concat(t._chartsViews),c);function c(i){i&&i.__alive&&i[e]&&i[e](i.__model,r,t._api,n)}}function Sh(t,e){var n=t._chartsMap,i=t._scheduler;e.eachSeries(function(t){i.updateStreamModes(t,n[t.__viewId])})}function Ch(t,e){var n=t.type,i=t.escapeConnect,o=Rh[n],r=o.actionInfo,a=(r.update||"update").split(":"),s=a.pop();a=null!=a[0]&&uh(a[0]),this[hh]=!0;var l=[t],c=!1;t.batch&&(c=!0,l=A(t.batch,function(e){return(e=b(x({},e),t)).batch=null,e}));var u,d=[],h="highlight"===n||"downplay"===n;sh(l,function(t){(u=(u=o.action(t,this._model,this._api))||x({},t)).type=r.event||u.type,d.push(u),h?wh(this,s,t,"series"):a&&wh(this,s,t,a.main,a.sub)},this),"none"===s||h||a||(this[fh]?(_h(this),bh.update.call(this,t),this[fh]=!1):bh[s].call(this,t)),u=c?{type:r.event||n,escapeConnect:i,batch:d}:d[0],this[hh]=!1,e||this._messageCenter.trigger(u.type,u)}function Mh(t){for(var e=this._pendingActions;e.length;){var n=e.shift();Ch.call(this,n,t)}}function Th(t){t||this.trigger("updated")}function kh(t,e,n,i){for(var o="component"===e,r=o?t._componentsViews:t._chartsViews,a=o?t._componentsMap:t._chartsMap,s=t._zr,l=t._api,c=0;c<r.length;c++)r[c].__alive=!1;function u(t){var e="_ec_"+t.id+"_"+t.type,c=a[e];if(!c){var u=uh(t.type);(c=new(o?Ku.getClass(u.main,u.sub):nd.getClass(u.sub))).init(n,l),a[e]=c,r.push(c),s.add(c.group)}t.__viewId=c.__id=e,c.__alive=!0,c.__model=t,c.group.__ecComponentInfo={mainType:t.mainType,index:t.componentIndex},o||i.prepareView(c,t,n,l)}for(o?n.eachComponent(function(t,e){"series"!==t&&u(e)}):n.eachSeries(u),c=0;c<r.length;){var d=r[c];d.__alive?c++:(o||d.renderTask.dispose(),s.remove(d.group),d.dispose(n,l),r.splice(c,1),delete a[d.__id],d.__id=d.group.__ecComponentInfo=null)}}function Ah(t){t.clearColorPalette(),t.eachSeries(function(t){t.clearColorPalette()})}function Ih(t,e,n,i){!function(t,e,n,i,o){sh(t._componentsViews,function(t){var o=t.__model;t.render(o,e,n,i),Nh(o,t)})}(t,e,n,i),sh(t._chartsViews,function(t){t.__alive=!1}),Dh(t,e,0,i),sh(t._chartsViews,function(t){t.__alive||t.remove(e,n)})}function Dh(t,e,n,i,r){var a,s=t._scheduler;e.eachSeries(function(e){var n=t._chartsMap[e.__viewId];n.__alive=!0;var o=n.renderTask;s.updatePayload(o,i),r&&r.get(e.uid)&&o.dirty(),a|=o.perform(s.getPerformArgs(o)),n.group.silent=!!e.get("silent"),Nh(e,n),function(t,e){var n=t.get("blendMode")||null;e.group.traverse(function(t){t.isGroup||t.style.blend!==n&&t.setStyle("blend",n),t.eachPendingDisplayable&&t.eachPendingDisplayable(function(t){t.setStyle("blend",n)})})}(e,n)}),s.unfinished|=a,function(t,e){var n=0;t._zr.storage.traverse(function(t){n++}),n>e.get("hoverLayerThreshold")&&!o.node&&e.eachSeries(function(e){if(!e.preventUsingHoverLayer){var n=t._chartsMap[e.__viewId];n.__alive&&n.group.traverse(function(t){t.useHoverLayer=!0})}})}(t,e),function(t,e){var n=e.getModel("aria");if(n.get("show"))if(n.get("description"))t.setAttribute("aria-label",n.get("description"));else{var i=0;e.eachSeries(function(t,e){++i},this);var o,r=n.get("data.maxCount")||10,a=n.get("series.maxCount")||10,s=Math.min(i,a);if(!(i<1)){var l=function(){var t=e.getModel("title").option;return t&&t.length&&(t=t[0]),t&&t.text}();o=l?u(d("general.withTitle"),{title:l}):d("general.withoutTitle");var c=[];o+=u(d(1<i?"series.multiple.prefix":"series.single.prefix"),{seriesCount:i}),e.eachSeries(function(t,e){if(e<s){var n,o=t.get("name"),a="series."+(1<i?"multiple":"single")+".";n=u(n=d(o?a+"withName":a+"withoutName"),{seriesId:t.seriesIndex,seriesName:t.get("name"),seriesType:function(t){return md.series.typeNames[t]||"自定义图"}(t.subType)});var l=t.getData();(window.data=l).count()>r?n+=u(d("data.partialData"),{displayCnt:r}):n+=d("data.allData");for(var h=[],f=0;f<l.count();f++)if(f<r){var p=l.getName(f),g=Mu(l,f);h.push(u(d(p?"data.withName":"data.withoutName"),{name:p,value:g}))}n+=h.join(d("data.separator.middle"))+d("data.separator.end"),c.push(n)}}),o+=c.join(d("series.multiple.separator.middle"))+d("series.multiple.separator.end"),t.setAttribute("aria-label",o)}}function u(t,e){if("string"!=typeof t)return t;var n=t;return k(e,function(t,e){n=n.replace(new RegExp("\\{\\s*"+e+"\\s*\\}","g"),t)}),n}function d(t){var e=n.get(t);if(null!=e)return e;for(var i=t.split("."),o=md.aria,r=0;r<i.length;++r)o=o[i[r]];return o}}(t._zr.dom,e)}function Ph(t,e){sh(Vh,function(n){n(t,e)})}yh.resize=function(t){if(!this._disposed){this._zr.resize(t);var e=this._model;if(this._loadingFX&&this._loadingFX.resize(),e){var n=e.resetOption("media"),i=t&&t.silent;this[hh]=!0,n&&_h(this),bh.update.call(this),this[hh]=!1,Mh.call(this,i),Th.call(this,i)}}},yh.showLoading=function(t,e){if(!this._disposed&&(ch(t)&&(e=t,t=""),t=t||"default",this.hideLoading(),Wh[t])){var n=Wh[t](this._api,e),i=this._zr;this._loadingFX=n,i.add(n)}},yh.hideLoading=function(){this._disposed||(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},yh.makeActionFromEvent=function(t){var e=x({},t);return e.type=Oh[t.type],e},yh.dispatchAction=function(t,e){this._disposed||(ch(e)||(e={silent:!!e}),Rh[t.type]&&this._model&&(this[hh]?this._pendingActions.push(t):(Ch.call(this,t,e.silent),e.flush?this._zr.flush(!0):!1!==e.flush&&o.browser.weChat&&this._throttledZrFlush(),Mh.call(this,e.silent),Th.call(this,e.silent))))},yh.appendData=function(t){if(!this._disposed){var e=t.seriesIndex;this.getModel().getSeriesByIndex(e).appendData(t),this._scheduler.unfinished=!0}},yh.on=gh("on",!1),yh.off=gh("off",!1),yh.one=gh("one",!1);var Eh=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function Nh(t,e){var n=t.get("z"),i=t.get("zlevel");e.group.traverse(function(t){"group"!==t.type&&(null!=n&&(t.z=n),null!=i&&(t.zlevel=i))})}function Lh(){}yh._initEvents=function(){sh(Eh,function(t){function e(e){var n,i=this.getModel(),o=e.target;if("globalout"===t)n={};else if(o&&null!=o.dataIndex){var r=o.dataModel||i.getSeriesByIndex(o.seriesIndex);n=r&&r.getDataParams(o.dataIndex,o.dataType,o)||{}}else o&&o.eventData&&(n=x({},o.eventData));if(n){var a=n.componentType,s=n.componentIndex;"markLine"!==a&&"markPoint"!==a&&"markArea"!==a||(a="series",s=n.seriesIndex);var l=a&&null!=s&&i.getComponent(a,s),c=l&&this["series"===l.mainType?"_chartsMap":"_componentsMap"][l.__viewId];n.event=e,n.type=t,this._ecEventProcessor.eventInfo={targetEl:o,packedEvent:n,model:l,view:c},this.trigger(t,n)}}e.zrEventfulCallAtLast=!0,this._zr.on(t,e,this)},this),sh(Oh,function(t,e){this._messageCenter.on(e,function(t){this.trigger(e,t)},this)},this)},yh.isDisposed=function(){return this._disposed},yh.clear=function(){this._disposed||this.setOption({series:[]},!0)},yh.dispose=function(){if(!this._disposed){this._disposed=!0,Fo(this.getDom(),qh,"");var t=this._api,e=this._model;sh(this._componentsViews,function(n){n.dispose(e,t)}),sh(this._chartsViews,function(n){n.dispose(e,t)}),this._zr.dispose(),delete Gh[this.id]}},M(vh,kt),Lh.prototype={constructor:Lh,normalizeQuery:function(t){var e={},n={},i={};if(O(t)){var o=uh(t);e.mainType=o.main||null,e.subType=o.sub||null}else{var r=["Index","Name","Id"],a={name:1,dataIndex:1,dataType:1};k(t,function(t,o){for(var s=!1,l=0;l<r.length;l++){var c=r[l],u=o.lastIndexOf(c);if(0<u&&u===o.length-c.length){var d=o.slice(0,u);"data"!==d&&(e.mainType=d,e[c.toLowerCase()]=t,s=!0)}}a.hasOwnProperty(o)&&(n[o]=t,s=!0),s||(i[o]=t)})}return{cptQuery:e,dataQuery:n,otherQuery:i}},filter:function(t,e,n){var i=this.eventInfo;if(!i)return!0;var o=i.targetEl,r=i.packedEvent,a=i.model,s=i.view;if(!a||!s)return!0;var l=e.cptQuery,c=e.dataQuery;return u(l,a,"mainType")&&u(l,a,"subType")&&u(l,a,"index","componentIndex")&&u(l,a,"name")&&u(l,a,"id")&&u(c,r,"name")&&u(c,r,"dataIndex")&&u(c,r,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,e.otherQuery,o,r));function u(t,e,n,i){return null==t[n]||e[i||n]===t[n]}},afterTrigger:function(){this.eventInfo=null}};var Rh={},Oh={},Bh=[],zh=[],Vh=[],Fh=[],Hh={},Wh={},Gh={},Uh={},jh=new Date-0,$h=new Date-0,qh="_echarts_instance_";function Yh(t){Uh[t]=!1}var Xh=Yh;function Zh(t){return Gh[function(t,e){return t.getAttribute?t.getAttribute(e):t[e]}(t,qh)]}function Kh(t,e){Hh[t]=e}function Jh(t){zh.push(t)}function Qh(t,e){rf(Bh,t,e,1e3)}function tf(t,e,n){"function"==typeof e&&(n=e,e="");var i=ch(t)?t.type:[t,t={event:e}][0];t.event=(t.event||i).toLowerCase(),e=t.event,ah(ph.test(i)&&ph.test(e)),Rh[i]||(Rh[i]={action:n,actionInfo:t}),Oh[e]=i}function ef(t,e){jc.register(t,e)}function nf(t,e){rf(Fh,t,e,1e3,"layout")}function of(t,e){rf(Fh,t,e,3e3,"visual")}function rf(t,e,n,i,o){(lh(e)||ch(e))&&(n=e,e=i);var r=yd.wrapStageHandler(n,o);return r.__prio=e,r.__raw=n,t.push(r),r}function af(t,e){Wh[t]=e}function sf(t){return gc.extend(t)}function lf(t){return Ku.extend(t)}function cf(t){return Gu.extend(t)}function uf(t){return nd.extend(t)}function df(t){return t}function hf(t,e,n,i,o){this._old=t,this._new=e,this._oldKeyGetter=n||df,this._newKeyGetter=i||df,this.context=o}function ff(t,e,n,i,o){for(var r=0;r<t.length;r++){var a="_ec_"+o[i](t[r],r),s=e[a];null==s?(n.push(a),e[a]=r):(s.length||(e[a]=s=[s]),s.push(r))}}of(2e3,gd),Jh(hu),Qh(900,function(t){var e=Q();t.eachSeries(function(t){var n=t.get("stack");if(n){var i=e.get(n)||e.set(n,[]),o=t.getData(),r={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:t};if(!r.stackedDimension||!r.isStackedByIndex&&!r.stackedByDimension)return;i.length&&o.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(r)}}),e.each(fu)}),af("default",function(t,e){b(e=e||{},{text:"loading",textColor:"#000",fontSize:"12px",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#c23531",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new Cn,i=new ja({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});n.add(i);var o=e.fontSize+" sans-serif",r=new ja({style:{fill:"none",text:e.text,font:o,textPosition:"right",textDistance:10,textFill:e.textColor},zlevel:e.zlevel,z:10001});if(n.add(r),e.showSpinner){var a=new Ja({shape:{startAngle:-vd/2,endAngle:-vd/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001});a.animateShape(!0).when(1e3,{endAngle:3*vd/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:3*vd/2}).delay(300).start("circularInOut"),n.add(a)}return n.resize=function(){var n=ii(e.text,o),s=e.showSpinner?e.spinnerRadius:0,l=(t.getWidth()-2*s-(e.showSpinner&&n?10:0)-n)/2-(e.showSpinner?0:n/2),c=t.getHeight()/2;e.showSpinner&&a.setShape({cx:l,cy:c}),r.setShape({x:l-s,y:c-s,width:2*s,height:2*s}),i.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},n.resize(),n}),tf({type:"highlight",event:"highlight",update:"highlight"},et),tf({type:"downplay",event:"downplay",update:"downplay"},et),Kh("light",zd),Kh("dark",Hd),hf.prototype={constructor:hf,add:function(t){return this._add=t,this},update:function(t){return this._update=t,this},remove:function(t){return this._remove=t,this},execute:function(){var t=this._old,e=this._new,n={},i=[],o=[];for(ff(t,{},i,"_oldKeyGetter",this),ff(e,n,o,"_newKeyGetter",this),r=0;r<t.length;r++)null!=(s=n[a=i[r]])?((c=s.length)?(1===c&&(n[a]=null),s=s.shift()):n[a]=null,this._update&&this._update(s,r)):this._remove&&this._remove(r);for(var r=0;r<o.length;r++){var a=o[r];if(n.hasOwnProperty(a)){var s;if(null==(s=n[a]))continue;if(s.length)for(var l=0,c=s.length;l<c;l++)this._add&&this._add(s[l]);else this._add&&this._add(s)}}}};var pf=Q(["tooltip","label","itemName","itemId","seriesName"]);function gf(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}function mf(t){return"category"===t?"ordinal":"time"===t?"time":"float"}function vf(t){null!=t&&x(this,t),this.otherDims={}}var yf=B,xf="undefined",bf={float:typeof Float64Array==xf?Array:Float64Array,int:typeof Int32Array==xf?Array:Int32Array,ordinal:Array,number:Array,time:Array},_f=typeof Uint32Array==xf?Array:Uint32Array,wf=typeof Int32Array==xf?Array:Int32Array,Sf=typeof Uint16Array==xf?Array:Uint16Array;function Cf(t){return 65535<t._rawCount?_f:Sf}var Mf=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],Tf=["_extent","_approximateExtent","_rawExtent"];function kf(t,e){k(Mf.concat(e.__wrappedMethods||[]),function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t.__wrappedMethods=e.__wrappedMethods,k(Tf,function(n){t[n]=m(e[n])}),t._calculationInfo=x(e._calculationInfo)}var Af=function(t,e){t=t||["x","y"];for(var n={},i=[],o={},r=0;r<t.length;r++){var a=t[r];O(a)?a=new vf({name:a}):a instanceof vf||(a=new vf(a));var s=a.name;a.type=a.type||"float",a.coordDim||(a.coordDim=s,a.coordDimIndex=0),a.otherDims=a.otherDims||{},i.push(s),(n[s]=a).index=r,a.createInvertedIndices&&(o[s]=[])}this.dimensions=i,this._dimensionInfos=n,this.hostModel=e,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=function(t){var e={},n=e.encode={},i=Q(),o=[],r=[],a=e.userOutput={dimensionNames:t.dimensions.slice(),encode:{}};k(t.dimensions,function(e){var s=t.getDimensionInfo(e),l=s.coordDim;if(l){var c=s.coordDimIndex;gf(n,l)[c]=e,s.isExtraCoord||(i.set(l,1),function(t){return!("ordinal"===t||"time"===t)}(s.type)&&(o[0]=e),gf(a.encode,l)[c]=s.index),s.defaultTooltip&&r.push(e)}pf.each(function(t,e){var i=gf(n,e),o=s.otherDims[e];null!=o&&!1!==o&&(i[o]=s.name)})});var s=[],l={};i.each(function(t,e){var i=n[e];l[e]=i[0],s=s.concat(i)}),e.dataDimsOnCoord=s,e.encodeFirstDimNotExtra=l;var c=n.label;c&&c.length&&(o=c.slice());var u=n.tooltip;return u&&u.length?r=u.slice():r.length||(r=o.slice()),n.defaultedLabel=o,n.defaultedTooltip=r,e}(this),this._invertedIndicesMap=o,this._calculationInfo={},this.userOutput=this._dimensionsSummary.userOutput},If=Af.prototype;function Df(t,e,n,i,o){var r=bf[e.type],a=i-1,s=e.name,l=t[s][a];if(l&&l.length<n){for(var c=new r(Math.min(o-a*n,n)),u=0;u<l.length;u++)c[u]=l[u];t[s][a]=c}for(var d=i*n;d<o;d+=n)t[s].push(new r(Math.min(o-d,n)))}function Pf(t){var e=t._invertedIndicesMap;k(e,function(n,i){var o=t._dimensionInfos[i].ordinalMeta;if(o){n=e[i]=new wf(o.categories.length);for(var r=0;r<n.length;r++)n[r]=-1;for(r=0;r<t._count;r++)n[t.get(i,r)]=r}})}function Ef(t,e,n){var i;if(null!=e){var o=t._chunkSize,r=Math.floor(n/o),a=t.dimensions[e],s=t._storage[a][r];if(s){i=s[n%o];var l=t._dimensionInfos[a].ordinalMeta;l&&l.categories.length&&(i=l.categories[i])}}return i}function Nf(t){return t}function Lf(t){return t<this._count&&0<=t?this._indices[t]:-1}function Rf(t,e){var n=t._idList[e];return null==n&&(n=Ef(t,t._idDimIdx,e)),null==n&&(n="e\0\0"+e),n}function Of(t){return L(t)||(t=[t]),t}function Bf(t,e){var n=t.dimensions,i=new Af(A(n,t.getDimensionInfo,t),t.hostModel);kf(i,t);for(var o=i._storage={},r=t._storage,a=0;a<n.length;a++){var s=n[a];r[s]&&(0<=S(e,s)?(o[s]=zf(r[s]),i._rawExtent[s]=[1/0,-1/0],i._extent[s]=null):o[s]=r[s])}return i}function zf(t){for(var e,n,i=new Array(t.length),o=0;o<t.length;o++)i[o]=(n=void 0,(n=(e=t[o]).constructor)===Array?e.slice():new n(e));return i}function Vf(t){t.seriesIndex=this.seriesIndex,t.dataIndex=this.dataIndex,t.dataType=this.dataType}function Ff(t,e,n){Ic.isInstance(e)||(e=Ic.seriesDataToSource(e)),n=n||{},t=(t||[]).slice();for(var i=(n.dimsDef||[]).slice(),o=Q(),r=Q(),a=[],s=function(t,e,n,i){var o=Math.max(t.dimensionsDetectCount||1,e.length,n.length,i||0);return k(e,function(t){var e=t.dimsDef;e&&(o=Math.max(o,e.length))}),o}(e,t,i,n.dimCount),l=0;l<s;l++){var c=i[l]=x({},B(i[l])?i[l]:{name:i[l]}),u=c.name,d=a[l]=new vf;null!=u&&null==o.get(u)&&(d.name=d.displayName=u,o.set(u,l)),null!=c.type&&(d.type=c.type),null!=c.displayName&&(d.displayName=c.displayName)}var h=n.encodeDef;!h&&n.encodeDefaulter&&(h=n.encodeDefaulter(e,s)),(h=Q(h)).each(function(t,e){if(1===(t=ko(t).slice()).length&&!O(t[0])&&t[0]<0)h.set(e,!1);else{var n=h.set(e,[]);k(t,function(t,i){O(t)&&(t=o.get(t)),null!=t&&t<s&&(n[i]=t,p(a[t],e,i))})}});var f=0;function p(t,e,n){null!=pf.get(e)?t.otherDims[e]=n:(t.coordDim=e,t.coordDimIndex=n,r.set(e,!0))}k(t,function(t,e){var n,i,o;if(O(t))n=t,t={};else{n=t.name;var r=t.ordinalMeta;t.ordinalMeta=null,(t=m(t)).ordinalMeta=r,i=t.dimsDef,o=t.otherDims,t.name=t.coordDim=t.coordDimIndex=t.dimsDef=t.otherDims=null}if(!1!==(s=h.get(n))){var s;if(!(s=ko(s)).length)for(var l=0;l<(i&&i.length||1);l++){for(;f<a.length&&null!=a[f].coordDim;)f++;f<a.length&&s.push(f++)}k(s,function(e,r){var s=a[e];if(p(b(s,t),n,r),null==s.name&&i){var l=i[r];B(l)||(l={name:l}),s.name=s.displayName=l.name,s.defaultTooltip=l.defaultTooltip}o&&b(s.otherDims,o)})}});var g=n.generateCoord,v=n.generateCoordCount,y=null!=v;v=g?v||1:0;for(var _,w=g||"value",S=0;S<s;S++)null==(d=a[S]=a[S]||new vf).coordDim&&(d.coordDim=Hf(w,r,y),d.coordDimIndex=0,(!g||v<=0)&&(d.isExtraCoord=!0),v--),null==d.name&&(d.name=Hf(d.coordDim,o)),null==d.type&&(1===Bc((_=e).data,_.sourceFormat,_.seriesLayoutBy,_.dimensionsDefine,_.startIndex,S)||d.isExtraCoord&&(null!=d.otherDims.itemName||null!=d.otherDims.seriesName))&&(d.type="ordinal");return a}function Hf(t,e,n){if(n||null!=e.get(t)){for(var i=0;null!=e.get(t+i);)i++;t+=i}return e.set(t,!0),t}If.type="list",If.hasItemOption=!0,If.getDimension=function(t){return"number"!=typeof t&&(isNaN(t)||this._dimensionInfos.hasOwnProperty(t))||(t=this.dimensions[t]),t},If.getDimensionInfo=function(t){return this._dimensionInfos[this.getDimension(t)]},If.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},If.mapDimension=function(t,e){var n=this._dimensionsSummary;if(null==e)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return!0===e?(i||[]).slice():i&&i[e]},If.initData=function(t,e,n){(Ic.isInstance(t)||T(t))&&(t=new pu(t,this.dimensions.length)),this._rawData=t,this._storage={},this._indices=null,this._nameList=e||[],this._idList=[],this._nameRepeatCount={},n||(this.hasItemOption=!1),this.defaultDimValueGetter=wu[this._rawData.getSource().sourceFormat],this._dimValueGetter=n=n||this.defaultDimValueGetter,this._dimValueGetterArrayRows=wu.arrayRows,this._rawExtent={},this._initDataFromProvider(0,t.count()),t.pure&&(this.hasItemOption=!1)},If.getProvider=function(){return this._rawData},If.appendData=function(t){var e=this._rawData,n=this.count();e.appendData(t);var i=e.count();e.persistent||(i+=n),this._initDataFromProvider(n,i)},If.appendValues=function(t,e){for(var n=this._chunkSize,i=this._storage,o=this.dimensions,r=o.length,a=this._rawExtent,s=this.count(),l=s+Math.max(t.length,e?e.length:0),c=this._chunkCount,u=0;u<r;u++)a[v=o[u]]||(a[v]=[1/0,-1/0]),i[v]||(i[v]=[]),Df(i,this._dimensionInfos[v],n,c,l),this._chunkCount=i[v].length;for(var d=new Array(r),h=s;h<l;h++){for(var f=h-s,p=Math.floor(h/n),g=h%n,m=0;m<r;m++){var v=o[m],y=this._dimValueGetterArrayRows(t[f]||d,v,f,m);i[v][p][g]=y;var x=a[v];y<x[0]&&(x[0]=y),y>x[1]&&(x[1]=y)}e&&(this._nameList[h]=e[f])}this._rawCount=this._count=l,this._extent={},Pf(this)},If._initDataFromProvider=function(t,e){if(!(e<=t)){for(var n,i=this._chunkSize,o=this._rawData,r=this._storage,a=this.dimensions,s=a.length,l=this._dimensionInfos,c=this._nameList,u=this._idList,d=this._rawExtent,h=this._nameRepeatCount={},f=this._chunkCount,p=0;p<s;p++){d[_=a[p]]||(d[_]=[1/0,-1/0]);var g=l[_];0===g.otherDims.itemName&&(n=this._nameDimIdx=p),0===g.otherDims.itemId&&(this._idDimIdx=p),r[_]||(r[_]=[]),Df(r,g,i,f,e),this._chunkCount=r[_].length}for(var m=new Array(s),v=t;v<e;v++){m=o.getItem(v,m);for(var y=Math.floor(v/i),x=v%i,b=0;b<s;b++){var _,w=r[_=a[b]][y],S=this._dimValueGetter(m,_,v,b);w[x]=S;var C=d[_];S<C[0]&&(C[0]=S),S>C[1]&&(C[1]=S)}if(!o.pure){var M=c[v];if(m&&null==M)if(null!=m.name)c[v]=M=m.name;else if(null!=n){var T=a[n],k=r[T][y];if(k){M=k[x];var A=l[T].ordinalMeta;A&&A.categories.length&&(M=A.categories[M])}}var I=null==m?null:m.id;null==I&&null!=M&&(h[M]=h[M]||0,0<h[I=M]&&(I+="__ec__"+h[M]),h[M]++),null!=I&&(u[v]=I)}}!o.persistent&&o.clean&&o.clean(),this._rawCount=this._count=e,this._extent={},Pf(this)}},If.count=function(){return this._count},If.getIndices=function(){var t=this._indices;if(t){var e=t.constructor,n=this._count;if(e===Array){o=new e(n);for(var i=0;i<n;i++)o[i]=t[i]}else o=new e(t.buffer,0,n)}else{var o=new(e=Cf(this))(this.count());for(i=0;i<o.length;i++)o[i]=i}return o},If.get=function(t,e){if(!(0<=e&&e<this._count))return NaN;var n=this._storage;if(!n[t])return NaN;e=this.getRawIndex(e);var i=Math.floor(e/this._chunkSize);return n[t][i][e%this._chunkSize]},If.getByRawIndex=function(t,e){if(!(0<=e&&e<this._rawCount))return NaN;var n=this._storage[t];return n?n[Math.floor(e/this._chunkSize)][e%this._chunkSize]:NaN},If._getFast=function(t,e){var n=Math.floor(e/this._chunkSize);return this._storage[t][n][e%this._chunkSize]},If.getValues=function(t,e){var n=[];L(t)||(e=t,t=this.dimensions);for(var i=0,o=t.length;i<o;i++)n.push(this.get(t[i],e));return n},If.hasValue=function(t){for(var e=this._dimensionsSummary.dataDimsOnCoord,n=0,i=e.length;n<i;n++)if(isNaN(this.get(e[n],t)))return!1;return!0},If.getDataExtent=function(t){t=this.getDimension(t);var e=[1/0,-1/0];if(!this._storage[t])return e;var n,i=this.count();if(!this._indices)return this._rawExtent[t].slice();if(n=this._extent[t])return n.slice();for(var o=(n=e)[0],r=n[1],a=0;a<i;a++){var s=this._getFast(t,this.getRawIndex(a));s<o&&(o=s),r<s&&(r=s)}return this._extent[t]=[o,r]},If.getApproximateExtent=function(t){return t=this.getDimension(t),this._approximateExtent[t]||this.getDataExtent(t)},If.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},If.getCalculationInfo=function(t){return this._calculationInfo[t]},If.setCalculationInfo=function(t,e){yf(t)?x(this._calculationInfo,t):this._calculationInfo[t]=e},If.getSum=function(t){var e=0;if(this._storage[t])for(var n=0,i=this.count();n<i;n++){var o=this.get(t,n);isNaN(o)||(e+=o)}return e},If.getMedian=function(t){var e=[];this.each(t,function(t,n){isNaN(t)||e.push(t)});var n=[].concat(e).sort(function(t,e){return t-e}),i=this.count();return 0===i?0:i%2==1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},If.rawIndexOf=function(t,e){var n=(t&&this._invertedIndicesMap[t])[e];return null==n||isNaN(n)?-1:n},If.indexOfName=function(t){for(var e=0,n=this.count();e<n;e++)if(this.getName(e)===t)return e;return-1},If.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var e=this._indices,n=e[t];if(null!=n&&n<this._count&&n===t)return t;for(var i=0,o=this._count-1;i<=o;){var r=(i+o)/2|0;if(e[r]<t)i=1+r;else{if(!(e[r]>t))return r;o=r-1}}return-1},If.indicesOfNearest=function(t,e,n){var i=[];if(!this._storage[t])return i;null==n&&(n=1/0);for(var o=1/0,r=-1,a=0,s=0,l=this.count();s<l;s++){var c=e-this.get(t,s),u=Math.abs(c);u<=n&&((u<o||u===o&&0<=c&&r<0)&&(o=u,r=c,a=0),c===r&&(i[a++]=s))}return i.length=a,i},If.getRawIndex=Nf,If.getRawDataItem=function(t){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(t));for(var e=[],n=0;n<this.dimensions.length;n++)e.push(this.get(this.dimensions[n],t));return e},If.getName=function(t){var e=this.getRawIndex(t);return this._nameList[e]||Ef(this,this._nameDimIdx,e)||""},If.getId=function(t){return Rf(this,this.getRawIndex(t))},If.each=function(t,e,n,i){if(this._count){"function"==typeof t&&(i=n,n=e,e=t,t=[]),n=n||i||this;for(var o=(t=A(Of(t),this.getDimension,this)).length,r=0;r<this.count();r++)switch(o){case 0:e.call(n,r);break;case 1:e.call(n,this.get(t[0],r),r);break;case 2:e.call(n,this.get(t[0],r),this.get(t[1],r),r);break;default:for(var a=0,s=[];a<o;a++)s[a]=this.get(t[a],r);s[a]=r,e.apply(n,s)}}},If.filterSelf=function(t,e,n,i){if(this._count){"function"==typeof t&&(i=n,n=e,e=t,t=[]),n=n||i||this,t=A(Of(t),this.getDimension,this);for(var o=this.count(),r=new(Cf(this))(o),a=[],s=t.length,l=0,c=t[0],u=0;u<o;u++){var d,h=this.getRawIndex(u);if(0===s)d=e.call(n,u);else if(1===s){var f=this._getFast(c,h);d=e.call(n,f,u)}else{for(var p=0;p<s;p++)a[p]=this._getFast(c,h);a[p]=u,d=e.apply(n,a)}d&&(r[l++]=h)}return l<o&&(this._indices=r),this._count=l,this._extent={},this.getRawIndex=this._indices?Lf:Nf,this}},If.selectRange=function(t){if(this._count){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);var i=e.length;if(i){var o=this.count(),r=new(Cf(this))(o),a=0,s=e[0],l=t[s][0],c=t[s][1],u=!1;if(!this._indices){var d=0;if(1===i){for(var h=this._storage[e[0]],f=0;f<this._chunkCount;f++)for(var p=h[f],g=Math.min(this._count-f*this._chunkSize,this._chunkSize),m=0;m<g;m++)(l<=(_=p[m])&&_<=c||isNaN(_))&&(r[a++]=d),d++;u=!0}else if(2===i){h=this._storage[s];var v=this._storage[e[1]],y=t[e[1]][0],x=t[e[1]][1];for(f=0;f<this._chunkCount;f++){p=h[f];var b=v[f];for(g=Math.min(this._count-f*this._chunkSize,this._chunkSize),m=0;m<g;m++){var _=p[m],w=b[m];(l<=_&&_<=c||isNaN(_))&&(y<=w&&w<=x||isNaN(w))&&(r[a++]=d),d++}}u=!0}}if(!u)if(1===i)for(m=0;m<o;m++){var S=this.getRawIndex(m);(l<=(_=this._getFast(s,S))&&_<=c||isNaN(_))&&(r[a++]=S)}else for(m=0;m<o;m++){var C=!0;for(S=this.getRawIndex(m),f=0;f<i;f++){var M=e[f];((_=this._getFast(n,S))<t[M][0]||_>t[M][1])&&(C=!1)}C&&(r[a++]=this.getRawIndex(m))}return a<o&&(this._indices=r),this._count=a,this._extent={},this.getRawIndex=this._indices?Lf:Nf,this}}},If.mapArray=function(t,e,n,i){"function"==typeof t&&(i=n,n=e,e=t,t=[]);var o=[];return this.each(t,function(){o.push(e&&e.apply(this,arguments))},n=n||i||this),o},If.map=function(t,e,n,i){n=n||i||this;var o=Bf(this,t=A(Of(t),this.getDimension,this));o._indices=this._indices,o.getRawIndex=o._indices?Lf:Nf;for(var r=o._storage,a=[],s=this._chunkSize,l=t.length,c=this.count(),u=[],d=o._rawExtent,h=0;h<c;h++){for(var f=0;f<l;f++)u[f]=this.get(t[f],h);u[l]=h;var p=e&&e.apply(n,u);if(null!=p){"object"!=typeof p&&(a[0]=p,p=a);for(var g=this.getRawIndex(h),m=Math.floor(g/s),v=g%s,y=0;y<p.length;y++){var x=t[y],b=p[y],_=d[x],w=r[x];w&&(w[m][v]=b),b<_[0]&&(_[0]=b),b>_[1]&&(_[1]=b)}}}return o},If.downSample=function(t,e,n,i){for(var o=Bf(this,[t]),r=o._storage,a=[],s=Math.floor(1/e),l=r[t],c=this.count(),u=this._chunkSize,d=o._rawExtent[t],h=new(Cf(this))(c),f=0,p=0;p<c;p+=s){c-p<s&&(a.length=s=c-p);for(var g=0;g<s;g++){var m=this.getRawIndex(p+g),v=Math.floor(m/u);a[g]=l[v][m%u]}var y=n(a),x=this.getRawIndex(Math.min(p+i(a,y)||0,c-1)),b=x%u;(l[Math.floor(x/u)][b]=y)<d[0]&&(d[0]=y),y>d[1]&&(d[1]=y),h[f++]=x}return o._count=f,o._indices=h,o.getRawIndex=Lf,o},If.getItemModel=function(t){var e=this.hostModel;return new fl(this.getRawDataItem(t),e,e&&e.ecModel)},If.diff=function(t){var e=this;return new hf(t?t.getIndices():[],this.getIndices(),function(e){return Rf(t,e)},function(t){return Rf(e,t)})},If.getVisual=function(t){var e=this._visual;return e&&e[t]},If.setVisual=function(t,e){if(yf(t))for(var n in t)t.hasOwnProperty(n)&&this.setVisual(n,t[n]);else this._visual=this._visual||{},this._visual[t]=e},If.setLayout=function(t,e){if(yf(t))for(var n in t)t.hasOwnProperty(n)&&this.setLayout(n,t[n]);else this._layout[t]=e},If.getLayout=function(t){return this._layout[t]},If.getItemLayout=function(t){return this._itemLayouts[t]},If.setItemLayout=function(t,e,n){this._itemLayouts[t]=n?x(this._itemLayouts[t]||{},e):e},If.clearItemLayouts=function(){this._itemLayouts.length=0},If.getItemVisual=function(t,e,n){var i=this._itemVisuals[t],o=i&&i[e];return null!=o||n?o:this.getVisual(e)},If.setItemVisual=function(t,e,n){var i=this._itemVisuals[t]||{},o=this.hasItemVisual;if(this._itemVisuals[t]=i,yf(e))for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r],o[r]=!0);else i[e]=n,o[e]=!0},If.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}},If.setItemGraphicEl=function(t,e){var n=this.hostModel;e&&(e.dataIndex=t,e.dataType=this.dataType,e.seriesIndex=n&&n.seriesIndex,"group"===e.type&&e.traverse(Vf,e)),this._graphicEls[t]=e},If.getItemGraphicEl=function(t){return this._graphicEls[t]},If.eachItemGraphicEl=function(t,e){k(this._graphicEls,function(n,i){n&&t&&t.call(e,n,i)})},If.cloneShallow=function(t){if(!t){var e=A(this.dimensions,this.getDimensionInfo,this);t=new Af(e,this.hostModel)}return t._storage=this._storage,kf(t,this),t._indices=this._indices?new(0,this._indices.constructor)(this._indices):null,t.getRawIndex=t._indices?Lf:Nf,t},If.wrapMethod=function(t,e){var n=this[t];"function"==typeof n&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var t=n.apply(this,arguments);return e.apply(this,[t].concat(j(arguments)))})},If.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],If.CHANGABLE_METHODS=["filterSelf","selectRange"];var Wf=function(t,e){return Ff((e=e||{}).coordDimensions||[],t,{dimsDef:e.dimensionsDefine||t.dimensionsDefine,encodeDef:e.encodeDefine||t.encodeDefine,dimCount:e.dimensionsCount,encodeDefaulter:e.encodeDefaulter,generateCoord:e.generateCoord,generateCoordCount:e.generateCoordCount})};function Gf(t){this.coordSysName=t,this.coordSysDims=[],this.axisMap=Q(),this.categoryAxisMap=Q(),this.firstCategoryDimIndex=null}var Uf={cartesian2d:function(t,e,n,i){var o=t.getReferringComponents("xAxis")[0],r=t.getReferringComponents("yAxis")[0];e.coordSysDims=["x","y"],n.set("x",o),n.set("y",r),jf(o)&&(i.set("x",o),e.firstCategoryDimIndex=0),jf(r)&&(i.set("y",r),e.firstCategoryDimIndex=1)},singleAxis:function(t,e,n,i){var o=t.getReferringComponents("singleAxis")[0];e.coordSysDims=["single"],n.set("single",o),jf(o)&&(i.set("single",o),e.firstCategoryDimIndex=0)},polar:function(t,e,n,i){var o=t.getReferringComponents("polar")[0],r=o.findAxisModel("radiusAxis"),a=o.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",r),n.set("angle",a),jf(r)&&(i.set("radius",r),e.firstCategoryDimIndex=0),jf(a)&&(i.set("angle",a),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,i){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,i){var o=t.ecModel,r=o.getComponent("parallel",t.get("parallelIndex")),a=e.coordSysDims=r.dimensions.slice();k(r.parallelAxisIndex,function(t,r){var s=o.getComponent("parallelAxis",t),l=a[r];n.set(l,s),jf(s)&&null==e.firstCategoryDimIndex&&(i.set(l,s),e.firstCategoryDimIndex=r)})}};function jf(t){return"category"===t.get("type")}function $f(t,e,n){var i,o,r,a,s=(n=n||{}).byIndex,l=n.stackedCoordDimension,c=!(!t||!t.get("stack"));if(k(e,function(t,n){O(t)&&(e[n]=t={name:t}),c&&!t.isExtraCoord&&(s||i||!t.ordinalMeta||(i=t),o||"ordinal"===t.type||"time"===t.type||l&&l!==t.coordDim||(o=t))}),!o||s||i||(s=!0),o){r="__\0ecstackresult",a="__\0ecstackedover",i&&(i.createInvertedIndices=!0);var u=o.coordDim,d=o.type,h=0;k(e,function(t){t.coordDim===u&&h++}),e.push({name:r,coordDim:u,coordDimIndex:h,type:d,isExtraCoord:!0,isCalculationCoord:!0}),h++,e.push({name:a,coordDim:a,coordDimIndex:h,type:d,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:o&&o.name,stackedByDimension:i&&i.name,isStackedByIndex:s,stackedOverDimension:a,stackResultDimension:r}}function qf(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function Yf(t,e){return qf(t,e)?t.getCalculationInfo("stackResultDimension"):e}function Xf(t,e,n){n=n||{},Ic.isInstance(t)||(t=Ic.seriesDataToSource(t));var i,o=e.get("coordinateSystem"),r=jc.get(o),a=function(t){var e=t.get("coordinateSystem"),n=new Gf(e),i=Uf[e];if(i)return i(t,n,n.axisMap,n.categoryAxisMap),n}(e);a&&(i=A(a.coordSysDims,function(t){var e={name:t},n=a.axisMap.get(t);if(n){var i=n.get("type");e.type=mf(i)}return e})),i=i||r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"];var s,l,c=Wf(t,{coordDimensions:i,generateCoord:n.generateCoord,encodeDefaulter:n.useEncodeDefaulter?N(Lc,i,e):null});a&&k(c,function(t,e){var n=a.categoryAxisMap.get(t.coordDim);n&&(null==s&&(s=e),t.ordinalMeta=n.getOrdinalMeta()),null!=t.otherDims.itemName&&(l=!0)}),l||null==s||(c[s].otherDims.itemName=0);var u=$f(e,c),d=new Af(c,e);d.setCalculationInfo(u);var h=null!=s&&function(t){if(t.sourceFormat===_c){var e=function(t){for(var e=0;e<t.length&&null==t[e];)e++;return t[e]}(t.data||[]);return null!=e&&!L(Do(e))}}(t)?function(t,e,n,i){return i===s?n:this.defaultDimValueGetter(t,e,n,i)}:null;return d.hasItemOption=!1,d.initData(t,null,h),d}function Zf(t){this._setting=t||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}function Kf(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication}Zf.prototype.parse=function(t){return t},Zf.prototype.getSetting=function(t){return this._setting[t]},Zf.prototype.contain=function(t){var e=this._extent;return t>=e[0]&&t<=e[1]},Zf.prototype.normalize=function(t){var e=this._extent;return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])},Zf.prototype.scale=function(t){var e=this._extent;return t*(e[1]-e[0])+e[0]},Zf.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},Zf.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},Zf.prototype.getExtent=function(){return this._extent.slice()},Zf.prototype.setExtent=function(t,e){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(e)||(n[1]=e)},Zf.prototype.isBlank=function(){return this._isBlank},Zf.prototype.setBlank=function(t){this._isBlank=t},Zf.prototype.getLabel=null,jo(Zf),Zo(Zf,{registerWhenExtend:!0}),Kf.createByAxisModel=function(t){var e=t.option,n=e.data,i=n&&A(n,tp);return new Kf({categories:i,needCollect:!i,deduplication:!1!==e.dedplication})};var Jf=Kf.prototype;function Qf(t){return t._map||(t._map=Q(t.categories))}function tp(t){return B(t)&&null!=t.value?t.value:t+""}Jf.getOrdinal=function(t){return Qf(this).get(t)},Jf.parseAndCollect=function(t){var e,n=this._needCollect;if("string"!=typeof t&&!n)return t;if(n&&!this._deduplication)return this.categories[e=this.categories.length]=t,e;var i=Qf(this);return null==(e=i.get(t))&&(n?(this.categories[e=this.categories.length]=t,i.set(t,e)):e=NaN),e};var ep=Zf.prototype,np=Zf.extend({type:"ordinal",init:function(t,e){t&&!L(t)||(t=new Kf({categories:t})),this._ordinalMeta=t,this._extent=e||[0,t.categories.length-1]},parse:function(t){return"string"==typeof t?this._ordinalMeta.getOrdinal(t):Math.round(t)},contain:function(t){return t=this.parse(t),ep.contain.call(this,t)&&null!=this._ordinalMeta.categories[t]},normalize:function(t){return ep.normalize.call(this,this.parse(t))},scale:function(t){return Math.round(ep.scale.call(this,t))},getTicks:function(){for(var t=[],e=this._extent,n=e[0];n<=e[1];)t.push(n),n++;return t},getLabel:function(t){if(!this.isBlank())return this._ordinalMeta.categories[t]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:et,niceExtent:et});np.create=function(){return new np};var ip=_l;function op(t){return Cl(t)+2}function rp(t,e,n){t[e]=Math.max(Math.min(t[e],n[1]),n[0])}function ap(t,e){isFinite(t[0])||(t[0]=e[0]),isFinite(t[1])||(t[1]=e[1]),rp(t,0,e),rp(t,1,e),t[0]>t[1]&&(t[0]=t[1])}var sp=_l,lp=Zf.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(t,e){var n=this._extent;isNaN(t)||(n[0]=parseFloat(t)),isNaN(e)||(n[1]=parseFloat(e))},unionExtent:function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1]),lp.prototype.setExtent.call(this,e[0],e[1])},getInterval:function(){return this._interval},setInterval:function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=op(t)},getTicks:function(t){var e=this._interval,n=this._extent,i=this._niceExtent,o=this._intervalPrecision,r=[];if(!e)return r;n[0]<i[0]&&r.push(t?sp(i[0]-e,o):n[0]);for(var a=i[0];a<=i[1]&&(r.push(a),(a=sp(a+e,o))!==r[r.length-1]);)if(1e4<r.length)return[];var s=r.length?r[r.length-1]:i[1];return n[1]>s&&r.push(t?sp(s+e,o):n[1]),r},getMinorTicks:function(t){for(var e=this.getTicks(!0),n=[],i=this.getExtent(),o=1;o<e.length;o++){for(var r=e[o-1],a=0,s=[],l=(e[o]-r)/t;a<t-1;){var c=_l(r+(a+1)*l);c>i[0]&&c<i[1]&&s.push(c),a++}n.push(s)}return n},getLabel:function(t,e){if(null==t)return"";var n=e&&e.precision;return null==n?n=Cl(t)||0:"auto"===n&&(n=this._intervalPrecision),zl(t=sp(t,n,!0))},niceTicks:function(t,e,n){t=t||5;var i=this._extent,o=i[1]-i[0];if(isFinite(o)){o<0&&(o=-o,i.reverse());var r=function(t,e,n,i){var o={},r=o.interval=Ll((t[1]-t[0])/e,!0);null!=n&&r<n&&(r=o.interval=n),null!=i&&i<r&&(r=o.interval=i);var a=o.intervalPrecision=op(r);return ap(o.niceTickExtent=[ip(Math.ceil(t[0]/r)*r,a),ip(Math.floor(t[1]/r)*r,a)],t),o}(i,t,e,n);this._intervalPrecision=r.intervalPrecision,this._interval=r.interval,this._niceExtent=r.niceTickExtent}},niceExtent:function(t){var e=this._extent;if(e[0]===e[1])if(0!==e[0]){var n=e[0];t.fixMax||(e[1]+=n/2),e[0]-=n/2}else e[1]=1;isFinite(e[1]-e[0])||(e[0]=0,e[1]=1),this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var i=this._interval;t.fixMin||(e[0]=sp(Math.floor(e[0]/i)*i)),t.fixMax||(e[1]=sp(Math.ceil(e[1]/i)*i))}});lp.create=function(){return new lp};var cp="__ec_stack_",up="undefined"!=typeof Float32Array?Float32Array:Array;function dp(t){return t.get("stack")||cp+t.seriesIndex}function hp(t){return t.dim+t.index}function fp(t,e){var n=[];return e.eachSeriesByType(t,function(t){xp(t)&&!bp(t)&&n.push(t)}),n}function pp(t){var e=function(t){var e={};k(t,function(t){var n=t.coordinateSystem.getBaseAxis();if("time"===n.type||"value"===n.type)for(var i=t.getData(),o=n.dim+"_"+n.index,r=i.mapDimension(n.dim),a=0,s=i.count();a<s;++a){var l=i.get(r,a);e[o]?e[o].push(l):e[o]=[l]}});var n=[];for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];if(o){o.sort(function(t,e){return t-e});for(var r=null,a=1;a<o.length;++a){var s=o[a]-o[a-1];0<s&&(r=null===r?s:Math.min(r,s))}n[i]=r}}return n}(t),n=[];return k(t,function(t){var i,o=t.coordinateSystem.getBaseAxis(),r=o.getExtent();if("category"===o.type)i=o.getBandWidth();else if("value"===o.type||"time"===o.type){var a=e[o.dim+"_"+o.index],s=Math.abs(r[1]-r[0]),l=o.scale.getExtent(),c=Math.abs(l[1]-l[0]);i=a?s/c*a:s}else{var u=t.getData();i=Math.abs(r[1]-r[0])/u.count()}var d=bl(t.get("barWidth"),i),h=bl(t.get("barMaxWidth"),i),f=bl(t.get("barMinWidth")||1,i),p=t.get("barGap"),g=t.get("barCategoryGap");n.push({bandWidth:i,barWidth:d,barMaxWidth:h,barMinWidth:f,barGap:p,barCategoryGap:g,axisKey:hp(o),stackId:dp(t)})}),gp(n)}function gp(t){var e={};k(t,function(t,n){var i=t.axisKey,o=t.bandWidth,r=e[i]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},a=r.stacks;e[i]=r;var s=t.stackId;a[s]||r.autoWidthCount++,a[s]=a[s]||{width:0,maxWidth:0};var l=t.barWidth;l&&!a[s].width&&(a[s].width=l,l=Math.min(r.remainedWidth,l),r.remainedWidth-=l);var c=t.barMaxWidth;c&&(a[s].maxWidth=c);var u=t.barMinWidth;u&&(a[s].minWidth=u);var d=t.barGap;null!=d&&(r.gap=d);var h=t.barCategoryGap;null!=h&&(r.categoryGap=h)});var n={};return k(e,function(t,e){n[e]={};var i=t.stacks,o=t.bandWidth,r=bl(t.categoryGap,o),a=bl(t.gap,1),s=t.remainedWidth,l=t.autoWidthCount,c=(s-r)/(l+(l-1)*a);c=Math.max(c,0),k(i,function(t){var e=t.maxWidth,n=t.minWidth;if(t.width)i=t.width,e&&(i=Math.min(i,e)),n&&(i=Math.max(i,n)),t.width=i,s-=i+a*i,l--;else{var i=c;e&&e<i&&(i=Math.min(e,s)),n&&i<n&&(i=n),i!==c&&(t.width=i,s-=i+a*i,l--)}}),c=(s-r)/(l+(l-1)*a),c=Math.max(c,0);var u,d=0;k(i,function(t,e){t.width||(t.width=c),d+=(u=t).width*(1+a)}),u&&(d-=u.width*a);var h=-d/2;k(i,function(t,i){n[e][i]=n[e][i]||{bandWidth:o,offset:h,width:t.width},h+=t.width*(1+a)})}),n}function mp(t,e,n){if(t&&e){var i=t[hp(e)];return null!=i&&null!=n&&(i=i[dp(n)]),i}}function vp(t,e){var n=fp(t,e),i=pp(n),o={};k(n,function(t){var e=t.getData(),n=t.coordinateSystem,r=n.getBaseAxis(),a=dp(t),s=i[hp(r)][a],l=s.offset,c=s.width,u=n.getOtherAxis(r),d=t.get("barMinHeight")||0;o[a]=o[a]||[],e.setLayout({bandWidth:s.bandWidth,offset:l,size:c});for(var h=e.mapDimension(u.dim),f=e.mapDimension(r.dim),p=qf(e,h),g=u.isHorizontal(),m=_p(0,u),v=0,y=e.count();v<y;v++){var x,b,_,w,S,C=e.get(h,v),M=e.get(f,v),T=0<=C?"p":"n",k=m;p&&(o[a][M]||(o[a][M]={p:m,n:m}),k=o[a][M][T]),g?(x=k,b=(S=n.dataToPoint([C,M]))[1]+l,_=S[0]-m,w=c,Math.abs(_)<d&&(_=(_<0?-1:1)*d),isNaN(_)||p&&(o[a][M][T]+=_)):(x=(S=n.dataToPoint([M,C]))[0]+l,b=k,_=c,w=S[1]-m,Math.abs(w)<d&&(w=(w<=0?-1:1)*d),isNaN(w)||p&&(o[a][M][T]+=w)),e.setItemLayout(v,{x:x,y:b,width:_,height:w})}},this)}var yp={seriesType:"bar",plan:Qu(),reset:function(t){if(xp(t)&&bp(t)){var e=t.getData(),n=t.coordinateSystem,i=n.grid.getRect(),o=n.getBaseAxis(),r=n.getOtherAxis(o),a=e.mapDimension(r.dim),s=e.mapDimension(o.dim),l=r.isHorizontal(),c=l?0:1,u=mp(pp([t]),o,t).width;return.5<u||(u=.5),{progress:function(t,e){for(var o,d=t.count,h=new up(2*d),f=new up(2*d),p=new up(d),g=[],m=[],v=0,y=0;null!=(o=t.next());)m[c]=e.get(a,o),m[1-c]=e.get(s,o),g=n.dataToPoint(m,null,g),f[v]=l?i.x+i.width:g[0],h[v++]=g[0],f[v]=l?g[1]:i.y+i.height,h[v++]=g[1],p[y++]=o;e.setLayout({largePoints:h,largeDataIndices:p,largeBackgroundPoints:f,barWidth:u,valueAxisStart:_p(0,r),backgroundStart:l?i.x:i.y,valueAxisHorizontal:l})}}}}};function xp(t){return t.coordinateSystem&&"cartesian2d"===t.coordinateSystem.type}function bp(t){return t.pipelineContext&&t.pipelineContext.large}function _p(t,e){return e.toGlobalCoord(e.dataToCoord("log"===e.type?1:0))}var wp=lp.prototype,Sp=Math.ceil,Cp=Math.floor,Mp=36e5,Tp=864e5,kp=lp.extend({type:"time",getLabel:function(t){var e=this._stepLvl,n=new Date(t);return Zl(e[0],n,this.getSetting("useUTC"))},niceExtent:function(t){var e=this._extent;if(e[0]===e[1]&&(e[0]-=Tp,e[1]+=Tp),e[1]===-1/0&&e[0]===1/0){var n=new Date;e[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),e[0]=e[1]-Tp}this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var i=this._interval;t.fixMin||(e[0]=_l(Cp(e[0]/i)*i)),t.fixMax||(e[1]=_l(Sp(e[1]/i)*i))},niceTicks:function(t,e,n){var i=this._extent,o=i[1]-i[0],r=o/(t=t||10);null!=e&&r<e&&(r=e),null!=n&&n<r&&(r=n);var a=Ap.length,s=function(t,e,n,i){for(;n<i;){var o=n+i>>>1;t[o][1]<e?n=1+o:i=o}return n}(Ap,r,0,a),l=Ap[Math.min(s,a-1)],c=l[1];"year"===l[0]&&(c*=Ll(o/c/t,!0));var u=this.getSetting("useUTC")?0:60*new Date(+i[0]||+i[1]).getTimezoneOffset()*1e3,d=[Math.round(Sp((i[0]-u)/c)*c+u),Math.round(Cp((i[1]-u)/c)*c+u)];ap(d,i),this._stepLvl=l,this._interval=c,this._niceExtent=d},parse:function(t){return+Pl(t)}});k(["contain","normalize"],function(t){kp.prototype[t]=function(e){return wp[t].call(this,this.parse(e))}});var Ap=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],["hh:mm\nMM-dd",6e4],["hh:mm\nMM-dd",3e5],["hh:mm\nMM-dd",6e5],["hh:mm\nMM-dd",9e5],["hh:mm\nMM-dd",18e5],["hh:mm\nMM-dd",Mp],["hh:mm\nMM-dd",72e5],["hh:mm\nMM-dd",6*Mp],["hh:mm\nMM-dd",432e5],["MM-dd\nyyyy",Tp],["MM-dd\nyyyy",2*Tp],["MM-dd\nyyyy",3*Tp],["MM-dd\nyyyy",4*Tp],["MM-dd\nyyyy",5*Tp],["MM-dd\nyyyy",6*Tp],["week",7*Tp],["MM-dd\nyyyy",864e6],["week",14*Tp],["week",21*Tp],["month",31*Tp],["week",42*Tp],["month",62*Tp],["week",70*Tp],["quarter",95*Tp],["month",31*Tp*4],["month",13392e6],["half-year",16416e6],["month",31*Tp*8],["month",26784e6],["year",380*Tp]];kp.create=function(t){return new kp({useUTC:t.ecModel.get("useUTC")})};var Ip=Zf.prototype,Dp=lp.prototype,Pp=Cl,Ep=_l,Np=Math.floor,Lp=Math.ceil,Rp=Math.pow,Op=Math.log,Bp=Zf.extend({type:"log",base:10,$constructor:function(){Zf.apply(this,arguments),this._originalScale=new lp},getTicks:function(t){var e=this._originalScale,n=this._extent,i=e.getExtent();return A(Dp.getTicks.call(this,t),function(t){var o=_l(Rp(this.base,t));return o=t===n[0]&&e.__fixMin?zp(o,i[0]):o,t===n[1]&&e.__fixMax?zp(o,i[1]):o},this)},getMinorTicks:Dp.getMinorTicks,getLabel:Dp.getLabel,scale:function(t){return t=Ip.scale.call(this,t),Rp(this.base,t)},setExtent:function(t,e){var n=this.base;t=Op(t)/Op(n),e=Op(e)/Op(n),Dp.setExtent.call(this,t,e)},getExtent:function(){var t=this.base,e=Ip.getExtent.call(this);e[0]=Rp(t,e[0]),e[1]=Rp(t,e[1]);var n=this._originalScale,i=n.getExtent();return n.__fixMin&&(e[0]=zp(e[0],i[0])),n.__fixMax&&(e[1]=zp(e[1],i[1])),e},unionExtent:function(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=Op(t[0])/Op(e),t[1]=Op(t[1])/Op(e),Ip.unionExtent.call(this,t)},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},niceTicks:function(t){t=t||10;var e=this._extent,n=e[1]-e[0];if(!(n==1/0||n<=0)){var i=El(n);for(t/n*i<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&0<Math.abs(i);)i*=10;var o=[_l(Lp(e[0]/i)*i),_l(Np(e[1]/i)*i)];this._interval=i,this._niceExtent=o}},niceExtent:function(t){Dp.niceExtent.call(this,t);var e=this._originalScale;e.__fixMin=t.fixMin,e.__fixMax=t.fixMax}});function zp(t,e){return Ep(t,Pp(e))}function Vp(t,e){var n,i,o,r=t.type,a=e.getMin(),s=e.getMax(),l=t.getExtent();"ordinal"===r?n=e.getCategories().length:(L(i=e.get("boundaryGap"))||(i=[i||0,i||0]),"boolean"==typeof i[0]&&(i=[0,0]),i[0]=bl(i[0],1),i[1]=bl(i[1],1),o=l[1]-l[0]||Math.abs(l[0])),"dataMin"===a?a=l[0]:"function"==typeof a&&(a=a({min:l[0],max:l[1]})),"dataMax"===s?s=l[1]:"function"==typeof s&&(s=s({min:l[0],max:l[1]}));var c=null!=a,u=null!=s;null==a&&(a="ordinal"===r?n?0:NaN:l[0]-i[0]*o),null==s&&(s="ordinal"===r?n?n-1:NaN:l[1]+i[1]*o),null!=a&&isFinite(a)||(a=NaN),null!=s&&isFinite(s)||(s=NaN),t.setBlank(H(a)||H(s)||"ordinal"===r&&!t.getOrdinalMeta().categories.length),e.getNeedCrossZero()&&(0<a&&0<s&&!c&&(a=0),a<0&&s<0&&!u&&(s=0));var d=e.ecModel;if(d&&"time"===r){var h,f=fp("bar",d);if(k(f,function(t){h|=t.getBaseAxis()===e.axis}),h){var p=pp(f),g=function(t,e,n,i){var o=n.axis.getExtent(),r=o[1]-o[0],a=mp(i,n.axis);if(void 0===a)return{min:t,max:e};var s=1/0;k(a,function(t){s=Math.min(t.offset,s)});var l=-1/0;k(a,function(t){l=Math.max(t.offset+t.width,l)}),s=Math.abs(s),l=Math.abs(l);var c=s+l,u=e-t,d=u/(1-(s+l)/r)-u;return{min:t-=s/c*d,max:e+=l/c*d}}(a,s,e,p);a=g.min,s=g.max}}return{extent:[a,s],fixMin:c,fixMax:u}}function Fp(t,e){var n=Vp(t,e),i=n.extent,o=e.get("splitNumber");"log"===t.type&&(t.base=e.get("logBase"));var r=t.type;t.setExtent(i[0],i[1]),t.niceExtent({splitNumber:o,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:"interval"===r||"time"===r?e.get("minInterval"):null,maxInterval:"interval"===r||"time"===r?e.get("maxInterval"):null});var a=e.get("interval");null!=a&&t.setInterval&&t.setInterval(a)}function Hp(t,e){if(e=e||t.get("type"))switch(e){case"category":return new np(t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),[1/0,-1/0]);case"value":return new lp;default:return(Zf.getClass(e)||lp).create(t)}}function Wp(t){var e,n=t.getLabelModel().get("formatter"),i="category"===t.type?t.scale.getExtent()[0]:null;return"string"==typeof n?(e=n,n=function(n){return n=t.scale.getLabel(n),e.replace("{value}",null!=n?n:"")}):"function"==typeof n?function(e,o){return null!=i&&(o=e-i),n(Gp(t,e),o)}:function(e){return t.scale.getLabel(e)}}function Gp(t,e){return"category"===t.type?t.scale.getLabel(e):e}function Up(t){var e=t.get("interval");return null==e?"auto":e}function jp(t){return"category"===t.type&&0===Up(t.getLabelModel())}k(["contain","normalize"],function(t){Bp.prototype[t]=function(e){return e=Op(e)/Op(this.base),Ip[t].call(this,e)}}),Bp.create=function(){return new Bp};var $p={getMin:function(t){var e=this.option,n=t||null==e.rangeStart?e.min:e.rangeStart;return this.axis&&null!=n&&"dataMin"!==n&&"function"!=typeof n&&!H(n)&&(n=this.axis.scale.parse(n)),n},getMax:function(t){var e=this.option,n=t||null==e.rangeEnd?e.max:e.rangeEnd;return this.axis&&null!=n&&"dataMax"!==n&&"function"!=typeof n&&!H(n)&&(n=this.axis.scale.parse(n)),n},getNeedCrossZero:function(){var t=this.option;return null==t.rangeStart&&null==t.rangeEnd&&!t.scale},getCoordSysModel:et,setRange:function(t,e){this.option.rangeStart=t,this.option.rangeEnd=e},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}},qp=fs({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,o=e.width/2,r=e.height/2;t.moveTo(n,i-r),t.lineTo(n+o,i+r),t.lineTo(n-o,i+r),t.closePath()}}),Yp=fs({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,o=e.width/2,r=e.height/2;t.moveTo(n,i-r),t.lineTo(n+o,i),t.lineTo(n,i+r),t.lineTo(n-o,i),t.closePath()}}),Xp=fs({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,i=e.y,o=e.width/5*3,r=Math.max(o,e.height),a=o/2,s=a*a/(r-a),l=i-r+a+s,c=Math.asin(s/a),u=Math.cos(c)*a,d=Math.sin(c),h=Math.cos(c),f=.6*a,p=.7*a;t.moveTo(n-u,l+s),t.arc(n,l,a,Math.PI-c,2*Math.PI+c),t.bezierCurveTo(n+u-d*f,l+s+h*f,n,i-p,n,i),t.bezierCurveTo(n,i-p,n-u+d*f,l+s+h*f,n-u,l+s),t.closePath()}}),Zp=fs({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,i=e.x,o=e.y,r=e.width/3*2;t.moveTo(i,o),t.lineTo(i+r,o+n),t.lineTo(i,o+n/4*3),t.lineTo(i-r,o+n),t.lineTo(i,o),t.closePath()}}),Kp={line:function(t,e,n,i,o){o.x1=t,o.y1=e+i/2,o.x2=t+n,o.y2=e+i/2},rect:function(t,e,n,i,o){o.x=t,o.y=e,o.width=n,o.height=i},roundRect:function(t,e,n,i,o){o.x=t,o.y=e,o.width=n,o.height=i,o.r=Math.min(n,i)/4},square:function(t,e,n,i,o){var r=Math.min(n,i);o.x=t,o.y=e,o.width=r,o.height=r},circle:function(t,e,n,i,o){o.cx=t+n/2,o.cy=e+i/2,o.r=Math.min(n,i)/2},diamond:function(t,e,n,i,o){o.cx=t+n/2,o.cy=e+i/2,o.width=n,o.height=i},pin:function(t,e,n,i,o){o.x=t+n/2,o.y=e+i/2,o.width=n,o.height=i},arrow:function(t,e,n,i,o){o.x=t+n/2,o.y=e+i/2,o.width=n,o.height=i},triangle:function(t,e,n,i,o){o.cx=t+n/2,o.cy=e+i/2,o.width=n,o.height=i}},Jp={};k({line:qa,rect:ja,roundRect:ja,square:ja,circle:Ea,diamond:Yp,pin:Xp,arrow:Zp,triangle:qp},function(t,e){Jp[e]=new t});var Qp=fs({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,e,n){var i=si(t,e,n),o=this.shape;return o&&"pin"===o.symbolType&&"inside"===e.textPosition&&(i.y=n.y+.4*n.height),i},buildPath:function(t,e,n){var i=e.symbolType;if("none"!==i){var o=Jp[i];o=o||Jp[i="rect"],Kp[i](e.x,e.y,e.width,e.height,o.shape),o.buildPath(t,o.shape,n)}}});function tg(t,e){if("image"!==this.type){var n=this.style,i=this.shape;i&&"line"===i.symbolType?n.stroke=t:this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff"):(n.fill&&(n.fill=t),n.stroke&&(n.stroke=t)),this.dirty(!1)}}function eg(t,e,n,i,o,r,a){var s,l=0===t.indexOf("empty");return l&&(t=t.substr(5,1).toLowerCase()+t.substr(6)),(s=0===t.indexOf("image://")?vs(t.slice(8),new Sn(e,n,i,o),a?"center":"cover"):0===t.indexOf("path://")?ms(t.slice(7),{},new Sn(e,n,i,o),a?"center":"cover"):new Qp({shape:{symbolType:t,x:e,y:n,width:i,height:o}})).__isEmptyBrush=l,s.setColor=tg,s.setColor(r),s}var ng=(Object.freeze||Object)({createList:function(t){return Xf(t.getSource(),t)},getLayoutRect:ac,dataStack:{isDimensionStacked:qf,enableDataStack:$f,getStackedDimension:Yf},createScale:function(t,e){var n=e;fl.isInstance(e)||M(n=new fl(e),$p);var i=Hp(n);return i.setExtent(t[0],t[1]),Fp(i,n),i},mixinAxisModelCommonMethods:function(t){M(t,$p)},completeDimensions:Ff,createDimensions:Wf,createSymbol:eg});function ig(t,e){return Math.abs(t-e)<1e-8}function og(t,e,n){var i=0,o=t[0];if(!o)return!1;for(var r=1;r<t.length;r++){var a=t[r];i+=ea(o[0],o[1],a[0],a[1],e,n),o=a}var s=t[0];return ig(o[0],s[0])&&ig(o[1],s[1])||(i+=ea(o[0],o[1],s[0],s[1],e,n)),0!==i}function rg(t,e,n){if(this.name=t,this.geometries=e,n)n=[n[0],n[1]];else{var i=this.getBoundingRect();n=[i.x+i.width/2,i.y+i.height/2]}this.center=n}function ag(t,e,n){for(var i=[],o=e[0],r=e[1],a=0;a<t.length;a+=2){var s=t.charCodeAt(a)-64,l=t.charCodeAt(a+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),o=s+=o,r=l+=r,i.push([s/n,l/n])}return i}function sg(t,e){return function(t){if(t.UTF8Encoding){var e=t.UTF8Scale;null==e&&(e=1024);for(var n=t.features,i=0;i<n.length;i++)for(var o=n[i].geometry,r=o.coordinates,a=o.encodeOffsets,s=0;s<r.length;s++){var l=r[s];if("Polygon"===o.type)r[s]=ag(l,a[s],e);else if("MultiPolygon"===o.type)for(var c=0;c<l.length;c++)l[c]=ag(l[c],a[s][c],e)}t.UTF8Encoding=!1}}(t),A(D(t.features,function(t){return t.geometry&&t.properties&&0<t.geometry.coordinates.length}),function(t){var n=t.properties,i=t.geometry,o=i.coordinates,r=[];"Polygon"===i.type&&r.push({type:"polygon",exterior:o[0],interiors:o.slice(1)}),"MultiPolygon"===i.type&&k(o,function(t){t[0]&&r.push({type:"polygon",exterior:t[0],interiors:t.slice(1)})});var a=new rg(n[e||"name"],r,n.cp);return a.properties=n,a})}rg.prototype={constructor:rg,properties:null,getBoundingRect:function(){var t=this._rect;if(t)return t;for(var e=Number.MAX_VALUE,n=[e,e],i=[-e,-e],o=[],r=[],a=this.geometries,s=0;s<a.length;s++)"polygon"===a[s].type&&(Ir(a[s].exterior,o,r),_t(n,n,o),wt(i,i,r));return 0===s&&(n[0]=n[1]=i[0]=i[1]=0),this._rect=new Sn(n[0],n[1],i[0]-n[0],i[1]-n[1])},contain:function(t){var e=this.getBoundingRect(),n=this.geometries;if(!e.contain(t[0],t[1]))return!1;t:for(var i=0,o=n.length;i<o;i++)if("polygon"===n[i].type){var r=n[i].interiors;if(og(n[i].exterior,t[0],t[1])){for(var a=0;a<(r?r.length:0);a++)if(og(r[a]))continue t;return!0}}return!1},transformTo:function(t,e,n,i){var o=this.getBoundingRect(),r=o.width/o.height;n?i=i||n/r:n=r*i;for(var a=new Sn(t,e,n,i),s=o.calculateTransform(a),l=this.geometries,c=0;c<l.length;c++)if("polygon"===l[c].type){for(var u=l[c].exterior,d=l[c].interiors,h=0;h<u.length;h++)bt(u[h],u[h],s);for(var f=0;f<(d?d.length:0);f++)for(h=0;h<d[f].length;h++)bt(d[f][h],d[f][h],s)}(o=this._rect).copy(a),this.center=[o.x+o.width/2,o.y+o.height/2]},cloneShallow:function(t){null==t&&(t=this.name);var e=new rg(t,this.geometries,this.center);return e._rect=this._rect,e.transformTo=null,e}};var lg=Oo();function cg(t,e){var n,i=ug(t,"labels"),o=Up(e);return dg(i,o)||hg(i,o,{labels:R(o)?pg(t,o):fg(t,n="auto"===o?function(t){var e=lg(t).autoInterval;return null!=e?e:lg(t).autoInterval=t.calculateCategoryInterval()}(t):o),labelCategoryInterval:n})}function ug(t,e){return lg(t)[e]||(lg(t)[e]=[])}function dg(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n].value}function hg(t,e,n){return t.push({key:e,value:n}),n}function fg(t,e,n){var i=Wp(t),o=t.scale,r=o.getExtent(),a=t.getLabelModel(),s=[],l=Math.max((e||0)+1,1),c=r[0],u=o.count();0!==c&&1<l&&2<u/l&&(c=Math.round(Math.ceil(c/l)*l));var d=jp(t),h=a.get("showMinLabel")||d,f=a.get("showMaxLabel")||d;h&&c!==r[0]&&g(r[0]);for(var p=c;p<=r[1];p+=l)g(p);function g(t){s.push(n?t:{formattedLabel:i(t),rawLabel:o.getLabel(t),tickValue:t})}return f&&p-l!==r[1]&&g(r[1]),s}function pg(t,e,n){var i=t.scale,o=Wp(t),r=[];return k(i.getTicks(),function(t){var a=i.getLabel(t);e(t,a)&&r.push(n?t:{formattedLabel:o(t),rawLabel:a,tickValue:t})}),r}var gg=[0,1],mg=function(t,e,n){this.dim=t,this.scale=e,this._extent=n||[0,0],this.inverse=!1,this.onBand=!1};function vg(t,e){var n=(t[1]-t[0])/e/2;t[0]+=n,t[1]-=n}mg.prototype={constructor:mg,contain:function(t){var e=this._extent,n=Math.min(e[0],e[1]),i=Math.max(e[0],e[1]);return n<=t&&t<=i},containData:function(t){return this.scale.contain(t)},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(t){return Ml(t||this.scale.getExtent(),this._extent)},setExtent:function(t,e){var n=this._extent;n[0]=t,n[1]=e},dataToCoord:function(t,e){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&"ordinal"===i.type&&vg(n=n.slice(),i.count()),xl(t,gg,n,e)},coordToData:function(t,e){var n=this._extent,i=this.scale;this.onBand&&"ordinal"===i.type&&vg(n=n.slice(),i.count());var o=xl(t,n,gg,e);return this.scale.scale(o)},pointToData:function(t,e){},getTicksCoords:function(t){var e=(t=t||{}).tickModel||this.getTickModel(),n=A(function(t,e){return"category"===t.type?function(t,e){var n,i,o=ug(t,"ticks"),r=Up(e),a=dg(o,r);if(a)return a;if(e.get("show")&&!t.scale.isBlank()||(n=[]),R(r))n=pg(t,r,!0);else if("auto"===r){var s=cg(t,t.getLabelModel());i=s.labelCategoryInterval,n=A(s.labels,function(t){return t.tickValue})}else n=fg(t,i=r,!0);return hg(o,r,{ticks:n,tickCategoryInterval:i})}(t,e):{ticks:t.scale.getTicks()}}(this,e).ticks,function(t){return{coord:this.dataToCoord(t),tickValue:t}},this);return function(t,e,n,i){var o=e.length;if(t.onBand&&!n&&o){var r,a=t.getExtent();if(1===o)e[0].coord=a[0],r=e[1]={coord:a[0]};else{var s=(e[o-1].coord-e[0].coord)/(e[o-1].tickValue-e[0].tickValue);k(e,function(t){t.coord-=s/2});var l=t.scale.getExtent();e.push(r={coord:e[o-1].coord+s*(1+l[1]-e[o-1].tickValue)})}var c=a[0]>a[1];u(e[0].coord,a[0])&&(i?e[0].coord=a[0]:e.shift()),i&&u(a[0],e[0].coord)&&e.unshift({coord:a[0]}),u(a[1],r.coord)&&(i?r.coord=a[1]:e.pop()),i&&u(r.coord,a[1])&&e.push({coord:a[1]})}function u(t,e){return t=_l(t),e=_l(e),c?e<t:t<e}}(this,n,e.get("alignWithLabel"),t.clamp),n},getMinorTicksCoords:function(){if("ordinal"===this.scale.type)return[];var t=this.model.getModel("minorTick").get("splitNumber");return 0<t&&t<100||(t=5),A(this.scale.getMinorTicks(t),function(t){return A(t,function(t){return{coord:this.dataToCoord(t),tickValue:t}},this)},this)},getViewLabels:function(){return function(t){return"category"===t.type?function(t){var e=t.getLabelModel(),n=cg(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}(t):function(t){var e=t.scale.getTicks(),n=Wp(t);return{labels:A(e,function(e,i){return{formattedLabel:n(e,i),rawLabel:t.scale.getLabel(e),tickValue:e}})}}(t)}(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var t=this._extent,e=this.scale.getExtent(),n=e[1]-e[0]+(this.onBand?1:0);0===n&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return function(t){var e=function(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}(t),n=Wp(t),i=(e.axisRotate-e.labelRotate)/180*Math.PI,o=t.scale,r=o.getExtent(),a=o.count();if(r[1]-r[0]<1)return 0;var s=1;40<a&&(s=Math.max(1,Math.floor(a/40)));for(var l=r[0],c=t.dataToCoord(l+1)-t.dataToCoord(l),u=Math.abs(c*Math.cos(i)),d=Math.abs(c*Math.sin(i)),h=0,f=0;l<=r[1];l+=s){var p,g=oi(n(l),e.font,"center","top");p=1.3*g.height,h=Math.max(h,1.3*g.width,7),f=Math.max(f,p,7)}var m=h/u,v=f/d;isNaN(m)&&(m=1/0),isNaN(v)&&(v=1/0);var y=Math.max(0,Math.floor(Math.min(m,v))),x=lg(t.model),b=t.getExtent(),_=x.lastAutoInterval,w=x.lastTickCount;return null!=_&&null!=w&&Math.abs(_-y)<=1&&Math.abs(w-a)<=1&&y<_&&x.axisExtend0===b[0]&&x.axisExtend1===b[1]?y=_:(x.lastTickCount=a,x.lastAutoInterval=y,x.axisExtend0=b[0],x.axisExtend1=b[1]),y}(this)}};var yg=sg,xg={};k(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(t){xg[t]=nt[t]});var bg={};function _g(t,e){var n=t.mapDimension("defaultedLabel",!0),i=n.length;if(1===i)return Mu(t,e,n[0]);if(i){for(var o=[],r=0;r<n.length;r++){var a=Mu(t,e,n[r]);o.push(a)}return o.join(" ")}}function wg(t,e,n){Cn.call(this),this.updateData(t,e,n)}k(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","registerShape","getShapeClass","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],function(t){bg[t]=al[t]}),Gu.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(t,e){return Xf(this.getSource(),this,{useEncodeDefaulter:!0})},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});var Sg=wg.prototype,Cg=wg.getSymbolSize=function(t,e){var n=t.getItemVisual(e,"symbolSize");return n instanceof Array?n.slice():[+n,+n]};function Mg(t){return[t[0]/2,t[1]/2]}function Tg(t,e){this.parent.drift(t,e)}Sg._createSymbol=function(t,e,n,i,o){this.removeAll();var r=eg(t,-1,-1,2,2,e.getItemVisual(n,"color"),o);r.attr({z2:100,culling:!0,scale:Mg(i)}),r.drift=Tg,this._symbolType=t,this.add(r)},Sg.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(t)},Sg.getSymbolPath=function(){return this.childAt(0)},Sg.getScale=function(){return this.childAt(0).scale},Sg.highlight=function(){this.childAt(0).trigger("emphasis")},Sg.downplay=function(){this.childAt(0).trigger("normal")},Sg.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},Sg.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=t?"move":e.cursor},Sg.updateData=function(t,e,n){this.silent=!1;var i=t.getItemVisual(e,"symbol")||"circle",o=t.hostModel,r=Cg(t,e),a=i!==this._symbolType;if(a){var s=t.getItemVisual(e,"symbolKeepAspect");this._createSymbol(i,t,e,r,s)}else(l=this.childAt(0)).silent=!1,Xs(l,{scale:Mg(r)},o,e);if(this._updateCommon(t,e,r,n),a){var l=this.childAt(0),c=n&&n.fadeIn,u={scale:l.scale.slice()};c&&(u.style={opacity:l.style.opacity}),l.scale=[0,0],c&&(l.style.opacity=0),Zs(l,u,o,e)}this._seriesModel=o};var kg=["itemStyle"],Ag=["emphasis","itemStyle"],Ig=["label"],Dg=["emphasis","label"];function Pg(t,e){if(!this.incremental&&!this.useHoverLayer)if("emphasis"===e){var n=this.__symbolOriginalScale,i=n[1]/n[0],o={scale:[Math.max(1.1*n[0],n[0]+3),Math.max(1.1*n[1],n[1]+3*i)]};this.animateTo(o,400,"elasticOut")}else"normal"===e&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}function Eg(t){this.group=new Cn,this._symbolCtor=t||wg}Sg._updateCommon=function(t,e,n,i){var o=this.childAt(0),r=t.hostModel,a=t.getItemVisual(e,"color");"image"!==o.type?o.useStyle({strokeNoScale:!0}):o.setStyle({opacity:1,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null});var s=i&&i.itemStyle,l=i&&i.hoverItemStyle,c=i&&i.symbolOffset,u=i&&i.labelModel,d=i&&i.hoverLabelModel,h=i&&i.hoverAnimation,f=i&&i.cursorStyle;if(!i||t.hasItemOption){var p=i&&i.itemModel?i.itemModel:t.getItemModel(e);s=p.getModel(kg).getItemStyle(["color"]),l=p.getModel(Ag).getItemStyle(),c=p.getShallow("symbolOffset"),u=p.getModel(Ig),d=p.getModel(Dg),h=p.getShallow("hoverAnimation"),f=p.getShallow("cursor")}else l=x({},l);var g=o.style,m=t.getItemVisual(e,"symbolRotate");o.attr("rotation",(m||0)*Math.PI/180||0),c&&o.attr("position",[bl(c[0],n[0]),bl(c[1],n[1])]),f&&o.attr("cursor",f),o.setColor(a,i&&i.symbolInnerColor),o.setStyle(s);var v=t.getItemVisual(e,"opacity");null!=v&&(g.opacity=v);var y=t.getItemVisual(e,"liftZ"),b=o.__z2Origin;null!=y?null==b&&(o.__z2Origin=o.z2,o.z2+=y):null!=b&&(o.z2=b,o.__z2Origin=null);var _=i&&i.useNameLabel;Vs(g,l,u,d,{labelFetcher:r,labelDataIndex:e,defaultText:function(e,n){return _?t.getName(e):_g(t,e)},isRectText:!0,autoColor:a}),o.__symbolOriginalScale=Mg(n),o.hoverStyle=l,o.highDownOnUpdate=h&&r.isAnimationEnabled()?Pg:null,Rs(o)},Sg.fadeOut=function(t,e){var n=this.childAt(0);this.silent=n.silent=!0,e&&e.keepLabel||(n.style.text=null),Xs(n,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,t)},C(wg,Cn);var Ng=Eg.prototype;function Lg(t,e,n,i){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(i.isIgnore&&i.isIgnore(n))&&!(i.clipShape&&!i.clipShape.contain(e[0],e[1]))&&"none"!==t.getItemVisual(n,"symbol")}function Rg(t){return null==t||B(t)||(t={isIgnore:t}),t||{}}function Og(t){var e=t.hostModel;return{itemStyle:e.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:e.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),labelModel:e.getModel("label"),hoverLabelModel:e.getModel("emphasis.label"),cursorStyle:e.get("cursor")}}function Bg(t,e,n){var i,o=t.getBaseAxis(),r=t.getOtherAxis(o),a=function(t,e){var n=0,i=t.scale.getExtent();return"start"===e?n=i[0]:"end"===e?n=i[1]:0<i[0]?n=i[0]:i[1]<0&&(n=i[1]),n}(r,n),s=o.dim,l=r.dim,c=e.mapDimension(l),u=e.mapDimension(s),d="x"===l||"radius"===l?1:0,h=A(t.dimensions,function(t){return e.mapDimension(t)}),f=e.getCalculationInfo("stackResultDimension");return(i|=qf(e,h[0]))&&(h[0]=f),(i|=qf(e,h[1]))&&(h[1]=f),{dataDimsForPoint:h,valueStart:a,valueAxisDim:l,baseAxisDim:s,stacked:!!i,valueDim:c,baseDim:u,baseDataOffset:d,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function zg(t,e,n,i){var o=NaN;t.stacked&&(o=n.get(n.getCalculationInfo("stackedOverDimension"),i)),isNaN(o)&&(o=t.valueStart);var r=t.baseDataOffset,a=[];return a[r]=n.get(t.baseDim,i),a[1-r]=o,e.dataToPoint(a)}Ng.updateData=function(t,e){e=Rg(e);var n=this.group,i=t.hostModel,o=this._data,r=this._symbolCtor,a=Og(t);o||n.removeAll(),t.diff(o).add(function(i){var o=t.getItemLayout(i);if(Lg(t,o,i,e)){var s=new r(t,i,a);s.attr("position",o),t.setItemGraphicEl(i,s),n.add(s)}}).update(function(s,l){var c=o.getItemGraphicEl(l),u=t.getItemLayout(s);Lg(t,u,s,e)?(c?(c.updateData(t,s,a),Xs(c,{position:u},i)):(c=new r(t,s)).attr("position",u),n.add(c),t.setItemGraphicEl(s,c)):n.remove(c)}).remove(function(t){var e=o.getItemGraphicEl(t);e&&e.fadeOut(function(){n.remove(e)})}).execute(),this._data=t},Ng.isPersistent=function(){return!0},Ng.updateLayout=function(){var t=this._data;t&&t.eachItemGraphicEl(function(e,n){var i=t.getItemLayout(n);e.attr("position",i)})},Ng.incrementalPrepareUpdate=function(t){this._seriesScope=Og(t),this._data=null,this.group.removeAll()},Ng.incrementalUpdate=function(t,e,n){function i(t){t.isGroup||(t.incremental=t.useHoverLayer=!0)}n=Rg(n);for(var o=t.start;o<t.end;o++){var r=e.getItemLayout(o);if(Lg(e,r,o,n)){var a=new this._symbolCtor(e,o,this._seriesScope);a.traverse(i),a.attr("position",r),this.group.add(a),e.setItemGraphicEl(o,a)}}},Ng.remove=function(t){var e=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(t){t.fadeOut(function(){e.remove(t)})}):e.removeAll()};var Vg=_t,Fg=wt,Hg=ct,Wg=rt,Gg=[],Ug=[],jg=[];function $g(t){return isNaN(t[0])||isNaN(t[1])}function qg(t,e,n,i,o,r,a,s,l,c){return"none"!==c&&c?(function(t,e,n,i,o,r,a,s,l,c,u){for(var d=0,h=n,f=0;f<i;f++){var p=e[h];if(o<=h||h<0)break;if($g(p)){if(u){h+=r;continue}break}if(h===n)t[0<r?"moveTo":"lineTo"](p[0],p[1]);else if(0<l){var g=e[d],m="y"===c?1:0,v=(p[m]-g[m])*l;Wg(Ug,g),Ug[m]=g[m]+v,Wg(jg,p),jg[m]=p[m]-v,t.bezierCurveTo(Ug[0],Ug[1],jg[0],jg[1],p[0],p[1])}else t.lineTo(p[0],p[1]);d=h,h+=r}return f}).apply(this,arguments):(function(t,e,n,i,o,r,a,s,l,c,u){for(var d=0,h=n,f=0;f<i;f++){var p=e[h];if(o<=h||h<0)break;if($g(p)){if(u){h+=r;continue}break}if(h===n)t[0<r?"moveTo":"lineTo"](p[0],p[1]),Wg(Ug,p);else if(0<l){var g=h+r,m=e[g];if(u)for(;m&&$g(e[g]);)m=e[g+=r];var v=.5,y=e[d];if(!(m=e[g])||$g(m))Wg(jg,p);else{var x,b;if($g(m)&&!u&&(m=p),ut(Gg,m,y),"x"===c||"y"===c){var _="x"===c?0:1;x=Math.abs(p[_]-y[_]),b=Math.abs(p[_]-m[_])}else x=mt(p,y),b=mt(p,m);Hg(jg,p,Gg,-l*(1-(v=b/(b+x))))}Vg(Ug,Ug,s),Fg(Ug,Ug,a),Vg(jg,jg,s),Fg(jg,jg,a),t.bezierCurveTo(Ug[0],Ug[1],jg[0],jg[1],p[0],p[1]),Hg(Ug,p,Gg,l*v)}else t.lineTo(p[0],p[1]);d=h,h+=r}return f}).apply(this,arguments)}function Yg(t,e){var n=[1/0,1/0],i=[-1/0,-1/0];if(e)for(var o=0;o<t.length;o++){var r=t[o];r[0]<n[0]&&(n[0]=r[0]),r[1]<n[1]&&(n[1]=r[1]),r[0]>i[0]&&(i[0]=r[0]),r[1]>i[1]&&(i[1]=r[1])}return{min:e?n:i,max:e?i:n}}var Xg=fa.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:Pa(fa.prototype.brush),buildPath:function(t,e){var n=e.points,i=0,o=n.length,r=Yg(n,e.smoothConstraint);if(e.connectNulls){for(;0<o&&$g(n[o-1]);o--);for(;i<o&&$g(n[i]);i++);}for(;i<o;)i+=qg(t,n,i,o,o,1,r.min,r.max,e.smooth,e.smoothMonotone,e.connectNulls)+1}}),Zg=fa.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:Pa(fa.prototype.brush),buildPath:function(t,e){var n=e.points,i=e.stackedOnPoints,o=0,r=n.length,a=e.smoothMonotone,s=Yg(n,e.smoothConstraint),l=Yg(i,e.smoothConstraint);if(e.connectNulls){for(;0<r&&$g(n[r-1]);r--);for(;o<r&&$g(n[o]);o++);}for(;o<r;){var c=qg(t,n,o,r,r,1,s.min,s.max,e.smooth,a,e.connectNulls);qg(t,i,o+c-1,c,r,-1,l.min,l.max,e.stackedOnSmooth,a,e.connectNulls),o+=c+1,t.closePath()}}});function Kg(t,e,n){var i=t.getArea(),o=t.getBaseAxis().isHorizontal(),r=i.x,a=i.y,s=i.width,l=i.height,c=n.get("lineStyle.width")||2;r-=c/2,a-=c/2,s+=c,l+=c,r=Math.floor(r),s=Math.round(s);var u=new ja({shape:{x:r,y:a,width:s,height:l}});return e&&(u.shape[o?"width":"height"]=0,Zs(u,{shape:{width:s,height:l}},n)),u}function Jg(t,e,n){var i=t.getArea(),o=new La({shape:{cx:_l(t.cx,1),cy:_l(t.cy,1),r0:_l(i.r0,1),r:_l(i.r,1),startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});return e&&(o.shape.endAngle=i.startAngle,Zs(o,{shape:{endAngle:i.endAngle}},n)),o}function Qg(t,e,n){return t?"polar"===t.type?Jg(t,e,n):"cartesian2d"===t.type?Kg(t,e,n):null:null}function tm(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++){var i=t[n],o=e[n];if(i[0]!==o[0]||i[1]!==o[1])return}return!0}}function em(t,e){var n=[],i=[],o=[],r=[];return Ir(t,n,i),Ir(e,o,r),Math.max(Math.abs(n[0]-o[0]),Math.abs(n[1]-o[1]),Math.abs(i[0]-r[0]),Math.abs(i[1]-r[1]))}function nm(t){return"number"==typeof t?t:t?.5:0}function im(t,e,n){for(var i=e.getBaseAxis(),o="x"===i.dim||"radius"===i.dim?0:1,r=[],a=0;a<t.length-1;a++){var s=t[a+1],l=t[a];r.push(l);var c=[];switch(n){case"end":c[o]=s[o],c[1-o]=l[1-o],r.push(c);break;case"middle":var u=[];c[o]=u[o]=(l[o]+s[o])/2,c[1-o]=l[1-o],u[1-o]=s[1-o],r.push(c),r.push(u);break;default:c[o]=l[o],c[1-o]=s[1-o],r.push(c)}}return t[a]&&r.push(t[a]),r}function om(t,e,n){if("cartesian2d"!==t.type)return Jg(t,e,n);var i=t.getBaseAxis().isHorizontal(),o=Kg(t,e,n);if(!n.get("clip",!0)){var r=o.shape,a=Math.max(r.width,r.height);i?(r.y-=a,r.height+=2*a):(r.x-=a,r.width+=2*a)}return o}function rm(t,e,n){return{seriesType:t,performRawSeries:!0,reset:function(t,i,o){var r=t.getData(),a=t.get("symbol"),s=t.get("symbolSize"),l=t.get("symbolKeepAspect"),c=t.get("symbolRotate"),u=R(a),d=R(s),h=R(c),f=u||d||h,p=!u&&a?a:e;if(r.setVisual({legendSymbol:n||p,symbol:p,symbolSize:d?null:s,symbolKeepAspect:l,symbolRotate:c}),!i.isSeriesFiltered(t))return{dataEach:r.hasItemOption||f?function(e,n){if(f){var i=t.getRawValue(n),o=t.getDataParams(n);u&&e.setItemVisual(n,"symbol",a(i,o)),d&&e.setItemVisual(n,"symbolSize",s(i,o)),h&&e.setItemVisual(n,"symbolRotate",c(i,o))}if(e.hasItemOption){var r=e.getItemModel(n),l=r.getShallow("symbol",!0),p=r.getShallow("symbolSize",!0),g=r.getShallow("symbolRotate",!0),m=r.getShallow("symbolKeepAspect",!0);null!=l&&e.setItemVisual(n,"symbol",l),null!=p&&e.setItemVisual(n,"symbolSize",p),null!=g&&e.setItemVisual(n,"symbolRotate",g),null!=m&&e.setItemVisual(n,"symbolKeepAspect",m)}}:null}}}}function am(t){return{seriesType:t,plan:Qu(),reset:function(t){var e=t.getData(),n=t.coordinateSystem,i=t.pipelineContext.large;if(n){var o=A(n.dimensions,function(t){return e.mapDimension(t)}).slice(0,2),r=o.length,a=e.getCalculationInfo("stackResultDimension");return qf(e,o[0])&&(o[0]=a),qf(e,o[1])&&(o[1]=a),r&&{progress:function(t,e){for(var a=i&&new Float32Array((t.end-t.start)*r),s=t.start,l=0,c=[],u=[];s<t.end;s++){var d;if(1===r){var h=e.get(o[0],s);d=!isNaN(h)&&n.dataToPoint(h,null,u)}else{h=c[0]=e.get(o[0],s);var f=c[1]=e.get(o[1],s);d=!isNaN(h)&&!isNaN(f)&&n.dataToPoint(c,null,u)}i?(a[l++]=d?d[0]:NaN,a[l++]=d?d[1]:NaN):e.setItemLayout(s,d&&d.slice()||[NaN,NaN])}i&&e.setLayout("symbolPoints",a)}}}}}}function sm(t,e){return Math.round(t.length/2)}nd.extend({type:"line",init:function(){var t=new Cn,e=new Eg;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},render:function(t,e,n){var i=t.coordinateSystem,o=this.group,r=t.getData(),a=t.getModel("lineStyle"),s=t.getModel("areaStyle"),l=r.mapArray(r.getItemLayout),c="polar"===i.type,u=this._coordSys,d=this._symbolDraw,h=this._polyline,f=this._polygon,p=this._lineGroup,g=t.get("animation"),m=!s.isEmpty(),v=s.get("origin"),y=function(t,e,n){if(!n.valueDim)return[];for(var i=[],o=0,r=e.count();o<r;o++)i.push(zg(n,t,e,o));return i}(i,r,Bg(i,r,v)),x=t.get("showSymbol"),_=x&&!c&&function(t,e,n){var i=t.get("showAllSymbol"),o="auto"===i;if(!i||o){var r=n.getAxesByScale("ordinal")[0];if(r&&(!o||!function(t,e){var n=t.getExtent(),i=Math.abs(n[1]-n[0])/t.scale.count();isNaN(i)&&(i=0);for(var o=e.count(),r=Math.max(1,Math.round(o/5)),a=0;a<o;a+=r)if(1.5*wg.getSymbolSize(e,a)[t.isHorizontal()?1:0]>i)return!1;return!0}(r,e))){var a=e.mapDimension(r.dim),s={};return k(r.getViewLabels(),function(t){s[t.tickValue]=1}),function(t){return!s.hasOwnProperty(e.get(a,t))}}}}(t,r,i),w=this._data;w&&w.eachItemGraphicEl(function(t,e){t.__temp&&(o.remove(t),w.setItemGraphicEl(e,null))}),x||d.remove(),o.add(p);var S,C=!c&&t.get("step");i&&i.getArea&&t.get("clip",!0)&&(null!=(S=i.getArea()).width?(S.x-=.1,S.y-=.1,S.width+=.2,S.height+=.2):S.r0&&(S.r0-=.5,S.r1+=.5)),this._clipShapeForSymbol=S,h&&u.type===i.type&&C===this._step?(m&&!f?f=this._newPolygon(l,y,i,g):f&&!m&&(p.remove(f),f=this._polygon=null),p.setClipPath(om(i,!1,t)),x&&d.updateData(r,{isIgnore:_,clipShape:S}),r.eachItemGraphicEl(function(t){t.stopAnimation(!0)}),tm(this._stackedOnPoints,y)&&tm(this._points,l)||(g?this._updateAnimation(r,y,i,n,C,v):(C&&(l=im(l,i,C),y=im(y,i,C)),h.setShape({points:l}),f&&f.setShape({points:l,stackedOnPoints:y})))):(x&&d.updateData(r,{isIgnore:_,clipShape:S}),C&&(l=im(l,i,C),y=im(y,i,C)),h=this._newPolyline(l,i,g),m&&(f=this._newPolygon(l,y,i,g)),p.setClipPath(om(i,!0,t)));var M=function(t,e){var n=t.getVisual("visualMeta");if(n&&n.length&&t.count()&&"cartesian2d"===e.type){for(var i,o,r=n.length-1;0<=r;r--){var a=t.getDimensionInfo(t.dimensions[n[r].dimension]);if("x"===(i=a&&a.coordDim)||"y"===i){o=n[r];break}}if(o){var s=e.getAxis(i),l=A(o.stops,function(t){return{coord:s.toGlobalCoord(s.dataToCoord(t.value)),color:t.color}}),c=l.length,u=o.outerColors.slice();c&&l[0].coord>l[c-1].coord&&(l.reverse(),u.reverse());var d=l[0].coord-10,h=l[c-1].coord+10,f=h-d;if(f<.001)return"transparent";k(l,function(t){t.offset=(t.coord-d)/f}),l.push({offset:c?l[c-1].offset:.5,color:u[1]||"transparent"}),l.unshift({offset:c?l[0].offset:.5,color:u[0]||"transparent"});var p=new ts(0,0,0,0,l,!0);return p[i]=d,p[i+"2"]=h,p}}}(r,i)||r.getVisual("color");h.useStyle(b(a.getLineStyle(),{fill:"none",stroke:M,lineJoin:"bevel"}));var T=t.get("smooth");if(T=nm(t.get("smooth")),h.setShape({smooth:T,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")}),f){var I=r.getCalculationInfo("stackedOnSeries"),D=0;f.useStyle(b(s.getAreaStyle(),{fill:M,opacity:.7,lineJoin:"bevel"})),I&&(D=nm(I.get("smooth"))),f.setShape({smooth:T,stackedOnSmooth:D,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")})}this._data=r,this._coordSys=i,this._stackedOnPoints=y,this._points=l,this._step=C,this._valueOrigin=v},dispose:function(){},highlight:function(t,e,n,i){var o=t.getData(),r=Ro(o,i);if(!(r instanceof Array)&&null!=r&&0<=r){var a=o.getItemGraphicEl(r);if(!a){var s=o.getItemLayout(r);if(!s)return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(s[0],s[1]))return;(a=new wg(o,r)).position=s,a.setZ(t.get("zlevel"),t.get("z")),a.ignore=isNaN(s[0])||isNaN(s[1]),a.__temp=!0,o.setItemGraphicEl(r,a),a.stopSymbolAnimation(!0),this.group.add(a)}a.highlight()}else nd.prototype.highlight.call(this,t,e,n,i)},downplay:function(t,e,n,i){var o=t.getData(),r=Ro(o,i);if(null!=r&&0<=r){var a=o.getItemGraphicEl(r);a&&(a.__temp?(o.setItemGraphicEl(r,null),this.group.remove(a)):a.downplay())}else nd.prototype.downplay.call(this,t,e,n,i)},_newPolyline:function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new Xg({shape:{points:t},silent:!0,z2:10}),this._lineGroup.add(e),this._polyline=e},_newPolygon:function(t,e){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new Zg({shape:{points:t,stackedOnPoints:e},silent:!0}),this._lineGroup.add(n),this._polygon=n},_updateAnimation:function(t,e,n,i,o,r){var a=this._polyline,s=this._polygon,l=t.hostModel,c=function(t,e,n,i,o,r,a,s){for(var l=function(t,e){var n=[];return e.diff(t).add(function(t){n.push({cmd:"+",idx:t})}).update(function(t,e){n.push({cmd:"=",idx:e,idx1:t})}).remove(function(t){n.push({cmd:"-",idx:t})}).execute(),n}(t,e),c=[],u=[],d=[],h=[],f=[],p=[],g=[],m=Bg(o,e,a),v=Bg(r,t,s),y=0;y<l.length;y++){var x=l[y],b=!0;switch(x.cmd){case"=":var _=t.getItemLayout(x.idx),w=e.getItemLayout(x.idx1);(isNaN(_[0])||isNaN(_[1]))&&(_=w.slice()),c.push(_),u.push(w),d.push(n[x.idx]),h.push(i[x.idx1]),g.push(e.getRawIndex(x.idx1));break;case"+":var S=x.idx;c.push(o.dataToPoint([e.get(m.dataDimsForPoint[0],S),e.get(m.dataDimsForPoint[1],S)])),u.push(e.getItemLayout(S).slice()),d.push(zg(m,o,e,S)),h.push(i[S]),g.push(e.getRawIndex(S));break;case"-":var C=t.getRawIndex(S=x.idx);C!==S?(c.push(t.getItemLayout(S)),u.push(r.dataToPoint([t.get(v.dataDimsForPoint[0],S),t.get(v.dataDimsForPoint[1],S)])),d.push(n[S]),h.push(zg(v,r,t,S)),g.push(C)):b=!1}b&&(f.push(x),p.push(p.length))}p.sort(function(t,e){return g[t]-g[e]});var M=[],T=[],k=[],A=[],I=[];for(y=0;y<p.length;y++)M[y]=c[S=p[y]],T[y]=u[S],k[y]=d[S],A[y]=h[S],I[y]=f[S];return{current:M,next:T,stackedOnCurrent:k,stackedOnNext:A,status:I}}(this._data,t,this._stackedOnPoints,e,this._coordSys,n,this._valueOrigin,r),u=c.current,d=c.stackedOnCurrent,h=c.next,f=c.stackedOnNext;if(o&&(u=im(c.current,n,o),d=im(c.stackedOnCurrent,n,o),h=im(c.next,n,o),f=im(c.stackedOnNext,n,o)),3e3<em(u,h)||s&&3e3<em(d,f))return a.setShape({points:h}),void(s&&s.setShape({points:h,stackedOnPoints:f}));a.shape.__points=c.current,a.shape.points=u,Xs(a,{shape:{points:h}},l),s&&(s.setShape({points:u,stackedOnPoints:d}),Xs(s,{shape:{points:h,stackedOnPoints:f}},l));for(var p=[],g=c.status,m=0;m<g.length;m++)if("="===g[m].cmd){var v=t.getItemGraphicEl(g[m].idx1);v&&p.push({el:v,ptIdx:m})}a.animators&&a.animators.length&&a.animators[0].during(function(){for(var t=0;t<p.length;t++)p[t].el.attr("position",a.shape.__points[p[t].ptIdx])})},remove:function(t){var e=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(t,i){t.__temp&&(e.remove(t),n.setItemGraphicEl(i,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var lm={average:function(t){for(var e=0,n=0,i=0;i<t.length;i++)isNaN(t[i])||(e+=t[i],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]||0;return e},max:function(t){for(var e=-1/0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,n=0;n<t.length;n++)t[n]<e&&(e=t[n]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}};function cm(t){return this._axes[t]}function um(t){this._axes={},this._dimList=[],this.name=t||""}function dm(t){um.call(this,t)}function hm(t,e,n,i,o){mg.call(this,t,e,n),this.type=i||"value",this.position=o||"bottom"}um.prototype={constructor:um,type:"cartesian",getAxis:function(t){return this._axes[t]},getAxes:function(){return A(this._dimList,cm,this)},getAxesByScale:function(t){return t=t.toLowerCase(),D(this.getAxes(),function(e){return e.scale.type===t})},addAxis:function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},dataToCoord:function(t){return this._dataCoordConvert(t,"dataToCoord")},coordToData:function(t){return this._dataCoordConvert(t,"coordToData")},_dataCoordConvert:function(t,e){for(var n=this._dimList,i=t instanceof Array?[]:{},o=0;o<n.length;o++){var r=n[o];i[r]=this._axes[r][e](t[r])}return i}},dm.prototype={constructor:dm,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(t){var e=this.getAxis("x"),n=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},dataToPoint:function(t,e,n){var i=this.getAxis("x"),o=this.getAxis("y");return(n=n||[])[0]=i.toGlobalCoord(i.dataToCoord(t[0])),n[1]=o.toGlobalCoord(o.dataToCoord(t[1])),n},clampData:function(t,e){var n=this.getAxis("x").scale,i=this.getAxis("y").scale,o=n.getExtent(),r=i.getExtent(),a=n.parse(t[0]),s=i.parse(t[1]);return(e=e||[])[0]=Math.min(Math.max(Math.min(o[0],o[1]),a),Math.max(o[0],o[1])),e[1]=Math.min(Math.max(Math.min(r[0],r[1]),s),Math.max(r[0],r[1])),e},pointToData:function(t,e){var n=this.getAxis("x"),i=this.getAxis("y");return(e=e||[])[0]=n.coordToData(n.toLocalCoord(t[0])),e[1]=i.coordToData(i.toLocalCoord(t[1])),e},getOtherAxis:function(t){return this.getAxis("x"===t.dim?"y":"x")},getArea:function(){var t=this.getAxis("x").getGlobalExtent(),e=this.getAxis("y").getGlobalExtent(),n=Math.min(t[0],t[1]),i=Math.min(e[0],e[1]);return new Sn(n,i,Math.max(t[0],t[1])-n,Math.max(e[0],e[1])-i)}},C(dm,um),hm.prototype={constructor:hm,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},getGlobalExtent:function(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]>e[1]&&e.reverse(),e},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(t,e){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),e)},toLocalCoord:null,toGlobalCoord:null},C(hm,mg);var fm={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},pm={};function gm(t,e,n,i){k(mm,function(o){e.extend({type:t+"Axis."+o,mergeDefaultAndTheme:function(e,i){var r=this.layoutMode,a=r?cc(e):{};v(e,i.getTheme().get(o+"Axis")),v(e,this.getDefaultOption()),e.type=n(t,e),r&&lc(e,a,r)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=Kf.createByAxisModel(this))},getCategories:function(t){var e=this.option;if("category"===e.type)return t?e.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:y([{},pm[o+"Axis"],i],!0)})}),gc.registerSubTypeDefaulter(t+"Axis",N(n,t))}pm.categoryAxis=v({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},fm),pm.valueAxis=v({boundaryGap:[0,0],splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#eee",width:1}}},fm),pm.timeAxis=b({scale:!0,min:"dataMin",max:"dataMax"},pm.valueAxis),pm.logAxis=b({scale:!0,logBase:10},pm.valueAxis);var mm=["value","category","time","log"],vm=gc.extend({type:"cartesian2dAxis",axis:null,init:function(){vm.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){vm.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){vm.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function ym(t,e){return e.type||(e.data?"category":"value")}v(vm.prototype,$p);var xm={offset:0};function bm(t,e){return t.getCoordSysModel()===e}function _m(t,e,n){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(t,e,n),this.model=t}gm("x",vm,ym,xm),gm("y",vm,ym,xm),gc.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});var wm=_m.prototype;function Sm(t,e,n,i){n.getAxesOnZeroOf=function(){return o?[o]:[]};var o,r=t[e],a=n.model,s=a.get("axisLine.onZero"),l=a.get("axisLine.onZeroAxisIndex");if(s){if(null!=l)Cm(r[l])&&(o=r[l]);else for(var c in r)if(r.hasOwnProperty(c)&&Cm(r[c])&&!i[u(r[c])]){o=r[c];break}o&&(i[u(o)]=!0)}function u(t){return t.dim+"_"+t.index}}function Cm(t){return t&&"category"!==t.type&&"time"!==t.type&&function(t){var e=t.scale.getExtent(),n=e[0],i=e[1];return!(0<n&&0<i||n<0&&i<0)}(t)}wm.type="grid",wm.axisPointerEnabled=!0,wm.getRect=function(){return this._rect},wm.update=function(t,e){var n=this._axesMap;this._updateScale(t,this.model),k(n.x,function(t){Fp(t.scale,t.model)}),k(n.y,function(t){Fp(t.scale,t.model)});var i={};k(n.x,function(t){Sm(n,"y",t,i)}),k(n.y,function(t){Sm(n,"x",t,i)}),this.resize(this.model,e)},wm.resize=function(t,e,n){var i=ac(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._rect=i;var o=this._axesList;function r(){k(o,function(t){var e=t.isHorizontal(),n=e?[0,i.width]:[0,i.height],o=t.inverse?1:0;t.setExtent(n[o],n[1-o]),function(t,e){var n=t.getExtent(),i=n[0]+n[1];t.toGlobalCoord="x"===t.dim?function(t){return t+e}:function(t){return i-t+e},t.toLocalCoord="x"===t.dim?function(t){return t-e}:function(t){return i-t+e}}(t,e?i.x:i.y)})}r(),!n&&t.get("containLabel")&&(k(o,function(t){if(!t.model.get("axisLabel.inside")){var e=function(t){var e=t.scale;if(t.model.get("axisLabel.show")&&!e.isBlank()){var n,i,o="category"===t.type,r=e.getExtent();i=o?e.count():(n=e.getTicks()).length;var a,s,l,c,u,d,h,f,p=t.getLabelModel(),g=Wp(t),m=1;40<i&&(m=Math.ceil(i/40));for(var v=0;v<i;v+=m){var y=g(n?n[v]:r[0]+v),x=(s=p.getTextRect(y),l=(p.get("rotate")||0)*Math.PI/180,d=(c=s.plain()).height,h=(u=c.width)*Math.abs(Math.cos(l))+Math.abs(d*Math.sin(l)),f=u*Math.abs(Math.sin(l))+Math.abs(d*Math.cos(l)),new Sn(c.x,c.y,h,f));a?a.union(x):a=x}return a}}(t);if(e){var n=t.isHorizontal()?"height":"width",o=t.model.get("axisLabel.margin");i[n]-=e[n]+o,"top"===t.position?i.y+=e.height+o:"left"===t.position&&(i.x+=e.width+o)}}}),r())},wm.getAxis=function(t,e){var n=this._axesMap[t];if(null!=n){if(null==e)for(var i in n)if(n.hasOwnProperty(i))return n[i];return n[e]}},wm.getAxes=function(){return this._axesList.slice()},wm.getCartesian=function(t,e){if(null!=t&&null!=e)return this._coordsMap["x"+t+"y"+e];B(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var n=0,i=this._coordsList;n<i.length;n++)if(i[n].getAxis("x").index===t||i[n].getAxis("y").index===e)return i[n]},wm.getCartesians=function(){return this._coordsList.slice()},wm.convertToPixel=function(t,e,n){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},wm.convertFromPixel=function(t,e,n){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},wm._findConvertTarget=function(t,e){var n,i,o=e.seriesModel,r=e.xAxisModel||o&&o.getReferringComponents("xAxis")[0],a=e.yAxisModel||o&&o.getReferringComponents("yAxis")[0],s=e.gridModel;return o?S(this._coordsList,n=o.coordinateSystem)<0&&(n=null):r&&a?n=this.getCartesian(r.componentIndex,a.componentIndex):r?i=this.getAxis("x",r.componentIndex):a?i=this.getAxis("y",a.componentIndex):s&&s.coordinateSystem===this&&(n=this._coordsList[0]),{cartesian:n,axis:i}},wm.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},wm._initCartesian=function(t,e,n){var i={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},r={x:0,y:0};if(e.eachComponent("xAxis",a("x"),this),e.eachComponent("yAxis",a("y"),this),!r.x||!r.y)return this._axesMap={},void(this._axesList=[]);function a(e){return function(n,a){if(bm(n,t)){var s=n.get("position");"x"===e?"top"!==s&&"bottom"!==s&&(s=i.bottom?"top":"bottom"):"left"!==s&&"right"!==s&&(s=i.left?"right":"left"),i[s]=!0;var l=new hm(e,Hp(n),[0,0],n.get("type"),s);l.onBand="category"===l.type&&n.get("boundaryGap"),l.inverse=n.get("inverse"),(n.axis=l).model=n,l.grid=this,l.index=a,this._axesList.push(l),o[e][a]=l,r[e]++}}}k((this._axesMap=o).x,function(e,n){k(o.y,function(i,o){var r="x"+n+"y"+o,a=new dm(r);a.grid=this,a.model=t,this._coordsMap[r]=a,this._coordsList.push(a),a.addAxis(e),a.addAxis(i)},this)},this)},wm._updateScale=function(t,e){function n(t,e){k(t.mapDimension(e.dim,!0),function(n){e.scale.unionExtentFromData(t,Yf(t,n))})}k(this._axesList,function(t){t.scale.setExtent(1/0,-1/0)}),t.eachSeries(function(t){if(km(t)){var i=Tm(t),o=i[0],r=i[1];if(!bm(o,e)||!bm(r,e))return;var a=this.getCartesian(o.componentIndex,r.componentIndex),s=t.getData(),l=a.getAxis("x"),c=a.getAxis("y");"list"===s.type&&(n(s,l),n(s,c))}},this)},wm.getTooltipAxes=function(t){var e=[],n=[];return k(this.getCartesians(),function(i){var o=null!=t&&"auto"!==t?i.getAxis(t):i.getBaseAxis(),r=i.getOtherAxis(o);S(e,o)<0&&e.push(o),S(n,r)<0&&n.push(r)}),{baseAxes:e,otherAxes:n}};var Mm=["xAxis","yAxis"];function Tm(t){return A(Mm,function(e){return t.getReferringComponents(e)[0]})}function km(t){return"cartesian2d"===t.get("coordinateSystem")}function Am(t,e){this.opt=e,this.axisModel=t,b(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new Cn;var n=new Cn({position:e.position.slice(),rotation:e.rotation});n.updateTransform(),this._transform=n.transform,this._dumbGroup=n}_m.create=function(t,e){var n=[];return t.eachComponent("grid",function(i,o){var r=new _m(i,t,e);r.name="grid_"+o,r.resize(i,e,!0),i.coordinateSystem=r,n.push(r)}),t.eachSeries(function(t){if(km(t)){var e=Tm(t),n=e[0],i=e[1],o=n.getCoordSysModel().coordinateSystem;t.coordinateSystem=o.getCartesian(n.componentIndex,i.componentIndex)}}),n},_m.dimensions=_m.prototype.dimensions=dm.prototype.dimensions,jc.register("cartesian2d",_m);var Im=Math.PI;Am.prototype={constructor:Am,hasBuilder:function(t){return!!Dm[t]},add:function(t){Dm[t].call(this)},getGroup:function(){return this.group}};var Dm={axisLine:function(){var t=this.opt,e=this.axisModel;if(e.get("axisLine.show")){var n=this.axisModel.axis.getExtent(),i=this._transform,o=[n[0],0],r=[n[1],0];i&&(bt(o,o,i),bt(r,r,i));var a=x({lineCap:"round"},e.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new qa({anid:"line",subPixelOptimize:!0,shape:{x1:o[0],y1:o[1],x2:r[0],y2:r[1]},style:a,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1}));var s=e.get("axisLine.symbol"),l=e.get("axisLine.symbolSize"),c=e.get("axisLine.symbolOffset")||0;if("number"==typeof c&&(c=[c,c]),null!=s){"string"==typeof s&&(s=[s,s]),"string"!=typeof l&&"number"!=typeof l||(l=[l,l]);var u=l[0],d=l[1];k([{rotate:t.rotation+Math.PI/2,offset:c[0],r:0},{rotate:t.rotation-Math.PI/2,offset:c[1],r:Math.sqrt((o[0]-r[0])*(o[0]-r[0])+(o[1]-r[1])*(o[1]-r[1]))}],function(e,n){if("none"!==s[n]&&null!=s[n]){var i=eg(s[n],-u/2,-d/2,u,d,a.stroke,!0),r=e.r+e.offset,l=[o[0]+r*Math.cos(t.rotation),o[1]-r*Math.sin(t.rotation)];i.attr({rotation:e.rotate,position:l,silent:!0,z2:11}),this.group.add(i)}},this)}}},axisTickLabel:function(){var t=this.axisModel,e=this.opt,n=function(t,e,n){var i=e.axis,o=e.getModel("axisTick");if(o.get("show")&&!i.scale.isBlank()){for(var r=o.getModel("lineStyle"),a=n.tickDirection*o.get("length"),s=Bm(i.getTicksCoords(),t._transform,a,b(r.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}),"ticks"),l=0;l<s.length;l++)t.group.add(s[l]);return s}}(this,t,e);!function(t,e,n){if(!jp(t.axis)){var i=t.get("axisLabel.showMinLabel"),o=t.get("axisLabel.showMaxLabel"),r=(e=e||[])[0],a=e[1],s=e[e.length-1],l=e[e.length-2],c=(n=n||[])[0],u=n[1],d=n[n.length-1],h=n[n.length-2];!1===i?(Lm(r),Lm(c)):Rm(r,a)&&(i?(Lm(a),Lm(u)):(Lm(r),Lm(c))),!1===o?(Lm(s),Lm(d)):Rm(l,s)&&(o?(Lm(l),Lm(h)):(Lm(s),Lm(d)))}}(t,function(t,e,n){var i=e.axis;if(W(n.axisLabelShow,e.get("axisLabel.show"))&&!i.scale.isBlank()){var o=e.getModel("axisLabel"),r=o.get("margin"),a=i.getViewLabels(),s=(W(n.labelRotate,o.get("rotate"))||0)*Im/180,l=Em(n.rotation,s,n.labelDirection),c=e.getCategories&&e.getCategories(!0),u=[],d=Nm(e),h=e.get("triggerEvent");return k(a,function(a,s){var f=a.tickValue,p=a.formattedLabel,g=a.rawLabel,m=o;c&&c[f]&&c[f].textStyle&&(m=new fl(c[f].textStyle,o,e.ecModel));var v=m.getTextColor()||e.get("axisLine.lineStyle.color"),y=[i.dataToCoord(f),n.labelOffset+n.labelDirection*r],x=new Da({anid:"label_"+f,position:y,rotation:l.rotation,silent:d,z2:10});Hs(x.style,m,{text:p,textAlign:m.getShallow("align",!0)||l.textAlign,textVerticalAlign:m.getShallow("verticalAlign",!0)||m.getShallow("baseline",!0)||l.textVerticalAlign,textFill:"function"==typeof v?v("category"===i.type?g:"value"===i.type?f+"":f,s):v}),h&&(x.eventData=Pm(e),x.eventData.targetType="axisLabel",x.eventData.value=g),t._dumbGroup.add(x),x.updateTransform(),u.push(x),t.group.add(x),x.decomposeTransform()}),u}}(this,t,e),n),function(t,e,n){var i=e.axis,o=e.getModel("minorTick");if(o.get("show")&&!i.scale.isBlank()){var r=i.getMinorTicksCoords();if(r.length)for(var a=o.getModel("lineStyle"),s=n.tickDirection*o.get("length"),l=b(a.getLineStyle(),b(e.getModel("axisTick").getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")})),c=0;c<r.length;c++)for(var u=Bm(r[c],t._transform,s,l,"minorticks_"+c),d=0;d<u.length;d++)t.group.add(u[d])}}(this,t,e)},axisName:function(){var t=this.opt,e=this.axisModel,n=W(t.axisName,e.get("name"));if(n){var i,o,r=e.get("nameLocation"),a=t.nameDirection,s=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,c=this.axisModel.axis.getExtent(),u=c[0]>c[1]?-1:1,d=["start"===r?c[0]-u*l:"end"===r?c[1]+u*l:(c[0]+c[1])/2,Om(r)?t.labelOffset+a*l:0],h=e.get("nameRotate");null!=h&&(h=h*Im/180),Om(r)?i=Em(t.rotation,null!=h?h:t.rotation,a):(i=function(t,e,n,i){var o,r=Al(n-t.rotation),a=i[0]>i[1],s="start"===e&&!a||"start"!==e&&a;return{rotation:r,textAlign:Il(r-Im/2)?(o=s?"bottom":"top","center"):Il(r-1.5*Im)?(o=s?"top":"bottom","center"):(o="middle",r<1.5*Im&&Im/2<r?s?"left":"right":s?"right":"left"),textVerticalAlign:o}}(t,r,h||0,c),null!=(o=t.axisNameAvailableWidth)&&(o=Math.abs(o/Math.sin(i.rotation)),isFinite(o)||(o=null)));var f=s.getFont(),p=e.get("nameTruncate",!0)||{},g=p.ellipsis,m=W(t.nameTruncateMaxWidth,p.maxWidth,o),v=null!=g&&null!=m?Jl(n,m,f,g,{minChar:2,placeholder:p.placeholder}):n,y=e.get("tooltip",!0),b=e.mainType,_={componentType:b,name:n,$vars:["name"]};_[b+"Index"]=e.componentIndex;var w=new Da({anid:"name",__fullText:n,__truncatedText:v,position:d,rotation:i.rotation,silent:Nm(e),z2:1,tooltip:y&&y.show?x({content:n,formatter:function(){return n},formatterParams:_},y):null});Hs(w.style,s,{text:v,textFont:f,textFill:s.getTextColor()||e.get("axisLine.lineStyle.color"),textAlign:s.get("align")||i.textAlign,textVerticalAlign:s.get("verticalAlign")||i.textVerticalAlign}),e.get("triggerEvent")&&(w.eventData=Pm(e),w.eventData.targetType="axisName",w.eventData.name=n),this._dumbGroup.add(w),w.updateTransform(),this.group.add(w),w.decomposeTransform()}}},Pm=Am.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},Em=Am.innerTextLayout=function(t,e,n){var i,o=Al(e-t);return{rotation:o,textAlign:Il(o)?(i=0<n?"top":"bottom","center"):Il(o-Im)?(i=0<n?"bottom":"top","center"):(i="middle",0<o&&o<Im?0<n?"right":"left":0<n?"left":"right"),textVerticalAlign:i}},Nm=Am.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)};function Lm(t){t&&(t.ignore=!0)}function Rm(t,e){var n=t&&t.getBoundingRect().clone(),i=e&&e.getBoundingRect().clone();if(n&&i){var o=oe([]);return le(o,o,-t.rotation),n.applyTransform(ae([],o,t.getLocalTransform())),i.applyTransform(ae([],o,e.getLocalTransform())),n.intersect(i)}}function Om(t){return"middle"===t||"center"===t}function Bm(t,e,n,i,o){for(var r=[],a=[],s=[],l=0;l<t.length;l++){var c=t[l].coord;a[0]=c,s[a[1]=0]=c,s[1]=n,e&&(bt(a,a,e),bt(s,s,e));var u=new qa({anid:o+"_"+t[l].tickValue,subPixelOptimize:!0,shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:i,z2:2,silent:!0});r.push(u)}return r}var zm=k,Vm=N;function Fm(t,e){return"all"===t||L(t)&&0<=S(t,e)||t===e}function Hm(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[Gm(t)]}function Wm(t){return!!t.get("handle.show")}function Gm(t){return t.type+"||"+t.id}var Um=lf({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(t,e,n,i){this.axisPointerClass&&function(t){var e=Hm(t);if(e){var n=e.axisPointerModel,i=e.axis.scale,o=n.option,r=n.get("status"),a=n.get("value");null!=a&&(a=i.parse(a));var s=Wm(n);null==r&&(o.status=s?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==a||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),o.value=a,s&&(o.status=e.axis.scale.isBlank()?"hide":"show")}}(t),Um.superApply(this,"render",arguments),jm(this,t,0,n,0,!0)},updateAxisPointer:function(t,e,n,i,o){jm(this,t,0,n,0,!1)},remove:function(t,e){var n=this._axisPointer;n&&n.remove(e),Um.superApply(this,"remove",arguments)},dispose:function(t,e){$m(this,e),Um.superApply(this,"dispose",arguments)}});function jm(t,e,n,i,o,r){var a=Um.getAxisPointerClass(t.axisPointerClass);if(a){var s=function(t){var e=Hm(t);return e&&e.axisPointerModel}(e);s?(t._axisPointer||(t._axisPointer=new a)).render(e,s,i,r):$m(t,i)}}function $m(t,e,n){var i=t._axisPointer;i&&i.dispose(e,n),t._axisPointer=null}var qm=[];function Ym(t,e,n){n=n||{};var i=t.coordinateSystem,o=e.axis,r={},a=o.getAxesOnZeroOf()[0],s=o.position,l=a?"onZero":s,c=o.dim,u=i.getRect(),d=[u.x,u.x+u.width,u.y,u.y+u.height],h={left:0,right:1,top:0,bottom:1,onZero:2},f=e.get("offset")||0,p="x"===c?[d[2]-f,d[3]+f]:[d[0]-f,d[1]+f];if(a){var g=a.toGlobalCoord(a.dataToCoord(0));p[h.onZero]=Math.max(Math.min(g,p[1]),p[0])}r.position=["y"===c?p[h[l]]:d[0],"x"===c?p[h[l]]:d[3]],r.rotation=Math.PI/2*("x"===c?0:1),r.labelDirection=r.tickDirection=r.nameDirection={top:-1,bottom:1,left:-1,right:1}[s],r.labelOffset=a?p[h[s]]-p[h.onZero]:0,e.get("axisTick.inside")&&(r.tickDirection=-r.tickDirection),W(n.labelInside,e.get("axisLabel.inside"))&&(r.labelDirection=-r.labelDirection);var m=e.get("axisLabel.rotate");return r.labelRotate="top"===l?-m:m,r.z2=1,r}function Xm(t,e,n,i){var o=n.axis;if(!o.scale.isBlank()){var r=n.getModel("splitArea"),a=r.getModel("areaStyle"),s=a.get("color"),l=i.coordinateSystem.getRect(),c=o.getTicksCoords({tickModel:r,clamp:!0});if(c.length){var u=s.length,d=t.__splitAreaColors,h=Q(),f=0;if(d)for(var p=0;p<c.length;p++){var g=d.get(c[p].tickValue);if(null!=g){f=(g+(u-1)*p)%u;break}}var m=o.toGlobalCoord(c[0].coord),v=a.getAreaStyle();for(s=L(s)?s:[s],p=1;p<c.length;p++){var y,x,_,w,S=o.toGlobalCoord(c[p].coord);m=o.isHorizontal()?(x=l.y,w=l.height,(y=m)+(_=S-y)):(y=l.x,_=l.width,(x=m)+(w=S-x));var C=c[p-1].tickValue;null!=C&&h.set(C,f),e.add(new ja({anid:null!=C?"area_"+C:null,shape:{x:y,y:x,width:_,height:w},style:b({fill:s[f]},v),silent:!0})),f=(f+1)%u}t.__splitAreaColors=h}}}function Zm(t){t.__splitAreaColors=null}Um.registerAxisPointerClass=function(t,e){qm[t]=e},Um.getAxisPointerClass=function(t){return t&&qm[t]};var Km=["axisLine","axisTickLabel","axisName"],Jm=["splitArea","splitLine","minorSplitLine"],Qm=Um.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(t,e,n,i){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Cn,this.group.add(this._axisGroup),t.get("show")){var r=t.getCoordSysModel(),a=Ym(r,t),s=new Am(t,a);k(Km,s.add,s),this._axisGroup.add(s.getGroup()),k(Jm,function(e){t.get(e+".show")&&this["_"+e](t,r)},this),tl(o,this._axisGroup,t),Qm.superCall(this,"render",t,e,n,i)}},remove:function(){Zm(this)},_splitLine:function(t,e){var n=t.axis;if(!n.scale.isBlank()){var i=t.getModel("splitLine"),o=i.getModel("lineStyle"),r=o.get("color");r=L(r)?r:[r];for(var a=e.coordinateSystem.getRect(),s=n.isHorizontal(),l=0,c=n.getTicksCoords({tickModel:i}),u=[],d=[],h=o.getLineStyle(),f=0;f<c.length;f++){var p=n.toGlobalCoord(c[f].coord);s?(u[0]=p,u[1]=a.y,d[0]=p,d[1]=a.y+a.height):(u[0]=a.x,u[1]=p,d[0]=a.x+a.width,d[1]=p);var g=l++%r.length;this._axisGroup.add(new qa({anid:null!=c[f].tickValue?"line_"+c[f].tickValue:null,subPixelOptimize:!0,shape:{x1:u[0],y1:u[1],x2:d[0],y2:d[1]},style:b({stroke:r[g]},h),silent:!0}))}}},_minorSplitLine:function(t,e){var n=t.axis,i=t.getModel("minorSplitLine").getModel("lineStyle"),o=e.coordinateSystem.getRect(),r=n.isHorizontal(),a=n.getMinorTicksCoords();if(a.length)for(var s=[],l=[],c=i.getLineStyle(),u=0;u<a.length;u++)for(var d=0;d<a[u].length;d++){var h=n.toGlobalCoord(a[u][d].coord);r?(s[0]=h,s[1]=o.y,l[0]=h,l[1]=o.y+o.height):(s[0]=o.x,s[1]=h,l[0]=o.x+o.width,l[1]=h),this._axisGroup.add(new qa({anid:"minor_line_"+a[u][d].tickValue,subPixelOptimize:!0,shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,silent:!0}))}},_splitArea:function(t,e){Xm(this,this._axisGroup,t,e)}});Qm.extend({type:"xAxis"}),Qm.extend({type:"yAxis"}),lf({type:"grid",render:function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new ja({shape:t.coordinateSystem.getRect(),style:b({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))}}),Jh(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})}),of(rm("line","circle","line")),nf(am("line")),Qh(dh.PROCESSOR.STATISTIC,{seriesType:"line",modifyOutputEnd:!0,reset:function(t,e,n){var i=t.getData(),o=t.get("sampling"),r=t.coordinateSystem;if("cartesian2d"===r.type&&o){var a,s=r.getBaseAxis(),l=r.getOtherAxis(s),c=s.getExtent(),u=Math.abs(c[1]-c[0]),d=Math.round(i.count()/u);1<d&&("string"==typeof o?a=lm[o]:"function"==typeof o&&(a=o),a&&t.setData(i.downSample(i.mapDimension(l.dim),1/d,a,sm)))}}});var tv=Gu.extend({type:"series.__base_bar__",getInitialData:function(t,e){return Xf(this.getSource(),this,{useEncodeDefaulter:!0})},getMarkerPosition:function(t){var e=this.coordinateSystem;if(e){var n=e.dataToPoint(e.clampData(t)),i=this.getData(),o=i.getLayout("offset"),r=i.getLayout("size");return n[e.getBaseAxis().isHorizontal()?0:1]+=o+r/2,n}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});function ev(t,e,n,i,o,r){Vs(t,e,n.getModel("label"),n.getModel("emphasis.label"),{labelFetcher:o,labelDataIndex:r,defaultText:_g(o.getData(),r),isRectText:!0,autoColor:i}),nv(t),nv(e)}function nv(t,e){"outside"===t.textPosition&&(t.textPosition=e)}tv.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return t<e&&(t=e),t},defaultOption:{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1}}});var iv=Ko([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),ov={getBarItemStyle:function(t){var e=iv(this,t);if(this.getBorderLineDash){var n=this.getBorderLineDash();n&&(e.lineDash=n)}return e}},rv=fs({type:"sausage",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(t,e){var n=e.cx,i=e.cy,o=Math.max(e.r0||0,0),r=Math.max(e.r,0),a=.5*(r-o),s=o+a,l=e.startAngle,c=e.endAngle,u=e.clockwise,d=Math.cos(l),h=Math.sin(l),f=Math.cos(c),p=Math.sin(c);(u?c-l<2*Math.PI:l-c<2*Math.PI)&&(t.moveTo(d*o+n,h*o+i),t.arc(d*s+n,h*s+i,a,-Math.PI+l,l,!u)),t.arc(n,i,r,l,c,!u),t.moveTo(f*r+n,p*r+i),t.arc(f*s+n,p*s+i,a,c-2*Math.PI,c-Math.PI,!u),0!==o&&(t.arc(n,i,o,c,l,u),t.moveTo(d*o+n,p*o+i)),t.closePath()}}),av=["itemStyle","barBorderWidth"],sv=[0,0];x(fl.prototype,ov),uf({type:"bar",render:function(t,e,n){this._updateDrawMode(t);var i=t.get("coordinateSystem");return"cartesian2d"!==i&&"polar"!==i||(this._isLargeDraw?this._renderLarge(t,e,n):this._renderNormal(t,e,n)),this.group},incrementalPrepareRender:function(t,e,n){this._clear(),this._updateDrawMode(t)},incrementalRender:function(t,e,n,i){this._incrementalRenderLarge(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormal:function(t,e,n){var i,o=this.group,r=t.getData(),a=this._data,s=t.coordinateSystem,l=s.getBaseAxis();"cartesian2d"===s.type?i=l.isHorizontal():"polar"===s.type&&(i="angle"===l.dim);var c=t.isAnimationEnabled()?t:null,u=t.get("clip",!0),d=function(t,e){var n=t.getArea&&t.getArea();if("cartesian2d"===t.type){var i=t.getBaseAxis();if("category"!==i.type||!i.onBand){var o=e.getLayout("bandWidth");i.isHorizontal()?(n.x-=o,n.width+=2*o):(n.y-=o,n.height+=2*o)}}return n}(s,r);function h(t){var e=pv[s.type](r,t),n=function(t,e,n){return new("polar"===t.type?La:ja)({shape:bv(e,n,t),silent:!0,z2:0})}(s,i,e);return n.useStyle(g.getBarItemStyle()),"cartesian2d"===s.type&&n.setShape("r",m),v[t]=n}o.removeClipPath();var f=t.get("roundCap",!0),p=t.get("showBackground",!0),g=t.getModel("backgroundStyle"),m=g.get("barBorderRadius")||0,v=[],y=this._backgroundEls||[];r.diff(a).add(function(e){var n=r.getItemModel(e),a=pv[s.type](r,e,n);if(p&&h(e),r.hasValue(e)){if(u&&uv[s.type](d,a))return void o.remove(l);var l=dv[s.type](e,a,i,c,!1,f);r.setItemGraphicEl(e,l),o.add(l),mv(l,r,e,n,a,t,0,"polar"===s.type)}}).update(function(e,n){var l=r.getItemModel(e),x=pv[s.type](r,e,l);if(p){var b;0===y.length?b=h(n):((b=y[n]).useStyle(g.getBarItemStyle()),"cartesian2d"===s.type&&b.setShape("r",m),v[e]=b);var _=pv[s.type](r,e);Xs(b,{shape:bv(i,_,s)},c,e)}var w=a.getItemGraphicEl(n);if(r.hasValue(e)){if(u&&uv[s.type](d,x))return void o.remove(w);w?Xs(w,{shape:x},c,e):w=dv[s.type](e,x,i,c,!0,f),r.setItemGraphicEl(e,w),o.add(w),mv(w,r,e,l,x,t,0,"polar"===s.type)}else o.remove(w)}).remove(function(t){var e=a.getItemGraphicEl(t);"cartesian2d"===s.type?e&&hv(t,c,e):e&&fv(t,c,e)}).execute();var x=this._backgroundGroup||(this._backgroundGroup=new Cn);x.removeAll();for(var b=0;b<v.length;++b)x.add(v[b]);o.add(x),this._backgroundEls=v,this._data=r},_renderLarge:function(t,e,n){this._clear(),yv(t,this.group);var i=t.get("clip",!0)?Qg(t.coordinateSystem,!1,t):null;i?this.group.setClipPath(i):this.group.removeClipPath()},_incrementalRenderLarge:function(t,e){this._removeBackground(),yv(e,this.group,!0)},dispose:et,remove:function(t){this._clear(t)},_clear:function(t){var e=this.group,n=this._data;t&&t.get("animation")&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(e){"sector"===e.type?fv(e.dataIndex,t,e):hv(e.dataIndex,t,e)})):e.removeAll(),this._data=null},_removeBackground:function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null}});var lv=Math.max,cv=Math.min,uv={cartesian2d:function(t,e){var n=e.width<0?-1:1,i=e.height<0?-1:1;n<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height);var o=lv(e.x,t.x),r=cv(e.x+e.width,t.x+t.width),a=lv(e.y,t.y),s=cv(e.y+e.height,t.y+t.height);e.x=o,e.y=a,e.width=r-o,e.height=s-a;var l=e.width<0||e.height<0;return n<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height),l},polar:function(t,e){var n=e.r0<=e.r?1:-1;if(n<0){var i=e.r;e.r=e.r0,e.r0=i}i=cv(e.r,t.r);var o=lv(e.r0,t.r0),r=(e.r=i)-(e.r0=o)<0;return n<0&&(i=e.r,e.r=e.r0,e.r0=i),r}},dv={cartesian2d:function(t,e,n,i,o){var r=new ja({shape:x({},e),z2:1});if(r.name="item",i){var a=n?"height":"width",s={};r.shape[a]=0,s[a]=e[a],al[o?"updateProps":"initProps"](r,{shape:s},i,t)}return r},polar:function(t,e,n,i,o,r){var a=new(!n&&r?rv:La)({shape:b({clockwise:e.startAngle<e.endAngle},e),z2:1});if(a.name="item",i){var s=n?"r":"endAngle",l={};a.shape[s]=n?0:e.startAngle,l[s]=e[s],al[o?"updateProps":"initProps"](a,{shape:l},i,t)}return a}};function hv(t,e,n){n.style.text=null,Xs(n,{shape:{width:0}},e,t,function(){n.parent&&n.parent.remove(n)})}function fv(t,e,n){n.style.text=null,Xs(n,{shape:{r:n.shape.r0}},e,t,function(){n.parent&&n.parent.remove(n)})}var pv={cartesian2d:function(t,e,n){var i=t.getItemLayout(e),o=n?function(t,e){var n=t.get(av)||0,i=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),o=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(n,i,o)}(n,i):0,r=0<i.width?1:-1,a=0<i.height?1:-1;return{x:i.x+r*o/2,y:i.y+a*o/2,width:i.width-r*o,height:i.height-a*o}},polar:function(t,e,n){var i=t.getItemLayout(e);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle}}};function gv(t){return null!=t.startAngle&&null!=t.endAngle&&t.startAngle===t.endAngle}function mv(t,e,n,i,o,r,a,s){var l=e.getItemVisual(n,"color"),c=e.getItemVisual(n,"opacity"),u=e.getVisual("borderColor"),d=i.getModel("itemStyle"),h=i.getModel("emphasis.itemStyle").getBarItemStyle();s||t.setShape("r",d.get("barBorderRadius")||0),t.useStyle(b({stroke:gv(o)?"none":u,fill:gv(o)?"none":l,opacity:c},d.getBarItemStyle()));var f=i.getShallow("cursor");f&&t.attr("cursor",f),s||ev(t.style,h,i,l,r,n),gv(o)&&(h.fill=h.stroke="none"),Rs(t,h)}var vv=fa.extend({type:"largeBar",shape:{points:[]},buildPath:function(t,e){for(var n=e.points,i=this.__startPoint,o=this.__baseDimIdx,r=0;r<n.length;r+=2)i[o]=n[r+o],t.moveTo(i[0],i[1]),t.lineTo(n[r],n[r+1])}});function yv(t,e,n){var i=t.getData(),o=[],r=i.getLayout("valueAxisHorizontal")?1:0;o[1-r]=i.getLayout("valueAxisStart");var a=i.getLayout("largeDataIndices"),s=i.getLayout("barWidth"),l=t.getModel("backgroundStyle");if(t.get("showBackground",!0)){var c=i.getLayout("largeBackgroundPoints"),u=[];u[1-r]=i.getLayout("backgroundStart");var d=new vv({shape:{points:c},incremental:!!n,__startPoint:u,__baseDimIdx:r,__largeDataIndices:a,__barWidth:s,silent:!0,z2:0});!function(t,e,n){var i=e.get("borderColor")||e.get("color"),o=e.getItemStyle(["color","borderColor"]);t.useStyle(o),t.style.fill=null,t.style.stroke=i,t.style.lineWidth=n.getLayout("barWidth")}(d,l,i),e.add(d)}var h=new vv({shape:{points:i.getLayout("largePoints")},incremental:!!n,__startPoint:o,__baseDimIdx:r,__largeDataIndices:a,__barWidth:s});e.add(h),function(t,e,n){var i=n.getVisual("borderColor")||n.getVisual("color"),o=e.getModel("itemStyle").getItemStyle(["color","borderColor"]);t.useStyle(o),t.style.fill=null,t.style.stroke=i,t.style.lineWidth=n.getLayout("barWidth")}(h,t,i),h.seriesIndex=t.seriesIndex,t.get("silent")||(h.on("mousedown",xv),h.on("mousemove",xv))}var xv=hd(function(t){var e=function(t,e,n){var i=t.__baseDimIdx,o=1-i,r=t.shape.points,a=t.__largeDataIndices,s=Math.abs(t.__barWidth/2),l=t.__startPoint[o];sv[0]=e,sv[1]=n;for(var c=sv[i],u=sv[1-i],d=c-s,h=c+s,f=0,p=r.length/2;f<p;f++){var g=2*f,m=r[g+i],v=r[g+o];if(d<=m&&m<=h&&(l<=v?l<=u&&u<=v:v<=u&&u<=l))return a[f]}return-1}(this,t.offsetX,t.offsetY);this.dataIndex=0<=e?e:null},30,!1);function bv(t,e,n){var i,o="polar"===n.type;return i=o?n.getArea():n.grid.getRect(),o?{cx:i.cx,cy:i.cy,r0:t?i.r0:e.r0,r:t?i.r:e.r,startAngle:t?e.startAngle:0,endAngle:t?e.endAngle:2*Math.PI}:{x:t?e.x:i.x,y:t?i.y:e.y,width:t?e.width:i.width,height:t?i.height:e.height}}function _v(t,e,n){e=L(e)&&{coordDimensions:e}||x({},e);var i=t.getSource(),o=Wf(i,e),r=new Af(o,t);return r.initData(i,n),r}nf(dh.VISUAL.LAYOUT,N(vp,"bar")),nf(dh.VISUAL.PROGRESSIVE_LAYOUT,yp),of({seriesType:"bar",reset:function(t){t.getData().setVisual("legendSymbol","roundRect")}});var wv={updateSelectedMap:function(t){this._targetList=L(t)?t.slice():[],this._selectTargetMap=I(t||[],function(t,e){return t.set(e.name,e),t},Q())},select:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);"single"===this.get("selectedMode")&&this._selectTargetMap.each(function(t){t.selected=!1}),n&&(n.selected=!0)},unSelect:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);n&&(n.selected=!1)},toggleSelected:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);if(null!=n)return this[n.selected?"unSelect":"select"](t,e),n.selected},isSelected:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);return n&&n.selected}};function Sv(t,e){this.getAllNames=function(){var t=e();return t.mapArray(t.getName)},this.containName=function(t){return 0<=e().indexOfName(t)},this.indexOfName=function(e){return t().indexOfName(e)},this.getItemVisual=function(e,n){return t().getItemVisual(e,n)}}var Cv=cf({type:"series.pie",init:function(t){Cv.superApply(this,"init",arguments),this.legendVisualProvider=new Sv(E(this.getData,this),E(this.getRawData,this)),this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(t)},mergeOption:function(t){Cv.superCall(this,"mergeOption",t),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(t,e){return _v(this,{coordDimensions:["value"],encodeDefaulter:N(Rc,this)})},_createSelectableList:function(){for(var t=this.getRawData(),e=t.mapDimension("value"),n=[],i=0,o=t.count();i<o;i++)n.push({name:t.getName(i),value:t.get(e,i),selected:Tu(t,i,"selected")});return n},getDataParams:function(t){var e=this.getData(),n=Cv.superCall(this,"getDataParams",t),i=[];return e.each(e.mapDimension("value"),function(t){i.push(t)}),n.percent=Tl(i,t,e.hostModel.get("percentPrecision")),n.$vars.push("percent"),n},_defaultLabelLine:function(t){Ao(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:!1,show:!0,position:"outer",alignTo:"none",margin:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationTypeUpdate:"transition",animationEasing:"cubicOut"}});function Mv(t,e,n,i){var o=e.getData(),r=o.getName(this.dataIndex),a=e.get("selectedOffset");i.dispatchAction({type:"pieToggleSelect",from:t,name:r,seriesId:e.id}),o.each(function(t){Tv(o.getItemGraphicEl(t),o.getItemLayout(t),e.isSelected(o.getName(t)),a,n)})}function Tv(t,e,n,i,o){var r=(e.startAngle+e.endAngle)/2,a=n?i:0,s=[Math.cos(r)*a,Math.sin(r)*a];o?t.animate().when(200,{position:s}).start("bounceOut"):t.attr("position",s)}function kv(t,e){Cn.call(this);var n=new La({z2:2}),i=new Va,o=new Da;this.add(n),this.add(i),this.add(o),this.updateData(t,e,!0)}M(Cv,wv);var Av=kv.prototype;function Iv(t,e){k(e,function(e){e.update="updateView",tf(e,function(n,i){var o={};return i.eachComponent({mainType:"series",subType:t,query:n},function(t){t[e.method]&&t[e.method](n.name,n.dataIndex);var i=t.getData();i.each(function(e){var n=i.getName(e);o[n]=t.isSelected(n)||!1})}),{name:n.name,selected:o,seriesId:n.seriesId}})})}function Dv(t){return{getTargetSeries:function(e){var n={},i=Q();return e.eachSeriesByType(t,function(t){t.__paletteScope=n,i.set(t.uid,t)}),i},reset:function(t,e){var n=t.getRawData(),i={},o=t.getData();o.each(function(t){var e=o.getRawIndex(t);i[e]=t}),n.each(function(e){var r,a=i[e],s=null!=a&&o.getItemVisual(a,"color",!0),l=null!=a&&o.getItemVisual(a,"borderColor",!0);if(s&&l||(r=n.getItemModel(e)),!s){var c=r.get("itemStyle.color")||t.getColorFromPalette(n.getName(e)||e+"",t.__paletteScope,n.count());null!=a&&o.setItemVisual(a,"color",c)}if(!l){var u=r.get("itemStyle.borderColor");null!=a&&o.setItemVisual(a,"borderColor",u)}})}}}Av.updateData=function(t,e,n){var i=this.childAt(0),o=this.childAt(1),r=this.childAt(2),a=t.hostModel,s=t.getItemModel(e),l=t.getItemLayout(e),c=x({},l);c.label=null;var u=a.getShallow("animationTypeUpdate");n?(i.setShape(c),"scale"===a.getShallow("animationType")?(i.shape.r=l.r0,Zs(i,{shape:{r:l.r}},a,e)):(i.shape.endAngle=l.startAngle,Xs(i,{shape:{endAngle:l.endAngle}},a,e))):"expansion"===u?i.setShape(c):Xs(i,{shape:c},a,e);var d=t.getItemVisual(e,"color");i.useStyle(b({lineJoin:"bevel",fill:d},s.getModel("itemStyle").getItemStyle())),i.hoverStyle=s.getModel("emphasis.itemStyle").getItemStyle();var h=s.getShallow("cursor");h&&i.attr("cursor",h),Tv(this,t.getItemLayout(e),a.isSelected(t.getName(e)),a.get("selectedOffset"),a.get("animation")),this._updateLabel(t,e,!n&&"transition"===u),this.highDownOnUpdate=a.get("silent")?null:function(t,e){var n=a.isAnimationEnabled()&&s.get("hoverAnimation");"emphasis"===e?(o.ignore=o.hoverIgnore,r.ignore=r.hoverIgnore,n&&(i.stopAnimation(!0),i.animateTo({shape:{r:l.r+a.get("hoverOffset")}},300,"elasticOut"))):(o.ignore=o.normalIgnore,r.ignore=r.normalIgnore,n&&(i.stopAnimation(!0),i.animateTo({shape:{r:l.r}},300,"elasticOut")))},Rs(this)},Av._updateLabel=function(t,e,n){var i=this.childAt(1),o=this.childAt(2),r=t.hostModel,a=t.getItemModel(e),s=t.getItemLayout(e).label,l=t.getItemVisual(e,"color");if(!s||isNaN(s.x)||isNaN(s.y))o.ignore=o.normalIgnore=o.hoverIgnore=i.ignore=i.normalIgnore=i.hoverIgnore=!0;else{var c={points:s.linePoints||[[s.x,s.y],[s.x,s.y],[s.x,s.y]]},u={x:s.x,y:s.y};n?(Xs(i,{shape:c},r,e),Xs(o,{style:u},r,e)):(i.attr({shape:c}),o.attr({style:u})),o.attr({rotation:s.rotation,origin:[s.x,s.y],z2:10});var d=a.getModel("label"),h=a.getModel("emphasis.label"),f=a.getModel("labelLine"),p=a.getModel("emphasis.labelLine");l=t.getItemVisual(e,"color"),Vs(o.style,o.hoverStyle={},d,h,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:s.text,autoColor:l,useInsideStyle:!!s.inside},{textAlign:s.textAlign,textVerticalAlign:s.verticalAlign,opacity:t.getItemVisual(e,"opacity")}),o.ignore=o.normalIgnore=!d.get("show"),o.hoverIgnore=!h.get("show"),i.ignore=i.normalIgnore=!f.get("show"),i.hoverIgnore=!p.get("show"),i.setStyle({stroke:l,opacity:t.getItemVisual(e,"opacity")}),i.setStyle(f.getModel("lineStyle").getLineStyle()),i.hoverStyle=p.getModel("lineStyle").getLineStyle();var g=f.get("smooth");g&&!0===g&&(g=.4),i.setShape({smooth:g})}},C(kv,Cn),nd.extend({type:"pie",init:function(){var t=new Cn;this._sectorGroup=t},render:function(t,e,n,i){if(!i||i.from!==this.uid){var o=t.getData(),r=this._data,a=this.group,s=e.get("animation"),l=!r,c=t.get("animationType"),u=t.get("animationTypeUpdate"),d=N(Mv,this.uid,t,s,n),h=t.get("selectedMode");if(o.diff(r).add(function(t){var e=new kv(o,t);l&&"scale"!==c&&e.eachChild(function(t){t.stopAnimation(!0)}),h&&e.on("click",d),o.setItemGraphicEl(t,e),a.add(e)}).update(function(t,e){var n=r.getItemGraphicEl(e);l||"transition"===u||n.eachChild(function(t){t.stopAnimation(!0)}),n.updateData(o,t),n.off("click"),h&&n.on("click",d),a.add(n),o.setItemGraphicEl(t,n)}).remove(function(t){var e=r.getItemGraphicEl(t);a.remove(e)}).execute(),s&&0<o.count()&&(l?"scale"!==c:"transition"!==u)){for(var f=o.getItemLayout(0),p=1;isNaN(f.startAngle)&&p<o.count();++p)f=o.getItemLayout(p);var g=Math.max(n.getWidth(),n.getHeight())/2,m=E(a.removeClipPath,a);a.setClipPath(this._createClipPath(f.cx,f.cy,g,f.startAngle,f.clockwise,m,t,l))}else a.removeClipPath();this._data=o}},dispose:function(){},_createClipPath:function(t,e,n,i,o,r,a,s){var l=new La({shape:{cx:t,cy:e,r0:0,r:n,startAngle:i,endAngle:i,clockwise:o}});return(s?Zs:Xs)(l,{shape:{endAngle:i+(o?1:-1)*Math.PI*2}},a,r),l},containPoint:function(t,e){var n=e.getData().getItemLayout(0);if(n){var i=t[0]-n.cx,o=t[1]-n.cy,r=Math.sqrt(i*i+o*o);return r<=n.r&&r>=n.r0}}});var Pv=Math.PI/180;function Ev(t,e,n,i,o,r,a,s,l,c){function u(e,n,i){for(var o=e;o<n&&!(t[o].y+i>l+a);o++)if(t[o].y+=i,e<o&&o+1<n&&t[o+1].y>t[o].y+t[o].height)return void d(o,i/2);d(n-1,i/2)}function d(e,n){for(var i=e;0<=i&&!(t[i].y-n<l)&&(t[i].y-=n,!(0<i&&t[i].y>t[i-1].y+t[i-1].height));i--);}function h(t,e,n,i,o,r){for(var a=e?Number.MAX_VALUE:0,s=0,l=t.length;s<l;s++)if("none"===t[s].labelAlignTo){var c=Math.abs(t[s].y-i),u=t[s].len,d=t[s].len2,h=c<o+u?Math.sqrt((o+u+d)*(o+u+d)-c*c):Math.abs(t[s].x-n);e&&a<=h&&(h=a-10),!e&&h<=a&&(h=a+10),t[s].x=n+h*r,a=h}}t.sort(function(t,e){return t.y-e.y});for(var f,p=0,g=t.length,m=[],v=[],y=0;y<g;y++)"outer"===t[y].position&&"labelLine"===t[y].labelAlignTo&&(t[y].linePoints[1][0]+=t[y].x-c,t[y].x=c),(f=t[y].y-p)<0&&u(y,g,-f),p=t[y].y+t[y].height;for(a-p<0&&d(g-1,p-a),y=0;y<g;y++)t[y].y>=n?v.push(t[y]):m.push(t[y]);h(m,!1,e,n,i,o),h(v,!0,e,n,i,o)}function Nv(t){return"center"===t.position}var Lv=2*Math.PI,Rv=Math.PI/180;function Ov(t){return{seriesType:t,reset:function(t,e){var n=e.findComponents({mainType:"legend"});if(n&&n.length){var i=t.getData();i.filterSelf(function(t){for(var e=i.getName(t),o=0;o<n.length;o++)if(!n[o].isSelected(e))return!1;return!0})}}}}Iv("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),of(Dv("pie")),nf(N(function(t,e,n,i){e.eachSeriesByType(t,function(t){var e=t.getData(),i=e.mapDimension("value"),o=function(t,e){return ac(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,n),r=t.get("center"),a=t.get("radius");L(a)||(a=[0,a]),L(r)||(r=[r,r]);var s=bl(o.width,n.getWidth()),l=bl(o.height,n.getHeight()),c=Math.min(s,l),u=bl(r[0],s)+o.x,d=bl(r[1],l)+o.y,h=bl(a[0],c/2),f=bl(a[1],c/2),p=-t.get("startAngle")*Rv,g=t.get("minAngle")*Rv,m=0;e.each(i,function(t){isNaN(t)||m++});var v=e.getSum(i),y=Math.PI/(v||m)*2,x=t.get("clockwise"),b=t.get("roseType"),_=t.get("stillShowZeroSum"),w=e.getDataExtent(i);w[0]=0;var S=Lv,C=0,M=p,T=x?1:-1;if(e.each(i,function(t,n){var i;if(isNaN(t))e.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:x,cx:u,cy:d,r0:h,r:b?NaN:f,viewRect:o});else{(i="area"!==b?0===v&&_?y:t*y:Lv/m)<g?S-=i=g:C+=t;var r=M+T*i;e.setItemLayout(n,{angle:i,startAngle:M,endAngle:r,clockwise:x,cx:u,cy:d,r0:h,r:b?xl(t,w,[h,f]):f,viewRect:o}),M=r}}),S<Lv&&m)if(S<=.001){var k=Lv/m;e.each(i,function(t,n){if(!isNaN(t)){var i=e.getItemLayout(n);i.angle=k,i.startAngle=p+T*n*k,i.endAngle=p+T*(n+1)*k}})}else y=S/C,M=p,e.each(i,function(t,n){if(!isNaN(t)){var i=e.getItemLayout(n),o=i.angle===g?g:t*y;i.startAngle=M,i.endAngle=M+T*o,M+=T*o}});!function(t,e,n,i,o,r){var a,s,l=t.getData(),c=[],u=!1,d=(t.get("minShowLabelAngle")||0)*Pv;l.each(function(i){var r=l.getItemLayout(i),h=l.getItemModel(i),f=h.getModel("label"),p=f.get("position")||h.get("emphasis.label.position"),g=f.get("distanceToLabelLine"),m=f.get("alignTo"),v=bl(f.get("margin"),n),y=f.get("bleedMargin"),x=f.getFont(),b=h.getModel("labelLine"),_=b.get("length");_=bl(_,n);var w=b.get("length2");if(w=bl(w,n),!(r.angle<d)){var S,C,M,T,k=(r.startAngle+r.endAngle)/2,A=Math.cos(k),I=Math.sin(k);a=r.cx,s=r.cy;var D,P=t.getFormattedLabel(i,"normal")||l.getName(i),E=oi(P,x,T,"top"),N="inside"===p||"inner"===p;if("center"===p)S=r.cx,C=r.cy,T="center";else{var L=(N?(r.r+r.r0)/2*A:r.r*A)+a,R=(N?(r.r+r.r0)/2*I:r.r*I)+s;if(S=L+3*A,C=R+3*I,!N){var O=L+A*(_+e-r.r),B=R+I*(_+e-r.r),z=O+(A<0?-1:1)*w;S="edge"===m?A<0?o+v:o+n-v:z+(A<0?-g:g),M=[[L,R],[O,B],[z,C=B]]}T=N?"center":"edge"===m?0<A?"right":"left":0<A?"left":"right"}var V=f.get("rotate");D="number"==typeof V?V*(Math.PI/180):V?A<0?-k+Math.PI:-k:0,u=!!D,r.label={x:S,y:C,position:p,height:E.height,len:_,len2:w,linePoints:M,textAlign:T,verticalAlign:"middle",rotation:D,inside:N,labelDistance:g,labelAlignTo:m,labelMargin:v,bleedMargin:y,textRect:E,text:P,font:x},N||c.push(r.label)}}),!u&&t.get("avoidLabelOverlap")&&function(t,e,n,i,o,r,a,s){for(var l=[],c=[],u=Number.MAX_VALUE,d=-Number.MAX_VALUE,h=0;h<t.length;h++)Nv(t[h])||(t[h].x<e?(u=Math.min(u,t[h].x),l.push(t[h])):(d=Math.max(d,t[h].x),c.push(t[h])));for(Ev(c,e,n,i,1,0,r,0,s,d),Ev(l,e,n,i,-1,0,r,0,s,u),h=0;h<t.length;h++){var f=t[h];if(!Nv(f)){var p=f.linePoints;if(p){var g,m="edge"===f.labelAlignTo,v=f.textRect.width;(g=m?f.x<e?p[2][0]-f.labelDistance-a-f.labelMargin:a+o-f.labelMargin-p[2][0]-f.labelDistance:f.x<e?f.x-a-f.bleedMargin:a+o-f.x-f.bleedMargin)<f.textRect.width&&(f.text=li(f.text,g,f.font),"edge"===f.labelAlignTo&&(v=ii(f.text,f.font)));var y=p[1][0]-p[2][0];m?p[2][0]=f.x<e?a+f.labelMargin+v+f.labelDistance:a+o-f.labelMargin-v-f.labelDistance:(p[2][0]=f.x<e?f.x+f.labelDistance:f.x-f.labelDistance,p[1][0]=p[2][0]+y),p[1][1]=p[2][1]=f.y}}}}(c,a,s,e,n,i,o,r)}(t,f,o.width,o.height,o.x,o.y)})},"pie")),Qh(Ov("pie")),Gu.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(t,e){return Xf(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",getProgressive:function(){var t=this.option.progressive;return null==t?this.option.large?5e3:this.get("progressive"):t},getProgressiveThreshold:function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?1e4:this.get("progressiveThreshold"):t},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},clip:!0}});var Bv=fs({shape:{points:null},symbolProxy:null,softClipShape:null,buildPath:function(t,e){var n=e.points,i=e.size,o=this.symbolProxy,r=o.shape;if(!((t.getContext?t.getContext():t)&&i[0]<4))for(var a=0;a<n.length;){var s=n[a++],l=n[a++];isNaN(s)||isNaN(l)||this.softClipShape&&!this.softClipShape.contain(s,l)||(r.x=s-i[0]/2,r.y=l-i[1]/2,r.width=i[0],r.height=i[1],o.buildPath(t,r,!0))}},afterBrush:function(t){var e=this.shape,n=e.points,i=e.size;if(i[0]<4){this.setTransform(t);for(var o=0;o<n.length;){var r=n[o++],a=n[o++];isNaN(r)||isNaN(a)||this.softClipShape&&!this.softClipShape.contain(r,a)||t.fillRect(r-i[0]/2,a-i[1]/2,i[0],i[1])}this.restoreTransform(t)}},findDataIndex:function(t,e){for(var n=this.shape,i=n.points,o=n.size,r=Math.max(o[0],4),a=Math.max(o[1],4),s=i.length/2-1;0<=s;s--){var l=2*s,c=i[l]-r/2,u=i[1+l]-a/2;if(c<=t&&u<=e&&t<=c+r&&e<=u+a)return s}return-1}});function zv(){this.group=new Cn}var Vv=zv.prototype;function Fv(t,e,n){mg.call(this,t,e,n),this.type="value",this.angle=0,this.name=""}function Hv(t,e,n){this._model=t,this.dimensions=[],this._indicatorAxes=A(t.getIndicatorModels(),function(t,e){var n="indicator_"+e,i=new Fv(n,"log"===t.get("axisType")?new Bp:new lp);return i.name=t.get("name"),(i.model=t).axis=i,this.dimensions.push(n),i},this),this.resize(t,n)}Vv.isPersistent=function(){return!this._incremental},Vv.updateData=function(t,e){this.group.removeAll();var n=new Bv({rectHover:!0,cursor:"default"});n.setShape({points:t.getLayout("symbolPoints")}),this._setCommon(n,t,!1,e),this.group.add(n),this._incremental=null},Vv.updateLayout=function(t){if(!this._incremental){var e=t.getLayout("symbolPoints");this.group.eachChild(function(t){null!=t.startIndex&&(e=new Float32Array(e.buffer,4*t.startIndex*2,2*(t.endIndex-t.startIndex))),t.setShape("points",e)})}},Vv.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),2e6<t.count()?(this._incremental||(this._incremental=new ns({silent:!0})),this.group.add(this._incremental)):this._incremental=null},Vv.incrementalUpdate=function(t,e,n){var i;this._incremental?(i=new Bv,this._incremental.addDisplayable(i,!0)):((i=new Bv({rectHover:!0,cursor:"default",startIndex:t.start,endIndex:t.end})).incremental=!0,this.group.add(i)),i.setShape({points:e.getLayout("symbolPoints")}),this._setCommon(i,e,!!this._incremental,n)},Vv._setCommon=function(t,e,n,i){var o=e.hostModel;i=i||{};var r=e.getVisual("symbolSize");t.setShape("size",r instanceof Array?r:[r,r]),t.softClipShape=i.clipShape||null,t.symbolProxy=eg(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]<4;t.useStyle(o.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var s=e.getVisual("color");s&&t.setColor(s),n||(t.seriesIndex=o.seriesIndex,t.on("mousemove",function(e){t.dataIndex=null;var n=t.findDataIndex(e.offsetX,e.offsetY);0<=n&&(t.dataIndex=n+(t.startIndex||0))}))},Vv.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},Vv._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()},uf({type:"scatter",render:function(t,e,n){var i=t.getData();this._updateSymbolDraw(i,t).updateData(i,{clipShape:this._getClipShape(t)}),this._finished=!0},incrementalPrepareRender:function(t,e,n){var i=t.getData();this._updateSymbolDraw(i,t).incrementalPrepareUpdate(i),this._finished=!1},incrementalRender:function(t,e,n){this._symbolDraw.incrementalUpdate(t,e.getData(),{clipShape:this._getClipShape(e)}),this._finished=t.end===e.getData().count()},updateTransform:function(t,e,n){var i=t.getData();if(this.group.dirty(),!this._finished||1e4<i.count()||!this._symbolDraw.isPersistent())return{update:!0};var o=am().reset(t);o.progress&&o.progress({start:0,end:i.count()},i),this._symbolDraw.updateLayout(i)},_getClipShape:function(t){var e=t.coordinateSystem,n=e&&e.getArea&&e.getArea();return t.get("clip",!0)?n:null},_updateSymbolDraw:function(t,e){var n=this._symbolDraw,i=e.pipelineContext.large;return n&&i===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=i?new zv:new Eg,this._isLargeDraw=i,this.group.removeAll()),this.group.add(n.group),n},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}}),of(rm("scatter","circle")),nf(am("scatter")),C(Fv,mg),Hv.prototype.getIndicatorAxes=function(){return this._indicatorAxes},Hv.prototype.dataToPoint=function(t,e){return this.coordToPoint(this._indicatorAxes[e].dataToCoord(t),e)},Hv.prototype.coordToPoint=function(t,e){var n=this._indicatorAxes[e].angle;return[this.cx+t*Math.cos(n),this.cy-t*Math.sin(n)]},Hv.prototype.pointToData=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,i=Math.sqrt(e*e+n*n);e/=i,n/=i;for(var o,r=Math.atan2(-n,e),a=1/0,s=-1,l=0;l<this._indicatorAxes.length;l++){var c=this._indicatorAxes[l],u=Math.abs(r-c.angle);u<a&&(o=c,s=l,a=u)}return[s,+(o&&o.coordToData(i))]},Hv.prototype.resize=function(t,e){var n=t.get("center"),i=e.getWidth(),o=e.getHeight(),r=Math.min(i,o)/2;this.cx=bl(n[0],i),this.cy=bl(n[1],o),this.startAngle=t.get("startAngle")*Math.PI/180;var a=t.get("radius");"string"!=typeof a&&"number"!=typeof a||(a=[0,a]),this.r0=bl(a[0],r),this.r=bl(a[1],r),k(this._indicatorAxes,function(t,e){t.setExtent(this.r0,this.r);var n=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),t.angle=n},this)},Hv.prototype.update=function(t,e){var n=this._indicatorAxes,i=this._model;k(n,function(t){t.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(e,o){if("radar"===e.get("coordinateSystem")&&t.getComponent("radar",e.get("radarIndex"))===i){var r=e.getData();k(n,function(t){t.scale.unionExtentFromData(r,r.mapDimension(t.dim))})}},this);var o=i.get("splitNumber");function r(t){var e=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),n=t/e;return 2===n?n=5:n*=2,n*e}k(n,function(t,e){var n=Vp(t.scale,t.model).extent;Fp(t.scale,t.model);var i=t.model,a=t.scale,s=i.getMin(),l=i.getMax(),c=a.getInterval();if(null!=s&&null!=l)a.setExtent(+s,+l),a.setInterval((l-s)/o);else if(null!=s)for(;a.setExtent(+s,d=s+c*o),a.setInterval(c),c=r(c),d<n[1]&&isFinite(d)&&isFinite(n[1]););else if(null!=l)for(;a.setExtent(h=l-c*o,+l),a.setInterval(c),c=r(c),h>n[0]&&isFinite(h)&&isFinite(n[0]););else{var u=a.getTicks().length-1;o<u&&(c=r(c));var d,h=_l((d=Math.ceil(n[1]/c)*c)-c*o);a.setExtent(h,d),a.setInterval(c)}})},Hv.dimensions=[],Hv.create=function(t,e){var n=[];return t.eachComponent("radar",function(i){var o=new Hv(i,t,e);n.push(o),i.coordinateSystem=o}),t.eachSeriesByType("radar",function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=n[t.get("radarIndex")||0])}),n},jc.register("radar",Hv);var Wv=pm.valueAxis;function Gv(t,e){return b({show:e},t)}sf({type:"radar",optionUpdated:function(){var t=this.get("boundaryGap"),e=this.get("splitNumber"),n=this.get("scale"),i=this.get("axisLine"),o=this.get("axisTick"),r=this.get("axisType"),a=this.get("axisLabel"),s=this.get("name"),l=this.get("name.show"),c=this.get("name.formatter"),u=this.get("nameGap"),d=this.get("triggerEvent"),h=A(this.get("indicator")||[],function(h){null!=h.max&&0<h.max&&!h.min?h.min=0:null!=h.min&&h.min<0&&!h.max&&(h.max=0);var f=s;if(null!=h.color&&(f=b({color:h.color},s)),h=v(m(h),{boundaryGap:t,splitNumber:e,scale:n,axisLine:i,axisTick:o,axisType:r,axisLabel:a,name:h.text,nameLocation:"end",nameGap:u,nameTextStyle:f,triggerEvent:d},!1),l||(h.name=""),"string"==typeof c){var p=h.name;h.name=c.replace("{value}",null!=p?p:"")}else"function"==typeof c&&(h.name=c(h.name,h));var g=x(new fl(h,null,this.ecModel),$p);return g.mainType="radar",g.componentIndex=this.componentIndex,g},this);this.getIndicatorModels=function(){return h}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:v({lineStyle:{color:"#bbb"}},Wv.axisLine),axisLabel:Gv(Wv.axisLabel,!1),axisTick:Gv(Wv.axisTick,!1),axisType:"interval",splitLine:Gv(Wv.splitLine,!0),splitArea:Gv(Wv.splitArea,!0),indicator:[]}});var Uv=["axisLine","axisTickLabel","axisName"];lf({type:"radar",render:function(t,e,n){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},_buildAxes:function(t){var e=t.coordinateSystem;k(A(e.getIndicatorAxes(),function(t){return new Am(t.model,{position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(t){k(Uv,t.add,t),this.group.add(t.getGroup())},this)},_buildSplitLineAndArea:function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes();if(n.length){var i=t.get("shape"),o=t.getModel("splitLine"),r=t.getModel("splitArea"),a=o.getModel("lineStyle"),s=r.getModel("areaStyle"),l=o.get("show"),c=r.get("show"),u=a.get("color"),d=s.get("color");u=L(u)?u:[u],d=L(d)?d:[d];var h=[],f=[];if("circle"===i)for(var p=n[0].getTicksCoords(),g=e.cx,m=e.cy,v=0;v<p.length;v++)l&&h[T(h,u,v)].push(new Ea({shape:{cx:g,cy:m,r:p[v].coord}})),c&&v<p.length-1&&f[T(f,d,v)].push(new Ra({shape:{cx:g,cy:m,r0:p[v].coord,r:p[v+1].coord}}));else{var y,x=A(n,function(t,n){var i=t.getTicksCoords();return y=null==y?i.length-1:Math.min(i.length-1,y),A(i,function(t){return e.coordToPoint(t.coord,n)})}),_=[];for(v=0;v<=y;v++){for(var w=[],S=0;S<n.length;S++)w.push(x[S][v]);w[0]&&w.push(w[0].slice()),l&&h[T(h,u,v)].push(new Va({shape:{points:w}})),c&&_&&f[T(f,d,v-1)].push(new za({shape:{points:w.concat(_)}})),_=w.slice().reverse()}}var C=a.getLineStyle(),M=s.getAreaStyle();k(f,function(t,e){this.group.add(xs(t,{style:b({stroke:"none",fill:d[e%d.length]},M),silent:!0}))},this),k(h,function(t,e){this.group.add(xs(t,{style:b({fill:"none",stroke:u[e%u.length]},C),silent:!0}))},this)}function T(t,e,n){var i=n%e.length;return t[i]=t[i]||[],i}}});var jv=Gu.extend({type:"series.radar",dependencies:["radar"],init:function(t){jv.superApply(this,"init",arguments),this.legendVisualProvider=new Sv(E(this.getData,this),E(this.getRawData,this))},getInitialData:function(t,e){return _v(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(t,e,n,i){var o=this.getData(),r=this.coordinateSystem.getIndicatorAxes(),a=this.getData().getName(t),s="html"===i?"<br/>":"\n";return Gl(""===a?this.name:a)+s+A(r,function(e,n){var i=o.get(o.mapDimension(e.dim),t);return Gl(e.name+" : "+i)}).join(s)},getTooltipPosition:function(t){if(null!=t)for(var e=this.getData(),n=this.coordinateSystem,i=e.getValues(A(n.dimensions,function(t){return e.mapDimension(t)}),t,!0),o=0,r=i.length;o<r;o++)if(!isNaN(i[o])){var a=n.getIndicatorAxes();return n.coordToPoint(a[o].dataToCoord(i[o]),o)}},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}});function $v(t){return!isNaN(t[0])&&!isNaN(t[1])}function qv(t){return[t.cx,t.cy]}uf({type:"radar",render:function(t,e,n){var i=t.coordinateSystem,o=this.group,r=t.getData(),a=this._data;function s(t,e){var n=t.getItemVisual(e,"symbol")||"circle",i=t.getItemVisual(e,"color");if("none"!==n){var o=function(t){return L(t)||(t=[+t,+t]),t}(t.getItemVisual(e,"symbolSize")),r=eg(n,-1,-1,2,2,i),a=t.getItemVisual(e,"symbolRotate")||0;return r.attr({style:{strokeNoScale:!0},z2:100,scale:[o[0]/2,o[1]/2],rotation:a*Math.PI/180||0}),r}}function l(e,n,i,o,r,a){i.removeAll();for(var l=0;l<n.length-1;l++){var c=s(o,r);c&&(e[c.__dimIdx=l]?(c.attr("position",e[l]),al[a?"initProps":"updateProps"](c,{position:n[l]},t,r)):c.attr("position",n[l]),i.add(c))}}function c(t){return A(t,function(t){return[i.cx,i.cy]})}r.diff(a).add(function(e){var n=r.getItemLayout(e);if(n){var i=new za,o=new Va,a={shape:{points:n}};i.shape.points=c(n),o.shape.points=c(n),Zs(i,a,t,e),Zs(o,a,t,e);var s=new Cn,u=new Cn;s.add(o),s.add(i),s.add(u),l(o.shape.points,n,u,r,e,!0),r.setItemGraphicEl(e,s)}}).update(function(e,n){var i=a.getItemGraphicEl(n),o=i.childAt(0),s=i.childAt(1),c=i.childAt(2),u={shape:{points:r.getItemLayout(e)}};u.shape.points&&(l(o.shape.points,u.shape.points,c,r,e,!1),Xs(o,u,t),Xs(s,u,t),r.setItemGraphicEl(e,i))}).remove(function(t){o.remove(a.getItemGraphicEl(t))}).execute(),r.eachItemGraphicEl(function(t,e){var n=r.getItemModel(e),i=t.childAt(0),a=t.childAt(1),s=t.childAt(2),l=r.getItemVisual(e,"color");o.add(t),i.useStyle(b(n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:l})),i.hoverStyle=n.getModel("emphasis.lineStyle").getLineStyle();var c=n.getModel("areaStyle"),u=n.getModel("emphasis.areaStyle"),d=c.isEmpty()&&c.parentModel.isEmpty(),h=u.isEmpty()&&u.parentModel.isEmpty();h=h&&d,a.ignore=d,a.useStyle(b(c.getAreaStyle(),{fill:l,opacity:.7})),a.hoverStyle=u.getAreaStyle();var f=n.getModel("itemStyle").getItemStyle(["color"]),p=n.getModel("emphasis.itemStyle").getItemStyle(),g=n.getModel("label"),v=n.getModel("emphasis.label");s.eachChild(function(t){t.setStyle(f),t.hoverStyle=m(p);var n=r.get(r.dimensions[t.__dimIdx],e);null!=n&&!isNaN(n)||(n=""),Vs(t.style,t.hoverStyle,g,v,{labelFetcher:r.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:n,autoColor:l,isRectText:!0})}),t.highDownOnUpdate=function(t,e){a.attr("ignore","emphasis"===e?h:d)},Rs(t)}),this._data=r},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),of(Dv("radar")),of(rm("radar","circle")),nf(function(t){t.eachSeriesByType("radar",function(t){var e=t.getData(),n=[],i=t.coordinateSystem;if(i){var o=i.getIndicatorAxes();k(o,function(t,r){e.each(e.mapDimension(o[r].dim),function(t,e){n[e]=n[e]||[];var o=i.dataToPoint(t,r);n[e][r]=$v(o)?o:qv(i)})}),e.each(function(t){var o=P(n[t],function(t){return $v(t)})||qv(i);n[t].push(o.slice()),e.setItemLayout(t,n[t])})}})}),Qh(Ov("radar")),Jh(function(t){var e=t.polar;if(e){L(e)||(e=[e]);var n=[];k(e,function(e,i){e.indicator?(e.type&&!e.shape&&(e.shape=e.type),t.radar=t.radar||[],L(t.radar)||(t.radar=[t.radar]),t.radar.push(e)):n.push(e)}),t.polar=n}k(t.series,function(t){t&&"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)})});for(var Yv=[126,25],Xv=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],Zv=0;Zv<Xv.length;Zv++)for(var Kv=0;Kv<Xv[Zv].length;Kv++)Xv[Zv][Kv][0]/=10.5,Xv[Zv][Kv][1]/=-14,Xv[Zv][Kv][0]+=Yv[0],Xv[Zv][Kv][1]+=Yv[1];var Jv={"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]},Qv={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},ty=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],ey=Oo(),ny={load:function(t,e,n){var i=ey(e).parsed;if(i)return i;var o,r=e.specialAreas||{},a=e.geoJSON;try{o=a?sg(a,n):[]}catch(e){throw new Error("Invalid geoJson format\n"+e.message)}return function(t,e){"china"===t&&e.push(new rg("南海诸岛",A(Xv,function(t){return{type:"polygon",exterior:t}}),Yv))}(t,o),k(o,function(e){var n=e.name;!function(t,e){if("china"===t){var n=Jv[e.name];if(n){var i=e.center;i[0]+=n[0]/10.5,i[1]+=-n[1]/14}}}(t,e),function(t,e){if("world"===t){var n=Qv[e.name];if(n){var i=e.center;i[0]=n[0],i[1]=n[1]}}}(t,e),function(t,e){"china"===t&&"台湾"===e.name&&e.geometries.push({type:"polygon",exterior:ty[0]})}(t,e);var i=r[n];i&&e.transformTo(i.left,i.top,i.width,i.height)}),ey(e).parsed={regions:o,boundingRect:function(t){for(var e,n=0;n<t.length;n++){var i=t[n].getBoundingRect();(e=e||i.clone()).union(i)}return e}(o)}}},iy=Oo();function oy(t,e){var n,i,o=t.svgXML;try{q(null!=(i=(n=o&&function(t,e){return(new jd).parse(t,{ignoreViewBox:!0,ignoreRootClip:!0})}(o)||{}).root))}catch(t){throw new Error("Invalid svg format\n"+t.message)}var r=n.width,a=n.height,s=n.viewBoxRect;if(e||(e=null==r||null==a?i.getBoundingRect():new Sn(0,0,0,0),null!=r&&(e.width=r),null!=a&&(e.height=a)),s){var l=nh(s,e.width,e.height),c=i;(i=new Cn).add(c),c.scale=l.scale,c.position=l.position}return i.setClipPath(new ja({shape:e.plain()})),{root:i,boundingRect:e}}var ry={geoJSON:ny,svg:{load:function(t,e){var n=iy(e).originRoot;if(n)return{root:n,boundingRect:iy(e).boundingRect};var i=oy(e);return iy(e).originRoot=i.root,iy(e).boundingRect=i.boundingRect,i},makeGraphic:function(t,e,n){var i=iy(e),o=i.rootMap||(i.rootMap=Q()),r=o.get(n);if(r)return r;var a=i.originRoot;return r=i.originRootHostKey?oy(e,i.boundingRect).root:(i.originRootHostKey=n,a),o.set(n,r)},removeGraphic:function(t,e,n){var i=iy(e),o=i.rootMap;o&&o.removeKey(n),n===i.originRootHostKey&&(i.originRootHostKey=null)}}},ay={load:function(t,e,n){var i,o=[],r=Q(),a=Q();return k(ly(t),function(s){var l=ry[s.type].load(t,s,n);k(l.regions,function(t){var n=t.name;e&&e.hasOwnProperty(n)&&(t=t.cloneShallow(n=e[n])),o.push(t),r.set(n,t),a.set(n,t.center)});var c=l.boundingRect;c&&(i?i.union(c):i=c.clone())}),{regions:o,regionsMap:r,nameCoordMap:a,boundingRect:i||new Sn(0,0,0,0)}},makeGraphic:sy("makeGraphic"),removeGraphic:sy("removeGraphic")};function sy(t){return function(e,n){var i=ly(e),o=[];return k(i,function(i){var r=ry[i.type][t];r&&o.push(r(e,i,n))}),o}}function ly(t){return oh(t)||[]}M(Gu.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],getInitialData:function(t){for(var e=_v(this,{coordDimensions:["value"],encodeDefaulter:N(Rc,this)}),n=e.mapDimension("value"),i=Q(),o=[],r=[],a=0,s=e.count();a<s;a++){var l=e.getName(a);i.set(l,!0),o.push({name:l,value:e.get(n,a),selected:Tu(e,a,"selected")})}return k(ay.load(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,function(t){var e=t.name;i.get(e)||(o.push({name:e}),r.push(e))}),this.updateSelectedMap(o),e.appendValues([],r),e},getHostGeoModel:function(){var t=this.option.geoIndex;return null!=t?this.dependentModels.geo[t]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(t){var e=this.getData();return e.get(e.mapDimension("value"),t)},getRegionModel:function(t){var e=this.getData();return e.getItemModel(e.indexOfName(t))},formatTooltip:function(t,e,n,i){for(var o=this.getData(),r=zl(this.getRawValue(t)),a=o.getName(t),s=this.seriesGroup,l=[],c=0;c<s.length;c++){var u=s[c].originalData.indexOfName(a),d=o.mapDimension("value");isNaN(s[c].originalData.get(d,u))||l.push(Gl(s[c].name))}var h="html"===i?"<br/>":"\n";return l.join(", ")+h+Gl(a+" : "+r)},getTooltipPosition:function(t){if(null!=t){var e=this.getData().getName(t),n=this.coordinateSystem,i=n.getRegion(e);return i&&n.dataToPoint(i.center)}},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},nameProperty:"name"}}),wv);var cy="\0_ec_interaction_mutex";function uy(t,e){return!!dy(t)[e]}function dy(t){return t[cy]||(t[cy]={})}function hy(t){this._zr=t,this._opt={};var e=E,n=e(fy,this),i=e(py,this),o=e(gy,this),r=e(my,this),a=e(vy,this);kt.call(this),this.setPointerChecker=function(t){this.pointerChecker=t},this.enable=function(e,s){this.disable(),this._opt=b(m(s)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==e&&(e=!0),!0!==e&&"move"!==e&&"pan"!==e||(t.on("mousedown",n),t.on("mousemove",i),t.on("mouseup",o)),!0!==e&&"scale"!==e&&"zoom"!==e||(t.on("mousewheel",r),t.on("pinch",a))},this.disable=function(){t.off("mousedown",n),t.off("mousemove",i),t.off("mouseup",o),t.off("mousewheel",r),t.off("pinch",a)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function fy(t){if(!(jt(t)||t.target&&t.target.draggable)){var e=t.offsetX,n=t.offsetY;this.pointerChecker&&this.pointerChecker(t,e,n)&&(this._x=e,this._y=n,this._dragging=!0)}}function py(t){if(this._dragging&&by("moveOnMouseMove",t,this._opt)&&"pinch"!==t.gestureEvent&&!uy(this._zr,"globalPan")){var e=t.offsetX,n=t.offsetY,i=this._x,o=this._y,r=e-i,a=n-o;this._x=e,this._y=n,this._opt.preventDefaultMouseMove&&Ut(t.event),xy(this,"pan","moveOnMouseMove",t,{dx:r,dy:a,oldX:i,oldY:o,newX:e,newY:n})}}function gy(t){jt(t)||(this._dragging=!1)}function my(t){var e=by("zoomOnMouseWheel",t,this._opt),n=by("moveOnMouseWheel",t,this._opt),i=t.wheelDelta,o=Math.abs(i),r=t.offsetX,a=t.offsetY;if(0!==i&&(e||n)){if(e){var s=3<o?1.4:1<o?1.2:1.1;yy(this,"zoom","zoomOnMouseWheel",t,{scale:0<i?s:1/s,originX:r,originY:a})}if(n){var l=Math.abs(i);yy(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:(0<i?1:-1)*(3<l?.4:1<l?.15:.05),originX:r,originY:a})}}}function vy(t){uy(this._zr,"globalPan")||yy(this,"zoom",null,t,{scale:1<t.pinchScale?1.1:1/1.1,originX:t.pinchX,originY:t.pinchY})}function yy(t,e,n,i,o){t.pointerChecker&&t.pointerChecker(i,o.originX,o.originY)&&(Ut(i.event),xy(t,e,n,i,o))}function xy(t,e,n,i,o){o.isAvailableBehavior=E(by,null,n,i),t.trigger(e,o)}function by(t,e,n){var i=n[t];return!t||i&&(!O(i)||e.event[i+"Key"])}function _y(t,e,n){var i=t.target,o=i.position;o[0]+=e,o[1]+=n,i.dirty()}function wy(t,e,n,i){var o=t.target,r=t.zoomLimit,a=o.position,s=o.scale,l=t.zoom=t.zoom||1;if(l*=e,r){var c=r.min||0;l=Math.max(Math.min(r.max||1/0,l),c)}var u=l/t.zoom;t.zoom=l,a[0]-=(n-a[0])*(u-1),a[1]-=(i-a[1])*(u-1),s[0]*=u,s[1]*=u,o.dirty()}tf({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),M(hy,kt);var Sy={axisPointer:1,tooltip:1,brush:1};function Cy(t,e,n){var i=e.getComponentByElement(t.topTarget),o=i&&i.coordinateSystem;return i&&i!==n&&!Sy[i.mainType]&&o&&o.model!==n}function My(t){var e=t.getItemStyle(),n=t.get("areaColor");return null!=n&&(e.fill=n),e}function Ty(t,e){e.eachChild(function(e){k(e.__regions,function(n){e.trigger(t.isSelected(n.name)?"emphasis":"normal")})})}function ky(t,e){var n=new Cn;this.uid=vl("ec_map_draw"),this._controller=new hy(t.getZr()),this._controllerHost={target:e?n:null},this.group=n,this._updateGroup=e,n.add(this._regionsGroup=new Cn),n.add(this._backgroundGroup=new Cn)}ky.prototype={constructor:ky,draw:function(t,e,n,i,o){var r="geo"===t.mainType,a=t.getData&&t.getData();r&&e.eachComponent({mainType:"series",subType:"map"},function(e){a||e.getHostGeoModel()!==t||(a=e.getData())});var s=t.coordinateSystem;this._updateBackground(s);var l,c=this._regionsGroup,u=this.group,d=s.getTransformInfo(),h=!c.childAt(0)||o;if(h)u.transform=d.roamTransform,u.decomposeTransform(),u.dirty();else{var f=new ge;f.transform=d.roamTransform,f.decomposeTransform(),l=f.scale,Xs(u,{scale:f.scale,position:f.position},t)}var p=d.rawScale,g=d.rawPosition;c.removeAll();var m=["itemStyle"],v=["emphasis","itemStyle"],y=["label"],x=["emphasis","label"],b=Q();k(s.regions,function(e){var n=b.get(e.name)||b.set(e.name,new Cn),i=new Qa({segmentIgnoreThreshold:1,shape:{paths:[]}});n.add(i);var o,s=(L=t.getRegionModel(e.name)||t).getModel(m),d=L.getModel(v),f=My(s),_=My(d),w=L.getModel(y),S=L.getModel(x);if(a){o=a.indexOfName(e.name);var C=a.getItemVisual(o,"color",!0);C&&(f.fill=C)}function M(t){return[t[0]*p[0]+g[0],t[1]*p[1]+g[1]]}k(e.geometries,function(t){if("polygon"===t.type){for(var e=[],n=0;n<t.exterior.length;++n)e.push(M(t.exterior[n]));for(i.shape.paths.push(new za({segmentIgnoreThreshold:1,shape:{points:e}})),n=0;n<(t.interiors?t.interiors.length:0);++n){for(var o=t.interiors[n],r=(e=[],0);r<o.length;++r)e.push(M(o[r]));i.shape.paths.push(new za({segmentIgnoreThreshold:1,shape:{points:e}}))}}}),i.setStyle(f),i.style.strokeNoScale=!0,i.culling=!0;var T=w.get("show"),A=S.get("show"),I=a&&isNaN(a.get(a.mapDimension("value"),o)),D=a&&a.getItemLayout(o);if(r||I&&(T||A)||D&&D.showLabel){var P,E=r?e.name:o;(!a||0<=o)&&(P=t);var N=new Da({position:M(e.center.slice()),scale:[1/u.scale[0],1/u.scale[1]],z2:10,silent:!0});Vs(N.style,N.hoverStyle={},w,S,{labelFetcher:P,labelDataIndex:E,defaultText:e.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),h||Xs(N,{scale:[1/l[0],1/l[1]]},t),n.add(N)}if(a)a.setItemGraphicEl(o,n);else{var L=t.getRegionModel(e.name);i.eventData={componentType:"geo",componentIndex:t.componentIndex,geoIndex:t.componentIndex,name:e.name,region:L&&L.option||{}}}(n.__regions||(n.__regions=[])).push(e),n.highDownSilentOnTouch=!!t.get("selectedMode"),Rs(n,_),c.add(n)}),this._updateController(t,e,n),function(t,e,n,i,o){n.off("click"),n.off("mousedown"),e.get("selectedMode")&&(n.on("mousedown",function(){t._mouseDownFlag=!0}),n.on("click",function(r){if(t._mouseDownFlag){t._mouseDownFlag=!1;for(var a=r.target;!a.__regions;)a=a.parent;if(a){var s={type:("geo"===e.mainType?"geo":"map")+"ToggleSelect",batch:A(a.__regions,function(t){return{name:t.name,from:o.uid}})};s[e.mainType+"Id"]=e.id,i.dispatchAction(s),Ty(e,n)}}}))}(this,t,c,n,i),Ty(t,c)},remove:function(){this._regionsGroup.removeAll(),this._backgroundGroup.removeAll(),this._controller.dispose(),this._mapName&&ay.removeGraphic(this._mapName,this.uid),this._mapName=null,this._controllerHost={}},_updateBackground:function(t){var e=t.map;this._mapName!==e&&k(ay.makeGraphic(e,this.uid),function(t){this._backgroundGroup.add(t)},this),this._mapName=e},_updateController:function(t,e,n){var i=t.coordinateSystem,o=this._controller,r=this._controllerHost;r.zoomLimit=t.get("scaleLimit"),r.zoom=i.getZoom(),o.enable(t.get("roam")||!1);var a=t.mainType;function s(){var e={type:"geoRoam",componentType:a};return e[a+"Id"]=t.id,e}o.off("pan").on("pan",function(t){this._mouseDownFlag=!1,_y(r,t.dx,t.dy),n.dispatchAction(x(s(),{dx:t.dx,dy:t.dy}))},this),o.off("zoom").on("zoom",function(t){if(this._mouseDownFlag=!1,wy(r,t.scale,t.originX,t.originY),n.dispatchAction(x(s(),{zoom:t.scale,originX:t.originX,originY:t.originY})),this._updateGroup){var e=this.group.scale;this._regionsGroup.traverse(function(t){"text"===t.type&&t.attr("scale",[1/e[0],1/e[1]])})}},this),o.setPointerChecker(function(e,o,r){return i.getViewRectAfterRoam().contain(o,r)&&!Cy(e,n,t)})}};var Ay="__seriesMapHighDown",Iy="__seriesMapCallKey";function Dy(t){var e=this[Ay];e&&e.recordVersion===this[Iy]&&Py(e,t)}function Py(t,e){var n=t.circle,i=t.labelModel,o=t.hoverLabelModel,r=t.emphasisText,a=t.normalText;e?(n.style.extendFrom(Hs({},o,{text:o.get("show")?r:null},{isRectText:!0,useInsideStyle:!1},!0)),n.__mapOriginalZ2=n.z2,n.z2+=1):(Hs(n.style,i,{text:i.get("show")?a:null,textPosition:i.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),n.dirty(!1),null!=n.__mapOriginalZ2&&(n.z2=n.__mapOriginalZ2,n.__mapOriginalZ2=null))}function Ey(t,e,n){var i=t.getZoom(),o=t.getCenter(),r=e.zoom,a=t.dataToPoint(o);if(null!=e.dx&&null!=e.dy&&(a[0]-=e.dx,a[1]-=e.dy,o=t.pointToData(a),t.setCenter(o)),null!=r){if(n){var s=n.min||0;r=Math.max(Math.min(i*r,n.max||1/0),s)/i}t.scale[0]*=r,t.scale[1]*=r;var l=t.position,c=(e.originY-l[1])*(r-1);l[0]-=(e.originX-l[0])*(r-1),l[1]-=c,t.updateTransform(),o=t.pointToData(a),t.setCenter(o),t.setZoom(r*i)}return{center:t.getCenter(),zoom:t.getZoom()}}uf({type:"map",render:function(t,e,n,i){if(!i||"mapToggleSelect"!==i.type||i.from!==this.uid){var o=this.group;if(o.removeAll(),!t.getHostGeoModel()){if(i&&"geoRoam"===i.type&&"series"===i.componentType&&i.seriesId===t.id)(r=this._mapDraw)&&o.add(r.group);else if(t.needsDrawMap){var r=this._mapDraw||new ky(n,!0);o.add(r.group),r.draw(t,e,n,this,i),this._mapDraw=r}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&e.getComponent("legend")&&this._renderSymbols(t,e,n)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(t,e,n){var i=t.originalData,o=this.group;i.each(i.mapDimension("value"),function(e,n){if(!isNaN(e)){var r=i.getItemLayout(n);if(r&&r.point){var a=r.point,s=r.offset,l=new Ea({style:{fill:t.getData().getVisual("color")},shape:{cx:a[0]+9*s,cy:a[1],r:3},silent:!0,z2:8+(s?0:2)});if(!s){var c=t.mainSeries.getData(),u=i.getName(n),d=c.indexOfName(u),h=i.getItemModel(n),f=h.getModel("label"),p=h.getModel("emphasis.label"),g=c.getItemGraphicEl(d),m=G(t.getFormattedLabel(d,"normal"),u),v=G(t.getFormattedLabel(d,"emphasis"),m),y=g[Ay],b=Math.random();if(!y){y=g[Ay]={};var _=N(Dy,!0),w=N(Dy,!1);g.on("mouseover",_).on("mouseout",w).on("emphasis",_).on("normal",w)}x(y,{recordVersion:g[Iy]=b,circle:l,labelModel:f,hoverLabelModel:p,emphasisText:v,normalText:m}),Py(y,!1)}o.add(l)}}})}}),tf({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,e){var n=t.componentType||"series";e.eachComponent({mainType:n,query:t},function(e){var i=e.coordinateSystem;if("geo"===i.type){var o=Ey(i,t,e.get("scaleLimit"));e.setCenter&&e.setCenter(o.center),e.setZoom&&e.setZoom(o.zoom),"series"===n&&k(e.seriesGroup,function(t){t.setCenter(o.center),t.setZoom(o.zoom)})}})});var Ny=bt;function Ly(){ge.call(this)}function Ry(t){this.name=t,ge.call(this),this._roamTransformable=new Ly,this._rawTransformable=new Ly}function Oy(t,e,n,i){var o=n.seriesModel,r=o?o.coordinateSystem:null;return r===this?r[t](i):null}function By(t,e,n,i){Ry.call(this,t),this.map=e;var o=ay.load(e,n);this._nameCoordMap=o.nameCoordMap,this._regionsMap=o.regionsMap,this._invertLongitute=null==i||i,this.regions=o.regions,this._rect=o.boundingRect}function zy(t,e,n,i){var o=n.geoModel,r=n.seriesModel,a=o?o.coordinateSystem:r?r.coordinateSystem||(r.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return a===this?a[t](i):null}function Vy(t,e){var n=t.get("boundingCoords");if(null!=n){var i=n[0],o=n[1];isNaN(i[0])||isNaN(i[1])||isNaN(o[0])||isNaN(o[1])||this.setBoundingRect(i[0],i[1],o[0]-i[0],o[1]-i[1])}var r,a=this.getBoundingRect(),s=t.get("layoutCenter"),l=t.get("layoutSize"),c=e.getWidth(),u=e.getHeight(),d=a.width/a.height*this.aspectScale,h=!1;if(s&&l&&(s=[bl(s[0],c),bl(s[1],u)],l=bl(l,Math.min(c,u)),isNaN(s[0])||isNaN(s[1])||isNaN(l)||(h=!0)),h){var f={};1<d?(f.width=l,f.height=l/d):(f.height=l,f.width=l*d),f.y=s[1]-f.height/2,f.x=s[0]-f.width/2}else(r=t.getBoxLayoutParams()).aspect=d,f=ac(r,{width:c,height:u});this.setViewRect(f.x,f.y,f.width,f.height),this.setCenter(t.get("center")),this.setZoom(t.get("zoom"))}function Fy(t,e){k(e.get("geoCoord"),function(e,n){t.addGeoCoord(n,e)})}M(Ly,ge),Ry.prototype={constructor:Ry,type:"view",dimensions:["x","y"],setBoundingRect:function(t,e,n,i){return this._rect=new Sn(t,e,n,i),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(t,e,n,i){this.transformTo(t,e,n,i),this._viewRect=new Sn(t,e,n,i)},transformTo:function(t,e,n,i){var o=this.getBoundingRect(),r=this._rawTransformable;r.transform=o.calculateTransform(new Sn(t,e,n,i)),r.decomposeTransform(),this._updateTransform()},setCenter:function(t){t&&(this._center=t,this._updateCenterAndZoom())},setZoom:function(t){t=t||1;var e=this.zoomLimit;e&&(null!=e.max&&(t=Math.min(e.max,t)),null!=e.min&&(t=Math.max(e.min,t))),this._zoom=t,this._updateCenterAndZoom()},getDefaultCenter:function(){var t=this.getBoundingRect();return[t.x+t.width/2,t.y+t.height/2]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var t=this._rawTransformable.getLocalTransform(),e=this._roamTransformable,n=this.getDefaultCenter(),i=this.getCenter(),o=this.getZoom();i=bt([],i,t),n=bt([],n,t),e.origin=i,e.position=[n[0]-i[0],n[1]-i[1]],e.scale=[o,o],this._updateTransform()},_updateTransform:function(){var t=this._rawTransformable;(t.parent=this._roamTransformable).updateTransform(),t.updateTransform(),re(this.transform||(this.transform=[]),t.transform||ie()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],ue(this.invTransform,this.transform),this.decomposeTransform()},getTransformInfo:function(){var t=this._roamTransformable.transform,e=this._rawTransformable;return{roamTransform:t?j(t):ie(),rawScale:j(e.scale),rawPosition:j(e.position)}},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},dataToPoint:function(t,e,n){var i=e?this._rawTransform:this.transform;return n=n||[],i?Ny(n,t,i):rt(n,t)},pointToData:function(t){var e=this.invTransform;return e?Ny([],t,e):[t[0],t[1]]},convertToPixel:N(Oy,"dataToPoint"),convertFromPixel:N(Oy,"pointToData"),containPoint:function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])}},M(Ry,ge),By.prototype={constructor:By,type:"geo",dimensions:["lng","lat"],containCoord:function(t){for(var e=this.regions,n=0;n<e.length;n++)if(e[n].contain(t))return!0;return!1},transformTo:function(t,e,n,i){var o=this.getBoundingRect(),r=this._invertLongitute;o=o.clone(),r&&(o.y=-o.y-o.height);var a=this._rawTransformable;if(a.transform=o.calculateTransform(new Sn(t,e,n,i)),a.decomposeTransform(),r){var s=a.scale;s[1]=-s[1]}a.updateTransform(),this._updateTransform()},getRegion:function(t){return this._regionsMap.get(t)},getRegionByCoord:function(t){for(var e=this.regions,n=0;n<e.length;n++)if(e[n].contain(t))return e[n]},addGeoCoord:function(t,e){this._nameCoordMap.set(t,e)},getGeoCoord:function(t){return this._nameCoordMap.get(t)},getBoundingRect:function(){return this._rect},dataToPoint:function(t,e,n){if("string"==typeof t&&(t=this.getGeoCoord(t)),t)return Ry.prototype.dataToPoint.call(this,t,e,n)},convertToPixel:N(zy,"dataToPoint"),convertFromPixel:N(zy,"pointToData")},M(By,Ry);var Hy={dimensions:By.prototype.dimensions,create:function(t,e){var n=[];t.eachComponent("geo",function(t,i){var o=t.get("map"),r=t.get("aspectScale"),a=!0,s=oh(o);s&&s[0]&&"svg"===s[0].type?(null==r&&(r=1),a=!1):null==r&&(r=.75);var l=new By(o+i,o,t.get("nameMap"),a);l.aspectScale=r,l.zoomLimit=t.get("scaleLimit"),n.push(l),Fy(l,t),(t.coordinateSystem=l).model=t,l.resize=Vy,l.resize(t,e)}),t.eachSeries(function(t){if("geo"===t.get("coordinateSystem")){var e=t.get("geoIndex")||0;t.coordinateSystem=n[e]}});var i={};return t.eachSeriesByType("map",function(t){if(!t.getHostGeoModel()){var e=t.getMapType();i[e]=i[e]||[],i[e].push(t)}}),k(i,function(t,i){var o=new By(i,i,y(A(t,function(t){return t.get("nameMap")})));o.zoomLimit=W.apply(null,A(t,function(t){return t.get("scaleLimit")})),n.push(o),o.resize=Vy,o.aspectScale=t[0].get("aspectScale"),o.resize(t[0],e),k(t,function(t){Fy(t.coordinateSystem=o,t)})}),n},getFilledRegions:function(t,e,n){for(var i=(t||[]).slice(),o=Q(),r=0;r<i.length;r++)o.set(i[r].name,i[r]);return k(ay.load(e,n).regions,function(t){var e=t.name;o.get(e)||i.push({name:e})}),i}};ef("geo",Hy),nf(function(t){var e={};t.eachSeriesByType("map",function(n){var i=n.getMapType();if(!n.getHostGeoModel()&&!e[i]){var o={};k(n.seriesGroup,function(e){var n=e.coordinateSystem,i=e.originalData;e.get("showLegendSymbol")&&t.getComponent("legend")&&i.each(i.mapDimension("value"),function(t,e){var r=i.getName(e),a=n.getRegion(r);if(a&&!isNaN(t)){var s=o[r]||0,l=n.dataToPoint(a.center);o[r]=s+1,i.setItemLayout(e,{point:l,offset:s})}})});var r=n.getData();r.each(function(t){var e=r.getName(t),n=r.getItemLayout(t)||{};n.showLabel=!o[e],r.setItemLayout(t,n)}),e[i]=!0}})}),of(function(t){t.eachSeriesByType("map",function(t){var e=t.get("color"),n=t.getModel("itemStyle"),i=n.get("areaColor"),o=n.get("color")||e[t.seriesIndex%e.length];t.getData().setVisual({areaColor:i,color:o})})}),Qh(dh.PROCESSOR.STATISTIC,function(t){var e={};t.eachSeriesByType("map",function(t){var n=t.getHostGeoModel(),i=n?"o"+n.id:"i"+t.getMapType();(e[i]=e[i]||[]).push(t)}),k(e,function(t,e){for(var n=function(t,e){var n={};return k(t,function(t){t.each(t.mapDimension("value"),function(e,i){var o="ec-"+t.getName(i);n[o]=n[o]||[],isNaN(e)||n[o].push(e)})}),t[0].map(t[0].mapDimension("value"),function(i,o){for(var r="ec-"+t[0].getName(o),a=0,s=1/0,l=-1/0,c=n[r].length,u=0;u<c;u++)s=Math.min(s,n[r][u]),l=Math.max(l,n[r][u]),a+=n[r][u];return 0===c?NaN:"min"===e?s:"max"===e?l:"average"===e?a/c:a})}(A(t,function(t){return t.getData()}),t[0].get("mapValueCalculation")),i=0;i<t.length;i++)t[i].originalData=t[i].getData();for(i=0;i<t.length;i++)(t[i].seriesGroup=t)[i].needsDrawMap=0===i&&!t[i].getHostGeoModel(),t[i].setData(n.cloneShallow()),t[i].mainSeries=t[0]})}),Jh(function(t){var e=[];k(t.series,function(t){t&&"map"===t.type&&(e.push(t),t.map=t.map||t.mapType,b(t,t.mapLocation))})}),Iv("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}]);var Wy=k,Gy="\0__link_datas",Uy="\0__link_mainData";function jy(t){var e=t.mainData,n=t.datas;n||(n={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,Zy(e,n,t),Wy(n,function(n){Wy(e.TRANSFERABLE_METHODS,function(e){n.wrapMethod(e,N($y,t))})}),e.wrapMethod("cloneShallow",N(Yy,t)),Wy(e.CHANGABLE_METHODS,function(n){e.wrapMethod(n,N(qy,t))}),q(n[e.dataType]===e)}function $y(t,e){if(function(t){return t[Uy]===t}(this)){var n=x({},this[Gy]);Zy(n[this.dataType]=e,n,t)}else Ky(e,this.dataType,this[Uy],t);return e}function qy(t,e){return t.struct&&t.struct.update(this),e}function Yy(t,e){return Wy(e[Gy],function(n,i){n!==e&&Ky(n.cloneShallow(),i,e,t)}),e}function Xy(t){var e=this[Uy];return null==t||null==e?e:e[Gy][t]}function Zy(t,e,n){t[Gy]={},Wy(e,function(e,i){Ky(e,i,t,n)})}function Ky(t,e,n,i){(n[Gy][e]=t)[Uy]=n,t.dataType=e,i.struct&&(t[i.structAttr]=i.struct,i.struct[i.datasAttr[e]]=t),t.getLinkedData=Xy}function Jy(t,e){this.name=t||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=e}function Qy(t){this._nodes=[],this.hostModel=t}function tx(t,e){var n=t.isExpand?t.children:[],i=t.parentNode.children,o=t.hierNode.i?i[t.hierNode.i-1]:null;if(n.length){!function(t){for(var e=t.children,n=e.length,i=0,o=0;0<=--n;){var r=e[n];r.hierNode.prelim+=i,r.hierNode.modifier+=i,i+=r.hierNode.shift+(o+=r.hierNode.change)}}(t);var r=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;o?(t.hierNode.prelim=o.hierNode.prelim+e(t,o),t.hierNode.modifier=t.hierNode.prelim-r):t.hierNode.prelim=r}else o&&(t.hierNode.prelim=o.hierNode.prelim+e(t,o));t.parentNode.hierNode.defaultAncestor=function(t,e,n,i){if(e){for(var o=t,r=t,a=r.parentNode.children[0],s=e,l=o.hierNode.modifier,c=r.hierNode.modifier,u=a.hierNode.modifier,d=s.hierNode.modifier;s=ox(s),r=rx(r),s&&r;){o=ox(o),a=rx(a),o.hierNode.ancestor=t;var h=s.hierNode.prelim+d-r.hierNode.prelim-c+i(s,r);0<h&&(ax((f=s).hierNode.ancestor.parentNode===t.parentNode?f.hierNode.ancestor:n,t,h),c+=h,l+=h),d+=s.hierNode.modifier,c+=r.hierNode.modifier,l+=o.hierNode.modifier,u+=a.hierNode.modifier}s&&!ox(o)&&(o.hierNode.thread=s,o.hierNode.modifier+=d-l),r&&!rx(a)&&(a.hierNode.thread=r,a.hierNode.modifier+=c-u,n=t)}var f;return n}(t,o,t.parentNode.hierNode.defaultAncestor||i[0],e)}function ex(t){t.setLayout({x:t.hierNode.prelim+t.parentNode.hierNode.modifier},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function nx(t){return arguments.length?t:sx}function ix(t,e){var n={};return t-=Math.PI/2,n.x=e*Math.cos(t),n.y=e*Math.sin(t),n}function ox(t){var e=t.children;return e.length&&t.isExpand?e[e.length-1]:t.hierNode.thread}function rx(t){var e=t.children;return e.length&&t.isExpand?e[0]:t.hierNode.thread}function ax(t,e,n){var i=n/(e.hierNode.i-t.hierNode.i);e.hierNode.change-=i,e.hierNode.shift+=n,e.hierNode.modifier+=n,e.hierNode.prelim+=n,t.hierNode.change+=i}function sx(t,e){return t.parentNode===e.parentNode?1:2}Jy.prototype={constructor:Jy,isRemoved:function(){return this.dataIndex<0},eachNode:function(t,e,n){"function"==typeof t&&(n=e,e=t,t=null),O(t=t||{})&&(t={order:t});var i,o=t.order||"preorder",r=this[t.attr||"children"];"preorder"===o&&(i=e.call(n,this));for(var a=0;!i&&a<r.length;a++)r[a].eachNode(t,e,n);"postorder"===o&&e.call(n,this)},updateDepthAndHeight:function(t){var e=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>e&&(e=i.height)}this.height=e+1},getNodeById:function(t){if(this.getId()===t)return this;for(var e=0,n=this.children,i=n.length;e<i;e++){var o=n[e].getNodeById(t);if(o)return o}},contains:function(t){if(t===this)return!0;for(var e=0,n=this.children,i=n.length;e<i;e++){var o=n[e].contains(t);if(o)return o}},getAncestors:function(t){for(var e=[],n=t?this:this.parentNode;n;)e.push(n),n=n.parentNode;return e.reverse(),e},getValue:function(t){var e=this.hostTree.data;return e.get(e.getDimension(t||"value"),this.dataIndex)},setLayout:function(t,e){0<=this.dataIndex&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(t){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(t)},setVisual:function(t,e){0<=this.dataIndex&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},getVisual:function(t,e){return this.hostTree.data.getItemVisual(this.dataIndex,t,e)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},isDescendantOf:function(t){return t!==this&&t.isAncestorOf(this)}},Qy.prototype={constructor:Qy,type:"tree",eachNode:function(t,e,n){this.root.eachNode(t,e,n)},getNodeByDataIndex:function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},getNodeByName:function(t){return this.root.getNodeByName(t)},update:function(){for(var t=this.data,e=this._nodes,n=0,i=e.length;n<i;n++)e[n].dataIndex=-1;for(n=0,i=t.count();n<i;n++)e[t.getRawIndex(n)].dataIndex=n},clearLayouts:function(){this.data.clearItemLayouts()}},Qy.createTree=function(t,e,n){var i=new Qy(e),o=[],r=1;!function t(e,n){var a=e.value;r=Math.max(r,L(a)?a.length:1),o.push(e);var s=new Jy(e.name,i);n?function(t,e){t.parentNode!==e&&(e.children.push(t),t.parentNode=e)}(s,n):i.root=s,i._nodes.push(s);var l=e.children;if(l)for(var c=0;c<l.length;c++)t(l[c],s)}(t),i.root.updateDepthAndHeight(0);var a=Wf(o,{coordDimensions:["value"],dimensionsCount:r}),s=new Af(a,e);return s.initData(o),n&&n(s),jy({mainData:s,struct:i,structAttr:"tree"}),i.update(),i},Gu.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(t){var e={name:t.name,children:t.data},n=new fl(t.leaves||{},this,this.ecModel),i=Qy.createTree(e,this,function(t){t.wrapMethod("getItemModel",function(t,e){var o=i.getNodeByDataIndex(e);return o.children.length&&o.isExpand||(t.parentModel=n),t})}),o=0;i.eachNode("preorder",function(t){t.depth>o&&(o=t.depth)});var r=t.expandAndCollapse&&0<=t.initialTreeDepth?t.initialTreeDepth:o;return i.root.eachNode("preorder",function(t){var e=t.hostTree.data.getRawDataItem(t.dataIndex);t.isExpand=e&&null!=e.collapsed?!e.collapsed:t.depth<=r}),i.data},getOrient:function(){var t=this.get("orient");return"horizontal"===t?t="LR":"vertical"===t&&(t="TB"),t},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},formatTooltip:function(t){for(var e=this.getData().tree,n=e.root.children[0],i=e.getNodeByDataIndex(t),o=i.getValue(),r=i.name;i&&i!==n;)r=i.parentNode.name+"."+r,i=i.parentNode;return Gl(r+(isNaN(o)||null==o?"":" : "+o))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});var lx=fs({shape:{parentPoint:[],childPoints:[],orient:"",forkPosition:""},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.childPoints,i=n.length,o=e.parentPoint,r=n[0],a=n[i-1];if(1===i)return t.moveTo(o[0],o[1]),void t.lineTo(r[0],r[1]);var s=e.orient,l="TB"===s||"BT"===s?0:1,c=1-l,u=bl(e.forkPosition,1),d=[];d[l]=o[l],d[c]=o[c]+(a[c]-o[c])*u,t.moveTo(o[0],o[1]),t.lineTo(d[0],d[1]),t.moveTo(r[0],r[1]),d[l]=r[l],t.lineTo(d[0],d[1]),d[l]=a[l],t.lineTo(d[0],d[1]),t.lineTo(a[0],a[1]);for(var h=1;h<i-1;h++){var f=n[h];t.moveTo(f[0],f[1]),d[l]=f[l],t.lineTo(d[0],d[1])}}});function cx(t,e){var n=t.getItemLayout(e);return n&&!isNaN(n.x)&&!isNaN(n.y)&&"none"!==t.getItemVisual(e,"symbol")}function ux(t,e,n){return n.itemModel=e,n.itemStyle=e.getModel("itemStyle").getItemStyle(),n.hoverItemStyle=e.getModel("emphasis.itemStyle").getItemStyle(),n.lineStyle=e.getModel("lineStyle").getLineStyle(),n.labelModel=e.getModel("label"),n.hoverLabelModel=e.getModel("emphasis.label"),n.symbolInnerColor=!1===t.isExpand&&0!==t.children.length?n.itemStyle.fill:"#fff",n}function dx(t,e,n,i,o,r){var a=!n,s=t.tree.getNodeByDataIndex(e),l=s.getModel(),c=(r=ux(s,l,r),t.tree.root),u=s.parentNode===c?s:s.parentNode||s,d=t.getItemGraphicEl(u.dataIndex),h=u.getLayout(),f=d?{x:d.position[0],y:d.position[1],rawX:d.__radialOldRawX,rawY:d.__radialOldRawY}:h,p=s.getLayout();a?(n=new wg(t,e,r)).attr("position",[f.x,f.y]):n.updateData(t,e,r),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=p.rawX,n.__radialRawY=p.rawY,i.add(n),t.setItemGraphicEl(e,n),Xs(n,{position:[p.x,p.y]},o);var g=n.getSymbolPath();if("radial"===r.layout){var m,v,y=c.children[0],x=y.getLayout(),_=y.children.length;if(p.x===x.x&&!0===s.isExpand){var w={};w.x=(y.children[0].getLayout().x+y.children[_-1].getLayout().x)/2,w.y=(y.children[0].getLayout().y+y.children[_-1].getLayout().y)/2,(m=Math.atan2(w.y-x.y,w.x-x.x))<0&&(m=2*Math.PI+m),(v=w.x<x.x)&&(m-=Math.PI)}else(m=Math.atan2(p.y-x.y,p.x-x.x))<0&&(m=2*Math.PI+m),0===s.children.length||0!==s.children.length&&!1===s.isExpand?(v=p.x<x.x)&&(m-=Math.PI):(v=p.x>x.x)||(m-=Math.PI);var S=v?"left":"right",C=r.labelModel.get("rotate"),M=C*(Math.PI/180);g.setStyle({textPosition:r.labelModel.get("position")||S,textRotation:null==C?-m:M,textOrigin:"center",verticalAlign:"middle"})}!function(t,e,n,i,o,r,a,s,l){var c=l.edgeShape,u=i.__edge;if("curve"===c)e.parentNode&&e.parentNode!==n&&Xs(u=u||(i.__edge=new Ka({shape:fx(l,o,o),style:b({opacity:0,strokeNoScale:!0},l.lineStyle)})),{shape:fx(l,r,a),style:b({opacity:1},l.lineStyle)},t);else if("polyline"===c&&"orthogonal"===l.layout&&e!==n&&e.children&&0!==e.children.length&&!0===e.isExpand){for(var d=e.children,h=[],f=0;f<d.length;f++){var p=d[f].getLayout();h.push([p.x,p.y])}Xs(u=u||(i.__edge=new lx({shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]],orient:l.orient,forkPosition:l.edgeForkPosition},style:b({opacity:0,strokeNoScale:!0},l.lineStyle)})),{shape:{parentPoint:[a.x,a.y],childPoints:h},style:b({opacity:1},l.lineStyle)},t)}s.add(u)}(o,s,c,n,f,h,p,i,r)}function hx(t,e,n,i,o,r){for(var a,s,l=t.tree.getNodeByDataIndex(e),c=t.tree.root,u=l.getModel(),d=(r=ux(l,u,r),l.parentNode===c?l:l.parentNode||l);null==(a=d.getLayout());)d=d.parentNode===c?d:d.parentNode||d;Xs(n,{position:[a.x+1,a.y+1]},o,function(){i.remove(n),t.setItemGraphicEl(e,null)}),n.fadeOut(null,{keepLabel:!0});var h=t.getItemGraphicEl(d.dataIndex).__edge,f=n.__edge||(!1===d.isExpand||1===d.children.length?h:void 0);s=r.edgeShape,f&&("curve"===s?Xs(f,{shape:fx(r,a,a),style:{opacity:0}},o,function(){i.remove(f)}):"polyline"===s&&"orthogonal"===r.layout&&Xs(f,{shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]]},style:{opacity:0}},o,function(){i.remove(f)}))}function fx(t,e,n){var i,o,r,a,s,l,c,u,d=t.orient;if("radial"!==t.layout)return s=e.x,c=e.y,l=n.x,u=n.y,"LR"!==d&&"RL"!==d||(i=s+(l-s)*t.curvature,o=c,r=l+(s-l)*t.curvature,a=u),"TB"!==d&&"BT"!==d||(i=s,o=c+(u-c)*t.curvature,r=l,a=u+(c-u)*t.curvature),{x1:s,y1:c,x2:l,y2:u,cpx1:i,cpy1:o,cpx2:r,cpy2:a};l=n.rawX,u=n.rawY;var h=ix(s=e.rawX,c=e.rawY),f=ix(s,c+(u-c)*t.curvature),p=ix(l,u+(c-u)*t.curvature),g=ix(l,u);return{x1:h.x,y1:h.y,x2:g.x,y2:g.y,cpx1:f.x,cpy1:f.y,cpx2:p.x,cpy2:p.y}}function px(t,e){for(var n,i=[t];n=i.pop();)if(e(n),n.isExpand){var o=n.children;if(o.length)for(var r=o.length-1;0<=r;r--)i.push(o[r])}}function gx(t,e,n){if(t&&0<=S(e,t.type)){var i=n.getData().tree.root,o=t.targetNode;if("string"==typeof o&&(o=i.getNodeById(o)),o&&i.contains(o))return{node:o};var r=t.targetNodeId;if(null!=r&&(o=i.getNodeById(r)))return{node:o}}}function mx(t){for(var e=[];t;)(t=t.parentNode)&&e.push(t);return e.reverse()}function vx(t,e){return 0<=S(mx(t),e)}function yx(t,e){for(var n=[];t;){var i=t.dataIndex;n.push({name:t.name,dataIndex:i,value:e.getRawValue(i)}),t=t.parentNode}return n.reverse(),n}function xx(t){this.group=new Cn,t.add(this.group)}function bx(t,e,n,i,o,r){var a=[[o?t:t-5,e],[t+n,e],[t+n,e+i],[o?t:t-5,e+i]];return r||a.splice(2,0,[t+n+5,e+i/2]),o||a.push([t,e+i/2]),a}function _x(t){var e=Px(t);return e.stroke=e.fill=e.lineWidth=null,e}uf({type:"tree",init:function(t,e){this._mainGroup=new Cn,this._controller=new hy(e.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},render:function(t,e,n,i){var o=t.getData(),r=t.layoutInfo,a=this._mainGroup,s=t.get("layout");a.attr("position","radial"===s?[r.x+r.width/2,r.y+r.height/2]:[r.x,r.y]),this._updateViewCoordSys(t,r,s),this._updateController(t,e,n);var l=this._data,c={expandAndCollapse:t.get("expandAndCollapse"),layout:s,edgeShape:t.get("edgeShape"),edgeForkPosition:t.get("edgeForkPosition"),orient:t.getOrient(),curvature:t.get("lineStyle.curveness"),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};o.diff(l).add(function(e){cx(o,e)&&dx(o,e,null,a,t,c)}).update(function(e,n){var i=l.getItemGraphicEl(n);cx(o,e)?dx(o,e,i,a,t,c):i&&hx(l,n,i,a,t,c)}).remove(function(e){var n=l.getItemGraphicEl(e);n&&hx(l,e,n,a,t,c)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),!0===c.expandAndCollapse&&o.eachItemGraphicEl(function(e,i){e.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:i})})}),this._data=o},_updateViewCoordSys:function(t){var e=t.getData(),n=[];e.each(function(t){var i=e.getItemLayout(t);!i||isNaN(i.x)||isNaN(i.y)||n.push([+i.x,+i.y])});var i=[],o=[];Ir(n,i,o);var r=this._min,a=this._max;o[0]-i[0]==0&&(i[0]=r?r[0]:i[0]-1,o[0]=a?a[0]:o[0]+1),o[1]-i[1]==0&&(i[1]=r?r[1]:i[1]-1,o[1]=a?a[1]:o[1]+1);var s=t.coordinateSystem=new Ry;s.zoomLimit=t.get("scaleLimit"),s.setBoundingRect(i[0],i[1],o[0]-i[0],o[1]-i[1]),s.setCenter(t.get("center")),s.setZoom(t.get("zoom")),this.group.attr({position:s.position,scale:s.scale}),this._viewCoordSys=s,this._min=i,this._max=o},_updateController:function(t,e,n){var i=this._controller,o=this._controllerHost,r=this.group;i.setPointerChecker(function(e,i,o){var a=r.getBoundingRect();return a.applyTransform(r.transform),a.contain(i,o)&&!Cy(e,n,t)}),i.enable(t.get("roam")),o.zoomLimit=t.get("scaleLimit"),o.zoom=t.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",function(e){_y(o,e.dx,e.dy),n.dispatchAction({seriesId:t.id,type:"treeRoam",dx:e.dx,dy:e.dy})},this).on("zoom",function(e){wy(o,e.scale,e.originX,e.originY),n.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),this._updateNodeAndLinkScale(t)},this)},_updateNodeAndLinkScale:function(t){var e=t.getData(),n=this._getNodeGlobalScale(t),i=[n,n];e.eachItemGraphicEl(function(t,e){t.attr("scale",i)})},_getNodeGlobalScale:function(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=this._nodeScaleRatio,i=e.scale,o=i&&i[0]||1;return((e.getZoom()-1)*n+1)/o},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},remove:function(){this._mainGroup.removeAll(),this._data=null}}),tf({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(e){var n=t.dataIndex,i=e.getData().tree.getNodeByDataIndex(n);i.isExpand=!i.isExpand})}),tf({type:"treeRoam",event:"treeRoam",update:"none"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(e){var n=Ey(e.coordinateSystem,t);e.setCenter&&e.setCenter(n.center),e.setZoom&&e.setZoom(n.zoom)})}),of(rm("tree","circle")),nf(function(t,e){t.eachSeriesByType("tree",function(t){!function(t,e){var n=function(t,e){return ac(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e);t.layoutInfo=n;var i=t.get("layout"),o=0,r=0,a=null;a="radial"===i?(o=2*Math.PI,r=Math.min(n.height,n.width)/2,nx(function(t,e){return(t.parentNode===e.parentNode?1:2)/t.depth})):(o=n.width,r=n.height,nx());var s=t.getData().tree.root,l=s.children[0];if(l){!function(t){t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var e,n,i=[t];e=i.pop();)if(n=e.children,e.isExpand&&n.length)for(var o=n.length-1;0<=o;o--){var r=n[o];r.hierNode={defaultAncestor:null,ancestor:r,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},i.push(r)}}(s),function(t,e,n){for(var i,o=[t],r=[];i=o.pop();)if(r.push(i),i.isExpand){var a=i.children;if(a.length)for(var s=0;s<a.length;s++)o.push(a[s])}for(;i=r.pop();)e(i,n)}(l,tx,a),s.hierNode.modifier=-l.hierNode.prelim,px(l,ex);var c=l,u=l,d=l;px(l,function(t){var e=t.getLayout().x;e<c.getLayout().x&&(c=t),e>u.getLayout().x&&(u=t),t.depth>d.depth&&(d=t)});var h=c===u?1:a(c,u)/2,f=h-c.getLayout().x,p=0,g=0,m=0,v=0;if("radial"===i)p=o/(u.getLayout().x+h+f),g=r/(d.depth-1||1),px(l,function(t){var e=ix(m=(t.getLayout().x+f)*p,v=(t.depth-1)*g);t.setLayout({x:e.x,y:e.y,rawX:m,rawY:v},!0)});else{var y=t.getOrient();"RL"===y||"LR"===y?(g=r/(u.getLayout().x+h+f),p=o/(d.depth-1||1),px(l,function(t){v=(t.getLayout().x+f)*g,t.setLayout({x:m="LR"===y?(t.depth-1)*p:o-(t.depth-1)*p,y:v},!0)})):"TB"!==y&&"BT"!==y||(p=o/(u.getLayout().x+h+f),g=r/(d.depth-1||1),px(l,function(t){m=(t.getLayout().x+f)*p,t.setLayout({x:m,y:v="TB"===y?(t.depth-1)*g:r-(t.depth-1)*g},!0)}))}}}(t,e)})}),Gu.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],preventUsingHoverLayer:!0,_viewRoot:null,defaultOption:{progressive:0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(t,e){var n={name:t.name,children:t.data};!function t(e){var n=0;k(e.children,function(e){t(e);var i=e.value;L(i)&&(i=i[0]),n+=i});var i=e.value;L(i)&&(i=i[0]),null!=i&&!isNaN(i)||(i=n),i<0&&(i=0),L(e.value)?e.value[0]=i:e.value=i}(n);var i=t.levels||[],o=new fl({itemStyle:this.designatedVisualItemStyle={}},this,e),r=A((i=t.levels=function(t,e){var n,i=e.get("color");if(i)return k(t=t||[],function(t){var e=new fl(t),i=e.get("color");(e.get("itemStyle.color")||i&&"none"!==i)&&(n=!0)}),n||((t[0]||(t[0]={})).color=i.slice()),t}(i,e))||[],function(t){return new fl(t,o,e)},this),a=Qy.createTree(n,this,function(t){t.wrapMethod("getItemModel",function(t,e){var n=a.getNodeByDataIndex(e);return t.parentModel=r[n.depth]||o,t})});return a.data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(t){var e=this.getData(),n=this.getRawValue(t),i=L(n)?zl(n[0]):zl(n);return Gl(e.getName(t)+": "+i)},getDataParams:function(t){var e=Gu.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return e.treePathInfo=yx(n,this),e},setLayoutInfo:function(t){this.layoutInfo=this.layoutInfo||{},x(this.layoutInfo,t)},mapIdToIndex:function(t){var e=this._idIndexMap;e||(e=this._idIndexMap=Q(),this._idIndexMapCount=0);var n=e.get(t);return null==n&&e.set(t,n=this._idIndexMapCount++),n},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)}}),xx.prototype={constructor:xx,render:function(t,e,n,i){var o=t.getModel("breadcrumb"),r=this.group;if(r.removeAll(),o.get("show")&&n){var a=o.getModel("itemStyle"),s=a.getModel("textStyle"),l={pos:{left:o.get("left"),right:o.get("right"),top:o.get("top"),bottom:o.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:o.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,l,s),this._renderContent(t,l,a,s,i),sc(r,l.pos,l.box)}},_prepare:function(t,e,n){for(var i=t;i;i=i.parentNode){var o=i.getModel().get("name"),r=n.getTextRect(o),a=Math.max(r.width+16,e.emptyItemWidth);e.totalWidth+=a+8,e.renderList.push({node:i,text:o,width:a})}},_renderContent:function(t,e,n,i,o){for(var r,a,s=0,l=e.emptyItemWidth,c=t.get("breadcrumb.height"),u=function(t,e,n){var i=e.width,o=e.height,r=bl(t.x,i),a=bl(t.y,o),s=bl(t.x2,i),l=bl(t.y2,o);return(isNaN(r)||isNaN(parseFloat(t.x)))&&(r=0),(isNaN(s)||isNaN(parseFloat(t.x2)))&&(s=i),(isNaN(a)||isNaN(parseFloat(t.y)))&&(a=0),(isNaN(l)||isNaN(parseFloat(t.y2)))&&(l=o),n=Fl(n||0),{width:Math.max(s-r-n[1]-n[3],0),height:Math.max(l-a-n[0]-n[2],0)}}(e.pos,e.box),d=e.totalWidth,h=e.renderList,f=h.length-1;0<=f;f--){var p=h[f],g=p.node,m=p.width,v=p.text;d>u.width&&(d-=m-l,m=l,v=null);var y=new za({shape:{points:bx(s,0,m,c,f===h.length-1,0===f)},style:b(n.getItemStyle(),{lineJoin:"bevel",text:v,textFill:i.getTextColor(),textFont:i.getFont()}),z:10,onclick:N(o,g)});this.group.add(y),y.eventData={componentType:"series",componentSubType:"treemap",componentIndex:(r=t).componentIndex,seriesIndex:r.componentIndex,seriesName:r.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:(a=g)&&a.dataIndex,name:a&&a.name},treePathInfo:a&&yx(a,r)},s+=m+8}},remove:function(){this.group.removeAll()}};var Sx=E,Cx=Cn,Mx=ja,Tx=k,kx=["label"],Ax=["emphasis","label"],Ix=["upperLabel"],Dx=["emphasis","upperLabel"],Px=Ko([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);function Ex(t,e,n,i,o,r,a,s,l,c){if(a){var u=a.getLayout(),d=t.getData();if(d.setItemGraphicEl(a.dataIndex,null),u&&u.isInView){var h=u.width,f=u.height,p=u.borderWidth,g=u.invisible,v=a.getRawIndex(),y=s&&s.getRawIndex(),b=a.viewChildren,_=u.upperHeight,w=b&&b.length,S=a.getModel("itemStyle"),C=a.getModel("emphasis.itemStyle"),M=E("nodeGroup",Cx);if(M){if(l.add(M),M.attr("position",[u.x||0,u.y||0]),M.__tmNodeWidth=h,M.__tmNodeHeight=f,u.isAboveViewRoot)return M;var T=a.getModel(),k=E("background",Mx,c,1);if(k&&function(e,n,i){if(n.dataIndex=a.dataIndex,n.seriesIndex=t.seriesIndex,n.setShape({x:0,y:0,width:h,height:f}),g)I(n);else{n.invisible=!1;var o=a.getVisual("borderColor",!0),r=C.get("borderColor"),s=_x(S);s.fill=o;var l=Px(C);if(l.fill=r,i){var c=h-2*p;D(s,l,o,c,_,{x:p,y:0,width:c,height:_})}else s.text=l.text=null;n.setStyle(s),Is(n,l)}e.add(n)}(M,k,w&&u.upperLabelHeight),w)Bs(M)&&Os(M,!1),k&&(Os(k,!0),d.setItemGraphicEl(a.dataIndex,k));else{var A=E("content",Mx,c,2);A&&function(e,n){n.dataIndex=a.dataIndex,n.seriesIndex=t.seriesIndex;var i=Math.max(h-2*p,0),o=Math.max(f-2*p,0);if(n.culling=!0,n.setShape({x:p,y:p,width:i,height:o}),g)I(n);else{n.invisible=!1;var r=a.getVisual("color",!0),s=_x(S);s.fill=r;var l=Px(C);D(s,l,r,i,o),n.setStyle(s),Is(n,l)}e.add(n)}(M,A),k&&Bs(k)&&Os(k,!1),Os(M,!0),d.setItemGraphicEl(a.dataIndex,M)}return M}}}function I(t){t.invisible||r.push(t)}function D(e,n,i,o,r,s){var l=T.get("name"),c=T.getModel(s?Ix:kx),d=T.getModel(s?Dx:Ax),h=c.getShallow("show");Vs(e,n,c,d,{defaultText:h?l:null,autoColor:i,isRectText:!0,labelFetcher:t,labelDataIndex:a.dataIndex,labelProp:s?"upperLabel":"label"}),P(e,s,u),P(n,s,u),s&&(e.textRect=m(s)),e.truncate=h&&c.get("ellipsis")?{outerWidth:o,outerHeight:r,minChar:2}:null}function P(e,n,i){var o=e.text;if(!n&&i.isLeafRoot&&null!=o){var r=t.get("drillDownIcon",!0);e.text=r?r+" "+o:o}}function E(t,r,s,l){var c=null!=y&&n[t][y],u=o[t];return c?(n[t][y]=null,function(t,e,n){(t[v]={}).old="nodeGroup"===n?e.position.slice():x({},e.shape)}(u,c,t)):g||((c=new r({z:function(t,e){var n=10*t+e;return(n-1)/n}(s,l)})).__tmDepth=s,function(t,e,n){var r=t[v]={},s=a.parentNode;if(s&&(!i||"drillDown"===i.direction)){var l=0,c=0,u=o.background[s.getRawIndex()];!i&&u&&u.old&&(l=u.old.width,c=u.old.height),r.old="nodeGroup"===n?[0,c]:{x:l,y:c,width:0,height:0}}r.fadein="nodeGroup"!==n}(u,0,c.__tmStorageName=t)),e[t][v]=c}}uf({type:"treemap",init:function(t,e){this._storage={nodeGroup:[],background:[],content:[]},this._state="ready"},render:function(t,e,n,i){if(!(S(e.findComponents({mainType:"series",subType:"treemap",query:i}),t)<0)){this.seriesModel=t,this.api=n,this.ecModel=e;var o=gx(i,["treemapZoomToNode","treemapRootToNode"],t),r=i&&i.type,a=t.layoutInfo,s=!this._oldTree,l=this._storage,c="treemapRootToNode"===r&&o&&l?{rootNodeGroup:l.nodeGroup[o.node.getRawIndex()],direction:i.direction}:null,u=this._giveContainerGroup(a),d=this._doRender(u,t,c);s||r&&"treemapZoomToNode"!==r&&"treemapRootToNode"!==r?d.renderFinally():this._doAnimation(u,d,t,c),this._resetController(n),this._renderBreadcrumb(t,n,o)}},_giveContainerGroup:function(t){var e=this._containerGroup;return e||(e=this._containerGroup=new Cx,this._initEvents(e),this.group.add(e)),e.attr("position",[t.x,t.y]),e},_doRender:function(t,e,n){var i=e.getData().tree,o=this._oldTree,r={nodeGroup:[],background:[],content:[]},a={nodeGroup:[],background:[],content:[]},s=this._storage,l=[],c=N(Ex,e,a,s,n,r,l);!function t(e,n,i,o,r){function a(t){return t.getId()}function s(a,s){var l=null!=a?e[a]:null,u=null!=s?n[s]:null,d=c(l,u,i,r);d&&t(l&&l.viewChildren||[],u&&u.viewChildren||[],d,o,r+1)}o?Tx(n=e,function(t,e){t.isRemoved()||s(e,e)}):new hf(n,e,a,a).add(s).update(s).remove(N(s,null)).execute()}(i.root?[i.root]:[],o&&o.root?[o.root]:[],t,i===o||!o,0);var u,d,h=(d={nodeGroup:[],background:[],content:[]},(u=s)&&Tx(u,function(t,e){var n=d[e];Tx(t,function(t){t&&(n.push(t),t.__tmWillDelete=1)})}),d);return this._oldTree=i,this._storage=a,{lastsForAnimation:r,willDeleteEls:h,renderFinally:function(){Tx(h,function(t){Tx(t,function(t){t.parent&&t.parent.remove(t)})}),Tx(l,function(t){t.invisible=!0,t.dirty()})}}},_doAnimation:function(t,e,n,i){if(n.get("animation")){var o=n.get("animationDurationUpdate"),r=n.get("animationEasing"),a=function(){var t,e=[],n={};return{add:function(t,i,o,r,a){return O(r)&&(a=r,r=0),!n[t.id]&&(n[t.id]=1,e.push({el:t,target:i,time:o,delay:r,easing:a}),!0)},done:function(e){return t=e,this},start:function(){for(var i=e.length,o=0,r=e.length;o<r;o++){var a=e[o];a.el.animateTo(a.target,a.time,a.delay,a.easing,s)}return this;function s(){--i||(e.length=0,n={},t&&t())}}}}();Tx(e.willDeleteEls,function(t,e){Tx(t,function(t,n){if(!t.invisible){var s,l=t.parent;if(i&&"drillDown"===i.direction)s=l===i.rootNodeGroup?{shape:{x:0,y:0,width:l.__tmNodeWidth,height:l.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var c=0,u=0;l.__tmWillDelete||(c=l.__tmNodeWidth/2,u=l.__tmNodeHeight/2),s="nodeGroup"===e?{position:[c,u],style:{opacity:0}}:{shape:{x:c,y:u,width:0,height:0},style:{opacity:0}}}s&&a.add(t,s,o,r)}})}),Tx(this._storage,function(t,n){Tx(t,function(t,i){var s=e.lastsForAnimation[n][i],l={};s&&("nodeGroup"===n?s.old&&(l.position=t.position.slice(),t.attr("position",s.old)):(s.old&&(l.shape=x({},t.shape),t.setShape(s.old)),s.fadein?(t.setStyle("opacity",0),l.style={opacity:1}):1!==t.style.opacity&&(l.style={opacity:1})),a.add(t,l,o,r))})},this),this._state="animating",a.done(Sx(function(){this._state="ready",e.renderFinally()},this)).start()}},_resetController:function(t){var e=this._controller;e||((e=this._controller=new hy(t.getZr())).enable(this.seriesModel.get("roam")),e.on("pan",Sx(this._onPan,this)),e.on("zoom",Sx(this._onZoom,this)));var n=new Sn(0,0,t.getWidth(),t.getHeight());e.setPointerChecker(function(t,e,i){return n.contain(e,i)})},_clearController:function(){var t=this._controller;t&&(t.dispose(),t=null)},_onPan:function(t){if("animating"!==this._state&&(3<Math.abs(t.dx)||3<Math.abs(t.dy))){var e=this.seriesModel.getData().tree.root;if(!e)return;var n=e.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+t.dx,y:n.y+t.dy,width:n.width,height:n.height}})}},_onZoom:function(t){var e=t.originX,n=t.originY;if("animating"!==this._state){var i=this.seriesModel.getData().tree.root;if(!i)return;var o=i.getLayout();if(!o)return;var r=new Sn(o.x,o.y,o.width,o.height),a=this.seriesModel.layoutInfo;e-=a.x,n-=a.y;var s=ie();se(s,s,[-e,-n]),ce(s,s,[t.scale,t.scale]),se(s,s,[e,n]),r.applyTransform(s),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:r.x,y:r.y,width:r.width,height:r.height}})}},_initEvents:function(t){t.on("click",function(t){if("ready"===this._state){var e=this.seriesModel.get("nodeClick",!0);if(e){var n=this.findTarget(t.offsetX,t.offsetY);if(n){var i=n.node;if(i.getLayout().isLeafRoot)this._rootToNode(n);else if("zoomToNode"===e)this._zoomToNode(n);else if("link"===e){var o=i.hostTree.data.getItemModel(i.dataIndex),r=o.get("link",!0),a=o.get("target",!0)||"blank";r&&Ql(r,a)}}}}},this)},_renderBreadcrumb:function(t,e,n){n=n||(n=null!=t.get("leafDepth",!0)?{node:t.getViewRoot()}:this.findTarget(e.getWidth()/2,e.getHeight()/2))||{node:t.getData().tree.root},(this._breadcrumb||(this._breadcrumb=new xx(this.group))).render(t,e,n.node,Sx(function(e){"animating"!==this._state&&(vx(t.getViewRoot(),e)?this._rootToNode({node:e}):this._zoomToNode({node:e}))},this))},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},_rootToNode:function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},findTarget:function(t,e){var n;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(i){var o=this._storage.background[i.getRawIndex()];if(o){var r=o.transformCoordToLocal(t,e),a=o.shape;if(!(a.x<=r[0]&&r[0]<=a.x+a.width&&a.y<=r[1]&&r[1]<=a.y+a.height))return!1;n={node:i,offsetX:r[0],offsetY:r[1]}}},this),n}});for(var Nx=function(){},Lx=["treemapZoomToNode","treemapRender","treemapMove"],Rx=0;Rx<Lx.length;Rx++)tf({type:Lx[Rx],update:"updateView"},Nx);tf({type:"treemapRootToNode",update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"treemap",query:t},function(e,n){var i=gx(t,["treemapZoomToNode","treemapRootToNode"],e);if(i){var o=e.getViewRoot();o&&(t.direction=vx(o,i.node)?"rollUp":"drillDown"),e.resetViewRoot(i.node)}})});var Ox=k,Bx=B,zx=function(t){var e=t.mappingMethod,n=t.type,i=this.option=m(t);this.type=n,this.mappingMethod=e,this._normalizeData=Xx[e];var o=Vx[n];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._doMap=o._doMap[e],"piecewise"===e?(Fx(i),function(t){var e=t.pieceList;t.hasSpecialVisual=!1,k(e,function(e,n){e.originIndex=n,null!=e.visual&&(t.hasSpecialVisual=!0)})}(i)):"category"===e?i.categories?function(t){var e=t.categories,n=t.visual,i=t.categoryMap={};if(Ox(e,function(t,e){i[t]=e}),!L(n)){var o=[];B(n)?Ox(n,function(t,e){var n=i[e];o[null!=n?n:-1]=t}):o[-1]=n,n=Yx(t,o)}for(var r=e.length-1;0<=r;r--)null==n[r]&&(delete i[e[r]],e.pop())}(i):Fx(i,!0):(q("linear"!==e||i.dataExtent),Fx(i))};zx.prototype={constructor:zx,mapValueToVisual:function(t){var e=this._normalizeData(t);return this._doMap(e,t)},getNormalizer:function(){return E(this._normalizeData,this)}};var Vx=zx.visualHandlers={color:{applyVisual:Gx("color"),getColorMapper:function(){var t=this.option;return E("category"===t.mappingMethod?function(t,e){return e||(t=this._normalizeData(t)),Ux.call(this,t)}:function(e,n,i){var o=!!i;return n||(e=this._normalizeData(e)),i=Ge(e,t.parsedVisual,i),o?i:qe(i,"rgba")},this)},_doMap:{linear:function(t){return qe(Ge(t,this.option.parsedVisual),"rgba")},category:Ux,piecewise:function(t,e){var n=qx.call(this,e);return null==n&&(n=qe(Ge(t,this.option.parsedVisual),"rgba")),n},fixed:jx}},colorHue:Hx(function(t,e){return je(t,e)}),colorSaturation:Hx(function(t,e){return je(t,null,e)}),colorLightness:Hx(function(t,e){return je(t,null,null,e)}),colorAlpha:Hx(function(t,e){return $e(t,e)}),opacity:{applyVisual:Gx("opacity"),_doMap:$x([0,1])},liftZ:{applyVisual:Gx("liftZ"),_doMap:{linear:jx,category:jx,piecewise:jx,fixed:jx}},symbol:{applyVisual:function(t,e,n){var i=this.mapValueToVisual(t);if(O(i))n("symbol",i);else if(Bx(i))for(var o in i)i.hasOwnProperty(o)&&n(o,i[o])},_doMap:{linear:Wx,category:Ux,piecewise:function(t,e){var n=qx.call(this,e);return null==n&&(n=Wx.call(this,t)),n},fixed:jx}},symbolSize:{applyVisual:Gx("symbolSize"),_doMap:$x([0,1])}};function Fx(t,e){var n=t.visual,i=[];B(n)?Ox(n,function(t){i.push(t)}):null!=n&&i.push(n),e||1!==i.length||{color:1,symbol:1}.hasOwnProperty(t.type)||(i[1]=i[0]),Yx(t,i)}function Hx(t){return{applyVisual:function(e,n,i){e=this.mapValueToVisual(e),i("color",t(n("color"),e))},_doMap:$x([0,1])}}function Wx(t){var e=this.option.visual;return e[Math.round(xl(t,[0,1],[0,e.length-1],!0))]||{}}function Gx(t){return function(e,n,i){i(t,this.mapValueToVisual(e))}}function Ux(t){var e=this.option.visual;return e[this.option.loop&&-1!==t?t%e.length:t]}function jx(){return this.option.visual[0]}function $x(t){return{linear:function(e){return xl(e,t,this.option.visual,!0)},category:Ux,piecewise:function(e,n){var i=qx.call(this,n);return null==i&&(i=xl(e,t,this.option.visual,!0)),i},fixed:jx}}function qx(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var i=n[zx.findPieceIndex(t,n)];if(i&&i.visual)return i.visual[this.type]}}function Yx(t,e){return t.visual=e,"color"===t.type&&(t.parsedVisual=A(e,function(t){return Ve(t)})),e}var Xx={linear:function(t){return xl(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=zx.findPieceIndex(t,e,!0);if(null!=n)return xl(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?-1:e},fixed:et};function Zx(t,e,n){return t?e<=n:e<n}zx.listVisualTypes=function(){var t=[];return k(Vx,function(e,n){t.push(n)}),t},zx.addVisualHandler=function(t,e){Vx[t]=e},zx.isValidType=function(t){return Vx.hasOwnProperty(t)},zx.eachVisual=function(t,e,n){B(t)?k(t,e,n):e.call(n,t)},zx.mapVisual=function(t,e,n){var i,o=L(t)?[]:B(t)?{}:(i=!0,null);return zx.eachVisual(t,function(t,r){var a=e.call(n,t,r);i?o=a:o[r]=a}),o},zx.retrieveVisuals=function(t){var e,n={};return t&&Ox(Vx,function(i,o){t.hasOwnProperty(o)&&(n[o]=t[o],e=!0)}),e?n:null},zx.prepareVisualTypes=function(t){if(Bx(t)){var e=[];Ox(t,function(t,n){e.push(n)}),t=e}else{if(!L(t))return[];t=t.slice()}return t.sort(function(t,e){return"color"===e&&"color"!==t&&0===t.indexOf("color")?1:-1}),t},zx.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},zx.findPieceIndex=function(t,e,n){for(var i,o=1/0,r=0,a=e.length;r<a;r++){var s=e[r].value;if(null!=s){if(s===t||"string"==typeof s&&s===t+"")return r;n&&d(s,r)}}for(r=0,a=e.length;r<a;r++){var l=e[r],c=l.interval,u=l.close;if(c){if(c[0]===-1/0){if(Zx(u[1],t,c[1]))return r}else if(c[1]===1/0){if(Zx(u[0],c[0],t))return r}else if(Zx(u[0],c[0],t)&&Zx(u[1],t,c[1]))return r;n&&d(c[0],r),n&&d(c[1],r)}}if(n)return t===1/0?e.length-1:t===-1/0?0:i;function d(e,n){var r=Math.abs(e-t);r<o&&(o=r,i=n)}};var Kx=L,Jx={seriesType:"treemap",reset:function(t,e,n,i){var o=t.getData().tree.root;o.isRemoved()||function t(e,n,i,o){var r=e.getModel(),a=e.getLayout();if(a&&!a.invisible&&a.isInView){var s,l,c=e.getModel("itemStyle"),u=function(t,e,n){var i=x({},e),o=n.designatedVisualItemStyle;return k(["color","colorAlpha","colorSaturation"],function(n){o[n]=e[n];var r=t.get(n);(o[n]=null)!=r&&(i[n]=r)}),i}(c,n,o),d=c.get("borderColor"),h=c.get("borderColorSaturation");null!=h&&(d=null!=(l=s=Qx(u))?je(l,null,null,h):null),e.setVisual("borderColor",d);var f=e.viewChildren;if(f&&f.length){var p=function(t,e,n,i,o,r){if(r&&r.length){var a=eb(e,"color")||null!=o.color&&"none"!==o.color&&(eb(e,"colorAlpha")||eb(e,"colorSaturation"));if(a){var s=e.get("visualMin"),l=e.get("visualMax"),c=n.dataExtent.slice();null!=s&&s<c[0]&&(c[0]=s),null!=l&&l>c[1]&&(c[1]=l);var u=e.get("colorMappingBy"),d={type:a.name,dataExtent:c,visual:a.range};"color"!==d.type||"index"!==u&&"id"!==u?d.mappingMethod="linear":(d.mappingMethod="category",d.loop=!0);var h=new zx(d);return h.__drColorMappingBy=u,h}}}(0,r,a,0,u,f);k(f,function(e,n){if(e.depth>=i.length||e===i[e.depth]){var a=function(t,e,n,i,o,r){var a=x({},e);if(o){var s=o.type,l="color"===s&&o.__drColorMappingBy,c="index"===l?i:"id"===l?r.mapIdToIndex(n.getId()):n.getValue(t.get("visualDimension"));a[s]=o.mapValueToVisual(c)}return a}(r,u,e,n,p,o);t(e,a,i,o)}})}else s=Qx(u),e.setVisual("color",s)}}(o,{},t.getViewRoot().getAncestors(),t)}};function Qx(t){var e=tb(t,"color");if(e){var n=tb(t,"colorAlpha"),i=tb(t,"colorSaturation");return i&&(e=je(e,null,null,i)),n&&(e=$e(e,n)),e}}function tb(t,e){var n=t[e];if(null!=n&&"none"!==n)return n}function eb(t,e){var n=t.get(e);return Kx(n)&&n.length?{name:e,range:n}:null}var nb=Math.max,ib=Math.min,ob=W,rb=k,ab=["itemStyle","borderWidth"],sb=["itemStyle","gapWidth"],lb=["upperLabel","show"],cb=["upperLabel","height"],ub={seriesType:"treemap",reset:function(t,e,n,i){var o=n.getWidth(),r=n.getHeight(),a=t.option,s=ac(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),l=a.size||[],c=bl(ob(s.width,l[0]),o),u=bl(ob(s.height,l[1]),r),d=i&&i.type,h=gx(i,["treemapZoomToNode","treemapRootToNode"],t),f="treemapRender"===d||"treemapMove"===d?i.rootRect:null,p=t.getViewRoot(),g=mx(p);if("treemapMove"!==d){var m="treemapZoomToNode"===d?function(t,e,n,i,o){var r,a=(e||{}).node,s=[i,o];if(!a||a===n)return s;for(var l=i*o,c=l*t.option.zoomToNodeRatio;r=a.parentNode;){for(var u=0,d=r.children,h=0,f=d.length;h<f;h++)u+=d[h].getValue();var p=a.getValue();if(0===p)return s;c*=u/p;var g=r.getModel(),m=g.get(ab);c+=4*m*m+(3*m+Math.max(m,pb(g)))*Math.pow(c,.5),kl<c&&(c=kl),a=r}c<l&&(c=l);var v=Math.pow(c/l,.5);return[i*v,o*v]}(t,h,p,c,u):f?[f.width,f.height]:[c,u],v=a.sort;v&&"asc"!==v&&"desc"!==v&&(v="desc");var y={squareRatio:a.squareRatio,sort:v,leafDepth:a.leafDepth};p.hostTree.clearLayouts();var b={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};p.setLayout(b),function t(e,n,i,o){var r,a;if(!e.isRemoved()){var s=e.getLayout();r=s.width,a=s.height;var l=(p=e.getModel()).get(ab),c=p.get(sb)/2,u=pb(p),d=Math.max(l,u),h=l-c,f=d-c,p=e.getModel();e.setLayout({borderWidth:l,upperHeight:d,upperLabelHeight:u},!0);var g=(r=nb(r-2*h,0))*(a=nb(a-h-f,0)),m=db(e,p,g,n,i,o);if(m.length){var v={x:h,y:f,width:r,height:a},y=ib(r,a),x=1/0,b=[];b.area=0;for(var _=0,w=m.length;_<w;){var S=m[_];b.push(S),b.area+=S.getLayout().area;var C=hb(b,y,n.squareRatio);x=C<=x?(_++,C):(b.area-=b.pop().getLayout().area,fb(b,y,v,c,!1),y=ib(v.width,v.height),b.length=b.area=0,1/0)}if(b.length&&fb(b,y,v,c,!0),!i){var M=p.get("childrenVisibleMin");null!=M&&g<M&&(i=!0)}for(_=0,w=m.length;_<w;_++)t(m[_],n,i,o+1)}}}(p,y,!1,0),b=p.getLayout(),rb(g,function(t,e){var n=(g[e+1]||p).getValue();t.setLayout(x({dataExtent:[n,n],borderWidth:0,upperHeight:0},b))})}var _=t.getData().tree.root;_.setLayout(function(t,e,n){if(e)return{x:e.x,y:e.y};var i={x:0,y:0};if(!n)return i;var o=n.node,r=o.getLayout();if(!r)return i;for(var a=[r.width/2,r.height/2],s=o;s;){var l=s.getLayout();a[0]+=l.x,a[1]+=l.y,s=s.parentNode}return{x:t.width/2-a[0],y:t.height/2-a[1]}}(s,f,h),!0),t.setLayoutInfo(s),function t(e,n,i,o,r){var a=e.getLayout(),s=i[r],l=s&&s===e;if(!(s&&!l||r===i.length&&e!==o)){e.setLayout({isInView:!0,invisible:!l&&!n.intersect(a),isAboveViewRoot:l},!0);var c=new Sn(n.x-a.x,n.y-a.y,n.width,n.height);rb(e.viewChildren||[],function(e){t(e,c,i,o,r+1)})}}(_,new Sn(-s.x,-s.y,o,r),g,p,0)}};function db(t,e,n,i,o,r){var a=t.children||[],s=i.sort;"asc"!==s&&"desc"!==s&&(s=null);var l=null!=i.leafDepth&&i.leafDepth<=r;if(o&&!l)return t.viewChildren=[];!function(t,e){e&&t.sort(function(t,n){var i="asc"===e?t.getValue()-n.getValue():n.getValue()-t.getValue();return 0==i?"asc"===e?t.dataIndex-n.dataIndex:n.dataIndex-t.dataIndex:i})}(a=D(a,function(t){return!t.isRemoved()}),s);var c=function(t,e,n){for(var i=0,o=0,r=e.length;o<r;o++)i+=e[o].getValue();var a=t.get("visualDimension");if(e&&e.length)if("value"===a&&n)s=[e[e.length-1].getValue(),e[0].getValue()],"asc"===n&&s.reverse();else{var s=[1/0,-1/0];rb(e,function(t){var e=t.getValue(a);e<s[0]&&(s[0]=e),e>s[1]&&(s[1]=e)})}else s=[NaN,NaN];return{sum:i,dataExtent:s}}(e,a,s);if(0===c.sum)return t.viewChildren=[];if(c.sum=function(t,e,n,i,o){if(!i)return n;for(var r=t.get("visibleMin"),a=o.length,s=a,l=a-1;0<=l;l--){var c=o["asc"===i?a-l-1:l].getValue();c/n*e<r&&(s=l,n-=c)}return o.splice("asc"===i?0:s,a-s),n}(e,n,c.sum,s,a),0===c.sum)return t.viewChildren=[];for(var u=0,d=a.length;u<d;u++){var h=a[u].getValue()/c.sum*n;a[u].setLayout({area:h})}return l&&(a.length&&t.setLayout({isLeafRoot:!0},!0),a.length=0),t.viewChildren=a,t.setLayout({dataExtent:c.dataExtent},!0),a}function hb(t,e,n){for(var i,o=0,r=1/0,a=0,s=t.length;a<s;a++)(i=t[a].getLayout().area)&&(i<r&&(r=i),o<i&&(o=i));var l=t.area*t.area,c=e*e*n;return l?nb(c*o/l,l/(c*r)):1/0}function fb(t,e,n,i,o){var r=e===n.width?0:1,a=1-r,s=["x","y"],l=["width","height"],c=n[s[r]],u=e?t.area/e:0;(o||u>n[l[a]])&&(u=n[l[a]]);for(var d=0,h=t.length;d<h;d++){var f=t[d],p={},g=u?f.getLayout().area/u:0,m=p[l[a]]=nb(u-2*i,0),v=n[s[r]]+n[l[r]]-c,y=d===h-1||v<g?v:g,x=p[l[r]]=nb(y-2*i,0);p[s[a]]=n[s[a]]+ib(i,m/2),p[s[r]]=c+ib(i,x/2),c+=y,f.setLayout(p,!0)}n[s[a]]+=u,n[l[a]]-=u}function pb(t){return t.get(lb)?t.get(cb):0}function gb(t){return"_EC_"+t}function mb(t){this._directed=t||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={}}of(Jx),nf(ub);var vb=mb.prototype;function yb(t,e){this.id=null==t?"":t,this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=null==e?-1:e}function xb(t,e,n){this.node1=t,this.node2=e,this.dataIndex=null==n?-1:n}function bb(t,e){return{getValue:function(n){var i=this[t][e];return i.get(i.getDimension(n||"value"),this.dataIndex)},setVisual:function(n,i){0<=this.dataIndex&&this[t][e].setItemVisual(this.dataIndex,n,i)},getVisual:function(n,i){return this[t][e].getItemVisual(this.dataIndex,n,i)},setLayout:function(n,i){0<=this.dataIndex&&this[t][e].setItemLayout(this.dataIndex,n,i)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}}function _b(t,e,n,i,o){for(var r=new mb(i),a=0;a<t.length;a++)r.addNode(W(t[a].id,t[a].name,a),a);var s=[],l=[],c=0;for(a=0;a<e.length;a++){var u=e[a],d=u.source,h=u.target;r.addEdge(d,h,c)&&(l.push(u),s.push(W(u.id,d+" > "+h)),c++)}var f,p=n.get("coordinateSystem");if("cartesian2d"===p||"polar"===p)f=Xf(t,n);else{var g=jc.get(p),m=g&&"view"!==g.type&&g.dimensions||[];S(m,"value")<0&&m.concat(["value"]);var v=Wf(t,{coordDimensions:m});(f=new Af(v,n)).initData(t)}var y=new Af(["value"],n);return y.initData(l,s),o&&o(f,y),jy({mainData:f,struct:r,structAttr:"graph",datas:{node:f,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),r.update(),r}vb.type="graph",vb.isDirected=function(){return this._directed},vb.addNode=function(t,e){var n=this._nodesMap;if(!n[gb(t=null==t?""+e:""+t)]){var i=new yb(t,e);return(i.hostGraph=this).nodes.push(i),n[gb(t)]=i}},vb.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},vb.getNodeById=function(t){return this._nodesMap[gb(t)]},vb.addEdge=function(t,e,n){var i=this._nodesMap,o=this._edgesMap;if("number"==typeof t&&(t=this.nodes[t]),"number"==typeof e&&(e=this.nodes[e]),yb.isInstance(t)||(t=i[gb(t)]),yb.isInstance(e)||(e=i[gb(e)]),t&&e){var r=t.id+"-"+e.id,a=new xb(t,e,n);return(a.hostGraph=this)._directed&&(t.outEdges.push(a),e.inEdges.push(a)),t.edges.push(a),t!==e&&e.edges.push(a),this.edges.push(a),o[r]=a}},vb.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},vb.getEdge=function(t,e){yb.isInstance(t)&&(t=t.id),yb.isInstance(e)&&(e=e.id);var n=this._edgesMap;return this._directed?n[t+"-"+e]:n[t+"-"+e]||n[e+"-"+t]},vb.eachNode=function(t,e){for(var n=this.nodes,i=n.length,o=0;o<i;o++)0<=n[o].dataIndex&&t.call(e,n[o],o)},vb.eachEdge=function(t,e){for(var n=this.edges,i=n.length,o=0;o<i;o++)0<=n[o].dataIndex&&0<=n[o].node1.dataIndex&&0<=n[o].node2.dataIndex&&t.call(e,n[o],o)},vb.breadthFirstTraverse=function(t,e,n,i){if(yb.isInstance(e)||(e=this._nodesMap[gb(e)]),e){for(var o="out"===n?"outEdges":"in"===n?"inEdges":"edges",r=0;r<this.nodes.length;r++)this.nodes[r].__visited=!1;if(!t.call(i,e,null))for(var a=[e];a.length;){var s=a.shift(),l=s[o];for(r=0;r<l.length;r++){var c=l[r],u=c.node1===s?c.node2:c.node1;if(!u.__visited){if(t.call(i,u,s))return;a.push(u),u.__visited=!0}}}}},vb.update=function(){for(var t=this.data,e=this.edgeData,n=this.nodes,i=this.edges,o=0,r=n.length;o<r;o++)n[o].dataIndex=-1;for(o=0,r=t.count();o<r;o++)n[t.getRawIndex(o)].dataIndex=o;for(e.filterSelf(function(t){var n=i[e.getRawIndex(t)];return 0<=n.node1.dataIndex&&0<=n.node2.dataIndex}),o=0,r=i.length;o<r;o++)i[o].dataIndex=-1;for(o=0,r=e.count();o<r;o++)i[e.getRawIndex(o)].dataIndex=o},vb.clone=function(){for(var t=new mb(this._directed),e=this.nodes,n=this.edges,i=0;i<e.length;i++)t.addNode(e[i].id,e[i].dataIndex);for(i=0;i<n.length;i++){var o=n[i];t.addEdge(o.node1.id,o.node2.id,o.dataIndex)}return t},yb.prototype={constructor:yb,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(t){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(t)}},xb.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(t)},M(yb,bb("hostGraph","data")),M(xb,bb("hostGraph","edgeData")),mb.Node=yb,mb.Edge=xb,qo(yb),qo(xb);var wb="--\x3e",Sb=function(t){return t.get("autoCurveness")||null},Cb=function(t,e){var n=Sb(t),i=20,o=[];if("number"==typeof n)i=n;else if(L(n))return void(t.__curvenessList=n);i<e&&(i=e);var r=i%2?i+2:i+3;o=[];for(var a=0;a<r;a++)o.push((a%2?a+1:a)/10*(a%2?-1:1));t.__curvenessList=o},Mb=function(t,e,n){var i=[t.id,t.dataIndex].join("."),o=[e.id,e.dataIndex].join(".");return[n.uid,i,o].join(wb)},Tb=function(t){var e=t.split(wb);return[e[0],e[2],e[1]].join(wb)},kb=function(t,e){var n=e.__edgeMap;return n[t]?n[t].length:0};function Ab(t,e,n,i){var o=Sb(e),r=L(o);if(!o)return null;var a=function(t,e){var n=Mb(t.node1,t.node2,e);return e.__edgeMap[n]}(t,e);if(!a)return null;for(var s=-1,l=0;l<a.length;l++)if(a[l]===n){s=l;break}var c=function(t,e){return kb(Mb(t.node1,t.node2,e),e)+kb(Mb(t.node2,t.node1,e),e)}(t,e);Cb(e,c),t.lineStyle=t.lineStyle||{};var u=Mb(t.node1,t.node2,e),d=e.__curvenessList,h=r||c%2?0:1;if(a.isForward)return d[h+s];var f=Tb(u),p=kb(f,e),g=d[s+p+h];return i?r?o&&0===o[0]?(p+h)%2?g:-g:((p%2?0:1)+h)%2?g:-g:(p+h)%2?g:-g:d[s+p+h]}var Ib=cf({type:"series.graph",init:function(t){Ib.superApply(this,"init",arguments);var e=this;function n(){return e._categoriesData}this.legendVisualProvider=new Sv(n,n),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},mergeOption:function(t){Ib.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(t){Ib.superApply(this,"mergeDefaultAndTheme",arguments),Ao(t,["edgeLabel"],["show"])},getInitialData:function(t,e){var n=t.edges||t.links||[],i=t.data||t.nodes||[],o=this;if(i&&n){!function(t){Sb(t)&&(t.__curvenessList=[],t.__edgeMap={},Cb(t))}(this);var r=_b(i,n,this,!0,function(t,n){t.wrapMethod("getItemModel",function(t){var e=o._categoriesModels[t.getShallow("category")];return e&&(e.parentModel=t.parentModel,t.parentModel=e),t});var i=o.getModel("edgeLabel"),r=new fl({label:i.option},i.parentModel,e),a=o.getModel("emphasis.edgeLabel"),s=new fl({emphasis:{label:a.option}},a.parentModel,e);function l(t){return(t=this.parsePath(t))&&"label"===t[0]?r:t&&"emphasis"===t[0]&&"label"===t[1]?s:this.parentModel}n.wrapMethod("getItemModel",function(t){return t.customizeGetParent(l),t})});return k(r.edges,function(t){!function(t,e,n,i){if(Sb(n)){var o=Mb(t,e,n),r=n.__edgeMap,a=r[Tb(o)];r[o]&&!a?r[o].isForward=!0:a&&r[o]&&(a.isForward=!0,r[o].isForward=!1),r[o]=r[o]||[],r[o].push(i)}}(t.node1,t.node2,this,t.dataIndex)},this),r.data}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(t,e,n){if("edge"!==n)return Ib.superApply(this,"formatTooltip",arguments);var i=this.getData(),o=this.getDataParams(t,n),r=i.graph.getEdgeByIndex(t),a=i.getName(r.node1.dataIndex),s=i.getName(r.node2.dataIndex),l=[];return null!=a&&l.push(a),null!=s&&l.push(s),l=Gl(l.join(" > ")),o.value&&(l+=" : "+Gl(o.value)),l},_updateCategoriesData:function(){var t=A(this.option.categories||[],function(t){return null!=t.value?t:x({value:0},t)}),e=new Af(["value"],this);e.initData(t),this._categoriesData=e,this._categoriesModels=e.mapArray(function(t){return e.getItemModel(t,!0)})},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},isAnimationEnabled:function(){return Ib.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}}}}),Db=qa.prototype,Pb=Ka.prototype;function Eb(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var Nb=fs({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(t,e){this[Eb(e)?"_buildPathLine":"_buildPathCurve"](t,e)},_buildPathLine:Db.buildPath,_buildPathCurve:Pb.buildPath,pointAt:function(t){return this[Eb(this.shape)?"_pointAtLine":"_pointAtCurve"](t)},_pointAtLine:Db.pointAt,_pointAtCurve:Pb.pointAt,tangentAt:function(t){var e=this.shape,n=Eb(e)?[e.x2-e.x1,e.y2-e.y1]:this._tangentAtCurve(t);return pt(n,n)},_tangentAtCurve:Pb.tangentAt}),Lb=["fromSymbol","toSymbol"];function Rb(t){return"_"+t+"Type"}function Ob(t,e,n){var i=e.getItemVisual(n,t);if(i&&"none"!==i){var o=e.getItemVisual(n,"color"),r=e.getItemVisual(n,t+"Size"),a=e.getItemVisual(n,t+"Rotate");L(r)||(r=[r,r]);var s=eg(i,-r[0]/2,-r[1]/2,r[0],r[1],o);return s.__specifiedRotation=null==a||isNaN(a)?void 0:+a*Math.PI/180||0,s.name=t,s}}function Bb(t,e){t.x1=e[0][0],t.y1=e[0][1],t.x2=e[1][0],t.y2=e[1][1],t.percent=1;var n=e[2];n?(t.cpx1=n[0],t.cpy1=n[1]):(t.cpx1=NaN,t.cpy1=NaN)}function zb(t,e,n){Cn.call(this),this._createLine(t,e,n)}var Vb=zb.prototype;function Fb(t){this._ctor=t||zb,this.group=new Cn}Vb.beforeUpdate=function(){var t=this.childOfName("fromSymbol"),e=this.childOfName("toSymbol"),n=this.childOfName("label");if(t||e||!n.ignore){for(var i=1,o=this.parent;o;)o.scale&&(i/=o.scale[0]),o=o.parent;var r=this.childOfName("line");if(this.__dirty||r.__dirty){var a,s=r.shape.percent,l=r.pointAt(0),c=r.pointAt(s),u=ut([],c,l);if(pt(u,u),t){if(t.attr("position",l),null==(a=t.__specifiedRotation)){var d=r.tangentAt(0);t.attr("rotation",Math.PI/2-Math.atan2(d[1],d[0]))}else t.attr("rotation",a);t.attr("scale",[i*s,i*s])}if(e&&(e.attr("position",c),null==(a=e.__specifiedRotation)?(d=r.tangentAt(1),e.attr("rotation",-Math.PI/2-Math.atan2(d[1],d[0]))):e.attr("rotation",a),e.attr("scale",[i*s,i*s])),!n.ignore){var h,f,p,g;n.attr("position",c);var m=n.__labelDistance,v=m[0]*i,y=m[1]*i,x=s/2,b=[(d=r.tangentAt(x))[1],-d[0]],_=r.pointAt(x);0<b[1]&&(b[0]=-b[0],b[1]=-b[1]);var w,S=d[0]<0?-1:1;if("start"!==n.__position&&"end"!==n.__position){var C=-Math.atan2(d[1],d[0]);c[0]<l[0]&&(C=Math.PI+C),n.attr("rotation",C)}switch(n.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":w=-y,p="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":w=y,p="top";break;default:w=0,p="middle"}switch(n.__position){case"end":h=[u[0]*v+c[0],u[1]*y+c[1]],f=.8<u[0]?"left":u[0]<-.8?"right":"center",p=.8<u[1]?"top":u[1]<-.8?"bottom":"middle";break;case"start":h=[-u[0]*v+l[0],-u[1]*y+l[1]],f=.8<u[0]?"right":u[0]<-.8?"left":"center",p=.8<u[1]?"bottom":u[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":h=[v*S+l[0],l[1]+w],f=d[0]<0?"right":"left",g=[-v*S,-w];break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":h=[_[0],_[1]+w],f="center",g=[0,-w];break;case"insideEndTop":case"insideEnd":case"insideEndBottom":h=[-v*S+c[0],c[1]+w],f=0<=d[0]?"right":"left",g=[v*S,-w]}n.attr({style:{textVerticalAlign:n.__verticalAlign||p,textAlign:n.__textAlign||f},position:h,scale:[i,i],origin:g})}}}},Vb._createLine=function(t,e,n){var i=t.hostModel,o=function(t){var e=new Nb({name:"line",subPixelOptimize:!0});return Bb(e.shape,t),e}(t.getItemLayout(e));o.shape.percent=0,Zs(o,{shape:{percent:1}},i,e),this.add(o);var r=new Da({name:"label",lineLabelOriginalOpacity:1});this.add(r),k(Lb,function(n){var i=Ob(n,t,e);this.add(i),this[Rb(n)]=t.getItemVisual(e,n)},this),this._updateCommonStl(t,e,n)},Vb.updateData=function(t,e,n){var i=t.hostModel,o=this.childOfName("line"),r=t.getItemLayout(e),a={shape:{}};Bb(a.shape,r),Xs(o,a,i,e),k(Lb,function(n){var i=t.getItemVisual(e,n),o=Rb(n);if(this[o]!==i){this.remove(this.childOfName(n));var r=Ob(n,t,e);this.add(r)}this[o]=i},this),this._updateCommonStl(t,e,n)},Vb._updateCommonStl=function(t,e,n){var i=t.hostModel,o=this.childOfName("line"),r=n&&n.lineStyle,a=n&&n.hoverLineStyle,s=n&&n.labelModel,l=n&&n.hoverLabelModel;if(!n||t.hasItemOption){var c=t.getItemModel(e);r=c.getModel("lineStyle").getLineStyle(),a=c.getModel("emphasis.lineStyle").getLineStyle(),s=c.getModel("label"),l=c.getModel("emphasis.label")}var u=t.getItemVisual(e,"color"),d=U(t.getItemVisual(e,"opacity"),r.opacity,1);o.useStyle(b({strokeNoScale:!0,fill:"none",stroke:u,opacity:d},r)),o.hoverStyle=a,k(Lb,function(t){var e=this.childOfName(t);e&&(e.setColor(u),e.setStyle({opacity:d}))},this);var h,f,p=s.getShallow("show"),g=l.getShallow("show"),m=this.childOfName("label");if((p||g)&&(h=u||"#000",null==(f=i.getFormattedLabel(e,"normal",t.dataType)))){var v=i.getRawValue(e);f=null==v?t.getName(e):isFinite(v)?_l(v):v}var y=p?f:null,x=g?G(i.getFormattedLabel(e,"emphasis",t.dataType),f):null,_=m.style;if(null!=y||null!=x){Hs(m.style,s,{text:y},{autoColor:h}),m.__textAlign=_.textAlign,m.__verticalAlign=_.textVerticalAlign,m.__position=s.get("position")||"middle";var w=s.get("distance");L(w)||(w=[w,w]),m.__labelDistance=w}m.hoverStyle=null!=x?{text:x,textFill:l.getTextColor(!0),fontStyle:l.getShallow("fontStyle"),fontWeight:l.getShallow("fontWeight"),fontSize:l.getShallow("fontSize"),fontFamily:l.getShallow("fontFamily")}:{text:null},m.ignore=!p&&!g,Rs(this)},Vb.highlight=function(){this.trigger("emphasis")},Vb.downplay=function(){this.trigger("normal")},Vb.updateLayout=function(t,e){this.setLinePoints(t.getItemLayout(e))},Vb.setLinePoints=function(t){var e=this.childOfName("line");Bb(e.shape,t),e.dirty()},C(zb,Cn);var Hb=Fb.prototype;function Wb(t){var e=t.hostModel;return{lineStyle:e.getModel("lineStyle").getLineStyle(),hoverLineStyle:e.getModel("emphasis.lineStyle").getLineStyle(),labelModel:e.getModel("label"),hoverLabelModel:e.getModel("emphasis.label")}}function Gb(t){return isNaN(t[0])||isNaN(t[1])}function Ub(t){return!Gb(t[0])&&!Gb(t[1])}function jb(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=t.option.nodeScaleRatio,i=e.scale,o=i&&i[0]||1;return((e.getZoom()-1)*n+1)/o}function $b(t){var e=t.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}Hb.isPersistent=function(){return!0},Hb.updateData=function(t){var e=this,n=e.group,i=e._lineData;e._lineData=t,i||n.removeAll();var o=Wb(t);t.diff(i).add(function(n){!function(t,e,n,i){if(Ub(e.getItemLayout(n))){var o=new t._ctor(e,n,i);e.setItemGraphicEl(n,o),t.group.add(o)}}(e,t,n,o)}).update(function(n,r){!function(t,e,n,i,o,r){var a=e.getItemGraphicEl(i);if(!Ub(n.getItemLayout(o)))return t.group.remove(a);a?a.updateData(n,o,r):a=new t._ctor(n,o,r),n.setItemGraphicEl(o,a),t.group.add(a)}(e,i,t,r,n,o)}).remove(function(t){n.remove(i.getItemGraphicEl(t))}).execute()},Hb.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,n){e.updateLayout(t,n)},this)},Hb.incrementalPrepareUpdate=function(t){this._seriesScope=Wb(t),this._lineData=null,this.group.removeAll()},Hb.incrementalUpdate=function(t,e){function n(t){t.isGroup||function(t){return t.animators&&0<t.animators.length}(t)||(t.incremental=t.useHoverLayer=!0)}for(var i=t.start;i<t.end;i++)if(Ub(e.getItemLayout(i))){var o=new this._ctor(e,i,this._seriesScope);o.traverse(n),this.group.add(o),e.setItemGraphicEl(i,o)}},Hb.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},Hb._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()};var qb=[],Yb=[],Xb=[],Zb=vr,Kb=yt,Jb=Math.abs;function Qb(t,e,n){for(var i,o=t[0],r=t[1],a=t[2],s=1/0,l=n*n,c=.1,u=.1;u<=.9;u+=.1)qb[0]=Zb(o[0],r[0],a[0],u),qb[1]=Zb(o[1],r[1],a[1],u),(f=Jb(Kb(qb,e)-l))<s&&(s=f,i=u);for(var d=0;d<32;d++){var h=i+c;Yb[0]=Zb(o[0],r[0],a[0],i),Yb[1]=Zb(o[1],r[1],a[1],i),Xb[0]=Zb(o[0],r[0],a[0],h),Xb[1]=Zb(o[1],r[1],a[1],h);var f=Kb(Yb,e)-l;if(Jb(f)<.01)break;var p=Kb(Xb,e)-l;c/=2,f<0?0<=p?i+=c:i-=c:0<=p?i-=c:i+=c}return i}function t_(t,e){var n=[],i=br,o=[[],[],[]],r=[[],[]],a=[];e/=2,t.eachEdge(function(t,s){var l=t.getLayout(),c=t.getVisual("fromSymbol"),u=t.getVisual("toSymbol");l.__original||(l.__original=[at(l[0]),at(l[1])],l[2]&&l.__original.push(at(l[2])));var d=l.__original;if(null!=l[2]){if(rt(o[0],d[0]),rt(o[1],d[2]),rt(o[2],d[1]),c&&"none"!==c){var h=$b(t.node1),f=Qb(o,d[0],h*e);i(o[0][0],o[1][0],o[2][0],f,n),o[0][0]=n[3],o[1][0]=n[4],i(o[0][1],o[1][1],o[2][1],f,n),o[0][1]=n[3],o[1][1]=n[4]}u&&"none"!==u&&(h=$b(t.node2),f=Qb(o,d[1],h*e),i(o[0][0],o[1][0],o[2][0],f,n),o[1][0]=n[1],o[2][0]=n[2],i(o[0][1],o[1][1],o[2][1],f,n),o[1][1]=n[1],o[2][1]=n[2]),rt(l[0],o[0]),rt(l[1],o[2]),rt(l[2],o[1])}else rt(r[0],d[0]),rt(r[1],d[1]),ut(a,r[1],r[0]),pt(a,a),c&&"none"!==c&&(h=$b(t.node1),ct(r[0],r[0],a,h*e)),u&&"none"!==u&&(h=$b(t.node2),ct(r[1],r[1],a,-h*e)),rt(l[0],r[0]),rt(l[1],r[1])})}var e_="__focusNodeAdjacency",n_="__unfocusNodeAdjacency",i_=["itemStyle","opacity"],o_=["lineStyle","opacity"];function r_(t,e){var n=t.getVisual("opacity");return null!=n?n:t.getModel().get(e)}function a_(t,e,n){var i=t.getGraphicEl(),o=r_(t,e);null!=n&&(null==o&&(o=1),o*=n),i.downplay&&i.downplay(),i.traverse(function(t){if(!t.isGroup){var e=t.lineLabelOriginalOpacity;null!=e&&null==n||(e=o),t.setStyle("opacity",e)}})}function s_(t,e){var n=r_(t,e),i=t.getGraphicEl();i.traverse(function(t){t.isGroup||t.setStyle("opacity",n)}),i.highlight&&i.highlight()}function l_(t){return t instanceof Array||(t=[t,t]),t}function c_(t){var e=t.coordinateSystem;if(!e||"view"===e.type){var n=t.getGraph();n.eachNode(function(t){var e=t.getModel();t.setLayout([+e.get("x"),+e.get("y")])}),u_(n,t)}}function u_(t,e){t.eachEdge(function(t,n){var i=U(t.getModel().get("lineStyle.curveness"),-Ab(t,e,n,!0),0),o=at(t.node1.getLayout()),r=at(t.node2.getLayout()),a=[o,r];+i&&a.push([(o[0]+r[0])/2-(o[1]-r[1])*i,(o[1]+r[1])/2-(r[0]-o[0])*i]),t.setLayout(a)})}uf({type:"graph",init:function(t,e){var n=new Eg,i=new Fb,o=this.group;this._controller=new hy(e.getZr()),this._controllerHost={target:o},o.add(n.group),o.add(i.group),this._symbolDraw=n,this._lineDraw=i,this._firstRender=!0},render:function(t,e,n){var i=this,o=t.coordinateSystem;this._model=t;var r=this._symbolDraw,a=this._lineDraw,s=this.group;if("view"===o.type){var l={position:o.position,scale:o.scale};this._firstRender?s.attr(l):Xs(s,l,t)}t_(t.getGraph(),jb(t));var c=t.getData();r.updateData(c);var u=t.getEdgeData();a.updateData(u),this._updateNodeAndLinkScale(),this._updateController(t,e,n),clearTimeout(this._layoutTimeout);var d=t.forceLayout,h=t.get("force.layoutAnimation");d&&this._startForceLayoutIteration(d,h),c.eachItemGraphicEl(function(e,o){var r=c.getItemModel(o);e.off("drag").off("dragend");var a=r.get("draggable");a&&e.on("drag",function(){d&&(d.warmUp(),this._layouting||this._startForceLayoutIteration(d,h),d.setFixed(o),c.setItemLayout(o,e.position))},this).on("dragend",function(){d&&d.setUnfixed(o)},this),e.setDraggable(a&&d),e[e_]&&e.off("mouseover",e[e_]),e[n_]&&e.off("mouseout",e[n_]),r.get("focusNodeAdjacency")&&(e.on("mouseover",e[e_]=function(){i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,dataIndex:e.dataIndex})}),e.on("mouseout",e[n_]=function(){i._dispatchUnfocus(n)}))},this),c.graph.eachEdge(function(e){var o=e.getGraphicEl();o[e_]&&o.off("mouseover",o[e_]),o[n_]&&o.off("mouseout",o[n_]),e.getModel().get("focusNodeAdjacency")&&(o.on("mouseover",o[e_]=function(){i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,edgeDataIndex:e.dataIndex})}),o.on("mouseout",o[n_]=function(){i._dispatchUnfocus(n)}))});var f="circular"===t.get("layout")&&t.get("circular.rotateLabel"),p=c.getLayout("cx"),g=c.getLayout("cy");c.eachItemGraphicEl(function(t,e){var n=c.getItemModel(e).get("label.rotate")||0,i=t.getSymbolPath();if(f){var o=c.getItemLayout(e),r=Math.atan2(o[1]-g,o[0]-p);r<0&&(r=2*Math.PI+r);var a=o[0]<p;a&&(r-=Math.PI);var s=a?"left":"right";Fs(i,{textRotation:-r,textPosition:s,textOrigin:"center"},{textPosition:s})}else Fs(i,{textRotation:n*=Math.PI/180})}),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={},this._clearTimer()},_dispatchUnfocus:function(t,e){var n=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){n._unfocusDelayTimer=null,t.dispatchAction({type:"unfocusNodeAdjacency",seriesId:n._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(t,e,n,i){var o=t.getData().graph,r=i.edgeDataIndex,a=o.getNodeByIndex(i.dataIndex),s=o.getEdgeByIndex(r);(a||s)&&(o.eachNode(function(t){a_(t,i_,.1)}),o.eachEdge(function(t){a_(t,o_,.1)}),a&&(s_(a,i_),k(a.edges,function(t){t.dataIndex<0||(s_(t,o_),s_(t.node1,i_),s_(t.node2,i_))})),s&&(s_(s,o_),s_(s.node1,i_),s_(s.node2,i_)))},unfocusNodeAdjacency:function(t,e,n,i){var o=t.getData().graph;o.eachNode(function(t){a_(t,i_)}),o.eachEdge(function(t){a_(t,o_)})},_startForceLayoutIteration:function(t,e){var n=this;!function i(){t.step(function(t){n.updateLayout(n._model),(n._layouting=!t)&&(e?n._layoutTimeout=setTimeout(i,16):i())})}()},_updateController:function(t,e,n){var i=this._controller,o=this._controllerHost,r=this.group;i.setPointerChecker(function(e,i,o){var a=r.getBoundingRect();return a.applyTransform(r.transform),a.contain(i,o)&&!Cy(e,n,t)}),"view"===t.coordinateSystem.type?(i.enable(t.get("roam")),o.zoomLimit=t.get("scaleLimit"),o.zoom=t.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",function(e){_y(o,e.dx,e.dy),n.dispatchAction({seriesId:t.id,type:"graphRoam",dx:e.dx,dy:e.dy})}).on("zoom",function(e){wy(o,e.scale,e.originX,e.originY),n.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),this._updateNodeAndLinkScale(),t_(t.getGraph(),jb(t)),this._lineDraw.updateLayout()},this)):i.disable()},_updateNodeAndLinkScale:function(){var t=this._model,e=t.getData(),n=jb(t),i=[n,n];e.eachItemGraphicEl(function(t,e){t.attr("scale",i)})},updateLayout:function(t){t_(t.getGraph(),jb(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}}),tf({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),tf({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){}),tf({type:"graphRoam",event:"graphRoam",update:"none"},function(t,e){e.eachComponent({mainType:"series",query:t},function(e){var n=Ey(e.coordinateSystem,t);e.setCenter&&e.setCenter(n.center),e.setZoom&&e.setZoom(n.zoom)})});var d_=Math.PI,h_=[];function f_(t,e){var n=t.coordinateSystem;if(!n||"view"===n.type){var i=n.getBoundingRect(),o=t.getData(),r=o.graph,a=i.width/2+i.x,s=i.height/2+i.y,l=Math.min(i.width,i.height)/2,c=o.count();o.setLayout({cx:a,cy:s}),c&&(p_[e](t,n,r,o,l,a,s,c),r.eachEdge(function(e,n){var i,o=U(e.getModel().get("lineStyle.curveness"),Ab(e,t,n),0),r=at(e.node1.getLayout()),l=at(e.node2.getLayout());+o&&(i=[a*(o*=3)+(r[0]+l[0])/2*(1-o),s*o+(r[1]+l[1])/2*(1-o)]),e.setLayout([r,l,i])}))}}var p_={value:function(t,e,n,i,o,r,a,s){var l=0,c=i.getSum("value"),u=2*Math.PI/(c||s);n.eachNode(function(t){var e=t.getValue("value"),n=u*(c?e:1)/2;l+=n,t.setLayout([o*Math.cos(l)+r,o*Math.sin(l)+a]),l+=n})},symbolSize:function(t,e,n,i,o,r,a,s){var l=0;h_.length=s;var c=jb(t);n.eachNode(function(t){var e=$b(t);isNaN(e)&&(e=2),e<0&&(e=0),e*=c;var n=Math.asin(e/2/o);isNaN(n)&&(n=d_/2),h_[t.dataIndex]=n,l+=2*n});var u=(2*d_-l)/s/2,d=0;n.eachNode(function(t){var e=u+h_[t.dataIndex];d+=e,t.setLayout([o*Math.cos(d)+r,o*Math.sin(d)+a]),d+=e})}},g_=ct;Qh(function(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.eachSeriesByType("graph",function(t){var n=t.getCategoriesData(),i=t.getGraph().data,o=n.mapArray(n.getName);i.filterSelf(function(t){var n=i.getItemModel(t).getShallow("category");if(null!=n){"number"==typeof n&&(n=o[n]);for(var r=0;r<e.length;r++)if(!e[r].isSelected(n))return!1}return!0})},this)}),of(rm("graph","circle",null)),of(function(t){var e={};t.eachSeriesByType("graph",function(t){var n=t.getCategoriesData(),i=t.getData(),o={};n.each(function(i){var r=n.getName(i);o["ec-"+r]=i;var a=n.getItemModel(i),s=a.get("itemStyle.color")||t.getColorFromPalette(r,e);n.setItemVisual(i,"color",s);for(var l=["opacity","symbol","symbolSize","symbolKeepAspect"],c=0;c<l.length;c++){var u=a.getShallow(l[c],!0);null!=u&&n.setItemVisual(i,l[c],u)}}),n.count()&&i.each(function(t){var e=i.getItemModel(t).getShallow("category");if(null!=e){"string"==typeof e&&(e=o["ec-"+e]);for(var r=["color","opacity","symbol","symbolSize","symbolKeepAspect"],a=0;a<r.length;a++)null==i.getItemVisual(t,r[a],!0)&&i.setItemVisual(t,r[a],n.getItemVisual(e,r[a]))}})})}),of(function(t){t.eachSeriesByType("graph",function(t){var e=t.getGraph(),n=t.getEdgeData(),i=l_(t.get("edgeSymbol")),o=l_(t.get("edgeSymbolSize")),r="lineStyle.color".split("."),a="lineStyle.opacity".split(".");n.setVisual("fromSymbol",i&&i[0]),n.setVisual("toSymbol",i&&i[1]),n.setVisual("fromSymbolSize",o&&o[0]),n.setVisual("toSymbolSize",o&&o[1]),n.setVisual("color",t.get(r)),n.setVisual("opacity",t.get(a)),n.each(function(t){var i=n.getItemModel(t),o=e.getEdgeByIndex(t),s=l_(i.getShallow("symbol",!0)),l=l_(i.getShallow("symbolSize",!0)),c=i.get(r),u=i.get(a);switch(c){case"source":c=o.node1.getVisual("color");break;case"target":c=o.node2.getVisual("color")}s[0]&&o.setVisual("fromSymbol",s[0]),s[1]&&o.setVisual("toSymbol",s[1]),l[0]&&o.setVisual("fromSymbolSize",l[0]),l[1]&&o.setVisual("toSymbolSize",l[1]),o.setVisual("color",c),o.setVisual("opacity",u)})})}),nf(function(t,e){t.eachSeriesByType("graph",function(t){var e=t.get("layout"),n=t.coordinateSystem;if(n&&"view"!==n.type){var i=t.getData(),o=[];k(n.dimensions,function(t){o=o.concat(i.mapDimension(t,!0))});for(var r=0;r<i.count();r++){for(var a=[],s=!1,l=0;l<o.length;l++){var c=i.get(o[l],r);isNaN(c)||(s=!0),a.push(c)}i.setItemLayout(r,s?n.dataToPoint(a):[NaN,NaN])}u_(i.graph,t)}else e&&"none"!==e||c_(t)})}),nf(dh.VISUAL.POST_CHART_LAYOUT,function(t){t.eachSeriesByType("graph",function(t){"circular"===t.get("layout")&&f_(t,"symbolSize")})}),nf(function(t){t.eachSeriesByType("graph",function(t){if(!(d=t.coordinateSystem)||"view"===d.type)if("force"===t.get("layout")){var e=t.preservedPoints||{},n=t.getGraph(),i=n.data,o=n.edgeData,r=t.getModel("force"),a=r.get("initLayout");t.preservedPoints?i.each(function(t){var n=i.getId(t);i.setItemLayout(t,e[n]||[NaN,NaN])}):a&&"none"!==a?"circular"===a&&f_(t,"value"):c_(t);var s=i.getDataExtent("value"),l=o.getDataExtent("value"),c=r.get("repulsion"),u=r.get("edgeLength");L(c)||(c=[c,c]),L(u)||(u=[u,u]),u=[u[1],u[0]];var d,h=i.mapArray("value",function(t,e){var n=i.getItemLayout(e),o=xl(t,s,c);return isNaN(o)&&(o=(c[0]+c[1])/2),{w:o,rep:o,fixed:i.getItemModel(e).get("fixed"),p:!n||isNaN(n[0])||isNaN(n[1])?null:n}}),f=o.mapArray("value",function(e,i){var o=n.getEdgeByIndex(i),r=xl(e,l,u);isNaN(r)&&(r=(u[0]+u[1])/2);var a=o.getModel(),s=U(a.get("lineStyle.curveness"),-Ab(o,t,i,!0),0);return{n1:h[o.node1.dataIndex],n2:h[o.node2.dataIndex],d:r,curveness:s,ignoreForceLayout:a.get("ignoreForceLayout")}}),p=(d=t.coordinateSystem).getBoundingRect(),g=function(t,e,n){for(var i=n.rect,o=i.width,r=i.height,a=[i.x+o/2,i.y+r/2],s=null==n.gravity?.1:n.gravity,l=0;l<t.length;l++){var c=t[l];c.p||(c.p=ot(o*(Math.random()-.5)+a[0],r*(Math.random()-.5)+a[1])),c.pp=at(c.p),c.edges=null}var u=null==n.friction?.6:n.friction,d=u;return{warmUp:function(){d=.8*u},setFixed:function(e){t[e].fixed=!0},setUnfixed:function(e){t[e].fixed=!1},step:function(n){for(var i=[],o=t.length,r=0;r<e.length;r++){var l=e[r];if(!l.ignoreForceLayout){var c=l.n1;ut(i,(p=l.n2).p,c.p);var u=dt(i)-l.d,h=p.w/(c.w+p.w);isNaN(h)&&(h=0),pt(i,i),c.fixed||g_(c.p,c.p,i,h*u*d),p.fixed||g_(p.p,p.p,i,-(1-h)*u*d)}}for(r=0;r<o;r++)(v=t[r]).fixed||(ut(i,a,v.p),g_(v.p,v.p,i,s*d));for(r=0;r<o;r++){c=t[r];for(var f=r+1;f<o;f++){var p;ut(i,(p=t[f]).p,c.p),0===(u=dt(i))&&(st(i,Math.random()-.5,Math.random()-.5),u=1);var g=(c.rep+p.rep)/u/u;c.fixed||g_(c.pp,c.pp,i,g),p.fixed||g_(p.pp,p.pp,i,-g)}}var m=[];for(r=0;r<o;r++){var v;(v=t[r]).fixed||(ut(m,v.p,v.pp),g_(v.p,v.p,m,d),rt(v.pp,v.p))}d*=.992,n&&n(t,e,d<.01)}}}(h,f,{rect:p,gravity:r.get("gravity"),friction:r.get("friction")}),m=g.step;g.step=function(t){for(var o=0,r=h.length;o<r;o++)h[o].fixed&&rt(h[o].p,n.getNodeByIndex(o).getLayout());m(function(o,r,a){for(var s=0,l=o.length;s<l;s++)o[s].fixed||n.getNodeByIndex(s).setLayout(o[s].p),e[i.getId(s)]=o[s].p;for(s=0,l=r.length;s<l;s++){var c=r[s],u=n.getEdgeByIndex(s),d=c.n1.p,h=c.n2.p,f=u.getLayout();(f=f?f.slice():[])[0]=f[0]||[],f[1]=f[1]||[],rt(f[0],d),rt(f[1],h),+c.curveness&&(f[2]=[(d[0]+h[0])/2-(d[1]-h[1])*c.curveness,(d[1]+h[1])/2-(h[0]-d[0])*c.curveness]),u.setLayout(f)}t&&t(a)})},t.forceLayout=g,t.preservedPoints=e,g.step()}else t.forceLayout=null})}),ef("graphView",{create:function(t,e){var n=[];return t.eachSeriesByType("graph",function(t){var i=t.get("coordinateSystem");if(!i||"view"===i){var o=t.getData(),r=[],a=[];Ir(o.mapArray(function(t){var e=o.getItemModel(t);return[+e.get("x"),+e.get("y")]}),r,a),a[0]-r[0]==0&&(a[0]+=1,r[0]-=1),a[1]-r[1]==0&&(a[1]+=1,r[1]-=1);var s=(a[0]-r[0])/(a[1]-r[1]),l=function(t,e,n){var i=t.getBoxLayoutParams();return i.aspect=n,ac(i,{width:e.getWidth(),height:e.getHeight()})}(t,e,s);isNaN(s)&&(r=[l.x,l.y],a=[l.x+l.width,l.y+l.height]);var c=a[0]-r[0],u=a[1]-r[1],d=l.width,h=l.height,f=t.coordinateSystem=new Ry;f.zoomLimit=t.get("scaleLimit"),f.setBoundingRect(r[0],r[1],c,u),f.setViewRect(l.x,l.y,d,h),f.setCenter(t.get("center")),f.setZoom(t.get("zoom")),n.push(f)}}),n}}),Gu.extend({type:"series.gauge",getInitialData:function(t,e){return _v(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});var m_=fa.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(t,e){var n=Math.cos,i=Math.sin,o=e.r,r=e.width,a=e.angle,s=e.x-n(a)*r*(o/3<=r?1:2),l=e.y-i(a)*r*(o/3<=r?1:2);a=e.angle-Math.PI/2,t.moveTo(s,l),t.lineTo(e.x+n(a)*r,e.y+i(a)*r),t.lineTo(e.x+n(e.angle)*o,e.y+i(e.angle)*o),t.lineTo(e.x-n(a)*r,e.y-i(a)*r),t.lineTo(s,l)}});function v_(t,e){return e&&("string"==typeof e?t=e.replace("{value}",null!=t?t:""):"function"==typeof e&&(t=e(t))),t}var y_=2*Math.PI,x_=(nd.extend({type:"gauge",render:function(t,e,n){this.group.removeAll();var i=t.get("axisLine.lineStyle.color"),o=function(t,e){var n=t.get("center"),i=e.getWidth(),o=e.getHeight(),r=Math.min(i,o);return{cx:bl(n[0],e.getWidth()),cy:bl(n[1],e.getHeight()),r:bl(t.get("radius"),r/2)}}(t,n);this._renderMain(t,e,n,i,o)},dispose:function(){},_renderMain:function(t,e,n,i,o){for(var r=this.group,a=t.getModel("axisLine"),s=a.getModel("lineStyle"),l=t.get("clockwise"),c=-t.get("startAngle")/180*Math.PI,u=((g=-t.get("endAngle")/180*Math.PI)-c)%y_,d=c,h=s.get("width"),f=a.get("show"),p=0;f&&p<i.length;p++){var g,m=Math.min(Math.max(i[p][0],0),1),v=new La({shape:{startAngle:d,endAngle:g=c+u*m,cx:o.cx,cy:o.cy,clockwise:l,r0:o.r-h,r:o.r},silent:!0});v.setStyle({fill:i[p][1]}),v.setStyle(s.getLineStyle(["color","borderWidth","borderColor"])),r.add(v),d=g}function y(t){if(t<=0)return i[0][1];for(var e=0;e<i.length;e++)if(i[e][0]>=t&&(0===e?0:i[e-1][0])<t)return i[e][1];return i[e-1][1]}if(!l){var x=c;c=g,g=x}this._renderTicks(t,e,n,y,o,c,g,l),this._renderPointer(t,e,n,y,o,c,g,l),this._renderTitle(t,e,n,y,o),this._renderDetail(t,e,n,y,o)},_renderTicks:function(t,e,n,i,o,r,a,s){for(var l=this.group,c=o.cx,u=o.cy,d=o.r,h=+t.get("min"),f=+t.get("max"),p=t.getModel("splitLine"),g=t.getModel("axisTick"),m=t.getModel("axisLabel"),v=t.get("splitNumber"),y=g.get("splitNumber"),x=bl(p.get("length"),d),b=bl(g.get("length"),d),_=r,w=(a-r)/v,S=w/y,C=p.getModel("lineStyle").getLineStyle(),M=g.getModel("lineStyle").getLineStyle(),T=0;T<=v;T++){var k=Math.cos(_),A=Math.sin(_);if(p.get("show")){var I=new qa({shape:{x1:k*d+c,y1:A*d+u,x2:k*(d-x)+c,y2:A*(d-x)+u},style:C,silent:!0});"auto"===C.stroke&&I.setStyle({stroke:i(T/v)}),l.add(I)}if(m.get("show")){var D=v_(_l(T/v*(f-h)+h),m.get("formatter")),P=m.get("distance"),E=i(T/v);l.add(new Da({style:Hs({},m,{text:D,x:k*(d-x-P)+c,y:A*(d-x-P)+u,textVerticalAlign:A<-.4?"top":.4<A?"bottom":"middle",textAlign:k<-.4?"left":.4<k?"right":"center"},{autoColor:E}),silent:!0}))}if(g.get("show")&&T!==v){for(var N=0;N<=y;N++){k=Math.cos(_),A=Math.sin(_);var L=new qa({shape:{x1:k*d+c,y1:A*d+u,x2:k*(d-b)+c,y2:A*(d-b)+u},silent:!0,style:M});"auto"===M.stroke&&L.setStyle({stroke:i((T+N/y)/v)}),l.add(L),_+=S}_-=S}else _+=w}},_renderPointer:function(t,e,n,i,o,r,a,s){var l=this.group,c=this._data;if(t.get("pointer.show")){var u=[+t.get("min"),+t.get("max")],d=[r,a],h=t.getData(),f=h.mapDimension("value");h.diff(c).add(function(e){var n=new m_({shape:{angle:r}});Zs(n,{shape:{angle:xl(h.get(f,e),u,d,!0)}},t),l.add(n),h.setItemGraphicEl(e,n)}).update(function(e,n){var i=c.getItemGraphicEl(n);Xs(i,{shape:{angle:xl(h.get(f,e),u,d,!0)}},t),l.add(i),h.setItemGraphicEl(e,i)}).remove(function(t){var e=c.getItemGraphicEl(t);l.remove(e)}).execute(),h.eachItemGraphicEl(function(t,e){var n=h.getItemModel(e),r=n.getModel("pointer");t.setShape({x:o.cx,y:o.cy,width:bl(r.get("width"),o.r),r:bl(r.get("length"),o.r)}),t.useStyle(n.getModel("itemStyle").getItemStyle()),"auto"===t.style.fill&&t.setStyle("fill",i(xl(h.get(f,e),u,[0,1],!0))),Rs(t,n.getModel("emphasis.itemStyle").getItemStyle())}),this._data=h}else c&&c.eachItemGraphicEl(function(t){l.remove(t)})},_renderTitle:function(t,e,n,i,o){var r=t.getData(),a=r.mapDimension("value"),s=t.getModel("title");if(s.get("show")){var l=s.get("offsetCenter"),c=o.cx+bl(l[0],o.r),u=o.cy+bl(l[1],o.r),d=+t.get("min"),h=+t.get("max"),f=i(xl(t.getData().get(a,0),[d,h],[0,1],!0));this.group.add(new Da({silent:!0,style:Hs({},s,{x:c,y:u,text:r.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:f,forceRich:!0})}))}},_renderDetail:function(t,e,n,i,o){var r=t.getModel("detail"),a=+t.get("min"),s=+t.get("max");if(r.get("show")){var l=r.get("offsetCenter"),c=o.cx+bl(l[0],o.r),u=o.cy+bl(l[1],o.r),d=bl(r.get("width"),o.r),h=bl(r.get("height"),o.r),f=t.getData(),p=f.get(f.mapDimension("value"),0),g=i(xl(p,[a,s],[0,1],!0));this.group.add(new Da({silent:!0,style:Hs({},r,{x:c,y:u,text:v_(p,r.get("formatter")),textWidth:isNaN(d)?null:d,textHeight:isNaN(h)?null:h,textAlign:"center",textVerticalAlign:"middle"},{autoColor:g,forceRich:!0})}))}}}),cf({type:"series.funnel",init:function(t){x_.superApply(this,"init",arguments),this.legendVisualProvider=new Sv(E(this.getData,this),E(this.getRawData,this)),this._defaultLabelLine(t)},getInitialData:function(t,e){return _v(this,{coordDimensions:["value"],encodeDefaulter:N(Rc,this)})},_defaultLabelLine:function(t){Ao(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},getDataParams:function(t){var e=this.getData(),n=x_.superCall(this,"getDataParams",t),i=e.mapDimension("value"),o=e.getSum(i);return n.percent=o?+(e.get(i,t)/o*100).toFixed(2):0,n.$vars.push("percent"),n},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}));function b_(t,e){Cn.call(this);var n=new za,i=new Va,o=new Da;this.add(n),this.add(i),this.add(o),this.highDownOnUpdate=function(t,e){"emphasis"===e?(i.ignore=i.hoverIgnore,o.ignore=o.hoverIgnore):(i.ignore=i.normalIgnore,o.ignore=o.normalIgnore)},this.updateData(t,e,!0)}var __=b_.prototype,w_=["itemStyle","opacity"];function S_(t,e,n,i,o){mg.call(this,t,e,n),this.type=i||"value",this.axisIndex=o}function C_(t,e,n,i,o,r){t=t||0;var a=n[1]-n[0];if(null!=o&&(o=T_(o,[0,a])),null!=r&&(r=Math.max(r,null!=o?o:0)),"all"===i){var s=Math.abs(e[1]-e[0]);o=r=T_(s=T_(s,[0,a]),[o,r]),i=0}e[0]=T_(e[0],n),e[1]=T_(e[1],n);var l=M_(e,i);e[i]+=t;var c=o||0,u=n.slice();l.sign<0?u[0]+=c:u[1]-=c,e[i]=T_(e[i],u);var d=M_(e,i);return null!=o&&(d.sign!==l.sign||d.span<o)&&(e[1-i]=e[i]+l.sign*o),d=M_(e,i),null!=r&&d.span>r&&(e[1-i]=e[i]+d.sign*r),e}function M_(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:0<n?-1:n<0?1:e?-1:1}}function T_(t,e){return Math.min(null!=e[1]?e[1]:1/0,Math.max(null!=e[0]?e[0]:-1/0,t))}__.updateData=function(t,e,n){var i=this.childAt(0),o=t.hostModel,r=t.getItemModel(e),a=t.getItemLayout(e),s=t.getItemModel(e).get(w_);s=null==s?1:s,i.useStyle({}),n?(i.setShape({points:a.points}),i.setStyle({opacity:0}),Zs(i,{style:{opacity:s}},o,e)):Xs(i,{style:{opacity:s},shape:{points:a.points}},o,e);var l=r.getModel("itemStyle"),c=t.getItemVisual(e,"color");i.setStyle(b({lineJoin:"round",fill:c},l.getItemStyle(["opacity"]))),i.hoverStyle=l.getModel("emphasis").getItemStyle(),this._updateLabel(t,e),Rs(this)},__._updateLabel=function(t,e){var n=this.childAt(1),i=this.childAt(2),o=t.hostModel,r=t.getItemModel(e),a=t.getItemLayout(e).label,s=t.getItemVisual(e,"color");Xs(n,{shape:{points:a.linePoints||a.linePoints}},o,e),Xs(i,{style:{x:a.x,y:a.y}},o,e),i.attr({rotation:a.rotation,origin:[a.x,a.y],z2:10});var l=r.getModel("label"),c=r.getModel("emphasis.label"),u=r.getModel("labelLine"),d=r.getModel("emphasis.labelLine");s=t.getItemVisual(e,"color"),Vs(i.style,i.hoverStyle={},l,c,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:t.getName(e),autoColor:s,useInsideStyle:!!a.inside},{textAlign:a.textAlign,textVerticalAlign:a.verticalAlign}),i.ignore=i.normalIgnore=!l.get("show"),i.hoverIgnore=!c.get("show"),n.ignore=n.normalIgnore=!u.get("show"),n.hoverIgnore=!d.get("show"),n.setStyle({stroke:s}),n.setStyle(u.getModel("lineStyle").getLineStyle()),n.hoverStyle=d.getModel("lineStyle").getLineStyle()},C(b_,Cn),nd.extend({type:"funnel",render:function(t,e,n){var i=t.getData(),o=this._data,r=this.group;i.diff(o).add(function(t){var e=new b_(i,t);i.setItemGraphicEl(t,e),r.add(e)}).update(function(t,e){var n=o.getItemGraphicEl(e);n.updateData(i,t),r.add(n),i.setItemGraphicEl(t,n)}).remove(function(t){var e=o.getItemGraphicEl(t);r.remove(e)}).execute(),this._data=i},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),of(Dv("funnel")),nf(function(t,e,n){t.eachSeriesByType("funnel",function(t){var n=t.getData(),i=n.mapDimension("value"),o=t.get("sort"),r=function(t,e){return ac(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e),a=function(t,e){for(var n=t.mapDimension("value"),i=t.mapArray(n,function(t){return t}),o=[],r="ascending"===e,a=0,s=t.count();a<s;a++)o[a]=a;return"function"==typeof e?o.sort(e):"none"!==e&&o.sort(function(t,e){return r?i[t]-i[e]:i[e]-i[t]}),o}(n,o),s=t.get("orient"),l=r.width,c=r.height,u=r.x,d=r.y,h="horizontal"===s?[bl(t.get("minSize"),c),bl(t.get("maxSize"),c)]:[bl(t.get("minSize"),l),bl(t.get("maxSize"),l)],f=n.getDataExtent(i),p=t.get("min"),g=t.get("max");function m(t,e){if("horizontal"===s){var o,r=xl(n.get(i,t)||0,[p,g],h,!0);switch(v){case"top":o=d;break;case"center":o=d+(c-r)/2;break;case"bottom":o=d+(c-r)}return[[e,o],[e,o+r]]}var a,f=xl(n.get(i,t)||0,[p,g],h,!0);switch(v){case"left":a=u;break;case"center":a=u+(l-f)/2;break;case"right":a=u+l-f}return[[a,e],[a+f,e]]}null==p&&(p=Math.min(f[0],0)),null==g&&(g=f[1]);var v=t.get("funnelAlign"),y=t.get("gap"),x=(("horizontal"===s?l:c)-y*(n.count()-1))/n.count();"ascending"===o&&(x=-x,y=-y,"horizontal"===s?u+=l:d+=c,a=a.reverse());for(var b=0;b<a.length;b++){var _=a[b],w=a[b+1],S=n.getItemModel(_);if("horizontal"===s){var C=S.get("itemStyle.width");null==C?C=x:(C=bl(C,l),"ascending"===o&&(C=-C));var M=m(_,u),T=m(w,u+C);u+=C+y,n.setItemLayout(_,{points:M.concat(T.slice().reverse())})}else{var k=S.get("itemStyle.height");null==k?k=x:(k=bl(k,c),"ascending"===o&&(k=-k)),M=m(_,"horizontal"===s?u:d),T=m(w,"horizontal"===s?u+C:d+k),d+=k+y,n.setItemLayout(_,{points:M.concat(T.slice().reverse())})}}!function(t){t.each(function(e){var n,i,o,r,a=t.getItemModel(e),s=a.getModel("label").get("position"),l=a.get("orient"),c=a.getModel("labelLine"),u=t.getItemLayout(e),d=u.points,h="inner"===s||"inside"===s||"center"===s||"insideLeft"===s||"insideRight"===s;if(h)n="insideLeft"===s?(i=(d[0][0]+d[3][0])/2+5,o=(d[0][1]+d[3][1])/2,"left"):"insideRight"===s?(i=(d[1][0]+d[2][0])/2-5,o=(d[1][1]+d[2][1])/2,"right"):(i=(d[0][0]+d[1][0]+d[2][0]+d[3][0])/4,o=(d[0][1]+d[1][1]+d[2][1]+d[3][1])/4,"center"),r=[[i,o],[i,o]];else{var f,p,g,m,v=c.get("length");n="left"===s?(p=(d[3][1]+d[0][1])/2,i=(g=(f=(d[3][0]+d[0][0])/2)-v)-5,"right"):"right"===s?(p=(d[1][1]+d[2][1])/2,i=(g=(f=(d[1][0]+d[2][0])/2)+v)+5,"left"):"top"===s?(f=(d[3][0]+d[0][0])/2,o=(m=(p=(d[3][1]+d[0][1])/2)-v)-5,"center"):"bottom"===s?(f=(d[1][0]+d[2][0])/2,o=(m=(p=(d[1][1]+d[2][1])/2)+v)+5,"center"):"rightTop"===s?(f="horizontal"===l?d[3][0]:d[1][0],p="horizontal"===l?d[3][1]:d[1][1],"horizontal"===l?(o=(m=p-v)-5,"center"):(i=(g=f+v)+5,"top")):"rightBottom"===s?(f=d[2][0],p=d[2][1],"horizontal"===l?(o=(m=p+v)+5,"center"):(i=(g=f+v)+5,"bottom")):"leftTop"===s?(f=d[0][0],p="horizontal"===l?d[0][1]:d[1][1],"horizontal"===l?(o=(m=p-v)-5,"center"):(i=(g=f-v)-5,"right")):"leftBottom"===s?(f="horizontal"===l?d[1][0]:d[3][0],p="horizontal"===l?d[1][1]:d[2][1],"horizontal"===l?(o=(m=p+v)+5,"center"):(i=(g=f-v)-5,"right")):(f=(d[1][0]+d[2][0])/2,p=(d[1][1]+d[2][1])/2,"horizontal"===l?(o=(m=p+v)+5,"center"):(i=(g=f+v)+5,"left")),"horizontal"===l?i=g=f:o=m=p,r=[[f,p],[g,m]]}u.label={linePoints:r,x:i,y:o,verticalAlign:"middle",textAlign:n,inside:h}})}(n)})}),Qh(Ov("funnel")),S_.prototype={constructor:S_,model:null,isHorizontal:function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")}},C(S_,mg);var k_=k,A_=Math.min,I_=Math.max,D_=Math.floor,P_=Math.ceil,E_=_l,N_=Math.PI;function L_(t,e,n){this._axesMap=Q(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,e,n)}function R_(t,e){return A_(I_(t,e[0]),e[1])}L_.prototype={type:"parallel",constructor:L_,_init:function(t,e,n){var i=t.parallelAxisIndex;k_(t.dimensions,function(t,n){var o=i[n],r=e.getComponent("parallelAxis",o),a=this._axesMap.set(t,new S_(t,Hp(r),[0,0],r.get("type"),o));a.onBand="category"===a.type&&r.get("boundaryGap"),a.inverse=r.get("inverse"),(r.axis=a).model=r,a.coordinateSystem=r.coordinateSystem=this},this)},update:function(t,e){this._updateAxesFromSeries(this._model,t)},containPoint:function(t){var e=this._makeLayoutInfo(),n=e.axisBase,i=e.layoutBase,o=e.pixelDimIndex,r=t[1-o],a=t[o];return n<=r&&r<=n+e.axisLength&&i<=a&&a<=i+e.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(t,e){e.eachSeries(function(n){if(t.contains(n,e)){var i=n.getData();k_(this.dimensions,function(t){var e=this._axesMap.get(t);e.scale.unionExtentFromData(i,i.mapDimension(t)),Fp(e.scale,e.model)},this)}},this)},resize:function(t,e){this._rect=ac(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var t,e=this._model,n=this._rect,i=["x","y"],o=["width","height"],r=e.get("layout"),a="horizontal"===r?0:1,s=n[o[a]],l=[0,s],c=this.dimensions.length,u=R_(e.get("axisExpandWidth"),l),d=R_(e.get("axisExpandCount")||0,[0,c]),h=e.get("axisExpandable")&&3<c&&d<c&&1<d&&0<u&&0<s,f=e.get("axisExpandWindow");f?(t=R_(f[1]-f[0],l),f[1]=f[0]+t):(t=R_(u*(d-1),l),(f=[u*(e.get("axisExpandCenter")||D_(c/2))-t/2])[1]=f[0]+t);var p=(s-t)/(c-d);p<3&&(p=0);var g=[D_(E_(f[0]/u,1))+1,P_(E_(f[1]/u,1))-1];return{layout:r,pixelDimIndex:a,layoutBase:n[i[a]],layoutLength:s,axisBase:n[i[1-a]],axisLength:n[o[1-a]],axisExpandable:h,axisExpandWidth:u,axisCollapseWidth:p,axisExpandWindow:f,axisCount:c,winInnerIndices:g,axisExpandWindow0Pos:p/u*f[0]}},_layoutAxes:function(){var t=this._rect,e=this._axesMap,n=this.dimensions,i=this._makeLayoutInfo(),o=i.layout;e.each(function(t){var e=[0,i.axisLength],n=t.inverse?1:0;t.setExtent(e[n],e[1-n])}),k_(n,function(e,n){var r=(i.axisExpandable?function(t,e){var n,i,o=e.axisExpandWidth,r=e.axisCollapseWidth,a=e.winInnerIndices,s=r,l=!1;return t<a[0]?(n=t*r,i=r):t<=a[1]?(n=e.axisExpandWindow0Pos+t*o-e.axisExpandWindow[0],s=o,l=!0):(n=e.layoutLength-(e.axisCount-1-t)*r,i=r),{position:n,axisNameAvailableWidth:s,axisLabelShow:l,nameTruncateMaxWidth:i}}:function(t,e){var n=e.layoutLength/(e.axisCount-1);return{position:n*t,axisNameAvailableWidth:n,axisLabelShow:!0}})(n,i),a={horizontal:{x:r.position,y:i.axisLength},vertical:{x:0,y:r.position}},s=[a[o].x+t.x,a[o].y+t.y],l={horizontal:N_/2,vertical:0}[o],c=ie();le(c,c,l),se(c,c,s),this._axesLayout[e]={position:s,rotation:l,transform:c,axisNameAvailableWidth:r.axisNameAvailableWidth,axisLabelShow:r.axisLabelShow,nameTruncateMaxWidth:r.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(t){return this._axesMap.get(t)},dataToPoint:function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},eachActiveState:function(t,e,n,i){null==n&&(n=0),null==i&&(i=t.count());var o=this._axesMap,r=this.dimensions,a=[],s=[];k(r,function(e){a.push(t.mapDimension(e)),s.push(o.get(e).model)});for(var l=this.hasAxisBrushed(),c=n;c<i;c++){var u;if(l){u="active";for(var d=t.getValues(a,c),h=0,f=r.length;h<f;h++)if("inactive"===s[h].getActiveState(d[h])){u="inactive";break}}else u="normal";e(u,c)}},hasAxisBrushed:function(){for(var t=this.dimensions,e=this._axesMap,n=!1,i=0,o=t.length;i<o;i++)"normal"!==e.get(t[i]).model.getActiveState()&&(n=!0);return n},axisCoordToPoint:function(t,e){return Js([t,0],this._axesLayout[e].transform)},getAxisLayout:function(t){return m(this._axesLayout[t])},getSlidedAxisExpandWindow:function(t){var e=this._makeLayoutInfo(),n=e.pixelDimIndex,i=e.axisExpandWindow.slice(),o=i[1]-i[0],r=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:i};var a,s=t[n]-e.layoutBase-e.axisExpandWindow0Pos,l="slide",c=e.axisCollapseWidth,u=this._model.get("axisExpandSlideTriggerArea"),d=null!=u[0];return c?(d&&c&&s<o*u[0]?(l="jump",a=s-o*u[2]):d&&c&&s>o*(1-u[0])?(l="jump",a=s-o*(1-u[2])):0<=(a=s-o*u[1])&&(a=s-o*(1-u[1]))<=0&&(a=0),(a*=e.axisExpandWidth/c)?C_(a,i,r,"all"):l="none"):((i=[I_(0,r[1]*s/(o=i[1]-i[0])-o/2)])[1]=A_(r[1],i[0]+o),i[0]=i[1]-o),{axisExpandWindow:i,behavior:l}}},jc.register("parallel",{create:function(t,e){var n=[];return t.eachComponent("parallel",function(i,o){var r=new L_(i,t,e);r.name="parallel_"+o,r.resize(i,e),(i.coordinateSystem=r).model=i,n.push(r)}),t.eachSeries(function(e){if("parallel"===e.get("coordinateSystem")){var n=t.queryComponents({mainType:"parallel",index:e.get("parallelIndex"),id:e.get("parallelId")})[0];e.coordinateSystem=n.coordinateSystem}}),n}});var O_=gc.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return Ko([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(t){var e=this.activeIntervals=m(t);if(e)for(var n=e.length-1;0<=n;n--)wl(e[n])},getActiveState:function(t){var e=this.activeIntervals;if(!e.length)return"normal";if(null==t||isNaN(t))return"inactive";if(1===e.length){var n=e[0];if(n[0]<=t&&t<=n[1])return"active"}else for(var i=0,o=e.length;i<o;i++)if(e[i][0]<=t&&t<=e[i][1])return"active";return"inactive"}});v(O_.prototype,$p),gm("parallel",O_,function(t,e){return e.type||(e.data?"category":"value")},{type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10}),gc.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){gc.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(t){t&&v(this.option,t,!0),this._initDimensions()},contains:function(t,e){var n=t.get("parallelIndex");return null!=n&&e.getComponent("parallel",n)===this},setAxisExpand:function(t){k(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(e){t.hasOwnProperty(e)&&(this.option[e]=t[e])},this)},_initDimensions:function(){var t=this.dimensions=[],e=this.parallelAxisIndex=[];k(D(this.dependentModels.parallelAxis,function(t){return(t.get("parallelIndex")||0)===this.componentIndex},this),function(n){t.push("dim"+n.get("dim")),e.push(n.componentIndex)})}}),tf({type:"axisAreaSelect",event:"axisAreaSelected"},function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},function(e){e.axis.model.setActiveIntervals(t.intervals)})}),tf("parallelAxisExpand",function(t,e){e.eachComponent({mainType:"parallel",query:t},function(e){e.setAxisExpand(t)})});var B_=N,z_=k,V_=A,F_=Math.min,H_=Math.max,W_=Math.pow,G_={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},U_={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},j_={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},$_=0;function q_(t){kt.call(this),this._zr=t,this.group=new Cn,this._track=[],this._covers=[],this._uid="brushController_"+$_++,this._handlers={},z_(xw,function(t,e){this._handlers[e]=E(t,this)},this)}function Y_(t,e){var n=_w[e.brushType].createCover(t,e);return n.__brushOption=e,K_(n,e),t.group.add(n),n}function X_(t,e){var n=Q_(e);return n.endCreating&&(n.endCreating(t,e),K_(e,e.__brushOption)),e}function Z_(t,e){var n=e.__brushOption;Q_(e).updateCoverShape(t,e,n.range,n)}function K_(t,e){var n=e.z;null==n&&(n=1e4),t.traverse(function(t){t.z=n,t.z2=n})}function J_(t,e){Q_(e).updateCommon(t,e),Z_(t,e)}function Q_(t){return _w[t.__brushOption.brushType]}function tw(t,e,n){var i,o=t._panels;if(!o)return!0;var r=t._transform;return z_(o,function(t){t.isTargetByCursor(e,n,r)&&(i=t)}),i}function ew(t,e){var n=t._panels;if(!n)return!0;var i=e.__brushOption.panelId;return null==i||n[i]}function nw(t){var e=t._covers,n=e.length;return z_(e,function(e){t.group.remove(e)},t),e.length=0,!!n}function iw(t,e){var n=V_(t._covers,function(t){var e=t.__brushOption,n=m(e.range);return{brushType:e.brushType,panelId:e.panelId,range:n}});t.trigger("brush",n,{isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function ow(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function rw(t,e,n,i){var o=new Cn;return o.add(new ja({name:"main",style:cw(n),silent:!0,draggable:!0,cursor:"move",drift:B_(t,e,o,"nswe"),ondragend:B_(iw,e,{isEnd:!0})})),z_(i,function(n){o.add(new ja({name:n,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:B_(t,e,o,n),ondragend:B_(iw,e,{isEnd:!0})}))}),o}function aw(t,e,n,i){var o=i.brushStyle.lineWidth||0,r=H_(o,6),a=n[0][0],s=n[1][0],l=a-o/2,c=s-o/2,u=n[0][1],d=n[1][1],h=u-r+o/2,f=d-r+o/2,p=u-a,g=d-s,m=p+o,v=g+o;lw(t,e,"main",a,s,p,g),i.transformable&&(lw(t,e,"w",l,c,r,v),lw(t,e,"e",h,c,r,v),lw(t,e,"n",l,c,m,r),lw(t,e,"s",l,f,m,r),lw(t,e,"nw",l,c,r,r),lw(t,e,"ne",h,c,r,r),lw(t,e,"sw",l,f,r,r),lw(t,e,"se",h,f,r,r))}function sw(t,e){var n=e.__brushOption,i=n.transformable,o=e.childAt(0);o.useStyle(cw(n)),o.attr({silent:!i,cursor:i?"move":"default"}),z_(["w","e","n","s","se","sw","ne","nw"],function(n){var o=e.childOfName(n),r=function t(e,n){return 1<n.length?("e"!==(i=[t(e,(n=n.split(""))[0]),t(e,n[1])])[0]&&"w"!==i[0]||i.reverse(),i.join("")):{left:"w",right:"e",top:"n",bottom:"s"}[i=Qs({w:"left",e:"right",n:"top",s:"bottom"}[n],Ks(e.group))];var i}(t,n);o&&o.attr({silent:!i,invisible:!i,cursor:i?U_[r]+"-resize":null})})}function lw(t,e,n,i,o,r,a){var s=e.childOfName(n);s&&s.setShape(function(t){var e=F_(t[0][0],t[1][0]),n=F_(t[0][1],t[1][1]);return{x:e,y:n,width:H_(t[0][0],t[1][0])-e,height:H_(t[0][1],t[1][1])-n}}(pw(t,e,[[i,o],[i+r,o+a]])))}function cw(t){return b({strokeNoScale:!0},t.brushStyle)}function uw(t,e,n,i){var o=[F_(t,n),F_(e,i)],r=[H_(t,n),H_(e,i)];return[[o[0],r[0]],[o[1],r[1]]]}function dw(t,e,n,i,o,r,a,s){var l=i.__brushOption,c=t(l.range),u=fw(n,r,a);z_(o.split(""),function(t){var e=G_[t];c[e[0]][e[1]]+=u[e[0]]}),l.range=e(uw(c[0][0],c[1][0],c[0][1],c[1][1])),J_(n,i),iw(n,{isEnd:!1})}function hw(t,e,n,i,o){var r=e.__brushOption.range,a=fw(t,n,i);z_(r,function(t){t[0]+=a[0],t[1]+=a[1]}),J_(t,e),iw(t,{isEnd:!1})}function fw(t,e,n){var i=t.group,o=i.transformCoordToLocal(e,n),r=i.transformCoordToLocal(0,0);return[o[0]-r[0],o[1]-r[1]]}function pw(t,e,n){var i=ew(t,e);return i&&!0!==i?i.clipPath(n,t._transform):m(n)}function gw(t){var e=t.event;e.preventDefault&&e.preventDefault()}function mw(t,e,n){return t.childOfName("main").contain(e,n)}function vw(t,e,n,i){var o,r=t._creatingCover,a=t._creatingPanel,s=t._brushOption;if(t._track.push(n.slice()),function(t){var e=t._track;if(!e.length)return!1;var n=e[e.length-1],i=e[0],o=n[0]-i[0],r=n[1]-i[1];return 6<W_(o*o+r*r,.5)}(t)||r){if(a&&!r){"single"===s.brushMode&&nw(t);var l=m(s);l.brushType=yw(l.brushType,a),l.panelId=!0===a?null:a.panelId,r=t._creatingCover=Y_(t,l),t._covers.push(r)}if(r){var c=_w[yw(t._brushType,a)];r.__brushOption.range=c.getCreatingRange(pw(t,r,t._track)),i&&(X_(t,r),c.updateCommon(t,r)),Z_(t,r),o={isEnd:i}}}else i&&"single"===s.brushMode&&s.removeOnClick&&tw(t,e,n)&&nw(t)&&(o={isEnd:i,removeOnClick:!0});return o}function yw(t,e){return"auto"===t?e.defaultBrushType:t}q_.prototype={constructor:q_,enableBrush:function(t){return this._brushType&&function(t){var e=t._zr;(function(t,e,n){var i=dy(t);i[e]===n&&(i[e]=null)})(e,"globalPan",t._uid),function(t,e){z_(e,function(e,n){t.off(n,e)})}(e,t._handlers),t._brushType=t._brushOption=null}(this),t.brushType&&function(t,e){var n=t._zr;t._enableGlobalPan||function(t,e,n){dy(t).globalPan=n}(n,0,t._uid),function(t,e){z_(e,function(e,n){t.on(n,e)})}(n,t._handlers),t._brushType=e.brushType,t._brushOption=v(m(j_),e,!0)}(this,t),this},setPanels:function(t){if(t&&t.length){var e=this._panels={};k(t,function(t){e[t.panelId]=m(t)})}else this._panels=null;return this},mount:function(t){this._enableGlobalPan=(t=t||{}).enableGlobalPan;var e=this.group;return this._zr.add(e),e.attr({position:t.position||[0,0],rotation:t.rotation||0,scale:t.scale||[1,1]}),this._transform=e.getLocalTransform(),this},eachCover:function(t,e){z_(this._covers,t,e)},updateCovers:function(t){t=A(t,function(t){return v(m(j_),t,!0)});var e=this._covers,n=this._covers=[],i=this,o=this._creatingCover;return new hf(e,t,function(t,e){return r(t.__brushOption,e)},r).add(a).update(a).remove(function(t){e[t]!==o&&i.group.remove(e[t])}).execute(),this;function r(t,e){return(null!=t.id?t.id:"\0-brush-index-"+e)+"-"+t.brushType}function a(r,a){var s=t[r];if(null!=a&&e[a]===o)n[r]=e[a];else{var l=n[r]=null!=a?(e[a].__brushOption=s,e[a]):X_(i,Y_(i,s));J_(i,l)}}},unmount:function(){return this.enableBrush(!1),nw(this),this._zr.remove(this.group),this},dispose:function(){this.unmount(),this.off()}},M(q_,kt);var xw={mousedown:function(t){if(this._dragging)bw(this,t);else if(!t.target||!t.target.draggable){gw(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null,(this._creatingPanel=tw(this,t,e))&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);if(function(t,e,n){if(t._brushType&&!function(t,e,n){var i=t._zr;return e<0||e>i.getWidth()||void 0>i.getHeight()}(t,e)){var i=t._zr,o=t._covers,r=tw(t,e,n);if(!t._dragging)for(var a=0;a<o.length;a++){var s=o[a].__brushOption;if(r&&(!0===r||s.panelId===r.panelId)&&_w[s.brushType].contain(o[a],n[0],n[1]))return}r&&i.setCursorStyle("crosshair")}}(this,t,e),this._dragging){gw(t);var n=vw(this,t,e,!1);n&&iw(this,n)}},mouseup:function(t){bw(this,t)}};function bw(t,e){if(t._dragging){gw(e);var n=t.group.transformCoordToLocal(e.offsetX,e.offsetY),i=vw(t,e,n,!0);t._dragging=!1,t._track=[],t._creatingCover=null,i&&iw(t,i)}}var _w={lineX:ww(0),lineY:ww(1),rect:{createCover:function(t,e){return rw(B_(dw,function(t){return t},function(t){return t}),t,e,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(t){var e=ow(t);return uw(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,n,i){aw(t,e,n,i)},updateCommon:sw,contain:mw},polygon:{createCover:function(t,e){var n=new Cn;return n.add(new Va({name:"main",style:cw(e),silent:!0})),n},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new za({name:"main",draggable:!0,drift:B_(hw,t,e),ondragend:B_(iw,t,{isEnd:!0})}))},updateCoverShape:function(t,e,n,i){e.childAt(0).setShape({points:pw(t,e,n)})},updateCommon:sw,contain:mw}};function ww(t){return{createCover:function(e,n){return rw(B_(dw,function(e){var n=[e,[0,100]];return t&&n.reverse(),n},function(e){return e[t]}),e,n,[["w","e"],["n","s"]][t])},getCreatingRange:function(e){var n=ow(e);return[F_(n[0][t],n[1][t]),H_(n[0][t],n[1][t])]},updateCoverShape:function(e,n,i,o){var r,a=ew(e,n);if(!0!==a&&a.getLinearBrushOtherExtent)r=a.getLinearBrushOtherExtent(t,e._transform);else{var s=e._zr;r=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[i,r];t&&l.reverse(),aw(e,n,l,o)},updateCommon:sw,contain:mw}}function Sw(t){return t=Tw(t),function(e,n){return el(e,t)}}function Cw(t,e){return t=Tw(t),function(n){var i=null!=e?e:n,o=i?t.x:t.y;return[o,o+((i?t.width:t.height)||0)]}}function Mw(t,e,n){return t=Tw(t),function(i,o,r){return t.contain(o[0],o[1])&&!Cy(i,e,n)}}function Tw(t){return Sn.create(t)}var kw=["axisLine","axisTickLabel","axisName"],Aw=lf({type:"parallelAxis",init:function(t,e){Aw.superApply(this,"init",arguments),(this._brushController=new q_(e.getZr())).on("brush",E(this._onBrush,this))},render:function(t,e,n,i){if(!function(t,e,n){return n&&"axisAreaSelect"===n.type&&e.findComponents({mainType:"parallelAxis",query:n})[0]===t}(t,e,i)){this.axisModel=t,this.api=n,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Cn,this.group.add(this._axisGroup),t.get("show")){var r=function(t,e){return e.getComponent("parallel",t.get("parallelIndex"))}(t,e),a=r.coordinateSystem,s=t.getAreaSelectStyle(),l=s.width,c=x({strokeContainThreshold:l},a.getAxisLayout(t.axis.dim)),u=new Am(t,c);k(kw,u.add,u),this._axisGroup.add(u.getGroup()),this._refreshBrushController(c,s,t,r,l,n),tl(o,this._axisGroup,i&&!1===i.animation?null:t)}}},_refreshBrushController:function(t,e,n,i,o,r){var a=n.axis.getExtent(),s=a[1]-a[0],l=Math.min(30,.1*Math.abs(s)),c=Sn.create({x:a[0],y:-o/2,width:s,height:o});c.x-=l,c.width+=2*l,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,position:t.position}).setPanels([{panelId:"pl",clipPath:Sw(c),isTargetByCursor:Mw(c,r,i),getLinearBrushOtherExtent:Cw(c,0)}]).enableBrush({brushType:"lineX",brushStyle:e,removeOnClick:!0}).updateCovers(function(t){var e=t.axis;return A(t.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}(n))},_onBrush:function(t,e){var n=this.axisModel,i=n.axis,o=A(t,function(t){return[i.coordToData(t.range[0],!0),i.coordToData(t.range[1],!0)]});!n.option.realtime!==e.isEnd&&!e.removeOnClick||this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:o})},dispose:function(){this._brushController.dispose()}});lf({type:"parallel",render:function(t,e,n){this._model=t,this._api=n,this._handlers||(this._handlers={},k(Iw,function(t,e){n.getZr().on(e,this._handlers[e]=E(t,this))},this)),fd(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},dispose:function(t,e){k(this._handlers,function(t,n){e.getZr().off(n,t)}),this._handlers=null},_throttledDispatchExpand:function(t){this._dispatchExpand(t)},_dispatchExpand:function(t){t&&this._api.dispatchAction(x({type:"parallelAxisExpand"},t))}});var Iw={mousedown:function(t){Dw(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var e=this._mouseDownPoint;if(Dw(this,"click")&&e){var n=[t.offsetX,t.offsetY];if(5<Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);"none"!==i.behavior&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!this._mouseDownPoint&&Dw(this,"mousemove")){var e=this._model,n=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),i=n.behavior;"jump"===i&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===i?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===i&&null})}}};function Dw(t,e){var n=t._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===e}function Pw(t,e,n,i){for(var o,r=[],a=0;a<n.length;a++){var s=n[a],l=t.get(t.mapDimension(s),e);o=l,("category"===i.getAxis(s).type?null==o:null==o||isNaN(o))||r.push(i.dataToPoint(l,s))}return r}function Ew(t,e,n,i,o){var r=Pw(t,n,i,o),a=new Va({shape:{points:r},silent:!0,z2:10});return e.add(a),t.setItemGraphicEl(n,a),a}function Nw(t){var e=t.get("smooth",!0);return!0===e&&(e=.3),{lineStyle:t.getModel("lineStyle").getLineStyle(),smooth:null!=e?e:.3}}function Lw(t,e,n,i){var o=i.lineStyle;e.hasItemOption&&(o=e.getItemModel(n).getModel("lineStyle").getLineStyle()),t.useStyle(o);var r=t.style;r.fill=null,r.stroke=e.getItemVisual(n,"color"),r.opacity=e.getItemVisual(n,"opacity"),i.smooth&&(t.shape.smooth=i.smooth)}Jh(function(t){!function(t){if(!t.parallel){var e=!1;k(t.series,function(t){t&&"parallel"===t.type&&(e=!0)}),e&&(t.parallel=[{}])}}(t),function(t){k(ko(t.parallelAxis),function(e){if(B(e)){var n=e.parallelIndex||0,i=ko(t.parallel)[n];i&&i.parallelAxisDefault&&v(e,i.parallelAxisDefault,!1)}})}(t)}),Gu.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(t,e){var n=this.getSource();return function(t,e){if(!t.encodeDefine){var n=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(n){var i=t.encodeDefine=Q();k(n.dimensions,function(t){var e=function(t){return+t.replace("dim","")}(t);i.set(t,e)})}}}(n,this),Xf(n,this)},getRawIndicesByActiveState:function(t){var e=this.coordinateSystem,n=this.getData(),i=[];return e.eachActiveState(n,function(e,o){t===e&&i.push(n.getRawIndex(o))}),i},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}}),nd.extend({type:"parallel",init:function(){this._dataGroup=new Cn,this.group.add(this._dataGroup)},render:function(t,e,n,i){var o=this._dataGroup,r=t.getData(),a=this._data,s=t.coordinateSystem,l=s.dimensions,c=Nw(t);if(r.diff(a).add(function(t){Lw(Ew(r,o,t,l,s),r,t,c)}).update(function(e,n){var o=a.getItemGraphicEl(n),u=Pw(r,e,l,s);r.setItemGraphicEl(e,o),Xs(o,{shape:{points:u}},i&&!1===i.animation?null:t,e),Lw(o,r,e,c)}).remove(function(t){var e=a.getItemGraphicEl(t);o.remove(e)}).execute(),!this._initialized){this._initialized=!0;var u=function(t,e,n){var i=t.model,o=t.getRect(),r=new ja({shape:{x:o.x,y:o.y,width:o.width,height:o.height}}),a="horizontal"===i.get("layout")?"width":"height";return r.setShape(a,0),Zs(r,{shape:{width:o.width,height:o.height}},e,n),r}(s,t,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(u)}this._data=r},incrementalPrepareRender:function(t,e,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(t,e,n){for(var i=e.getData(),o=e.coordinateSystem,r=o.dimensions,a=Nw(e),s=t.start;s<t.end;s++){var l=Ew(i,this._dataGroup,s,r,o);l.incremental=!0,Lw(l,i,s,a)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}});var Rw=["lineStyle","normal","opacity"];of({seriesType:"parallel",reset:function(t,e,n){var i=t.getModel("itemStyle"),o=t.getModel("lineStyle"),r=e.get("color"),a=o.get("color")||i.get("color")||r[t.seriesIndex%r.length],s=t.get("inactiveOpacity"),l=t.get("activeOpacity"),c=t.getModel("lineStyle").getLineStyle(),u=t.coordinateSystem,d=t.getData(),h={normal:c.opacity,active:l,inactive:s};return d.setVisual("color",a),{progress:function(t,e){u.eachActiveState(e,function(t,n){var i=h[t];if("normal"===t&&e.hasItemOption){var o=e.getItemModel(n).get(Rw,!0);null!=o&&(i=o)}e.setItemVisual(n,"opacity",i)},t.start,t.end)}}}});var Ow=Gu.extend({type:"series.sankey",layoutInfo:null,levelModels:null,getInitialData:function(t,e){for(var n=t.edges||t.links,i=t.data||t.nodes,o=t.levels,r=this.levelModels={},a=0;a<o.length;a++)null!=o[a].depth&&0<=o[a].depth&&(r[o[a].depth]=new fl(o[a],this,e));if(i&&n)return _b(i,n,this,!0,function(t,e){t.wrapMethod("getItemModel",function(t,e){return t.customizeGetParent(function(t){var n=this.parentModel,i=n.getData().getItemLayout(e).depth;return n.levelModels[i]||this.parentModel}),t}),e.wrapMethod("getItemModel",function(t,e){return t.customizeGetParent(function(t){var n=this.parentModel,i=n.getGraph().getEdgeByIndex(e).node1.getLayout().depth;return n.levelModels[i]||this.parentModel}),t})}).data},setNodePosition:function(t,e){var n=this.option.data[t];n.localX=e[0],n.localY=e[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(t,e,n){if("edge"===n){var i=this.getDataParams(t,n),o=i.data,r=o.source+" -- "+o.target;return i.value&&(r+=" : "+i.value),Gl(r)}if("node"!==n)return Ow.superCall(this,"formatTooltip",t,e);var a=this.getGraph().getNodeByIndex(t).getLayout().value,s=this.getDataParams(t,n).data.name;return a&&(r=s+" : "+a),Gl(r)},optionUpdated:function(){var t=this.option;!0===t.focusNodeAdjacency&&(t.focusNodeAdjacency="allEdges")},getDataParams:function(t,e){var n=Ow.superCall(this,"getDataParams",t,e);if(null==n.value&&"node"===e){var i=this.getGraph().getNodeByIndex(t).getLayout().value;n.value=i}return n},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},levels:[],nodeAlign:"justify",itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},animationEasing:"linear",animationDuration:1e3}}),Bw=["itemStyle","opacity"],zw=["emphasis","itemStyle","opacity"],Vw=["lineStyle","opacity"],Fw=["emphasis","lineStyle","opacity"];function Hw(t,e){return t.getVisual("opacity")||t.getModel().get(e)}function Ww(t,e,n){var i=t.getGraphicEl(),o=Hw(t,e);null!=n&&(null==o&&(o=1),o*=n),i.downplay&&i.downplay(),i.traverse(function(t){"group"!==t.type&&t.setStyle("opacity",o)})}function Gw(t,e){var n=Hw(t,e),i=t.getGraphicEl();i.traverse(function(t){"group"!==t.type&&t.setStyle("opacity",n)}),i.highlight&&i.highlight()}var Uw=fs({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(t,e){var n=e.extent;t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),"vertical"===e.orient?(t.lineTo(e.x2+n,e.y2),t.bezierCurveTo(e.cpx2+n,e.cpy2,e.cpx1+n,e.cpy1,e.x1+n,e.y1)):(t.lineTo(e.x2,e.y2+n),t.bezierCurveTo(e.cpx2,e.cpy2+n,e.cpx1,e.cpy1+n,e.x1,e.y1+n)),t.closePath()},highlight:function(){this.trigger("emphasis")},downplay:function(){this.trigger("normal")}});function jw(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return null!=e.depth&&0<=e.depth}function $w(t,e,n,i,o){var r="vertical"===o?"x":"y";k(t,function(t){var a,s,l;t.sort(function(t,e){return t.getLayout()[r]-e.getLayout()[r]});for(var c=0,u=t.length,d="vertical"===o?"dx":"dy",h=0;h<u;h++)0<(l=c-(s=t[h]).getLayout()[r])&&(a=s.getLayout()[r]+l,s.setLayout("vertical"===o?{x:a}:{y:a},!0)),c=s.getLayout()[r]+s.getLayout()[d]+e;if(0<(l=c-e-("vertical"===o?i:n)))for(a=s.getLayout()[r]-l,s.setLayout("vertical"===o?{x:a}:{y:a},!0),c=a,h=u-2;0<=h;--h)0<(l=(s=t[h]).getLayout()[r]+s.getLayout()[d]+e-c)&&(a=s.getLayout()[r]-l,s.setLayout("vertical"===o?{x:a}:{y:a},!0)),c=s.getLayout()[r]})}function qw(t,e,n){k(t.slice().reverse(),function(t){k(t,function(t){if(t.outEdges.length){var i=tS(t.outEdges,Yw,n)/tS(t.outEdges,Qw,n);if(isNaN(i)){var o=t.outEdges.length;i=o?tS(t.outEdges,Xw,n)/o:0}if("vertical"===n){var r=t.getLayout().x+(i-Jw(t,n))*e;t.setLayout({x:r},!0)}else{var a=t.getLayout().y+(i-Jw(t,n))*e;t.setLayout({y:a},!0)}}})})}function Yw(t,e){return Jw(t.node2,e)*t.getValue()}function Xw(t,e){return Jw(t.node2,e)}function Zw(t,e){return Jw(t.node1,e)*t.getValue()}function Kw(t,e){return Jw(t.node1,e)}function Jw(t,e){return"vertical"===e?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function Qw(t){return t.getValue()}function tS(t,e,n){for(var i=0,o=t.length,r=-1;++r<o;){var a=+e.call(t,t[r],n);isNaN(a)||(i+=a)}return i}function eS(t,e,n){k(t,function(t){k(t,function(t){if(t.inEdges.length){var i=tS(t.inEdges,Zw,n)/tS(t.inEdges,Qw,n);if(isNaN(i)){var o=t.inEdges.length;i=o?tS(t.inEdges,Kw,n)/o:0}if("vertical"===n){var r=t.getLayout().x+(i-Jw(t,n))*e;t.setLayout({x:r},!0)}else{var a=t.getLayout().y+(i-Jw(t,n))*e;t.setLayout({y:a},!0)}}})})}uf({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(t,e,n){var i=this,o=t.getGraph(),r=this.group,a=t.layoutInfo,s=a.width,l=a.height,c=t.getData(),u=t.getData("edge"),d=t.get("orient");this._model=t,r.removeAll(),r.attr("position",[a.x,a.y]),o.eachEdge(function(e){var n=new Uw;n.dataIndex=e.dataIndex,n.seriesIndex=t.seriesIndex,n.dataType="edge";var i,o,a,c,h,f,p,g,m=e.getModel("lineStyle"),v=m.get("curveness"),y=e.node1.getLayout(),x=e.node1.getModel(),b=x.get("localX"),_=x.get("localY"),w=e.node2.getLayout(),S=e.node2.getModel(),C=S.get("localX"),M=S.get("localY"),T=e.getLayout();switch(n.shape.extent=Math.max(1,T.dy),g="vertical"===(n.shape.orient=d)?(h=i=(null!=b?b*s:y.x)+T.sy,f=(o=(null!=_?_*l:y.y)+y.dy)*(1-v)+(c=null!=M?M*l:w.y)*v,p=a=(null!=C?C*s:w.x)+T.ty,o*v+c*(1-v)):(h=(i=(null!=b?b*s:y.x)+y.dx)*(1-v)+(a=null!=C?C*s:w.x)*v,f=o=(null!=_?_*l:y.y)+T.sy,p=i*v+a*(1-v),c=(null!=M?M*l:w.y)+T.ty),n.setShape({x1:i,y1:o,x2:a,y2:c,cpx1:h,cpy1:f,cpx2:p,cpy2:g}),n.setStyle(m.getItemStyle()),n.style.fill){case"source":n.style.fill=e.node1.getVisual("color");break;case"target":n.style.fill=e.node2.getVisual("color")}Rs(n,e.getModel("emphasis.lineStyle").getItemStyle()),r.add(n),u.setItemGraphicEl(e.dataIndex,n)}),o.eachNode(function(e){var n=e.getLayout(),i=e.getModel(),o=i.get("localX"),a=i.get("localY"),u=i.getModel("label"),d=i.getModel("emphasis.label"),h=new ja({shape:{x:null!=o?o*s:n.x,y:null!=a?a*l:n.y,width:n.dx,height:n.dy},style:i.getModel("itemStyle").getItemStyle()}),f=e.getModel("emphasis.itemStyle").getItemStyle();Vs(h.style,f,u,d,{labelFetcher:t,labelDataIndex:e.dataIndex,defaultText:e.id,isRectText:!0}),h.setStyle("fill",e.getVisual("color")),Rs(h,f),r.add(h),c.setItemGraphicEl(e.dataIndex,h),h.dataType="node"}),c.eachItemGraphicEl(function(e,o){var r=c.getItemModel(o);r.get("draggable")&&(e.drift=function(e,r){i._focusAdjacencyDisabled=!0,this.shape.x+=e,this.shape.y+=r,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:c.getRawIndex(o),localX:this.shape.x/s,localY:this.shape.y/l})},e.ondragend=function(){i._focusAdjacencyDisabled=!1},e.draggable=!0,e.cursor="move"),e.highlight=function(){this.trigger("emphasis")},e.downplay=function(){this.trigger("normal")},e.focusNodeAdjHandler&&e.off("mouseover",e.focusNodeAdjHandler),e.unfocusNodeAdjHandler&&e.off("mouseout",e.unfocusNodeAdjHandler),r.get("focusNodeAdjacency")&&(e.on("mouseover",e.focusNodeAdjHandler=function(){i._focusAdjacencyDisabled||(i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,dataIndex:e.dataIndex}))}),e.on("mouseout",e.unfocusNodeAdjHandler=function(){i._focusAdjacencyDisabled||i._dispatchUnfocus(n)}))}),u.eachItemGraphicEl(function(e,o){var r=u.getItemModel(o);e.focusNodeAdjHandler&&e.off("mouseover",e.focusNodeAdjHandler),e.unfocusNodeAdjHandler&&e.off("mouseout",e.unfocusNodeAdjHandler),r.get("focusNodeAdjacency")&&(e.on("mouseover",e.focusNodeAdjHandler=function(){i._focusAdjacencyDisabled||(i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,edgeDataIndex:e.dataIndex}))}),e.on("mouseout",e.unfocusNodeAdjHandler=function(){i._focusAdjacencyDisabled||i._dispatchUnfocus(n)}))}),!this._data&&t.get("animation")&&r.setClipPath(function(t,e,n){var i=new ja({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return Zs(i,{shape:{width:t.width+20}},e,function(){r.removeClipPath()}),i}(r.getBoundingRect(),t)),this._data=t.getData()},dispose:function(){this._clearTimer()},_dispatchUnfocus:function(t){var e=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){e._unfocusDelayTimer=null,t.dispatchAction({type:"unfocusNodeAdjacency",seriesId:e._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(t,e,n,i){var o=t.getData(),r=o.graph,a=i.dataIndex,s=o.getItemModel(a),l=i.edgeDataIndex;if(null!=a||null!=l){var c=r.getNodeByIndex(a),u=r.getEdgeByIndex(l);if(r.eachNode(function(t){Ww(t,Bw,.1)}),r.eachEdge(function(t){Ww(t,Vw,.1)}),c){Gw(c,zw);var d=s.get("focusNodeAdjacency");"outEdges"===d?k(c.outEdges,function(t){t.dataIndex<0||(Gw(t,Fw),Gw(t.node2,zw))}):"inEdges"===d?k(c.inEdges,function(t){t.dataIndex<0||(Gw(t,Fw),Gw(t.node1,zw))}):"allEdges"===d&&k(c.edges,function(t){t.dataIndex<0||(Gw(t,Fw),t.node1!==c&&Gw(t.node1,zw),t.node2!==c&&Gw(t.node2,zw))})}u&&(Gw(u,Fw),Gw(u.node1,zw),Gw(u.node2,zw))}},unfocusNodeAdjacency:function(t,e,n,i){var o=t.getGraph();o.eachNode(function(t){Ww(t,Bw)}),o.eachEdge(function(t){Ww(t,Vw)})}}),tf({type:"dragNode",event:"dragnode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])})}),nf(function(t,e,n){t.eachSeriesByType("sankey",function(t){var n=t.get("nodeWidth"),i=t.get("nodeGap"),o=function(t,e){return ac(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e),r=(t.layoutInfo=o).width,a=o.height,s=t.getGraph(),l=s.nodes,c=s.edges;!function(t){k(t,function(t){var e=tS(t.outEdges,Qw),n=tS(t.inEdges,Qw),i=t.getValue()||0,o=Math.max(e,n,i);t.setLayout({value:o},!0)})}(l),function(t,e,n,i,o,r,a,s,l){(function(t,e,n,i,o,r,a){for(var s=[],l=[],c=[],u=[],d=0,h=0;h<e.length;h++)s[h]=1;for(h=0;h<t.length;h++)l[h]=t[h].inEdges.length,0===l[h]&&c.push(t[h]);for(var f=-1;c.length;){for(var p=0;p<c.length;p++){var g=c[p],m=g.hostGraph.data.getRawDataItem(g.dataIndex),v=null!=m.depth&&0<=m.depth;v&&m.depth>f&&(f=m.depth),g.setLayout({depth:v?m.depth:d},!0),g.setLayout("vertical"===r?{dy:n}:{dx:n},!0);for(var y=0;y<g.outEdges.length;y++){var x=g.outEdges[y];s[e.indexOf(x)]=0;var b=x.node2;0==--l[t.indexOf(b)]&&u.indexOf(b)<0&&u.push(b)}}++d,c=u,u=[]}for(h=0;h<s.length;h++)if(1===s[h])throw new Error("Sankey is a DAG, the original data has cycle!");var _=d-1<f?f:d-1;a&&"left"!==a&&function(t,e,n,i){if("right"===e){for(var o=[],r=t,a=0;r.length;){for(var s=0;s<r.length;s++){var l=r[s];l.setLayout({skNodeHeight:a},!0);for(var c=0;c<l.inEdges.length;c++){var u=l.inEdges[c];o.indexOf(u.node1)<0&&o.push(u.node1)}}r=o,o=[],++a}k(t,function(t){jw(t)||t.setLayout({depth:Math.max(0,i-t.getLayout().skNodeHeight)},!0)})}else"justify"===e&&function(t,e){k(t,function(t){jw(t)||t.outEdges.length||t.setLayout({depth:e},!0)})}(t,i)}(t,a,0,_),function(t,e,n){k(t,function(t){var i=t.getLayout().depth*e;t.setLayout("vertical"===n?{y:i}:{x:i},!0)})}(t,"vertical"===r?(o-n)/_:(i-n)/_,r)})(t,e,n,o,r,s,l),function(t,e,n,i,o,r,a){var s=function(t,e){var n=[],i="vertical"===e?"y":"x",o=Wo(t,function(t){return t.getLayout()[i]});return o.keys.sort(function(t,e){return t-e}),k(o.keys,function(t){n.push(o.buckets.get(t))}),n}(t,a);(function(t,e,n,i,o,r){var a=1/0;k(t,function(t){var e=t.length,s=0;k(t,function(t){s+=t.getLayout().value});var l="vertical"===r?(i-(e-1)*o)/s:(n-(e-1)*o)/s;l<a&&(a=l)}),k(t,function(t){k(t,function(t,e){var n=t.getLayout().value*a;"vertical"===r?(t.setLayout({x:e},!0),t.setLayout({dx:n},!0)):(t.setLayout({y:e},!0),t.setLayout({dy:n},!0))})}),k(e,function(t){var e=+t.getValue()*a;t.setLayout({dy:e},!0)})})(s,e,n,i,o,a),$w(s,o,n,i,a);for(var l=1;0<r;r--)qw(s,l*=.99,a),$w(s,o,n,i,a),eS(s,l,a),$w(s,o,n,i,a)}(t,e,r,o,i,a,s),function(t,e){var n="vertical"===e?"x":"y";k(t,function(t){t.outEdges.sort(function(t,e){return t.node2.getLayout()[n]-e.node2.getLayout()[n]}),t.inEdges.sort(function(t,e){return t.node1.getLayout()[n]-e.node1.getLayout()[n]})}),k(t,function(t){var e=0,n=0;k(t.outEdges,function(t){t.setLayout({sy:e},!0),e+=t.getLayout().dy}),k(t.inEdges,function(t){t.setLayout({ty:n},!0),n+=t.getLayout().dy})})}(t,s)}(l,c,n,i,r,a,0!==D(l,function(t){return 0===t.getLayout().value}).length?0:t.get("layoutIterations"),t.get("orient"),t.get("nodeAlign"))})}),of(function(t,e){t.eachSeriesByType("sankey",function(t){var e=t.getGraph().nodes;if(e.length){var n=1/0,i=-1/0;k(e,function(t){var e=t.getLayout().value;e<n&&(n=e),i<e&&(i=e)}),k(e,function(e){var o=new zx({type:"color",mappingMethod:"linear",dataExtent:[n,i],visual:t.get("color")}).mapValueToVisual(e.getLayout().value),r=e.getModel().get("itemStyle.color");e.setVisual("color",null!=r?r:o)})}})});var nS={_baseAxisDim:null,getInitialData:function(t,e){var n,i,o=e.getComponent("xAxis",this.get("xAxisIndex")),r=e.getComponent("yAxis",this.get("yAxisIndex")),a=o.get("type"),s=r.get("type");"category"===a?(t.layout="horizontal",n=o.getOrdinalMeta(),i=!0):"category"===s?(t.layout="vertical",n=r.getOrdinalMeta(),i=!0):t.layout=t.layout||"horizontal";var l=["x","y"],c="horizontal"===t.layout?0:1,u=this._baseAxisDim=l[c],d=l[1-c],h=[o,r],f=h[c].get("type"),p=h[1-c].get("type"),g=t.data;if(g&&i){var m=[];k(g,function(t,e){var n;t.value&&L(t.value)?(n=t.value.slice(),t.value.unshift(e)):L(t)?(n=t.slice(),t.unshift(e)):n=t,m.push(n)}),t.data=m}var v=this.defaultValueDimensions,y=[{name:u,type:mf(f),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:d,type:mf(p),dimsDef:v.slice()}];return _v(this,{coordDimensions:y,dimensionsCount:v.length+1,encodeDefaulter:N(Lc,y,this)})},getBaseAxis:function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis}};M(Gu.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}}),nS,!0);var iS=["itemStyle"],oS=["emphasis","itemStyle"],rS=(nd.extend({type:"boxplot",render:function(t,e,n){var i=t.getData(),o=this.group,r=this._data;this._data||o.removeAll();var a="horizontal"===t.get("layout")?1:0;i.diff(r).add(function(t){if(i.hasValue(t)){var e=aS(i.getItemLayout(t),i,t,a,!0);i.setItemGraphicEl(t,e),o.add(e)}}).update(function(t,e){var n=r.getItemGraphicEl(e);if(i.hasValue(t)){var s=i.getItemLayout(t);n?sS(s,n,i,t):n=aS(s,i,t,a),o.add(n),i.setItemGraphicEl(t,n)}else o.remove(n)}).remove(function(t){var e=r.getItemGraphicEl(t);e&&o.remove(e)}).execute(),this._data=i},remove:function(t){var e=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(t){t&&e.remove(t)})},dispose:et}),fa.extend({type:"boxplotBoxPath",shape:{},buildPath:function(t,e){var n=e.points,i=0;for(t.moveTo(n[i][0],n[i][1]),i++;i<4;i++)t.lineTo(n[i][0],n[i][1]);for(t.closePath();i<n.length;i++)t.moveTo(n[i][0],n[i][1]),i++,t.lineTo(n[i][0],n[i][1])}}));function aS(t,e,n,i,o){var r=t.ends,a=new rS({shape:{points:o?function(t,e,n){return A(t,function(t){return(t=t.slice())[e]=n.initBaseline,t})}(r,i,t):r}});return sS(t,a,e,n,o),a}function sS(t,e,n,i,o){(0,al[o?"initProps":"updateProps"])(e,{shape:{points:t.ends}},n.hostModel,i);var r=n.getItemModel(i),a=r.getModel(iS),s=n.getItemVisual(i,"color"),l=a.getItemStyle(["borderColor"]);l.stroke=s,l.strokeNoScale=!0,e.useStyle(l),e.z2=100,Rs(e,r.getModel(oS).getItemStyle())}var lS=["itemStyle","borderColor"],cS=k;of(function(t,e){var n=t.get("color");t.eachRawSeriesByType("boxplot",function(e){var i=n[e.seriesIndex%n.length],o=e.getData();o.setVisual({legendSymbol:"roundRect",color:e.get(lS)||i}),t.isSeriesFiltered(e)||o.each(function(t){var e=o.getItemModel(t);o.setItemVisual(t,{color:e.get(lS,!0)})})})}),nf(function(t){var e=function(t){var e=[],n=[];return t.eachSeriesByType("boxplot",function(t){var i=t.getBaseAxis(),o=S(n,i);o<0&&(n[o=n.length]=i,e[o]={axis:i,seriesModels:[]}),e[o].seriesModels.push(t)}),e}(t);cS(e,function(t){var e=t.seriesModels;e.length&&(function(t){var e,n,i=t.axis,o=t.seriesModels,r=o.length,a=t.boxWidthList=[],s=t.boxOffsetList=[],l=[];if("category"===i.type)n=i.getBandWidth();else{var c=0;cS(o,function(t){c=Math.max(c,t.getData().count())}),e=i.getExtent(),Math.abs(e[1]-e[0])}cS(o,function(t){var e=t.get("boxWidth");L(e)||(e=[e,e]),l.push([bl(e[0],n)||0,bl(e[1],n)||0])});var u=.8*n-2,d=u/r*.3,h=(u-d*(r-1))/r,f=h/2-u/2;cS(o,function(t,e){s.push(f),f+=d+h,a.push(Math.min(Math.max(h,l[e][0]),l[e][1]))})}(t),cS(e,function(e,n){!function(t,e,n){var i=t.coordinateSystem,o=t.getData(),r=n/2,a="horizontal"===t.get("layout")?0:1,s=1-a,l=["x","y"],c=o.mapDimension(l[a]),u=o.mapDimension(l[s],!0);if(!(null==c||u.length<5))for(var d=0;d<o.count();d++){var h=o.get(c,d),f=x(h,u[2],d),p=x(h,u[0],d),g=x(h,u[1],d),m=x(h,u[3],d),v=x(h,u[4],d),y=[];b(y,g,0),b(y,m,1),y.push(p,g,v,m),_(y,p),_(y,v),_(y,f),o.setItemLayout(d,{initBaseline:f[s],ends:y})}function x(t,n,r){var l,c=o.get(n,r),u=[];return u[a]=t,u[s]=c,isNaN(t)||isNaN(c)?l=[NaN,NaN]:(l=i.dataToPoint(u))[a]+=e,l}function b(t,e,n){var i=e.slice(),o=e.slice();i[a]+=r,o[a]-=r,n?t.push(i,o):t.push(o,i)}function _(t,e){var n=e.slice(),i=e.slice();n[a]-=r,i[a]+=r,t.push(n,i)}}(e,t.boxOffsetList[n],t.boxWidthList[n])}))})}),M(Gu.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,clip:!0,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(t,e,n){var i=e.getItemLayout(t);return i&&n.rect(i.brushRect)}}),nS,!0);var uS=["itemStyle"],dS=["emphasis","itemStyle"],hS=["color","color0","borderColor","borderColor0"],fS=(nd.extend({type:"candlestick",render:function(t,e,n){this.group.removeClipPath(),this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},incrementalPrepareRender:function(t,e,n){this._clear(),this._updateDrawMode(t)},incrementalRender:function(t,e,n,i){this._isLargeDraw?this._incrementalRenderLarge(t,e):this._incrementalRenderNormal(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormal:function(t){var e=t.getData(),n=this._data,i=this.group,o=e.getLayout("isSimpleBox"),r=t.get("clip",!0),a=t.coordinateSystem,s=a.getArea&&a.getArea();this._data||i.removeAll(),e.diff(n).add(function(n){if(e.hasValue(n)){var a,l=e.getItemLayout(n);if(r&&gS(s,l))return;Zs(a=pS(l,0,!0),{shape:{points:l.ends}},t,n),mS(a,e,n,o),i.add(a),e.setItemGraphicEl(n,a)}}).update(function(a,l){var c=n.getItemGraphicEl(l);if(e.hasValue(a)){var u=e.getItemLayout(a);r&&gS(s,u)?i.remove(c):(c?Xs(c,{shape:{points:u.ends}},t,a):c=pS(u),mS(c,e,a,o),i.add(c),e.setItemGraphicEl(a,c))}else i.remove(c)}).remove(function(t){var e=n.getItemGraphicEl(t);e&&i.remove(e)}).execute(),this._data=e},_renderLarge:function(t){this._clear(),yS(t,this.group);var e=t.get("clip",!0)?Qg(t.coordinateSystem,!1,t):null;e?this.group.setClipPath(e):this.group.removeClipPath()},_incrementalRenderNormal:function(t,e){for(var n,i=e.getData(),o=i.getLayout("isSimpleBox");null!=(n=t.next());){var r;mS(r=pS(i.getItemLayout(n)),i,n,o),r.incremental=!0,this.group.add(r)}},_incrementalRenderLarge:function(t,e){yS(e,this.group,!0)},remove:function(t){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:et}),fa.extend({type:"normalCandlestickBox",shape:{},buildPath:function(t,e){var n=e.points;this.__simpleBox?(t.moveTo(n[4][0],n[4][1]),t.lineTo(n[6][0],n[6][1])):(t.moveTo(n[0][0],n[0][1]),t.lineTo(n[1][0],n[1][1]),t.lineTo(n[2][0],n[2][1]),t.lineTo(n[3][0],n[3][1]),t.closePath(),t.moveTo(n[4][0],n[4][1]),t.lineTo(n[5][0],n[5][1]),t.moveTo(n[6][0],n[6][1]),t.lineTo(n[7][0],n[7][1]))}}));function pS(t,e,n){var i=t.ends;return new fS({shape:{points:n?function(t,e){return A(t,function(t){return(t=t.slice())[1]=e.initBaseline,t})}(i,t):i},z2:100})}function gS(t,e){for(var n=!0,i=0;i<e.ends.length;i++)if(t.contain(e.ends[i][0],e.ends[i][1])){n=!1;break}return n}function mS(t,e,n,i){var o=e.getItemModel(n),r=o.getModel(uS),a=e.getItemVisual(n,"color"),s=e.getItemVisual(n,"borderColor")||a,l=r.getItemStyle(hS);t.useStyle(l),t.style.strokeNoScale=!0,t.style.fill=a,t.style.stroke=s,t.__simpleBox=i,Rs(t,o.getModel(dS).getItemStyle())}var vS=fa.extend({type:"largeCandlestickBox",shape:{},buildPath:function(t,e){for(var n=e.points,i=0;i<n.length;)if(this.__sign===n[i++]){var o=n[i++];t.moveTo(o,n[i++]),t.lineTo(o,n[i++])}else i+=3}});function yS(t,e,n){var i=t.getData(),o=i.getLayout("largePoints"),r=new vS({shape:{points:o},__sign:1});e.add(r);var a=new vS({shape:{points:o},__sign:-1});e.add(a),xS(1,r,t,i),xS(-1,a,t,i),n&&(r.incremental=!0,a.incremental=!0)}function xS(t,e,n,i){var o=0<t?"P":"N",r=i.getVisual("borderColor"+o)||i.getVisual("color"+o),a=n.getModel(uS).getItemStyle(hS);e.useStyle(a),e.style.fill=null,e.style.stroke=r}var bS=["itemStyle","borderColor"],_S=["itemStyle","borderColor0"],wS=["itemStyle","color"],SS=["itemStyle","color0"],CS={seriesType:"candlestick",plan:Qu(),performRawSeries:!0,reset:function(t,e){if(t.getData().setVisual({legendSymbol:"roundRect",colorP:n(1,t),colorN:n(-1,t),borderColorP:i(1,t),borderColorN:i(-1,t)}),!e.isSeriesFiltered(t))return!t.pipelineContext.large&&{progress:function(t,e){for(var o;null!=(o=t.next());){var r=e.getItemModel(o),a=e.getItemLayout(o).sign;e.setItemVisual(o,{color:n(a,r),borderColor:i(a,r)})}}};function n(t,e){return e.get(0<t?wS:SS)}function i(t,e){return e.get(0<t?bS:_S)}}},MS="undefined"!=typeof Float32Array?Float32Array:Array,TS={seriesType:"candlestick",plan:Qu(),reset:function(t){var e=t.coordinateSystem,n=t.getData(),i=function(t,e){var n,i=t.getBaseAxis(),o="category"===i.type?i.getBandWidth():(n=i.getExtent(),Math.abs(n[1]-n[0])/e.count()),r=bl(G(t.get("barMaxWidth"),o),o),a=bl(G(t.get("barMinWidth"),1),o),s=t.get("barWidth");return null!=s?bl(s,o):Math.max(Math.min(o/2,r),a)}(t,n),o=["x","y"],r=n.mapDimension(o[0]),a=n.mapDimension(o[1],!0),s=a[0],l=a[1],c=a[2],u=a[3];if(n.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),!(null==r||a.length<4))return{progress:t.pipelineContext.large?function(t,n){for(var i,o,a=new MS(4*t.count),d=0,h=[],f=[];null!=(o=t.next());){var p=n.get(r,o),g=n.get(s,o),m=n.get(l,o),v=n.get(c,o),y=n.get(u,o);isNaN(p)||isNaN(v)||isNaN(y)?(a[d++]=NaN,d+=3):(a[d++]=kS(n,o,g,m,l),h[0]=p,h[1]=v,i=e.dataToPoint(h,null,f),a[d++]=i?i[0]:NaN,a[d++]=i?i[1]:NaN,h[1]=y,i=e.dataToPoint(h,null,f),a[d++]=i?i[1]:NaN)}n.setLayout("largePoints",a)}:function(t,n){for(var o;null!=(o=t.next());){var a=n.get(r,o),d=n.get(s,o),h=n.get(l,o),f=n.get(c,o),p=n.get(u,o),g=Math.min(d,h),m=Math.max(d,h),v=w(g,a),y=w(m,a),x=w(f,a),b=w(p,a),_=[];S(_,y,0),S(_,v,1),_.push(M(b),M(y),M(x),M(v)),n.setItemLayout(o,{sign:kS(n,o,d,h,l),initBaseline:h<d?y[1]:v[1],ends:_,brushRect:C(f,p,a)})}function w(t,n){var i=[];return i[0]=n,i[1]=t,isNaN(n)||isNaN(t)?[NaN,NaN]:e.dataToPoint(i)}function S(t,e,n){var o=e.slice(),r=e.slice();o[0]=_s(o[0]+i/2,1,!1),r[0]=_s(r[0]-i/2,1,!0),n?t.push(o,r):t.push(r,o)}function C(t,e,n){var o=w(t,n),r=w(e,n);return o[0]-=i/2,r[0]-=i/2,{x:o[0],y:o[1],width:i,height:r[1]-o[1]}}function M(t){return t[0]=_s(t[0],1),t}}}}};function kS(t,e,n,i,o){return i<n?-1:n<i?1:0<e?t.get(o,e-1)<=i?1:-1:1}function AS(t,e){var n=e.rippleEffectColor||e.color;t.eachChild(function(t){t.attr({z:e.z,zlevel:e.zlevel,style:{stroke:"stroke"===e.brushType?n:null,fill:"fill"===e.brushType?n:null}})})}function IS(t,e){Cn.call(this);var n=new wg(t,e),i=new Cn;this.add(n),this.add(i),i.beforeUpdate=function(){this.attr(n.getScale())},this.updateData(t,e)}Jh(function(t){t&&L(t.series)&&k(t.series,function(t){B(t)&&"k"===t.type&&(t.type="candlestick")})}),of(CS),nf(TS),Gu.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(t,e){return Xf(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});var DS=IS.prototype;DS.stopEffectAnimation=function(){this.childAt(1).removeAll()},DS.startEffectAnimation=function(t){for(var e=t.symbolType,n=t.color,i=this.childAt(1),o=0;o<3;o++){var r=eg(e,-1,-1,2,2,n);r.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]});var a=-o/3*t.period+t.effectOffset;r.animate("",!0).when(t.period,{scale:[t.rippleScale/2,t.rippleScale/2]}).delay(a).start(),r.animateStyle(!0).when(t.period,{opacity:0}).delay(a).start(),i.add(r)}AS(i,t)},DS.updateEffectAnimation=function(t){for(var e=this._effectCfg,n=this.childAt(1),i=["symbolType","period","rippleScale"],o=0;o<i.length;o++){var r=i[o];if(e[r]!==t[r])return this.stopEffectAnimation(),void this.startEffectAnimation(t)}AS(n,t)},DS.highlight=function(){this.trigger("emphasis")},DS.downplay=function(){this.trigger("normal")},DS.updateData=function(t,e){var n=t.hostModel;this.childAt(0).updateData(t,e);var i=this.childAt(1),o=t.getItemModel(e),r=t.getItemVisual(e,"symbol"),a=function(t){return L(t)||(t=[+t,+t]),t}(t.getItemVisual(e,"symbolSize")),s=t.getItemVisual(e,"color");i.attr("scale",a),i.traverse(function(t){t.attr({fill:s})});var l=o.getShallow("symbolOffset");if(l){var c=i.position;c[0]=bl(l[0],a[0]),c[1]=bl(l[1],a[1])}var u=t.getItemVisual(e,"symbolRotate");i.rotation=(u||0)*Math.PI/180||0;var d={};if(d.showEffectOn=n.get("showEffectOn"),d.rippleScale=o.get("rippleEffect.scale"),d.brushType=o.get("rippleEffect.brushType"),d.period=1e3*o.get("rippleEffect.period"),d.effectOffset=e/t.count(),d.z=o.getShallow("z")||0,d.zlevel=o.getShallow("zlevel")||0,d.symbolType=r,d.color=s,d.rippleEffectColor=o.get("rippleEffect.color"),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===d.showEffectOn)this._effectCfg?this.updateEffectAnimation(d):this.startEffectAnimation(d),this._effectCfg=d;else{this._effectCfg=null,this.stopEffectAnimation();var h=this.childAt(0),f=function(){h.highlight(),"render"!==d.showEffectOn&&this.startEffectAnimation(d)},p=function(){h.downplay(),"render"!==d.showEffectOn&&this.stopEffectAnimation()};this.on("mouseover",f,this).on("mouseout",p,this).on("emphasis",f,this).on("normal",p,this)}this._effectCfg=d},DS.fadeOut=function(t){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),t&&t()},C(IS,Cn),uf({type:"effectScatter",init:function(){this._symbolDraw=new Eg(IS)},render:function(t,e,n){var i=t.getData(),o=this._symbolDraw;o.updateData(i),this.group.add(o.group)},updateTransform:function(t,e,n){var i=t.getData();this.group.dirty();var o=am().reset(t);o.progress&&o.progress({start:0,end:i.count()},i),this._symbolDraw.updateLayout(i)},_updateGroupTransform:function(t){var e=t.coordinateSystem;e&&e.getRoamTransform&&(this.group.transform=de(e.getRoamTransform()),this.group.decomposeTransform())},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(e)},dispose:function(){}}),of(rm("effectScatter","circle")),nf(am("effectScatter"));var PS="undefined"==typeof Uint32Array?Array:Uint32Array,ES="undefined"==typeof Float64Array?Array:Float64Array;function NS(t){var e=t.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(t.data=A(e,function(t){var e={coords:[t[0].coord,t[1].coord]};return t[0].name&&(e.fromName=t[0].name),t[1].name&&(e.toName=t[1].name),y([e,t[0],t[1]])}))}var LS=Gu.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(t){t.data=t.data||[],NS(t);var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count)),LS.superApply(this,"init",arguments)},mergeOption:function(t){if(NS(t),t.data){var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count))}LS.superApply(this,"mergeOption",arguments)},appendData:function(t){var e=this._processFlatCoordsArray(t.data);e.flatCoords&&(this._flatCoords?(this._flatCoords=tt(this._flatCoords,e.flatCoords),this._flatCoordsOffset=tt(this._flatCoordsOffset,e.flatCoordsOffset)):(this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset),t.data=new Float32Array(e.count)),this.getRawData().appendData(t.data)},_getCoordsFromItemModel:function(t){var e=this.getData().getItemModel(t);return e.option instanceof Array?e.option:e.getShallow("coords")},getLineCoordsCount:function(t){return this._flatCoordsOffset?this._flatCoordsOffset[2*t+1]:this._getCoordsFromItemModel(t).length},getLineCoords:function(t,e){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*t],i=this._flatCoordsOffset[2*t+1],o=0;o<i;o++)e[o]=e[o]||[],e[o][0]=this._flatCoords[n+2*o],e[o][1]=this._flatCoords[n+2*o+1];return i}var r=this._getCoordsFromItemModel(t);for(o=0;o<r.length;o++)e[o]=e[o]||[],e[o][0]=r[o][0],e[o][1]=r[o][1];return r.length},_processFlatCoordsArray:function(t){var e=0;if(this._flatCoords&&(e=this._flatCoords.length),"number"!=typeof t[0])return{flatCoordsOffset:null,flatCoords:null,count:t.length};for(var n=t.length,i=new PS(n),o=new ES(n),r=0,a=0,s=0,l=0;l<n;){s++;var c=t[l++];i[a++]=r+e,i[a++]=c;for(var u=0;u<c;u++){var d=t[l++],h=t[l++];o[r++]=d,o[r++]=h}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,a),flatCoords:o,count:s}},getInitialData:function(t,e){var n=new Af(["value"],this);return n.hasItemOption=!1,n.initData(t.data,[],function(t,e,i,o){if(t instanceof Array)return NaN;n.hasItemOption=!0;var r=t.value;return null!=r?r instanceof Array?r[o]:r:void 0}),n},formatTooltip:function(t){var e=this.getData().getItemModel(t),n=e.get("name");if(n)return n;var i=e.get("fromName"),o=e.get("toName"),r=[];return null!=i&&r.push(i),null!=o&&r.push(o),Gl(r.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var t=this.option.progressive;return null==t?this.option.large?1e4:this.get("progressive"):t},getProgressiveThreshold:function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?2e4:this.get("progressiveThreshold"):t},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}});function RS(t,e,n){Cn.call(this),this.add(this.createLine(t,e,n)),this._updateEffectSymbol(t,e)}var OS=RS.prototype;function BS(t,e,n){Cn.call(this),this._createPolyline(t,e,n)}OS.createLine=function(t,e,n){return new zb(t,e,n)},OS._updateEffectSymbol=function(t,e){var n=t.getItemModel(e).getModel("effect"),i=n.get("symbolSize"),o=n.get("symbol");L(i)||(i=[i,i]);var r=n.get("color")||t.getItemVisual(e,"color"),a=this.childAt(1);this._symbolType!==o&&(this.remove(a),(a=eg(o,-.5,-.5,1,1,r)).z2=100,a.culling=!0,this.add(a)),a&&(a.setStyle("shadowColor",r),a.setStyle(n.getItemStyle(["color"])),a.attr("scale",i),a.setColor(r),a.attr("scale",i),this._symbolType=o,this._symbolScale=i,this._updateEffectAnimation(t,n,e))},OS._updateEffectAnimation=function(t,e,n){var i=this.childAt(1);if(i){var o=this,r=t.getItemLayout(n),a=1e3*e.get("period"),s=e.get("loop"),l=e.get("constantSpeed"),c=W(e.get("delay"),function(e){return e/t.count()*a/3}),u="function"==typeof c;if(i.ignore=!0,this.updateAnimationPoints(i,r),0<l&&(a=this.getLineLength(i)/l*1e3),a!==this._period||s!==this._loop){i.stopAnimation();var d=c;u&&(d=c(n)),0<i.__t&&(d=-a*i.__t),i.__t=0;var h=i.animate("",s).when(a,{__t:1}).delay(d).during(function(){o.updateSymbolPosition(i)});s||h.done(function(){o.remove(i)}),h.start()}this._period=a,this._loop=s}},OS.getLineLength=function(t){return mt(t.__p1,t.__cp1)+mt(t.__cp1,t.__p2)},OS.updateAnimationPoints=function(t,e){t.__p1=e[0],t.__p2=e[1],t.__cp1=e[2]||[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]},OS.updateData=function(t,e,n){this.childAt(0).updateData(t,e,n),this._updateEffectSymbol(t,e)},OS.updateSymbolPosition=function(t){var e=t.__p1,n=t.__p2,i=t.__cp1,o=t.__t,r=t.position,a=[r[0],r[1]],s=vr,l=yr;r[0]=s(e[0],i[0],n[0],o),r[1]=s(e[1],i[1],n[1],o);var c=l(e[0],i[0],n[0],o),u=l(e[1],i[1],n[1],o);if(t.rotation=-Math.atan2(u,c)-Math.PI/2,"line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)if(void 0!==t.__lastT&&t.__lastT<t.__t){var d=1.05*mt(a,r);t.attr("scale",[t.scale[0],d]),1===o&&(r[0]=a[0]+(r[0]-a[0])/2,r[1]=a[1]+(r[1]-a[1])/2)}else 1===t.__lastT?(d=2*mt(e,r),t.attr("scale",[t.scale[0],d])):t.attr("scale",this._symbolScale);t.__lastT=t.__t,t.ignore=!1},OS.updateLayout=function(t,e){this.childAt(0).updateLayout(t,e);var n=t.getItemModel(e).getModel("effect");this._updateEffectAnimation(t,n,e)},C(RS,Cn);var zS=BS.prototype;function VS(t,e,n){RS.call(this,t,e,n),this._lastFrame=0,this._lastFramePercent=0}zS._createPolyline=function(t,e,n){var i=t.getItemLayout(e),o=new Va({shape:{points:i}});this.add(o),this._updateCommonStl(t,e,n)},zS.updateData=function(t,e,n){var i=t.hostModel;Xs(this.childAt(0),{shape:{points:t.getItemLayout(e)}},i,e),this._updateCommonStl(t,e,n)},zS._updateCommonStl=function(t,e,n){var i=this.childAt(0),o=t.getItemModel(e),r=t.getItemVisual(e,"color"),a=n&&n.lineStyle,s=n&&n.hoverLineStyle;n&&!t.hasItemOption||(a=o.getModel("lineStyle").getLineStyle(),s=o.getModel("emphasis.lineStyle").getLineStyle()),i.useStyle(b({strokeNoScale:!0,fill:"none",stroke:r},a)),i.hoverStyle=s,Rs(this)},zS.updateLayout=function(t,e){this.childAt(0).setShape("points",t.getItemLayout(e))},C(BS,Cn);var FS=VS.prototype;FS.createLine=function(t,e,n){return new BS(t,e,n)},FS.updateAnimationPoints=function(t,e){this._points=e;for(var n=[0],i=0,o=1;o<e.length;o++)i+=mt(e[o-1],e[o]),n.push(i);if(0!==i){for(o=0;o<n.length;o++)n[o]/=i;this._offsets=n,this._length=i}},FS.getLineLength=function(t){return this._length},FS.updateSymbolPosition=function(t){var e=t.__t,n=this._points,i=this._offsets,o=n.length;if(i){var r=this._lastFrame;if(e<this._lastFramePercent){for(a=Math.min(r+1,o-1);0<=a&&!(i[a]<=e);a--);a=Math.min(a,o-2)}else{for(var a=r;a<o&&!(i[a]>e);a++);a=Math.min(a-1,o-2)}xt(t.position,n[a],n[a+1],(e-i[a])/(i[a+1]-i[a])),t.rotation=-Math.atan2(n[a+1][1]-n[a][1],n[a+1][0]-n[a][0])-Math.PI/2,this._lastFrame=a,this._lastFramePercent=e,t.ignore=!1}},C(VS,RS);var HS=fs({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(t,e){var n=e.segs,i=e.curveness;if(e.polyline)for(var o=0;o<n.length;){var r=n[o++];if(0<r){t.moveTo(n[o++],n[o++]);for(var a=1;a<r;a++)t.lineTo(n[o++],n[o++])}}else for(o=0;o<n.length;){var s=n[o++],l=n[o++],c=n[o++],u=n[o++];t.moveTo(s,l),0<i?t.quadraticCurveTo((s+c)/2-(l-u)*i,(l+u)/2-(c-s)*i,c,u):t.lineTo(c,u)}},findDataIndex:function(t,e){var n=this.shape,i=n.segs,o=n.curveness;if(n.polyline)for(var r=0,a=0;a<i.length;){var s=i[a++];if(0<s)for(var l=i[a++],c=i[a++],u=1;u<s;u++)if(Yr(l,c,d=i[a++],h=i[a++]))return r;r++}else for(r=0,a=0;a<i.length;){l=i[a++],c=i[a++];var d=i[a++],h=i[a++];if(0<o){if(Zr(l,c,(l+d)/2-(c-h)*o,(c+h)/2-(d-l)*o,d,h))return r}else if(Yr(l,c,d,h))return r;r++}return-1}});function WS(){this.group=new Cn}var GS=WS.prototype;GS.isPersistent=function(){return!this._incremental},GS.updateData=function(t){this.group.removeAll();var e=new HS({rectHover:!0,cursor:"default"});e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t),this.group.add(e),this._incremental=null},GS.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),5e5<t.count()?(this._incremental||(this._incremental=new ns({silent:!0})),this.group.add(this._incremental)):this._incremental=null},GS.incrementalUpdate=function(t,e){var n=new HS;n.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(n,e,!!this._incremental),this._incremental?this._incremental.addDisplayable(n,!0):(n.rectHover=!0,n.cursor="default",n.__startIndex=t.start,this.group.add(n))},GS.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},GS._setCommon=function(t,e,n){var i=e.hostModel;t.setShape({polyline:i.get("polyline"),curveness:i.get("lineStyle.curveness")}),t.useStyle(i.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var o=e.getVisual("color");o&&t.setStyle("stroke",o),t.setStyle("fill"),n||(t.seriesIndex=i.seriesIndex,t.on("mousemove",function(e){t.dataIndex=null;var n=t.findDataIndex(e.offsetX,e.offsetY);0<n&&(t.dataIndex=n+t.__startIndex)}))},GS._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()};var US={seriesType:"lines",plan:Qu(),reset:function(t){var e=t.coordinateSystem,n=t.get("polyline"),i=t.pipelineContext.large;return{progress:function(o,r){var a=[];if(i){var s,l=o.end-o.start;if(n){for(var c=0,u=o.start;u<o.end;u++)c+=t.getLineCoordsCount(u);s=new Float32Array(l+2*c)}else s=new Float32Array(4*l);var d=0,h=[];for(u=o.start;u<o.end;u++){var f=t.getLineCoords(u,a);n&&(s[d++]=f);for(var p=0;p<f;p++)h=e.dataToPoint(a[p],!1,h),s[d++]=h[0],s[d++]=h[1]}r.setLayout("linesPoints",s)}else for(u=o.start;u<o.end;u++){var g=r.getItemModel(u),m=(f=t.getLineCoords(u,a),[]);if(n)for(var v=0;v<f;v++)m.push(e.dataToPoint(a[v]));else{m[0]=e.dataToPoint(a[0]),m[1]=e.dataToPoint(a[1]);var y=g.get("lineStyle.curveness");+y&&(m[2]=[(m[0][0]+m[1][0])/2-(m[0][1]-m[1][1])*y,(m[0][1]+m[1][1])/2-(m[1][0]-m[0][0])*y])}r.setItemLayout(u,m)}}}}};function jS(t){return t instanceof Array||(t=[t,t]),t}uf({type:"lines",init:function(){},render:function(t,e,n){var i=t.getData(),o=this._updateLineDraw(i,t),r=t.get("zlevel"),a=t.get("effect.trailLength"),s=n.getZr(),l="svg"===s.painter.getType();l||s.painter.getLayer(r).clear(!0),null==this._lastZlevel||l||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&a&&(l||s.configLayer(r,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(a/10+.9,1),0)})),o.updateData(i);var c=t.get("clip",!0)&&Qg(t.coordinateSystem,!1,t);c?this.group.setClipPath(c):this.group.removeClipPath(),this._lastZlevel=r,this._finished=!0},incrementalPrepareRender:function(t,e,n){var i=t.getData();this._updateLineDraw(i,t).incrementalPrepareUpdate(i),this._clearLayer(n),this._finished=!1},incrementalRender:function(t,e,n){this._lineDraw.incrementalUpdate(t,e.getData()),this._finished=t.end===e.getData().count()},updateTransform:function(t,e,n){var i=t.getData(),o=t.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var r=US.reset(t);r.progress&&r.progress({start:0,end:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(n)},_updateLineDraw:function(t,e){var n=this._lineDraw,i=this._showEffect(e),o=!!e.get("polyline"),r=e.pipelineContext.large;return n&&i===this._hasEffet&&o===this._isPolyline&&r===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=r?new WS:new Fb(o?i?VS:BS:i?RS:zb),this._hasEffet=i,this._isPolyline=o,this._isLargeDraw=r,this.group.removeAll()),this.group.add(n.group),n},_showEffect:function(t){return!!t.get("effect.show")},_clearLayer:function(t){var e=t.getZr();"svg"===e.painter.getType()||null==this._lastZlevel||e.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(t,e){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(e)},dispose:function(){}});var $S="lineStyle.opacity".split("."),qS={seriesType:"lines",reset:function(t,e,n){var i=jS(t.get("symbol")),o=jS(t.get("symbolSize")),r=t.getData();return r.setVisual("fromSymbol",i&&i[0]),r.setVisual("toSymbol",i&&i[1]),r.setVisual("fromSymbolSize",o&&o[0]),r.setVisual("toSymbolSize",o&&o[1]),r.setVisual("opacity",t.get($S)),{dataEach:r.hasItemOption?function(t,e){var n=t.getItemModel(e),i=jS(n.getShallow("symbol",!0)),o=jS(n.getShallow("symbolSize",!0)),r=n.get($S);i[0]&&t.setItemVisual(e,"fromSymbol",i[0]),i[1]&&t.setItemVisual(e,"toSymbol",i[1]),o[0]&&t.setItemVisual(e,"fromSymbolSize",o[0]),o[1]&&t.setItemVisual(e,"toSymbolSize",o[1]),t.setItemVisual(e,"opacity",r)}:null}}};function YS(){var t=_();this.canvas=t,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}nf(US),of(qS),Gu.extend({type:"series.heatmap",getInitialData:function(t,e){return Xf(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var t=jc.get(this.get("coordinateSystem"));if(t&&t.dimensions)return"lng"===t.dimensions[0]&&"lat"===t.dimensions[1]},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}}),YS.prototype={update:function(t,e,n,i,o,r){var a=this._getBrush(),s=this._getGradient(t,o,"inRange"),l=this._getGradient(t,o,"outOfRange"),c=this.pointSize+this.blurSize,u=this.canvas,d=u.getContext("2d"),h=t.length;u.width=e,u.height=n;for(var f=0;f<h;++f){var p=t[f],g=p[0],m=p[1],v=i(p[2]);d.globalAlpha=v,d.drawImage(a,g-c,m-c)}if(!u.width||!u.height)return u;for(var y=d.getImageData(0,0,u.width,u.height),x=y.data,b=0,_=x.length,w=this.minOpacity,S=this.maxOpacity-w;b<_;){v=x[b+3]/256;var C=4*Math.floor(255*v);if(0<v){var M=r(v)?s:l;0<v&&(v=v*S+w),x[b++]=M[C],x[b++]=M[1+C],x[b++]=M[2+C],x[b++]=M[3+C]*v*256}else b+=4}return d.putImageData(y,0,0),u},_getBrush:function(){var t=this._brushCanvas||(this._brushCanvas=_()),e=this.pointSize+this.blurSize,n=2*e;t.width=n,t.height=n;var i=t.getContext("2d");return i.clearRect(0,0,n,n),i.shadowOffsetX=n,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-e,e,this.pointSize,0,2*Math.PI,!0),i.closePath(),i.fill(),t},_getGradient:function(t,e,n){for(var i=this._gradientPixels,o=i[n]||(i[n]=new Uint8ClampedArray(1024)),r=[0,0,0,0],a=0,s=0;s<256;s++)e[n](s/255,!0,r),o[a++]=r[0],o[a++]=r[1],o[a++]=r[2],o[a++]=r[3];return o}},uf({type:"heatmap",render:function(t,e,n){var i;e.eachComponent("visualMap",function(e){e.eachTargetSeries(function(n){n===t&&(i=e)})}),this.group.removeAll(),this._incrementalDisplayable=null;var o=t.coordinateSystem;"cartesian2d"===o.type||"calendar"===o.type?this._renderOnCartesianAndCalendar(t,n,0,t.getData().count()):function(t){var e=t.dimensions;return"lng"===e[0]&&"lat"===e[1]}(o)&&this._renderOnGeo(o,t,i,n)},incrementalPrepareRender:function(t,e,n){this.group.removeAll()},incrementalRender:function(t,e,n,i){e.coordinateSystem&&this._renderOnCartesianAndCalendar(e,i,t.start,t.end,!0)},_renderOnCartesianAndCalendar:function(t,e,n,i,o){var r,a,s=t.coordinateSystem;if("cartesian2d"===s.type){var l=s.getAxis("x"),c=s.getAxis("y");r=l.getBandWidth(),a=c.getBandWidth()}for(var u=this.group,d=t.getData(),h="emphasis.itemStyle",f="emphasis.label",p=t.getModel("itemStyle").getItemStyle(["color"]),g=t.getModel(h).getItemStyle(),m=t.getModel("label"),v=t.getModel(f),y=s.type,b="cartesian2d"===y?[d.mapDimension("x"),d.mapDimension("y"),d.mapDimension("value")]:[d.mapDimension("time"),d.mapDimension("value")],_=n;_<i;_++){var w;if("cartesian2d"===y){if(isNaN(d.get(b[2],_)))continue;var S=s.dataToPoint([d.get(b[0],_),d.get(b[1],_)]);w=new ja({shape:{x:Math.floor(Math.round(S[0])-r/2),y:Math.floor(Math.round(S[1])-a/2),width:Math.ceil(r),height:Math.ceil(a)},style:{fill:d.getItemVisual(_,"color"),opacity:d.getItemVisual(_,"opacity")}})}else{if(isNaN(d.get(b[1],_)))continue;w=new ja({z2:1,shape:s.dataToRect([d.get(b[0],_)]).contentShape,style:{fill:d.getItemVisual(_,"color"),opacity:d.getItemVisual(_,"opacity")}})}var C=d.getItemModel(_);d.hasItemOption&&(p=C.getModel("itemStyle").getItemStyle(["color"]),g=C.getModel(h).getItemStyle(),m=C.getModel("label"),v=C.getModel(f));var M=t.getRawValue(_),T="-";M&&null!=M[2]&&(T=M[2]),Vs(p,g,m,v,{labelFetcher:t,labelDataIndex:_,defaultText:T,isRectText:!0}),w.setStyle(p),Rs(w,d.hasItemOption?g:x({},g)),(w.incremental=o)&&(w.useHoverLayer=!0),u.add(w),d.setItemGraphicEl(_,w)}},_renderOnGeo:function(t,e,n,i){var o=n.targetVisuals.inRange,r=n.targetVisuals.outOfRange,a=e.getData(),s=this._hmLayer||this._hmLayer||new YS;s.blurSize=e.get("blurSize"),s.pointSize=e.get("pointSize"),s.minOpacity=e.get("minOpacity"),s.maxOpacity=e.get("maxOpacity");var l=t.getViewRect().clone(),c=t.getRoamTransform();l.applyTransform(c);var u=Math.max(l.x,0),d=Math.max(l.y,0),h=Math.min(l.width+l.x,i.getWidth()),f=Math.min(l.height+l.y,i.getHeight()),p=h-u,g=f-d,m=[a.mapDimension("lng"),a.mapDimension("lat"),a.mapDimension("value")],v=a.mapArray(m,function(e,n,i){var o=t.dataToPoint([e,n]);return o[0]-=u,o[1]-=d,o.push(i),o}),y=n.getExtent(),x="visualMap.continuous"===n.type?function(t,e){var n=t[1]-t[0];return e=[(e[0]-t[0])/n,(e[1]-t[0])/n],function(t){return t>=e[0]&&t<=e[1]}}(y,n.option.range):function(t,e,n){var i=t[1]-t[0],o=(e=A(e,function(e){return{interval:[(e.interval[0]-t[0])/i,(e.interval[1]-t[0])/i]}})).length,r=0;return function(t){for(var i=r;i<o;i++)if((a=e[i].interval)[0]<=t&&t<=a[1]){r=i;break}if(i===o)for(i=r-1;0<=i;i--){var a;if((a=e[i].interval)[0]<=t&&t<=a[1]){r=i;break}}return 0<=i&&i<o&&n[i]}}(y,n.getPieceList(),n.option.selected);s.update(v,p,g,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:r.color.getColorMapper()},x);var b=new Wi({style:{width:p,height:g,x:u,y:d,image:s.canvas},silent:!0});this.group.add(b)},dispose:function(){}});var XS=tv.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(t){return t.stack=null,XS.superApply(this,"getInitialData",arguments)}}),ZS=["itemStyle","borderWidth"],KS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],JS=new Ea;function QS(t,e,n,i){var o=t.getItemLayout(e),r=n.get("symbolRepeat"),a=n.get("symbolClip"),s=n.get("symbolPosition")||"start",l=(n.get("symbolRotate")||0)*Math.PI/180||0,c=n.get("symbolPatternSize")||2,u=n.isAnimationEnabled(),d={dataIndex:e,layout:o,itemModel:n,symbolType:t.getItemVisual(e,"symbol")||"circle",color:t.getItemVisual(e,"color"),symbolClip:a,symbolRepeat:r,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:c,rotation:l,animationModel:u?n:null,hoverAnimation:u&&n.get("hoverAnimation"),z2:n.getShallow("z",!0)||0};!function(t,e,n,i,o){var r,a=i.valueDim,s=t.get("symbolBoundingData"),l=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()),c=l.toGlobalCoord(l.dataToCoord(0)),u=1-+(n[a.wh]<=0);if(L(s)){var d=[tC(l,s[0])-c,tC(l,s[1])-c];d[1]<d[0]&&d.reverse(),r=d[u]}else r=null!=s?tC(l,s)-c:e?i.coordSysExtent[a.index][u]-c:n[a.wh];o.boundingLength=r,e&&(o.repeatCutLength=n[a.wh]),o.pxSign=0<r?1:r<0?-1:0}(n,r,o,i,d),function(t,e,n,i,o,r,a,s,l,c){var u=l.valueDim,d=l.categoryDim,h=Math.abs(n[d.wh]),f=t.getItemVisual(e,"symbolSize");(f=L(f)?f.slice():(null==f&&(f="100%"),[f,f]))[d.index]=bl(f[d.index],h),f[u.index]=bl(f[u.index],i?h:Math.abs(r)),c.symbolSize=f,(c.symbolScale=[f[0]/s,f[1]/s])[u.index]*=(l.isHorizontal?-1:1)*a}(t,e,o,r,0,d.boundingLength,d.pxSign,c,i,d),function(t,e,n,i,o){var r=t.get(ZS)||0;r&&(JS.attr({scale:e.slice(),rotation:n}),JS.updateTransform(),r/=JS.getLineScale(),r*=e[i.valueDim.index]),o.valueLineWidth=r}(n,d.symbolScale,l,i,d);var h=d.symbolSize,f=n.get("symbolOffset");return L(f)&&(f=[bl(f[0],h[0]),bl(f[1],h[1])]),function(t,e,n,i,o,r,a,s,l,c,u,d){var h=u.categoryDim,f=u.valueDim,p=d.pxSign,g=Math.max(e[f.index]+s,0),m=g;if(i){var v=Math.abs(l),y=W(t.get("symbolMargin"),"15%")+"",b=!1;y.lastIndexOf("!")===y.length-1&&(b=!0,y=y.slice(0,y.length-1)),y=bl(y,e[f.index]);var _=Math.max(g+2*y,0),w=b?0:2*y,S=Ol(i),C=S?i:mC((v+w)/_);_=g+2*(y=(v-C*g)/2/(b?C:C-1)),w=b?0:2*y,S||"fixed"===i||(C=c?mC((Math.abs(c)+w)/_):0),m=C*_-w,d.repeatTimes=C,d.symbolMargin=y}var M=p*(m/2),T=d.pathPosition=[];T[h.index]=n[h.wh]/2,T[f.index]="start"===a?M:"end"===a?l-M:l/2,r&&(T[0]+=r[0],T[1]+=r[1]);var k=d.bundlePosition=[];k[h.index]=n[h.xy],k[f.index]=n[f.xy];var A=d.barRectShape=x({},n);A[f.wh]=p*Math.max(Math.abs(n[f.wh]),Math.abs(T[f.index]+M)),A[h.wh]=n[h.wh];var I=d.clipShape={};I[h.xy]=-n[h.xy],I[h.wh]=u.ecSize[h.wh],I[f.xy]=0,I[f.wh]=n[f.wh]}(n,h,o,r,0,f,s,d.valueLineWidth,d.boundingLength,d.repeatCutLength,i,d),d}function tC(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function eC(t){var e=t.symbolPatternSize,n=eg(t.symbolType,-e/2,-e/2,e,e,t.color);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function nC(t,e,n,i){var o=t.__pictorialBundle,r=n.pathPosition,a=e.valueDim,s=n.repeatTimes||0,l=0,c=n.symbolSize[e.valueDim.index]+n.valueLineWidth+2*n.symbolMargin;for(fC(t,function(t){t.__pictorialAnimationIndex=l,t.__pictorialRepeatTimes=s,l<s?pC(t,null,h(l),n,i):pC(t,null,{scale:[0,0]},n,i,function(){o.remove(t)}),cC(t,n),l++});l<s;l++){var u=eC(n);u.__pictorialAnimationIndex=l,u.__pictorialRepeatTimes=s,o.add(u);var d=h(l);pC(u,{position:d.position,scale:[0,0]},{scale:d.scale,rotation:d.rotation},n,i),u.on("mouseover",f).on("mouseout",p),cC(u,n)}function h(t){var e=r.slice(),i=n.pxSign,o=t;return("start"===n.symbolRepeatDirection?0<i:i<0)&&(o=s-1-t),e[a.index]=c*(o-s/2+.5)+r[a.index],{position:e,scale:n.symbolScale.slice(),rotation:n.rotation}}function f(){fC(t,function(t){t.trigger("emphasis")})}function p(){fC(t,function(t){t.trigger("normal")})}}function iC(t,e,n,i){var o=t.__pictorialBundle,r=t.__pictorialMainPath;r?pC(r,null,{position:n.pathPosition.slice(),scale:n.symbolScale.slice(),rotation:n.rotation},n,i):(r=t.__pictorialMainPath=eC(n),o.add(r),pC(r,{position:n.pathPosition.slice(),scale:[0,0],rotation:n.rotation},{scale:n.symbolScale.slice()},n,i),r.on("mouseover",function(){this.trigger("emphasis")}).on("mouseout",function(){this.trigger("normal")})),cC(r,n)}function oC(t,e,n){var i=x({},e.barRectShape),o=t.__pictorialBarRect;o?pC(o,null,{shape:i},e,n):(o=t.__pictorialBarRect=new ja({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),t.add(o))}function rC(t,e,n,i){if(n.symbolClip){var o=t.__pictorialClipPath,r=x({},n.clipShape),a=e.valueDim,s=n.animationModel,l=n.dataIndex;if(o)Xs(o,{shape:r},s,l);else{r[a.wh]=0,o=new ja({shape:r}),t.__pictorialBundle.setClipPath(o),t.__pictorialClipPath=o;var c={};c[a.wh]=n.clipShape[a.wh],al[i?"updateProps":"initProps"](o,{shape:c},s,l)}}}function aC(t,e){var n=t.getItemModel(e);return n.getAnimationDelayParams=sC,n.isAnimationEnabled=lC,n}function sC(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function lC(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function cC(t,e){t.off("emphasis").off("normal");var n=e.symbolScale.slice();e.hoverAnimation&&t.on("emphasis",function(){this.animateTo({scale:[1.1*n[0],1.1*n[1]]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:n.slice()},400,"elasticOut")})}function uC(t,e,n,i){var o=new Cn,r=new Cn;return o.add(r),(o.__pictorialBundle=r).attr("position",n.bundlePosition.slice()),n.symbolRepeat?nC(o,e,n):iC(o,0,n),oC(o,n,i),rC(o,e,n,i),o.__pictorialShapeStr=hC(t,n),o.__pictorialSymbolMeta=n,o}function dC(t,e,n,i){var o=i.__pictorialBarRect;o&&(o.style.text=null);var r=[];fC(i,function(t){r.push(t)}),i.__pictorialMainPath&&r.push(i.__pictorialMainPath),i.__pictorialClipPath&&(n=null),k(r,function(t){Xs(t,{scale:[0,0]},n,e,function(){i.parent&&i.parent.remove(i)})}),t.setItemGraphicEl(e,null)}function hC(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function fC(t,e,n){k(t.__pictorialBundle.children(),function(i){i!==t.__pictorialBarRect&&e.call(n,i)})}function pC(t,e,n,i,o,r){e&&t.attr(e),i.symbolClip&&!o?n&&t.attr(n):n&&al[o?"updateProps":"initProps"](t,n,i.animationModel,i.dataIndex,r)}function gC(t,e,n){var i=n.color,o=n.dataIndex,r=n.itemModel,a=r.getModel("itemStyle").getItemStyle(["color"]),s=r.getModel("emphasis.itemStyle").getItemStyle(),l=r.getShallow("cursor");fC(t,function(t){t.setColor(i),t.setStyle(b({fill:i,opacity:n.opacity},a)),Rs(t,s),l&&(t.cursor=l),t.z2=n.z2});var c={},u=t.__pictorialBarRect;ev(u.style,c,r,i,e.seriesModel,o),Rs(u,c)}function mC(t){var e=Math.round(t);return Math.abs(t-e)<1e-4?e:Math.ceil(t)}function vC(t,e,n,i,o){mg.call(this,t,e,n),this.type=i||"value",this.position=o||"bottom",this.orient=null}function yC(t,e,n){this.dimension="single",this.dimensions=["single"],this._axis=null,this._init(t,e,n),this.model=t}function xC(t,e){e=e||{};var n=t.axis,i={},o=n.position,r=n.orient,a=t.coordinateSystem.getRect(),s=[a.x,a.x+a.width,a.y,a.y+a.height],l={horizontal:{top:s[2],bottom:s[3]},vertical:{left:s[0],right:s[1]}};i.position=["vertical"===r?l.vertical[o]:s[0],"horizontal"===r?l.horizontal[o]:s[3]],i.rotation=Math.PI/2*{horizontal:0,vertical:1}[r],i.labelDirection=i.tickDirection=i.nameDirection={top:-1,bottom:1,right:1,left:-1}[o],t.get("axisTick.inside")&&(i.tickDirection=-i.tickDirection),W(e.labelInside,t.get("axisLabel.inside"))&&(i.labelDirection=-i.labelDirection);var c=e.rotate;return null==c&&(c=t.get("axisLabel.rotate")),i.labelRotation="top"===o?-c:c,i.z2=1,i}uf({type:"pictorialBar",render:function(t,e,n){var i=this.group,o=t.getData(),r=this._data,a=t.coordinateSystem,s=!!a.getBaseAxis().isHorizontal(),l=a.grid.getRect(),c={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:t,coordSys:a,coordSysExtent:[[l.x,l.x+l.width],[l.y,l.y+l.height]],isHorizontal:s,valueDim:KS[+s],categoryDim:KS[1-s]};return o.diff(r).add(function(t){if(o.hasValue(t)){var e=aC(o,t),n=QS(o,t,e,c),r=uC(o,c,n);o.setItemGraphicEl(t,r),i.add(r),gC(r,c,n)}}).update(function(t,e){var n=r.getItemGraphicEl(e);if(o.hasValue(t)){var a=aC(o,t),s=QS(o,t,a,c),l=hC(o,s);n&&l!==n.__pictorialShapeStr&&(i.remove(n),o.setItemGraphicEl(t,null),n=null),n?function(t,e,n){var i=n.animationModel,o=n.dataIndex;Xs(t.__pictorialBundle,{position:n.bundlePosition.slice()},i,o),n.symbolRepeat?nC(t,e,n,!0):iC(t,0,n,!0),oC(t,n,!0),rC(t,e,n,!0)}(n,c,s):n=uC(o,c,s,!0),o.setItemGraphicEl(t,n),n.__pictorialSymbolMeta=s,i.add(n),gC(n,c,s)}else i.remove(n)}).remove(function(t){var e=r.getItemGraphicEl(t);e&&dC(r,t,e.__pictorialSymbolMeta.animationModel,e)}).execute(),this._data=o,this.group},dispose:et,remove:function(t,e){var n=this.group,i=this._data;t.get("animation")?i&&i.eachItemGraphicEl(function(e){dC(i,e.dataIndex,t,e)}):n.removeAll()}}),nf(N(vp,"pictorialBar")),of(rm("pictorialBar","roundRect")),vC.prototype={constructor:vC,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},pointToData:function(t,e){return this.coordinateSystem.pointToData(t,e)[0]},toGlobalCoord:null,toLocalCoord:null},C(vC,mg),jc.register("single",{create:function(t,e){var n=[];return t.eachComponent("singleAxis",function(i,o){var r=new yC(i,t,e);r.name="single_"+o,r.resize(i,e),i.coordinateSystem=r,n.push(r)}),t.eachSeries(function(e){if("singleAxis"===e.get("coordinateSystem")){var n=t.queryComponents({mainType:"singleAxis",index:e.get("singleAxisIndex"),id:e.get("singleAxisId")})[0];e.coordinateSystem=n&&n.coordinateSystem}}),n},dimensions:(yC.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:yC,_init:function(t,e,n){var i=new vC(this.dimension,Hp(t),[0,0],t.get("type"),t.get("position"));i.onBand="category"===i.type&&t.get("boundaryGap"),i.inverse=t.get("inverse"),i.orient=t.get("orient"),(t.axis=i).model=t,(i.coordinateSystem=this)._axis=i},update:function(t,e){t.eachSeries(function(t){if(t.coordinateSystem===this){var e=t.getData();k(e.mapDimension(this.dimension,!0),function(t){this._axis.scale.unionExtentFromData(e,t)},this),Fp(this._axis.scale,this._axis.model)}},this)},resize:function(t,e){this._rect=ac({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var t=this._rect,e=this._axis,n=e.isHorizontal(),i=n?[0,t.width]:[0,t.height],o=e.reverse?1:0;e.setExtent(i[o],i[1-o]),this._updateAxisTransform(e,n?t.x:t.y)},_updateAxisTransform:function(t,e){var n=t.getExtent(),i=n[0]+n[1],o=t.isHorizontal();t.toGlobalCoord=o?function(t){return t+e}:function(t){return i-t+e},t.toLocalCoord=o?function(t){return t-e}:function(t){return i-t+e}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(t){var e=this.getRect(),n=this.getAxis();return"horizontal"===n.orient?n.contain(n.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:n.contain(n.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},pointToData:function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t["horizontal"===e.orient?0:1]))]},dataToPoint:function(t){var e=this.getAxis(),n=this.getRect(),i=[],o="horizontal"===e.orient?0:1;return t instanceof Array&&(t=t[0]),i[o]=e.toGlobalCoord(e.dataToCoord(+t)),i[1-o]=0==o?n.y+n.height/2:n.x+n.width/2,i}}).dimensions});var bC=["axisLine","axisTickLabel","axisName"],_C=["splitArea","splitLine"],wC=Um.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(t,e,n,i){var o=this.group;o.removeAll();var r=this._axisGroup;this._axisGroup=new Cn;var a=xC(t),s=new Am(t,a);k(bC,s.add,s),o.add(this._axisGroup),o.add(s.getGroup()),k(_C,function(e){t.get(e+".show")&&this["_"+e](t)},this),tl(r,this._axisGroup,t),wC.superCall(this,"render",t,e,n,i)},remove:function(){Zm(this)},_splitLine:function(t){var e=t.axis;if(!e.scale.isBlank()){var n=t.getModel("splitLine"),i=n.getModel("lineStyle"),o=i.get("width"),r=i.get("color");r=r instanceof Array?r:[r];for(var a=t.coordinateSystem.getRect(),s=e.isHorizontal(),l=[],c=0,u=e.getTicksCoords({tickModel:n}),d=[],h=[],f=0;f<u.length;++f){var p=e.toGlobalCoord(u[f].coord);s?(d[0]=p,d[1]=a.y,h[0]=p,h[1]=a.y+a.height):(d[0]=a.x,d[1]=p,h[0]=a.x+a.width,h[1]=p);var g=c++%r.length;l[g]=l[g]||[],l[g].push(new qa({subPixelOptimize:!0,shape:{x1:d[0],y1:d[1],x2:h[0],y2:h[1]},style:{lineWidth:o},silent:!0}))}for(f=0;f<l.length;++f)this.group.add(xs(l[f],{style:{stroke:r[f%r.length],lineDash:i.getLineDash(o),lineWidth:o},silent:!0}))}},_splitArea:function(t){Xm(this,this._axisGroup,t,t)}}),SC=gc.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});function CC(t,e){var n,i=[],o=t.seriesIndex;if(null==o||!(n=e.getSeriesByIndex(o)))return{point:[]};var r=n.getData(),a=Ro(r,t);if(null==a||a<0||L(a))return{point:[]};var s=r.getItemGraphicEl(a),l=n.coordinateSystem;if(n.getTooltipPosition)i=n.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)i=l.dataToPoint(r.getValues(A(l.dimensions,function(t){return r.mapDimension(t)}),a,!0))||[];else if(s){var c=s.getBoundingRect().clone();c.applyTransform(s.transform),i=[c.x+c.width/2,c.y+c.height/2]}return{point:i,el:s}}v(SC.prototype,$p),gm("single",SC,function(t,e){return e.type||(e.data?"category":"value")},{left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}});var MC=k,TC=N,kC=Oo();function AC(t,e,n,i,o){var r=t.axis;if(!r.scale.isBlank()&&r.containData(e))if(t.involveSeries){var a=function(t,e){var n=e.axis,i=n.dim,o=t,r=[],a=Number.MAX_VALUE,s=-1;return MC(e.seriesModels,function(e,l){var c,u,d=e.getData().mapDimension(i,!0);if(e.getAxisTooltipData){var h=e.getAxisTooltipData(d,t,n);u=h.dataIndices,c=h.nestestValue}else{if(!(u=e.getData().indicesOfNearest(d[0],t,"category"===n.type?.5:null)).length)return;c=e.getData().get(d[0],u[0])}if(null!=c&&isFinite(c)){var f=t-c,p=Math.abs(f);p<=a&&((p<a||0<=f&&s<0)&&(a=p,s=f,o=c,r.length=0),MC(u,function(t){r.push({seriesIndex:e.seriesIndex,dataIndexInside:t,dataIndex:e.getData().getRawIndex(t)})}))}}),{payloadBatch:r,snapToValue:o}}(e,t),s=a.payloadBatch,l=a.snapToValue;s[0]&&null==o.seriesIndex&&x(o,s[0]),!i&&t.snap&&r.containData(l)&&null!=l&&(e=l),n.showPointer(t,e,s,o),n.showTooltip(t,a,l)}else n.showPointer(t,e)}function IC(t,e,n,i){t[e.key]={value:n,payloadBatch:i}}function DC(t,e,n,i){var o=n.payloadBatch,r=e.axis,a=r.model,s=e.axisPointerModel;if(e.triggerTooltip&&o.length){var l=e.coordSys.model,c=Gm(l),u=t.map[c];u||(u=t.map[c]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},t.list.push(u)),u.dataByAxis.push({axisDim:r.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:i,valueLabelOpt:{precision:s.get("label.precision"),formatter:s.get("label.formatter")},seriesDataIndices:o.slice()})}}function PC(t){var e=t.axis.model,n={},i=n.axisDim=t.axis.dim;return n.axisIndex=n[i+"AxisIndex"]=e.componentIndex,n.axisName=n[i+"AxisName"]=e.name,n.axisId=n[i+"AxisId"]=e.id,n}function EC(t){return!t||null==t[0]||isNaN(t[0])||null==t[1]||isNaN(t[1])}sf({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});var NC=Oo(),LC=k;function RC(t,e,n){if(!o.node){var i=e.getZr();NC(i).records||(NC(i).records={}),function(t,e){function n(n,i){t.on(n,function(n){var o=function(t){var e={showTip:[],hideTip:[]},n=function(i){var o=e[i.type];o?o.push(i):(i.dispatchAction=n,t.dispatchAction(i))};return{dispatchAction:n,pendings:e}}(e);LC(NC(t).records,function(t){t&&i(t,n,o.dispatchAction)}),function(t,e){var n,i=t.showTip.length,o=t.hideTip.length;i?n=t.showTip[i-1]:o&&(n=t.hideTip[o-1]),n&&(n.dispatchAction=null,e.dispatchAction(n))}(o.pendings,e)})}NC(t).initialized||(NC(t).initialized=!0,n("click",N(BC,"click")),n("mousemove",N(BC,"mousemove")),n("globalout",OC))}(i,e),(NC(i).records[t]||(NC(i).records[t]={})).handler=n}}function OC(t,e,n){t.handler("leave",null,n)}function BC(t,e,n,i){e.handler(t,n,i)}function zC(t,e){if(!o.node){var n=e.getZr();(NC(n).records||{})[t]&&(NC(n).records[t]=null)}}var VC=lf({type:"axisPointer",render:function(t,e,n){var i=e.getComponent("tooltip"),o=t.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";RC("axisPointer",n,function(t,e,n){"none"!==o&&("leave"===t||0<=o.indexOf(t))&&n({type:"updateAxisPointer",currTrigger:t,x:e&&e.offsetX,y:e&&e.offsetY})})},remove:function(t,e){zC(e.getZr(),"axisPointer"),VC.superApply(this._model,"remove",arguments)},dispose:function(t,e){zC("axisPointer",e),VC.superApply(this._model,"dispose",arguments)}}),FC=Oo(),HC=m,WC=E;function GC(){}function UC(t,e,n,i){!function t(e,n){if(B(e)&&B(n)){var i=!0;return k(n,function(n,o){i=i&&t(e[o],n)}),!!i}return e===n}(FC(n).lastProp,i)&&(FC(n).lastProp=i,e?Xs(n,i,t):(n.stopAnimation(),n.attr(i)))}function jC(t,e){t[e.get("label.show")?"show":"hide"]()}function $C(t){return{position:t.position.slice(),rotation:t.rotation||0}}function qC(t,e,n){var i=e.get("z"),o=e.get("zlevel");t&&t.traverse(function(t){"group"!==t.type&&(null!=i&&(t.z=i),null!=o&&(t.zlevel=o),t.silent=n)})}function YC(t){var e,n=t.get("type"),i=t.getModel(n+"Style");return"line"===n?(e=i.getLineStyle()).fill=null:"shadow"===n&&((e=i.getAreaStyle()).stroke=null),e}function XC(t,e,n,i,o){var r=ZC(n.get("value"),e.axis,e.ecModel,n.get("seriesDataIndices"),{precision:n.get("label.precision"),formatter:n.get("label.formatter")}),a=n.getModel("label"),s=Fl(a.get("padding")||0),l=a.getFont(),c=oi(r,l),u=o.position,d=c.width+s[1]+s[3],h=c.height+s[0]+s[2],f=o.align;"right"===f&&(u[0]-=d),"center"===f&&(u[0]-=d/2);var p=o.verticalAlign;"bottom"===p&&(u[1]-=h),"middle"===p&&(u[1]-=h/2),function(t,e,n,i){var o=i.getWidth(),r=i.getHeight();t[0]=Math.min(t[0]+e,o)-e,t[1]=Math.min(t[1]+n,r)-n,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}(u,d,h,i);var g=a.get("backgroundColor");g&&"auto"!==g||(g=e.get("axisLine.lineStyle.color")),t.label={shape:{x:0,y:0,width:d,height:h,r:a.get("borderRadius")},position:u.slice(),style:{text:r,textFont:l,textFill:a.getTextColor(),textPosition:"inside",textPadding:s,fill:g,stroke:a.get("borderColor")||"transparent",lineWidth:a.get("borderWidth")||0,shadowBlur:a.get("shadowBlur"),shadowColor:a.get("shadowColor"),shadowOffsetX:a.get("shadowOffsetX"),shadowOffsetY:a.get("shadowOffsetY")},z2:10}}function ZC(t,e,n,i,o){t=e.scale.parse(t);var r=e.scale.getLabel(t,{precision:o.precision}),a=o.formatter;if(a){var s={value:Gp(e,t),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};k(i,function(t){var e=n.getSeriesByIndex(t.seriesIndex),i=e&&e.getDataParams(t.dataIndexInside);i&&s.seriesData.push(i)}),O(a)?r=a.replace("{value}",r):R(a)&&(r=a(s))}return r}function KC(t,e,n){var i=ie();return le(i,i,n.rotation),se(i,i,n.position),Js([t.dataToCoord(e),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],i)}function JC(t,e,n,i,o,r){var a=Am.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=o.get("label.margin"),XC(e,i,o,r,{position:KC(i.axis,t,n),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function QC(t,e,n){return{x1:t[n=n||0],y1:t[1-n],x2:e[n],y2:e[1-n]}}function tM(t,e,n){return{x:t[n=n||0],y:t[1-n],width:e[n],height:e[1-n]}}function eM(t,e,n,i,o,r){return{cx:t,cy:e,r0:n,r:i,startAngle:o,endAngle:r,clockwise:!0}}jo((GC.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(t,e,n,i){var o=e.get("value"),r=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=n,i||this._lastValue!==o||this._lastStatus!==r){this._lastValue=o,this._lastStatus=r;var a=this._group,s=this._handle;if(!r||"hide"===r)return a&&a.hide(),void(s&&s.hide());a&&a.show(),s&&s.show();var l={};this.makeElOption(l,o,t,e,n);var c=l.graphicKey;c!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=c;var u=this._moveAnimation=this.determineAnimation(t,e);if(a){var d=N(UC,e,u);this.updatePointerEl(a,l,d,e),this.updateLabelEl(a,l,d,e)}else a=this._group=new Cn,this.createPointerEl(a,l,t,e),this.createLabelEl(a,l,t,e),n.getZr().add(a);qC(a,e,!0),this._renderHandle(o)}},remove:function(t){this.clear(t)},dispose:function(t){this.clear(t)},determineAnimation:function(t,e){var n=e.get("animation"),i=t.axis,o="category"===i.type,r=e.get("snap");if(!r&&!o)return!1;if("auto"!==n&&null!=n)return!0===n;var a=this.animationThreshold;if(o&&i.getBandWidth()>a)return!0;if(r){var s=Hm(t).seriesDataCount,l=i.getExtent();return Math.abs(l[0]-l[1])/s>a}return!1},makeElOption:function(t,e,n,i,o){},createPointerEl:function(t,e,n,i){var o=e.pointer;if(o){var r=FC(t).pointerEl=new al[o.type](HC(e.pointer));t.add(r)}},createLabelEl:function(t,e,n,i){if(e.label){var o=FC(t).labelEl=new ja(HC(e.label));t.add(o),jC(o,i)}},updatePointerEl:function(t,e,n){var i=FC(t).pointerEl;i&&e.pointer&&(i.setStyle(e.pointer.style),n(i,{shape:e.pointer.shape}))},updateLabelEl:function(t,e,n,i){var o=FC(t).labelEl;o&&(o.setStyle(e.label.style),n(o,{shape:e.label.shape,position:e.label.position}),jC(o,i))},_renderHandle:function(t){if(!this._dragging&&this.updateHandleTransform){var e,n=this._axisPointerModel,i=this._api.getZr(),o=this._handle,r=n.getModel("handle"),a=n.get("status");if(!r.get("show")||!a||"hide"===a)return o&&i.remove(o),void(this._handle=null);this._handle||(e=!0,o=this._handle=nl(r.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(t){Ut(t.event)},onmousedown:WC(this._onHandleDragMove,this,0,0),drift:WC(this._onHandleDragMove,this),ondragend:WC(this._onHandleDragEnd,this)}),i.add(o)),qC(o,n,!1),o.setStyle(r.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=r.get("size");L(s)||(s=[s,s]),o.attr("scale",[s[0]/2,s[1]/2]),fd(this,"_doDispatchAxisPointer",r.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,e)}},_moveHandleToValue:function(t,e){UC(this._axisPointerModel,!e&&this._moveAnimation,this._handle,$C(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(t,e){var n=this._handle;if(n){this._dragging=!0;var i=this.updateHandleTransform($C(n),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr($C(i)),FC(n).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){if(this._handle){var t=this._payloadInfo,e=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:e.axis.dim,axisIndex:e.componentIndex}]})}},_onHandleDragEnd:function(t){if(this._dragging=!1,this._handle){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),n=this._group,i=this._handle;e&&n&&(this._lastGraphicKey=null,n&&e.remove(n),i&&e.remove(i),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(t,e,n){return{x:t[n=n||0],y:t[1-n],width:e[n],height:e[1-n]}}}).constructor=GC);var nM=GC.extend({makeElOption:function(t,e,n,i,o){var r=n.axis,a=r.grid,s=i.get("type"),l=iM(a,r).getOtherAxis(r).getGlobalExtent(),c=r.toGlobalCoord(r.dataToCoord(e,!0));if(s&&"none"!==s){var u=YC(i),d=oM[s](r,c,l);d.style=u,t.graphicKey=d.type,t.pointer=d}JC(e,t,Ym(a.model,n),n,i,o)},getHandleTransform:function(t,e,n){var i=Ym(e.axis.grid.model,e,{labelInside:!1});return i.labelMargin=n.get("handle.margin"),{position:KC(e.axis,t,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,n,i){var o=n.axis,r=o.grid,a=o.getGlobalExtent(!0),s=iM(r,o).getOtherAxis(o).getGlobalExtent(),l="x"===o.dim?0:1,c=t.position;c[l]+=e[l],c[l]=Math.min(a[1],c[l]),c[l]=Math.max(a[0],c[l]);var u=(s[1]+s[0])/2,d=[u,u];return d[l]=c[l],{position:c,rotation:t.rotation,cursorPoint:d,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][l]}}});function iM(t,e){var n={};return n[e.dim+"AxisIndex"]=e.index,t.getCartesian(n)}var oM={line:function(t,e,n){return{type:"Line",subPixelOptimize:!0,shape:QC([e,n[0]],[e,n[1]],rM(t))}},shadow:function(t,e,n){var i=Math.max(1,t.getBandWidth());return{type:"Rect",shape:tM([e-i/2,n[0]],[i,n[1]-n[0]],rM(t))}}};function rM(t){return"x"===t.dim?0:1}Um.registerAxisPointerClass("CartesianAxisPointer",nM),Jh(function(t){if(t){t.axisPointer&&0!==t.axisPointer.length||(t.axisPointer={});var e=t.axisPointer.link;e&&!L(e)&&(t.axisPointer.link=[e])}}),Qh(dh.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=function(t,e){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(t,e,n){var i=e.getComponent("tooltip"),o=e.getComponent("axisPointer"),r=o.get("link",!0)||[],a=[];zm(n.getCoordinateSystems(),function(n){if(n.axisPointerEnabled){var s=Gm(n.model),l=t.coordSysAxesInfo[s]={},c=(t.coordSysMap[s]=n).model.getModel("tooltip",i);if(zm(n.getAxes(),Vm(f,!1,null)),n.getTooltipAxes&&i&&c.get("show")){var u="axis"===c.get("trigger"),d="cross"===c.get("axisPointer.type"),h=n.getTooltipAxes(c.get("axisPointer.axis"));(u||d)&&zm(h.baseAxes,Vm(f,!d||"cross",u)),d&&zm(h.otherAxes,Vm(f,"cross",!1))}}function f(i,s,u){var d=u.model.getModel("axisPointer",o),h=d.get("show");if(h&&("auto"!==h||i||Wm(d))){null==s&&(s=d.get("triggerTooltip"));var f=(d=i?function(t,e,n,i,o,r){var a=e.getModel("axisPointer"),s={};zm(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(t){s[t]=m(a.get(t))}),s.snap="category"!==t.type&&!!r,"cross"===a.get("type")&&(s.type="line");var l=s.label||(s.label={});if(null==l.show&&(l.show=!1),"cross"===o){var c=a.get("label.show");if(l.show=null==c||c,!r){var u=s.lineStyle=a.get("crossStyle");u&&b(l,u.textStyle)}}return t.model.getModel("axisPointer",new fl(s,n,i))}(u,c,o,e,i,s):d).get("snap"),p=Gm(u.model),g=s||f||"category"===u.type,v=t.axesInfo[p]={key:p,axis:u,coordSys:n,axisPointerModel:d,triggerTooltip:s,involveSeries:g,snap:f,useHandle:Wm(d),seriesModels:[]};l[p]=v,t.seriesInvolved|=g;var y=function(t,e){for(var n=e.model,i=e.dim,o=0;o<t.length;o++){var r=t[o]||{};if(Fm(r[i+"AxisId"],n.id)||Fm(r[i+"AxisIndex"],n.componentIndex)||Fm(r[i+"AxisName"],n.name))return o}}(r,u);if(null!=y){var x=a[y]||(a[y]={axesInfo:{}});x.axesInfo[p]=v,x.mapper=r[y].mapper,v.linkGroup=x}}}})}(n,t,e),n.seriesInvolved&&function(t,e){e.eachSeries(function(e){var n=e.coordinateSystem,i=e.get("tooltip.trigger",!0),o=e.get("tooltip.show",!0);n&&"none"!==i&&!1!==i&&"item"!==i&&!1!==o&&!1!==e.get("axisPointer.show",!0)&&zm(t.coordSysAxesInfo[Gm(n.model)],function(t){var i=t.axis;n.getAxis(i.dim)===i&&(t.seriesModels.push(e),null==t.seriesDataCount&&(t.seriesDataCount=0),t.seriesDataCount+=e.getData().count())})},this)}(n,t),n}(t,e)}),tf({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},function(t,e,n){var i=t.currTrigger,o=[t.x,t.y],r=t,a=t.dispatchAction||E(n.dispatchAction,n),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){EC(o)&&(o=CC({seriesIndex:r.seriesIndex,dataIndex:r.dataIndex},e).point);var l=EC(o),c=r.axesInfo,u=s.axesInfo,d="leave"===i||EC(o),h={},f={},p={list:[],map:{}},g={showPointer:TC(IC,f),showTooltip:TC(DC,p)};MC(s.coordSysMap,function(t,e){var n=l||t.containPoint(o);MC(s.coordSysAxesInfo[e],function(t,e){var i=t.axis,r=function(t,e){for(var n=0;n<(t||[]).length;n++){var i=t[n];if(e.axis.dim===i.axisDim&&e.axis.model.componentIndex===i.axisIndex)return i}}(c,t);if(!d&&n&&(!c||r)){var a=r&&r.value;null!=a||l||(a=i.pointToData(o)),null!=a&&AC(t,a,g,!1,h)}})});var m={};return MC(u,function(t,e){var n=t.linkGroup;n&&!f[e]&&MC(n.axesInfo,function(e,i){var o=f[i];if(e!==t&&o){var r=o.value;n.mapper&&(r=t.axis.scale.parse(n.mapper(r,PC(e),PC(t)))),m[t.key]=r}})}),MC(m,function(t,e){AC(u[e],t,g,!0,h)}),function(t,e,n){var i=n.axesInfo=[];MC(e,function(e,n){var o=e.axisPointerModel.option,r=t[n];r?(e.useHandle||(o.status="show"),o.value=r.value,o.seriesDataIndices=(r.payloadBatch||[]).slice()):e.useHandle||(o.status="hide"),"show"===o.status&&i.push({axisDim:e.axis.dim,axisIndex:e.axis.model.componentIndex,value:o.value})})}(f,u,h),function(t,e,n,i){if(EC(e)||!t.list.length)return i({type:"hideTip"});var o=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:o.dataIndexInside,dataIndex:o.dataIndex,seriesIndex:o.seriesIndex,dataByCoordSys:t.list})}(p,o,t,a),function(t,e,n){var i=n.getZr(),o="axisPointerLastHighlights",r=kC(i)[o]||{},a=kC(i)[o]={};MC(t,function(t,e){var n=t.axisPointerModel.option;"show"===n.status&&MC(n.seriesDataIndices,function(t){a[t.seriesIndex+" | "+t.dataIndex]=t})});var s=[],l=[];k(r,function(t,e){a[e]||l.push(t)}),k(a,function(t,e){r[e]||s.push(t)}),l.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,batch:l}),s.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,batch:s})}(u,0,n),h}});var aM=["x","y"],sM=["width","height"],lM=GC.extend({makeElOption:function(t,e,n,i,o){var r=n.axis,a=r.coordinateSystem,s=dM(a,1-uM(r)),l=a.dataToPoint(e)[0],c=i.get("type");if(c&&"none"!==c){var u=YC(i),d=cM[c](r,l,s);d.style=u,t.graphicKey=d.type,t.pointer=d}JC(e,t,xC(n),n,i,o)},getHandleTransform:function(t,e,n){var i=xC(e,{labelInside:!1});return i.labelMargin=n.get("handle.margin"),{position:KC(e.axis,t,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,n,i){var o=n.axis,r=o.coordinateSystem,a=uM(o),s=dM(r,a),l=t.position;l[a]+=e[a],l[a]=Math.min(s[1],l[a]),l[a]=Math.max(s[0],l[a]);var c=dM(r,1-a),u=(c[1]+c[0])/2,d=[u,u];return d[a]=l[a],{position:l,rotation:t.rotation,cursorPoint:d,tooltipOption:{verticalAlign:"middle"}}}}),cM={line:function(t,e,n){return{type:"Line",subPixelOptimize:!0,shape:QC([e,n[0]],[e,n[1]],uM(t))}},shadow:function(t,e,n){var i=t.getBandWidth();return{type:"Rect",shape:tM([e-i/2,n[0]],[i,n[1]-n[0]],uM(t))}}};function uM(t){return t.isHorizontal()?0:1}function dM(t,e){var n=t.getRect();return[n[aM[e]],n[aM[e]]+n[sM[e]]]}Um.registerAxisPointerClass("SingleAxisPointer",lM),lf({type:"single"});var hM=Gu.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(t){hM.superApply(this,"init",arguments),this.legendVisualProvider=new Sv(E(this.getData,this),E(this.getRawData,this))},fixData:function(t){var e=t.length,n={},i=Wo(t,function(t){return n.hasOwnProperty(t[0])||(n[t[0]]=-1),t[2]}),o=[];i.buckets.each(function(t,e){o.push({name:e,dataList:t})});for(var r=o.length,a=0;a<r;++a){for(var s=o[a].name,l=0;l<o[a].dataList.length;++l)n[c=o[a].dataList[l][0]]=a;for(var c in n)n.hasOwnProperty(c)&&n[c]!==a&&(n[c]=a,t[e]=[],t[e][0]=c,t[e][1]=0,t[e][2]=s,e++)}return t},getInitialData:function(t,e){for(var n=e.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),i=D(t.data,function(t){return void 0!==t[2]}),o=this.fixData(i||[]),r=[],a=this.nameMap=Q(),s=0,l=0;l<o.length;++l)r.push(o[l][2]),a.get(o[l][2])||(a.set(o[l][2],s),s++);var c=Wf(o,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:mf(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),u=new Af(c,this);return u.initData(o),u},getLayerSeries:function(){for(var t=this.getData(),e=t.count(),n=[],i=0;i<e;++i)n[i]=i;var o=t.mapDimension("single"),r=Wo(n,function(e){return t.get("name",e)}),a=[];return r.buckets.each(function(e,n){e.sort(function(e,n){return t.get(o,e)-t.get(o,n)}),a.push({name:n,indices:e})}),a},getAxisTooltipData:function(t,e,n){L(t)||(t=t?[t]:[]);for(var i,o=this.getData(),r=this.getLayerSeries(),a=[],s=r.length,l=0;l<s;++l){for(var c=Number.MAX_VALUE,u=-1,d=r[l].indices.length,h=0;h<d;++h){var f=o.get(t[0],r[l].indices[h]),p=Math.abs(f-e);p<=c&&(i=f,c=p,u=r[l].indices[h])}a.push(u)}return{dataIndices:a,nestestValue:i}},formatTooltip:function(t){var e=this.getData(),n=e.getName(t),i=e.get(e.mapDimension("value"),t);return!isNaN(i)&&null!=i||(i="-"),Gl(n+" : "+i)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}});function fM(t,e,n){if(t.count())for(var i,o=e.coordinateSystem,r=e.getLayerSeries(),a=t.mapDimension("single"),s=t.mapDimension("value"),l=A(r,function(e){return A(e.indices,function(e){var n=o.dataToPoint(t.get(a,e));return n[1]=t.get(s,e),n})}),c=function(t){for(var e=t.length,n=t[0].length,i=[],o=[],r=0,a={},s=0;s<n;++s){for(var l=0,c=0;l<e;++l)c+=t[l][s][1];r<c&&(r=c),i.push(c)}for(var u=0;u<n;++u)o[u]=(r-i[u])/2;for(var d=r=0;d<n;++d){var h=i[d]+o[d];r<h&&(r=h)}return a.y0=o,a.max=r,a}(l),u=c.y0,d=n/c.max,h=r.length,f=r[0].indices.length,p=0;p<f;++p){t.setItemLayout(r[0].indices[p],{layerIndex:0,x:l[0][p][0],y0:i=u[p]*d,y:l[0][p][1]*d});for(var g=1;g<h;++g)t.setItemLayout(r[g].indices[p],{layerIndex:g,x:l[g][p][0],y0:i+=l[g-1][p][1]*d,y:l[g][p][1]*d})}}uf({type:"themeRiver",init:function(){this._layers=[]},render:function(t,e,n){var i=t.getData(),o=this.group,r=t.getLayerSeries(),a=i.getLayout("layoutInfo");function s(t){return t.name}o.attr("position",[0,a.rect.y+a.boundaryGap[0]]);var l=new hf(this._layersSeries||[],r,s,s),c={};function u(e,n,a){var s=this._layers;if("remove"!==e){for(var l,u,d,h=[],f=[],p=r[n].indices,g=0;g<p.length;g++){var m=i.getItemLayout(p[g]),v=m.x,y=m.y0,b=m.y;h.push([v,y]),f.push([v,y+b]),l=i.getItemVisual(p[g],"color")}var _=i.getItemLayout(p[0]),w=i.getItemModel(p[g-1]),S=w.getModel("label"),C=S.get("margin");if("add"===e){var M=c[n]=new Cn;u=new Zg({shape:{points:h,stackedOnPoints:f,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),d=new Da({style:{x:_.x-C,y:_.y0+_.y/2}}),M.add(u),M.add(d),o.add(M),u.setClipPath(function(t,e,n){var i=new ja({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return Zs(i,{shape:{width:t.width+20,height:t.height+20}},e,function(){u.removeClipPath()}),i}(u.getBoundingRect(),t))}else u=(M=s[a]).childAt(0),d=M.childAt(1),o.add(M),c[n]=M,Xs(u,{shape:{points:h,stackedOnPoints:f}},t),Xs(d,{style:{x:_.x-C,y:_.y0+_.y/2}},t);var T=w.getModel("emphasis.itemStyle"),k=w.getModel("itemStyle");Hs(d.style,S,{text:S.get("show")?t.getFormattedLabel(p[g-1],"normal")||i.getName(p[g-1]):null,textVerticalAlign:"middle"}),u.setStyle(x({fill:l},k.getItemStyle(["color"]))),Rs(u,T.getItemStyle())}else o.remove(s[n])}l.add(E(u,this,"add")).update(E(u,this,"update")).remove(E(u,this,"remove")).execute(),this._layersSeries=r,this._layers=c},dispose:function(){}}),nf(function(t,e){t.eachSeriesByType("themeRiver",function(t){var e=t.getData(),n=t.coordinateSystem,i={},o=n.getRect();i.rect=o;var r=t.get("boundaryGap"),a=n.getAxis();i.boundaryGap=r,"horizontal"===a.orient?(r[0]=bl(r[0],o.height),r[1]=bl(r[1],o.height),fM(e,t,o.height-r[0]-r[1])):(r[0]=bl(r[0],o.width),r[1]=bl(r[1],o.width),fM(e,t,o.width-r[0]-r[1])),e.setLayout("layoutInfo",i)})}),of(function(t){t.eachSeriesByType("themeRiver",function(t){var e=t.getData(),n=t.getRawData(),i=t.get("color"),o=Q();e.each(function(t){o.set(e.getRawIndex(t),t)}),n.each(function(r){var a=n.getName(r),s=i[(t.nameMap.get(a)-1)%i.length];n.setItemVisual(r,"color",s);var l=o.get(r);null!=l&&e.setItemVisual(l,"color",s)})})}),Qh(Ov("themeRiver")),Gu.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(t,e){var n={name:t.name,children:t.data};!function t(e){var n=0;k(e.children,function(e){t(e);var i=e.value;L(i)&&(i=i[0]),n+=i});var i=e.value;L(i)&&(i=i[0]),null!=i&&!isNaN(i)||(i=n),i<0&&(i=0),L(e.value)?e.value[0]=i:e.value=i}(n);var i=A(t.levels||[],function(t){return new fl(t,this,e)},this),o=Qy.createTree(n,this,function(t){t.wrapMethod("getItemModel",function(t,e){var n=o.getNodeByDataIndex(e),r=i[n.depth];return r&&(t.parentModel=r),t})});return o.data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(t){var e=Gu.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return e.treePathInfo=yx(n,this),e},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},highlight:{itemStyle:{opacity:1}},downplay:{itemStyle:{opacity:.5},label:{opacity:.6}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)}});var pM="none";function gM(t,e,n){Cn.call(this);var i=new La({z2:2});i.seriesIndex=e.seriesIndex;var o=new Da({z2:4,silent:t.getModel("label").get("silent")});function r(){o.ignore=o.hoverIgnore}function a(){o.ignore=o.normalIgnore}this.add(i),this.add(o),this.updateData(!0,t,"normal",e,n),this.on("emphasis",r).on("normal",a).on("mouseover",r).on("mouseout",a)}var mM=gM.prototype;mM.updateData=function(t,e,n,i,o){(this.node=e).piece=this,i=i||this._seriesModel,o=o||this._ecModel;var r=this.childAt(0);r.dataIndex=e.dataIndex;var a=e.getModel(),s=e.getLayout(),l=x({},s);l.label=null;var c=function(t,e,n){var i=t.getVisual("color"),o=t.getVisual("visualMeta");o&&0!==o.length||(i=null);var r=t.getModel("itemStyle").get("color");if(r)return r;if(i)return i;if(0===t.depth)return n.option.color[0];var a=n.option.color.length;return n.option.color[function(t){for(var e=t;1<e.depth;)e=e.parentNode;return S(t.getAncestors()[0].children,e)}(t)%a]}(e,0,o);!function(t,e,n){e.getData().setItemVisual(t.dataIndex,"color",n)}(e,i,c);var u,d=a.getModel("itemStyle").getItemStyle();u=b({lineJoin:"bevel",fill:(u="normal"===n?d:v(a.getModel(n+".itemStyle").getItemStyle(),d)).fill||c},u),t?(r.setShape(l),r.shape.r=s.r0,Xs(r,{shape:{r:s.r}},i,e.dataIndex),r.useStyle(u)):"object"==typeof u.fill&&u.fill.type||"object"==typeof r.style.fill&&r.style.fill.type?(Xs(r,{shape:l},i),r.useStyle(u)):Xs(r,{shape:l,style:u},i),this._updateLabel(i,c,n);var h=a.getShallow("cursor");if(h&&r.attr("cursor",h),t){var f=i.getShallow("highlightPolicy");this._initEvents(r,e,i,f)}this._seriesModel=i||this._seriesModel,this._ecModel=o||this._ecModel,Rs(this)},mM.onEmphasis=function(t){var e=this;this.node.hostTree.root.eachNode(function(n){n.piece&&(e.node===n?n.piece.updateData(!1,n,"emphasis"):function(t,e,n){return n!==pM&&("self"===n?t===e:"ancestor"===n?t===e||t.isAncestorOf(e):t===e||t.isDescendantOf(e))}(n,e.node,t)?n.piece.childAt(0).trigger("highlight"):t!==pM&&n.piece.childAt(0).trigger("downplay"))})},mM.onNormal=function(){this.node.hostTree.root.eachNode(function(t){t.piece&&t.piece.updateData(!1,t,"normal")})},mM.onHighlight=function(){this.updateData(!1,this.node,"highlight")},mM.onDownplay=function(){this.updateData(!1,this.node,"downplay")},mM._updateLabel=function(t,e,n){var i=this.node.getModel(),o=i.getModel("label"),r="normal"===n||"emphasis"===n?o:i.getModel(n+".label"),a=i.getModel("emphasis.label"),s=r.get("formatter")?n:"normal",l=W(t.getFormattedLabel(this.node.dataIndex,s,null,null,"label"),this.node.name);!1===_("show")&&(l="");var c=this.node.getLayout(),u=r.get("minAngle");null==u&&(u=o.get("minAngle")),null!=(u=u/180*Math.PI)&&Math.abs(c.endAngle-c.startAngle)<u&&(l="");var d=this.childAt(1);Vs(d.style,d.hoverStyle||{},o,a,{defaultText:r.getShallow("show")?l:null,autoColor:e,useInsideStyle:!0});var h,f=(c.startAngle+c.endAngle)/2,p=Math.cos(f),g=Math.sin(f),m=_("position"),v=_("distance")||0,y=_("align");"outside"===m?(h=c.r+v,y=f>Math.PI/2?"right":"left"):y&&"center"!==y?"left"===y?(h=c.r0+v,f>Math.PI/2&&(y="right")):"right"===y&&(h=c.r-v,f>Math.PI/2&&(y="left")):(h=(c.r+c.r0)/2,y="center"),d.attr("style",{text:l,textAlign:y,textVerticalAlign:_("verticalAlign")||"middle",opacity:_("opacity")}),d.attr("position",[h*p+c.cx,h*g+c.cy]);var x=_("rotate"),b=0;function _(t){var e=r.get(t);return null==e?o.get(t):e}"radial"===x?(b=-f)<-Math.PI/2&&(b+=Math.PI):"tangential"===x?(b=Math.PI/2-f)>Math.PI/2?b-=Math.PI:b<-Math.PI/2&&(b+=Math.PI):"number"==typeof x&&(b=x*Math.PI/180),d.attr("rotation",b)},mM._initEvents=function(t,e,n,i){function o(){a.onEmphasis(i)}function r(){a.onNormal()}t.off("mouseover").off("mouseout").off("emphasis").off("normal");var a=this;n.isAnimationEnabled()&&t.on("mouseover",o).on("mouseout",r).on("emphasis",o).on("normal",r).on("downplay",function(){a.onDownplay()}).on("highlight",function(){a.onHighlight()})},C(gM,Cn),nd.extend({type:"sunburst",init:function(){},render:function(t,e,n,i){var o=this;this.seriesModel=t,this.api=n,this.ecModel=e;var r=t.getData(),a=r.tree.root,s=t.getViewRoot(),l=this.group,c=t.get("renderLabelForZeroData"),u=[];if(s.eachNode(function(t){u.push(t)}),function(n,i){function o(t){return t.getId()}function s(o,s){!function(n,i){if(c||!n||n.getValue()||(n=null),n!==a&&i!==a)if(i&&i.piece)n?(i.piece.updateData(!1,n,"normal",t,e),r.setItemGraphicEl(n.dataIndex,i.piece)):function(t){t&&t.piece&&(l.remove(t.piece),t.piece=null)}(i);else if(n){var o=new gM(n,t,e);l.add(o),r.setItemGraphicEl(n.dataIndex,o)}}(null==o?null:n[o],null==s?null:i[s])}0===n.length&&0===i.length||new hf(i,n,o,o).add(s).update(s).remove(N(s,null)).execute()}(u,this._oldChildren||[]),function(n,i){if(0<i.depth){o.virtualPiece?o.virtualPiece.updateData(!1,n,"normal",t,e):(o.virtualPiece=new gM(n,t,e),l.add(o.virtualPiece)),i.piece._onclickEvent&&i.piece.off("click",i.piece._onclickEvent);var r=function(t){o._rootToNode(i.parentNode)};i.piece._onclickEvent=r,o.virtualPiece.on("click",r)}else o.virtualPiece&&(l.remove(o.virtualPiece),o.virtualPiece=null)}(a,s),i&&i.highlight&&i.highlight.piece){var d=t.getShallow("highlightPolicy");i.highlight.piece.onEmphasis(d)}else if(i&&i.unhighlight){var h=this.virtualPiece;!h&&a.children.length&&(h=a.children[0].piece),h&&h.onNormal()}this._initEvents(),this._oldChildren=u},dispose:function(){},_initEvents:function(){function t(t){var n=!1;e.seriesModel.getViewRoot().eachNode(function(i){if(!n&&i.piece&&i.piece.childAt(0)===t.target){var o=i.getModel().get("nodeClick");if("rootToNode"===o)e._rootToNode(i);else if("link"===o){var r=i.getModel(),a=r.get("link");a&&Ql(a,r.get("target",!0)||"_blank")}n=!0}})}var e=this;this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",t),this.group._onclickEvent=t},_rootToNode:function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},containPoint:function(t,e){var n=e.getData().getItemLayout(0);if(n){var i=t[0]-n.cx,o=t[1]-n.cy,r=Math.sqrt(i*i+o*o);return r<=n.r&&r>=n.r0}}});var vM="sunburstRootToNode";tf({type:vM,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(e,n){var i=gx(t,[vM],e);if(i){var o=e.getViewRoot();o&&(t.direction=vx(o,i.node)?"rollUp":"drillDown"),e.resetViewRoot(i.node)}})});var yM="sunburstHighlight";tf({type:yM,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(e,n){var i=gx(t,[yM],e);i&&(t.highlight=i.node)})}),tf({type:"sunburstUnhighlight",update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(e,n){t.unhighlight=!0})});var xM=Math.PI/180;function bM(t,e){return e=e||[0,0],A(["x","y"],function(n,i){var o=this.getAxis(n),r=e[i],a=t[i]/2;return"category"===o.type?o.getBandWidth():Math.abs(o.dataToCoord(r-a)-o.dataToCoord(r+a))},this)}function _M(t,e){return e=e||[0,0],A([0,1],function(n){var i=e[n],o=t[n]/2,r=[],a=[];return r[n]=i-o,a[n]=i+o,r[1-n]=a[1-n]=e[1-n],Math.abs(this.dataToPoint(r)[n]-this.dataToPoint(a)[n])},this)}function wM(t,e){var n=this.getAxis(),i=e instanceof Array?e[0]:e,o=(t instanceof Array?t[0]:t)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(i-o)-n.dataToCoord(i+o))}function SM(t,e){return A(["Radius","Angle"],function(n,i){var o=this["get"+n+"Axis"](),r=e[i],a=t[i]/2,s="dataTo"+n,l="category"===o.type?o.getBandWidth():Math.abs(o[s](r-a)-o[s](r+a));return"Angle"===n&&(l=l*Math.PI/180),l},this)}of(N(Dv,"sunburst")),nf(N(function(t,e,n,i){e.eachSeriesByType(t,function(t){var e=t.get("center"),i=t.get("radius");L(i)||(i=[0,i]),L(e)||(e=[e,e]);var o=n.getWidth(),r=n.getHeight(),a=Math.min(o,r),s=bl(e[0],o),l=bl(e[1],r),c=bl(i[0],a/2),u=bl(i[1],a/2),d=-t.get("startAngle")*xM,h=t.get("minAngle")*xM,f=t.getData().tree.root,p=t.getViewRoot(),g=p.depth,m=t.get("sort");null!=m&&function t(e,n){var i=e.children||[];e.children=function(t,e){if("function"==typeof e)return t.sort(e);var n="asc"===e;return t.sort(function(t,e){var i=(t.getValue()-e.getValue())*(n?1:-1);return 0==i?(t.dataIndex-e.dataIndex)*(n?-1:1):i})}(i,n),i.length&&k(e.children,function(e){t(e,n)})}(p,m);var v=0;k(p.children,function(t){isNaN(t.getValue())||v++});var y=p.getValue(),x=Math.PI/(y||v)*2,b=0<p.depth,_=(u-c)/(p.height-(b?-1:1)||1),w=t.get("clockwise"),S=t.get("stillShowZeroSum"),C=w?1:-1,M=function(t,e){if(t){var n=e;if(t!==f){var i=t.getValue(),o=0===y&&S?x:i*x;o<h&&(o=h),n=e+C*o;var r=t.depth-g-(b?-1:1),u=c+_*r,d=c+_*(1+r),p=t.getModel();null!=p.get("r0")&&(u=bl(p.get("r0"),a/2)),null!=p.get("r")&&(d=bl(p.get("r"),a/2)),t.setLayout({angle:o,startAngle:e,endAngle:n,clockwise:w,cx:s,cy:l,r0:u,r:d})}if(t.children&&t.children.length){var m=0;k(t.children,function(t){m+=M(t,e+m)})}return n-e}};if(b){var T=2*Math.PI;f.setLayout({angle:T,startAngle:d,endAngle:d+T,clockwise:w,cx:s,cy:l,r0:c,r:c+_})}M(p,d)})},"sunburst")),Qh(N(Ov,"sunburst"));var CM=ss,MM=["itemStyle"],TM=["emphasis","itemStyle"],kM=["label"],AM=["emphasis","label"],IM={cartesian2d:function(t){var e=t.grid.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:E(bM,t)}}},geo:function(t){var e=t.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:t.getZoom()},api:{coord:function(e){return t.dataToPoint(e)},size:E(_M,t)}}},singleAxis:function(t){var e=t.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:E(wM,t)}}},polar:function(t){var e=t.getRadiusAxis(),n=t.getAngleAxis(),i=e.getExtent();return i[0]>i[1]&&i.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:i[1],r0:i[0]},api:{coord:E(function(i){var o=e.dataToRadius(i[0]),r=n.dataToAngle(i[1]),a=t.coordToPoint([o,r]);return a.push(o,r*Math.PI/180),a}),size:E(SM,t)}}},calendar:function(t){var e=t.getRect(),n=t.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(e,n){return t.dataToPoint(e,n)}}}}};function DM(t,e,n,i,o){null==n[t]||o||(e[t]=n[t],n[t]=i[t])}function PM(t,e,n,i){var o=t.get("renderItem"),r=t.coordinateSystem,a={};r&&(a=r.prepareCustoms?r.prepareCustoms():IM[r.type](r));var s,l,c,u,d,h=b({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:function(t,n){return null==n&&(n=s),e.get(e.getDimension(t||0),n)},style:function(n,i){null==i&&(i=s),g(i);var o=l.getModel(MM).getItemStyle();null!=d&&(o.fill=d);var r=e.getItemVisual(i,"opacity");null!=r&&(o.opacity=r);var a=n?OM(n,c):c;return Hs(o,a,null,{autoColor:d,isRectText:!0}),o.text=a.getShallow("show")?G(t.getFormattedLabel(i,"normal"),_g(e,i)):null,n&&BM(o,n),o},styleEmphasis:function(n,i){null==i&&(i=s),g(i);var o=l.getModel(TM).getItemStyle(),r=n?OM(n,u):u;return Hs(o,r,null,{isRectText:!0},!0),o.text=r.getShallow("show")?U(t.getFormattedLabel(i,"emphasis"),t.getFormattedLabel(i,"normal"),_g(e,i)):null,n&&BM(o,n),o},visual:function(t,n){return null==n&&(n=s),e.getItemVisual(n,t)},barLayout:function(t){if(r.getBaseAxis)return function(t){var e=[],n=t.axis;if("category"===n.type){for(var i=n.getBandWidth(),o=0;o<t.count;o++)e.push(b({bandWidth:i,axisKey:"axis0",stackId:cp+o},t));var r=gp(e),a=[];for(o=0;o<t.count;o++){var s=r.axis0[cp+o];s.offsetCenter=s.offset+s.width/2,a.push(s)}return a}}(b({axis:r.getBaseAxis()},t))},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(t){return qs(t,n)}},a.api||{}),f={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:a.coordSys,dataInsideLength:e.count(),encode:function(t){var e={};return k(t.dimensions,function(n,i){var o=t.getDimensionInfo(n);if(!o.isExtraCoord){var r=o.coordDim;(e[r]=e[r]||[])[o.coordDimIndex]=i}}),e}(t.getData())},p=!0;return function(t,n){return s=t,p=!0,o&&o(b({dataIndexInside:t,dataIndex:e.getRawIndex(t),actionType:n?n.type:null},f),h)};function g(t){null==t&&(t=s),p&&(l=e.getItemModel(t),c=l.getModel(kM),u=l.getModel(AM),d=e.getItemVisual(t,"color"),p=!1)}}function EM(t,e,n,i,o,r){return(t=NM(t,e,n,i,o,r,!0))&&r.setItemGraphicEl(e,t),t}function NM(t,e,n,i,o,r,a){var s=!n,l=(n=n||{}).type,c=n.shape,u=n.style;if(t&&(s||null!=l&&l!==t.__customGraphicType||"path"===l&&function(t){return t&&(t.hasOwnProperty("pathData")||t.hasOwnProperty("d"))}(c)&&VM(c)!==t.__customPathData||"image"===l&&FM(u,"image")&&u.image!==t.__customImagePath||"text"===l&&FM(c,"text")&&u.text!==t.__customText)&&(o.remove(t),t=null),!s){var d=!t;return function(t,e,n,i,o,r,a){var s={},l=n.style||{};if(n.shape&&(s.shape=m(n.shape)),n.position&&(s.position=n.position.slice()),n.scale&&(s.scale=n.scale.slice()),n.origin&&(s.origin=n.origin.slice()),n.rotation&&(s.rotation=n.rotation),"image"===t.type&&n.style){var c=s.style={};k(["x","y","width","height"],function(e){DM(e,c,l,t.style,r)})}if("text"===t.type&&n.style&&(c=s.style={},k(["x","y"],function(e){DM(e,c,l,t.style,r)}),!l.hasOwnProperty("textFill")&&l.fill&&(l.textFill=l.fill),!l.hasOwnProperty("textStroke")&&l.stroke&&(l.textStroke=l.stroke)),"group"!==t.type&&(t.useStyle(l),r)){t.style.opacity=0;var u=l.opacity;null==u&&(u=1),Zs(t,{style:{opacity:u}},i,e)}r?t.attr(s):Xs(t,s,i,e),n.hasOwnProperty("z2")&&t.attr("z2",n.z2||0),n.hasOwnProperty("silent")&&t.attr("silent",n.silent),n.hasOwnProperty("invisible")&&t.attr("invisible",n.invisible),n.hasOwnProperty("ignore")&&t.attr("ignore",n.ignore),n.hasOwnProperty("info")&&t.attr("info",n.info);var d=n.styleEmphasis;Is(t,d),a&&Os(t,!1!==d)}(t=t||function(t){var e,n=t.type;if("path"===n){var i=t.shape,o=null!=i.width&&null!=i.height?{x:i.x||0,y:i.y||0,width:i.width,height:i.height}:null,r=VM(i);(e=ms(r,null,o,i.layout||"center")).__customPathData=r}else if("image"===n)(e=new Wi({})).__customImagePath=t.style.image;else if("text"===n)(e=new Da({})).__customText=t.style.text;else if("group"===n)e=new Cn;else{if("compoundPath"===n)throw new Error('"compoundPath" is not supported yet.');e=new(gs(n))}return e.__customGraphicType=n,e.name=t.name,e}(n),e,n,i,0,d,a),"group"===l&&function(t,e,n,i,o){var r=n.children,a=r?r.length:0,s=n.$mergeChildren,l="byName"===s||n.diffChildrenByName,c=!1===s;if(a||l||c){if(l)return function(t){new hf(t.oldChildren,t.newChildren,LM,LM,t).add(RM).update(RM).remove(zM).execute()}({oldChildren:t.children()||[],newChildren:r||[],dataIndex:e,animatableModel:i,group:t,data:o});c&&t.removeAll();for(var u=0;u<a;u++)r[u]&&NM(t.childAt(u),e,r[u],i,t,o)}}(t,e,n,i,r),o.add(t),t}}function LM(t,e){var n=t&&t.name;return null!=n?n:"e\0\0"+e}function RM(t,e){var n=this.context;NM(null!=e?n.oldChildren[e]:null,n.dataIndex,null!=t?n.newChildren[t]:null,n.animatableModel,n.group,n.data)}function OM(t,e){var n=new fl({},e);return k(CM,function(e,i){t.hasOwnProperty(e)&&(n.option[i]=t[e])}),n}function BM(t,e){for(var n in e)!e.hasOwnProperty(n)&&CM.hasOwnProperty(n)||(t[n]=e[n])}function zM(t){var e=this.context,n=e.oldChildren[t];n&&e.group.remove(n)}function VM(t){return t&&(t.pathData||t.d)}function FM(t,e){return t&&t.hasOwnProperty(e)}function HM(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function WM(t,e){return e.dim+t.model.componentIndex}function GM(t,e){mg.call(this,"radius",t,e),this.type="category"}Gu.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,useTransform:!0,clip:!1},getInitialData:function(t,e){return Xf(this.getSource(),this)},getDataParams:function(t,e,n){var i=Gu.prototype.getDataParams.apply(this,arguments);return n&&(i.info=n.info),i}}),nd.extend({type:"custom",_data:null,render:function(t,e,n,i){var o=this._data,r=t.getData(),a=this.group,s=PM(t,r,e,n);r.diff(o).add(function(e){EM(null,e,s(e,i),t,a,r)}).update(function(e,n){EM(o.getItemGraphicEl(n),e,s(e,i),t,a,r)}).remove(function(t){var e=o.getItemGraphicEl(t);e&&a.remove(e)}).execute();var l=t.get("clip",!0)?Qg(t.coordinateSystem,!1,t):null;l?a.setClipPath(l):a.removeClipPath(),this._data=r},incrementalPrepareRender:function(t,e,n){this.group.removeAll(),this._data=null},incrementalRender:function(t,e,n,i,o){var r=e.getData(),a=PM(e,r,n,i);function s(t){t.isGroup||(t.incremental=!0,t.useHoverLayer=!0)}for(var l=t.start;l<t.end;l++)EM(null,l,a(l,o),e,this.group,r).traverse(s)},dispose:et,filterForExposedEvent:function(t,e,n,i){var o=e.element;if(null==o||n.name===o)return!0;for(;(n=n.parent)&&n!==this.group;)if(n.name===o)return!0;return!1}}),GM.prototype={constructor:GM,pointToData:function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},dataToRadius:mg.prototype.dataToCoord,radiusToData:mg.prototype.coordToData},C(GM,mg);var UM=Oo();function jM(t,e){mg.call(this,"angle",t,e=e||[0,360]),this.type="category"}function $M(t){this.name=t||"",this.cx=0,this.cy=0,this._radiusAxis=new GM,this._angleAxis=new jM,this._radiusAxis.polar=this._angleAxis.polar=this}jM.prototype={constructor:jM,pointToData:function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},dataToAngle:mg.prototype.dataToCoord,angleToData:mg.prototype.coordToData,calculateCategoryInterval:function(){var t=this.getLabelModel(),e=this.scale,n=e.getExtent(),i=e.count();if(n[1]-n[0]<1)return 0;var o=n[0],r=this.dataToCoord(o+1)-this.dataToCoord(o),a=Math.abs(r),s=oi(o,t.getFont(),"center","top"),l=Math.max(s.height,7)/a;isNaN(l)&&(l=1/0);var c=Math.max(0,Math.floor(l)),u=UM(this.model),d=u.lastAutoInterval,h=u.lastTickCount;return null!=d&&null!=h&&Math.abs(d-c)<=1&&Math.abs(h-i)<=1&&c<d?c=d:(u.lastTickCount=i,u.lastAutoInterval=c),c}},C(jM,mg),$M.prototype={type:"polar",axisPointerEnabled:!0,constructor:$M,dimensions:["radius","angle"],model:null,containPoint:function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},containData:function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},getAxis:function(t){return this["_"+t+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(t){var e=[],n=this._angleAxis,i=this._radiusAxis;return n.scale.type===t&&e.push(n),i.scale.type===t&&e.push(i),e},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(t){var e=null!=t&&"auto"!==t?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},dataToPoint:function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},pointToData:function(t,e){var n=this.pointToCoord(t);return[this._radiusAxis.radiusToData(n[0],e),this._angleAxis.angleToData(n[1],e)]},pointToCoord:function(t){var e=t[0]-this.cx,n=t[1]-this.cy,i=this.getAngleAxis(),o=i.getExtent(),r=Math.min(o[0],o[1]),a=Math.max(o[0],o[1]);i.inverse?r=a-360:a=r+360;var s=Math.sqrt(e*e+n*n);e/=s,n/=s;for(var l=Math.atan2(-n,e)/Math.PI*180,c=l<r?1:-1;l<r||a<l;)l+=360*c;return[s,l]},coordToPoint:function(t){var e=t[0],n=t[1]/180*Math.PI;return[Math.cos(n)*e+this.cx,-Math.sin(n)*e+this.cy]},getArea:function(){var t=this.getAngleAxis(),e=this.getRadiusAxis().getExtent().slice();e[0]>e[1]&&e.reverse();var n=t.getExtent(),i=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:e[0],r:e[1],startAngle:-n[0]*i,endAngle:-n[1]*i,clockwise:t.inverse,contain:function(t,e){var n=t-this.cx,i=e-this.cy,o=n*n+i*i,r=this.r,a=this.r0;return o<=r*r&&a*a<=o}}}};var qM=gc.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});function YM(t,e){return e.type||(e.data?"category":"value")}function XM(t,e){var n=this,i=n.getAngleAxis(),o=n.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),o.scale.setExtent(1/0,-1/0),t.eachSeries(function(t){if(t.coordinateSystem===n){var e=t.getData();k(e.mapDimension("radius",!0),function(t){o.scale.unionExtentFromData(e,Yf(e,t))}),k(e.mapDimension("angle",!0),function(t){i.scale.unionExtentFromData(e,Yf(e,t))})}}),Fp(i.scale,i.model),Fp(o.scale,o.model),"category"===i.type&&!i.onBand){var r=i.getExtent(),a=360/i.scale.count();i.inverse?r[1]+=a:r[1]-=a,i.setExtent(r[0],r[1])}}function ZM(t,e){if(t.type=e.get("type"),t.scale=Hp(e),t.onBand=e.get("boundaryGap")&&"category"===t.type,t.inverse=e.get("inverse"),"angleAxis"===e.mainType){t.inverse^=e.get("clockwise");var n=e.get("startAngle");t.setExtent(n,n+(t.inverse?-360:360))}(e.axis=t).model=e}v(qM.prototype,$p),gm("angle",qM,YM,{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}}),gm("radius",qM,YM,{splitNumber:5}),sf({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(t){var e;return this.ecModel.eachComponent(t,function(t){t.getCoordSysModel()===this&&(e=t)},this),e},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}}),jc.register("polar",{dimensions:$M.prototype.dimensions,create:function(t,e){var n=[];return t.eachComponent("polar",function(t,i){var o=new $M(i);o.update=XM;var r=o.getRadiusAxis(),a=o.getAngleAxis(),s=t.findAxisModel("radiusAxis"),l=t.findAxisModel("angleAxis");ZM(r,s),ZM(a,l),function(t,e,n){var i=e.get("center"),o=n.getWidth(),r=n.getHeight();t.cx=bl(i[0],o),t.cy=bl(i[1],r);var a=t.getRadiusAxis(),s=Math.min(o,r)/2,l=e.get("radius");null==l?l=[0,"100%"]:L(l)||(l=[0,l]),l=[bl(l[0],s),bl(l[1],s)],a.inverse?a.setExtent(l[1],l[0]):a.setExtent(l[0],l[1])}(o,t,e),n.push(o),(t.coordinateSystem=o).model=t}),t.eachSeries(function(e){if("polar"===e.get("coordinateSystem")){var n=t.queryComponents({mainType:"polar",index:e.get("polarIndex"),id:e.get("polarId")})[0];e.coordinateSystem=n.coordinateSystem}}),n}});var KM=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function JM(t,e,n){e[1]>e[0]&&(e=e.slice().reverse());var i=t.coordToPoint([e[0],n]),o=t.coordToPoint([e[1],n]);return{x1:i[0],y1:i[1],x2:o[0],y2:o[1]}}function QM(t){return t.getRadiusAxis().inverse?0:1}function tT(t){var e=t[0],n=t[t.length-1];e&&n&&Math.abs(Math.abs(e.coord-n.coord)-360)<1e-4&&t.pop()}Um.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(t,e){if(this.group.removeAll(),t.get("show")){var n=t.axis,i=n.polar,o=i.getRadiusAxis().getExtent(),r=n.getTicksCoords(),a=n.getMinorTicksCoords(),s=A(n.getViewLabels(),function(t){return(t=m(t)).coord=n.dataToCoord(t.tickValue),t});tT(s),tT(r),k(KM,function(e){!t.get(e+".show")||n.scale.isBlank()&&"axisLine"!==e||this["_"+e](t,i,r,a,o,s)},this)}},_axisLine:function(t,e,n,i,o){var r,a=t.getModel("axisLine.lineStyle"),s=QM(e),l=s?0:1;(r=0===o[l]?new Ea({shape:{cx:e.cx,cy:e.cy,r:o[s]},style:a.getLineStyle(),z2:1,silent:!0}):new Ra({shape:{cx:e.cx,cy:e.cy,r:o[s],r0:o[l]},style:a.getLineStyle(),z2:1,silent:!0})).style.fill=null,this.group.add(r)},_axisTick:function(t,e,n,i,o){var r=t.getModel("axisTick"),a=(r.get("inside")?-1:1)*r.get("length"),s=o[QM(e)],l=A(n,function(t){return new qa({shape:JM(e,[s,s+a],t.coord)})});this.group.add(xs(l,{style:b(r.getModel("lineStyle").getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")})}))},_minorTick:function(t,e,n,i,o){if(i.length){for(var r=t.getModel("axisTick"),a=t.getModel("minorTick"),s=(r.get("inside")?-1:1)*a.get("length"),l=o[QM(e)],c=[],u=0;u<i.length;u++)for(var d=0;d<i[u].length;d++)c.push(new qa({shape:JM(e,[l,l+s],i[u][d].coord)}));this.group.add(xs(c,{style:b(a.getModel("lineStyle").getLineStyle(),b(r.getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")}))}))}},_axisLabel:function(t,e,n,i,o,r){var a=t.getCategories(!0),s=t.getModel("axisLabel"),l=s.get("margin"),c=t.get("triggerEvent");k(r,function(n,i){var r=s,u=n.tickValue,d=o[QM(e)],h=e.coordToPoint([d+l,n.coord]),f=e.cx,p=e.cy,g=Math.abs(h[0]-f)/d<.3?"center":h[0]>f?"left":"right",m=Math.abs(h[1]-p)/d<.3?"middle":h[1]>p?"top":"bottom";a&&a[u]&&a[u].textStyle&&(r=new fl(a[u].textStyle,s,s.ecModel));var v=new Da({silent:Am.isLabelSilent(t)});this.group.add(v),Hs(v.style,r,{x:h[0],y:h[1],textFill:r.getTextColor()||t.get("axisLine.lineStyle.color"),text:n.formattedLabel,textAlign:g,textVerticalAlign:m}),c&&(v.eventData=Am.makeAxisEventDataBase(t),v.eventData.targetType="axisLabel",v.eventData.value=n.rawLabel)},this)},_splitLine:function(t,e,n,i,o){var r=t.getModel("splitLine").getModel("lineStyle"),a=r.get("color"),s=0;a=a instanceof Array?a:[a];for(var l=[],c=0;c<n.length;c++){var u=s++%a.length;l[u]=l[u]||[],l[u].push(new qa({shape:JM(e,o,n[c].coord)}))}for(c=0;c<l.length;c++)this.group.add(xs(l[c],{style:b({stroke:a[c%a.length]},r.getLineStyle()),silent:!0,z:t.get("z")}))},_minorSplitLine:function(t,e,n,i,o){if(i.length){for(var r=t.getModel("minorSplitLine").getModel("lineStyle"),a=[],s=0;s<i.length;s++)for(var l=0;l<i[s].length;l++)a.push(new qa({shape:JM(e,o,i[s][l].coord)}));this.group.add(xs(a,{style:r.getLineStyle(),silent:!0,z:t.get("z")}))}},_splitArea:function(t,e,n,i,o){if(n.length){var r=t.getModel("splitArea").getModel("areaStyle"),a=r.get("color"),s=0;a=a instanceof Array?a:[a];for(var l=[],c=Math.PI/180,u=-n[0].coord*c,d=Math.min(o[0],o[1]),h=Math.max(o[0],o[1]),f=t.get("clockwise"),p=1;p<n.length;p++){var g=s++%a.length;l[g]=l[g]||[],l[g].push(new La({shape:{cx:e.cx,cy:e.cy,r0:d,r:h,startAngle:u,endAngle:-n[p].coord*c,clockwise:f},silent:!0})),u=-n[p].coord*c}for(p=0;p<l.length;p++)this.group.add(xs(l[p],{style:b({fill:a[p%a.length]},r.getAreaStyle()),silent:!0}))}}});var eT=["axisLine","axisTickLabel","axisName"],nT=["splitLine","splitArea","minorSplitLine"];Um.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(t,e){if(this.group.removeAll(),t.get("show")){var n=t.axis,i=n.polar,o=i.getAngleAxis(),r=n.getTicksCoords(),a=n.getMinorTicksCoords(),s=o.getExtent()[0],l=n.getExtent(),c=function(t,e,n){return{position:[t.cx,t.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}(i,t,s),u=new Am(t,c);k(eT,u.add,u),this.group.add(u.getGroup()),k(nT,function(e){t.get(e+".show")&&!n.scale.isBlank()&&this["_"+e](t,i,s,l,r,a)},this)}},_splitLine:function(t,e,n,i,o){var r=t.getModel("splitLine").getModel("lineStyle"),a=r.get("color"),s=0;a=a instanceof Array?a:[a];for(var l=[],c=0;c<o.length;c++){var u=s++%a.length;l[u]=l[u]||[],l[u].push(new Ea({shape:{cx:e.cx,cy:e.cy,r:o[c].coord}}))}for(c=0;c<l.length;c++)this.group.add(xs(l[c],{style:b({stroke:a[c%a.length],fill:null},r.getLineStyle()),silent:!0}))},_minorSplitLine:function(t,e,n,i,o,r){if(r.length){for(var a=t.getModel("minorSplitLine").getModel("lineStyle"),s=[],l=0;l<r.length;l++)for(var c=0;c<r[l].length;c++)s.push(new Ea({shape:{cx:e.cx,cy:e.cy,r:r[l][c].coord}}));this.group.add(xs(s,{style:b({fill:null},a.getLineStyle()),silent:!0}))}},_splitArea:function(t,e,n,i,o){if(o.length){var r=t.getModel("splitArea").getModel("areaStyle"),a=r.get("color"),s=0;a=a instanceof Array?a:[a];for(var l=[],c=o[0].coord,u=1;u<o.length;u++){var d=s++%a.length;l[d]=l[d]||[],l[d].push(new La({shape:{cx:e.cx,cy:e.cy,r0:c,r:o[u].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),c=o[u].coord}for(u=0;u<l.length;u++)this.group.add(xs(l[u],{style:b({fill:a[u%a.length]},r.getAreaStyle()),silent:!0}))}}});var iT=GC.extend({makeElOption:function(t,e,n,i,o){var r=n.axis;"angle"===r.dim&&(this.animationThreshold=Math.PI/18);var a,s=r.polar,l=s.getOtherAxis(r).getExtent();a=r["dataTo"+Kl(r.dim)](e);var c=i.get("type");if(c&&"none"!==c){var u=YC(i),d=oT[c](r,s,a,l,u);d.style=u,t.graphicKey=d.type,t.pointer=d}var h=i.get("label.margin");XC(t,n,i,o,function(t,e,n,i,o){var r=e.axis,a=r.dataToCoord(t),s=i.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l,c,u,d=i.getRadiusAxis().getExtent();if("radius"===r.dim){var h=ie();le(h,h,s),se(h,h,[i.cx,i.cy]),l=Js([a,-o],h);var f=e.getModel("axisLabel").get("rotate")||0,p=Am.innerTextLayout(s,f*Math.PI/180,-1);c=p.textAlign,u=p.textVerticalAlign}else{var g=d[1];l=i.coordToPoint([g+o,a]);var m=i.cx,v=i.cy;c=Math.abs(l[0]-m)/g<.3?"center":l[0]>m?"left":"right",u=Math.abs(l[1]-v)/g<.3?"middle":l[1]>v?"top":"bottom"}return{position:l,align:c,verticalAlign:u}}(e,n,0,s,h))}}),oT={line:function(t,e,n,i,o){return"angle"===t.dim?{type:"Line",shape:QC(e.coordToPoint([i[0],n]),e.coordToPoint([i[1],n]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:n}}},shadow:function(t,e,n,i,o){var r=Math.max(1,t.getBandWidth()),a=Math.PI/180;return"angle"===t.dim?{type:"Sector",shape:eM(e.cx,e.cy,i[0],i[1],(-n-r/2)*a,(r/2-n)*a)}:{type:"Sector",shape:eM(e.cx,e.cy,n-r/2,n+r/2,0,2*Math.PI)}}};function rT(t,e){e.update="updateView",tf(e,function(e,n){var i={};return n.eachComponent({mainType:"geo",query:e},function(n){n[t](e.name),k(n.coordinateSystem.regions,function(t){i[t.name]=n.isSelected(t.name)||!1})}),{selected:i,name:e.name}})}function aT(t,e,n){this._model=t}function sT(t,e,n,i){var o=n.calendarModel,r=n.seriesModel,a=o?o.coordinateSystem:r?r.coordinateSystem:null;return a===this?a[t](i):null}Um.registerAxisPointerClass("PolarAxisPointer",iT),nf(N(function(t,e,n){var i={},o=function(t){var e={};k(t,function(t,n){var i=t.getData(),o=t.coordinateSystem,r=o.getBaseAxis(),a=WM(o,r),s=r.getExtent(),l="category"===r.type?r.getBandWidth():Math.abs(s[1]-s[0])/i.count(),c=e[a]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},u=c.stacks;e[a]=c;var d=HM(t);u[d]||c.autoWidthCount++,u[d]=u[d]||{width:0,maxWidth:0};var h=bl(t.get("barWidth"),l),f=bl(t.get("barMaxWidth"),l),p=t.get("barGap"),g=t.get("barCategoryGap");h&&!u[d].width&&(h=Math.min(c.remainedWidth,h),u[d].width=h,c.remainedWidth-=h),f&&(u[d].maxWidth=f),null!=p&&(c.gap=p),null!=g&&(c.categoryGap=g)});var n={};return k(e,function(t,e){n[e]={};var i=t.stacks,o=bl(t.categoryGap,t.bandWidth),r=bl(t.gap,1),a=t.remainedWidth,s=t.autoWidthCount,l=(a-o)/(s+(s-1)*r);l=Math.max(l,0),k(i,function(t,e){var n=t.maxWidth;n&&n<l&&(n=Math.min(n,a),t.width&&(n=Math.min(n,t.width)),a-=n,t.width=n,s--)}),l=(a-o)/(s+(s-1)*r),l=Math.max(l,0);var c,u=0;k(i,function(t,e){t.width||(t.width=l),u+=(c=t).width*(1+r)}),c&&(u-=c.width*r);var d=-u/2;k(i,function(t,i){n[e][i]=n[e][i]||{offset:d,width:t.width},d+=t.width*(1+r)})}),n}(D(e.getSeriesByType(t),function(t){return!e.isSeriesFiltered(t)&&t.coordinateSystem&&"polar"===t.coordinateSystem.type}));e.eachSeriesByType(t,function(t){if("polar"===t.coordinateSystem.type){var e=t.getData(),n=t.coordinateSystem,r=n.getBaseAxis(),a=WM(n,r),s=HM(t),l=o[a][s],c=l.offset,u=l.width,d=n.getOtherAxis(r),h=t.coordinateSystem.cx,f=t.coordinateSystem.cy,p=t.get("barMinHeight")||0,g=t.get("barMinAngle")||0;i[s]=i[s]||[];for(var m=e.mapDimension(d.dim),v=e.mapDimension(r.dim),y=qf(e,m),x="radius"!==r.dim||!t.get("roundCap",!0),b="radius"===d.dim?d.dataToRadius(0):d.dataToAngle(0),_=0,w=e.count();_<w;_++){var S,C,M,T,k=e.get(m,_),A=e.get(v,_),I=0<=k?"p":"n",D=b;if(y&&(i[s][A]||(i[s][A]={p:b,n:b}),D=i[s][A][I]),"radius"===d.dim){var P=d.dataToRadius(k)-b,E=r.dataToAngle(A);Math.abs(P)<p&&(P=(P<0?-1:1)*p),C=(S=D)+P,T=(M=E-c)-u,y&&(i[s][A][I]=C)}else{var N=d.dataToAngle(k,x)-b,L=r.dataToRadius(A);Math.abs(N)<g&&(N=(N<0?-1:1)*g),C=(S=L+c)+u,T=(M=D)+N,y&&(i[s][A][I]=T)}e.setItemLayout(_,{cx:h,cy:f,r0:S,r:C,startAngle:-M*Math.PI/180,endAngle:-T*Math.PI/180})}}},this)},"bar")),lf({type:"polar"}),M(gc.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(t){gc.prototype.init.apply(this,arguments),Ao(t,"label",["show"])},optionUpdated:function(){var t=this.option,e=this;t.regions=Hy.getFilledRegions(t.regions,t.map,t.nameMap),this._optionModelMap=I(t.regions||[],function(t,n){return n.name&&t.set(n.name,new fl(n,e)),t},Q()),this.updateSelectedMap(t.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(t){return this._optionModelMap.get(t)||new fl(null,this,this.ecModel)},getFormattedLabel:function(t,e){e=e||"normal";var n=this.getRegionModel(t).get(("normal"===e?"":e+".")+"label.formatter"),i={name:t};return"function"==typeof n?(i.status=e,n(i)):"string"==typeof n?n.replace("{a}",null!=t?t:""):void 0},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t}}),wv),lf({type:"geo",init:function(t,e){var n=new ky(e,!0);this._mapDraw=n,this.group.add(n.group)},render:function(t,e,n,i){if(!i||"geoToggleSelect"!==i.type||i.from!==this.uid){var o=this._mapDraw;t.get("show")?o.draw(t,e,n,this,i):this._mapDraw.group.removeAll(),this.group.silent=t.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}}),rT("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),rT("select",{type:"geoSelect",event:"geoselected"}),rT("unSelect",{type:"geoUnSelect",event:"geounselected"}),aT.prototype={constructor:aT,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(t){var e=(t=Pl(t)).getFullYear(),n=t.getMonth()+1;n=n<10?"0"+n:n;var i=t.getDate();i=i<10?"0"+i:i;var o=t.getDay();return{y:e,m:n,d:i,day:o=Math.abs((o+7-this.getFirstDayOfWeek())%7),time:t.getTime(),formatedDate:e+"-"+n+"-"+i,date:t}},getNextNDay:function(t,e){return 0===(e=e||0)||(t=new Date(this.getDateInfo(t).time)).setDate(t.getDate()+e),this.getDateInfo(t)},update:function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,i=["width","height"],o=this._model.get("cellSize").slice(),r=this._model.getBoxLayoutParams(),a="horizontal"===this._orient?[n,7]:[7,n];k([0,1],function(t){c(o,t)&&(r[i[t]]=o[t]*a[t])});var s={width:e.getWidth(),height:e.getHeight()},l=this._rect=ac(r,s);function c(t,e){return null!=t[e]&&"auto"!==t[e]}k([0,1],function(t){c(o,t)||(o[t]=l[i[t]]/a[t])}),this._sw=o[0],this._sh=o[1]},dataToPoint:function(t,e){L(t)&&(t=t[0]),null==e&&(e=!0);var n=this.getDateInfo(t),i=this._rangeInfo;if(e&&!(n.time>=i.start.time&&n.time<i.end.time+864e5))return[NaN,NaN];var o=n.day,r=this._getRangeInfo([i.start.time,n.formatedDate]).nthWeek;return"vertical"===this._orient?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+r*this._sh+this._sh/2]:[this._rect.x+r*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},pointToData:function(t){var e=this.pointToDate(t);return e&&e.time},dataToRect:function(t,e){var n=this.dataToPoint(t,e);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},pointToDate:function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,n=Math.floor((t[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,e-1,i):this._getDateByWeeksAndDay(e,n-1,i)},convertToPixel:N(sT,"dataToPoint"),convertFromPixel:N(sT,"pointToData"),_initRangeOption:function(){var t=this._model.get("range"),e=t;if(L(e)&&1===e.length&&(e=e[0]),/^\d{4}$/.test(e)&&(t=[e+"-01-01",e+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(e)){var n=this.getDateInfo(e),i=n.date;i.setMonth(i.getMonth()+1);var o=this.getNextNDay(i,-1);t=[n.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(e)&&(t=[e,e]);var r=this._getRangeInfo(t);return r.start.time>r.end.time&&t.reverse(),t},_getRangeInfo:function(t){var e;(t=[this.getDateInfo(t[0]),this.getDateInfo(t[1])])[0].time>t[1].time&&(e=!0,t.reverse());var n=Math.floor(t[1].time/864e5)-Math.floor(t[0].time/864e5)+1,i=new Date(t[0].time),o=i.getDate(),r=t[1].date.getDate();i.setDate(o+n-1);var a=i.getDate();if(a!==r)for(var s=0<i.getTime()-t[1].time?1:-1;(a=i.getDate())!==r&&0<(i.getTime()-t[1].time)*s;)n-=s,i.setDate(a-s);var l=Math.floor((n+t[0].day+6)/7),c=e?1-l:l-1;return e&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:n,weeks:l,nthWeek:c,fweek:t[0].day,lweek:t[1].day}},_getDateByWeeksAndDay:function(t,e,n){var i=this._getRangeInfo(n);if(t>i.weeks||0===t&&e<i.fweek||t===i.weeks&&e>i.lweek)return!1;var o=7*(t-1)-i.fweek+e,r=new Date(i.start.time);return r.setDate(i.start.d+o),this.getDateInfo(r)}},aT.dimensions=aT.prototype.dimensions,aT.getDimensionsInfo=aT.prototype.getDimensionsInfo,aT.create=function(t,e){var n=[];return t.eachComponent("calendar",function(i){var o=new aT(i,t,e);n.push(o),i.coordinateSystem=o}),t.eachSeries(function(t){"calendar"===t.get("coordinateSystem")&&(t.coordinateSystem=n[t.get("calendarIndex")||0])}),n},jc.register("calendar",aT);var lT=gc.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(t,e,n,i){var o=cc(t);lT.superApply(this,"init",arguments),cT(t,o)},mergeOption:function(t,e){lT.superApply(this,"mergeOption",arguments),cT(this.option,t)}});function cT(t,e){var n=t.cellSize;L(n)?1===n.length&&(n[1]=n[0]):n=t.cellSize=[n,n];var i=A([0,1],function(t){return function(t,e){return null!=t[ic[e][0]]||null!=t[ic[e][1]]&&null!=t[ic[e][2]]}(e,t)&&(n[t]="auto"),null!=n[t]&&"auto"!==n[t]});lc(t,e,{type:"box",ignoreSize:i})}var uT={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},dT={EN:["S","M","T","W","T","F","S"],CN:["日","一","二","三","四","五","六"]};lf({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(t,e,n){var i=this.group;i.removeAll();var o=t.coordinateSystem,r=o.getRangeInfo(),a=o.getOrient();this._renderDayRect(t,r,i),this._renderLines(t,r,a,i),this._renderYearText(t,r,a,i),this._renderMonthText(t,a,i),this._renderWeekText(t,r,a,i)},_renderDayRect:function(t,e,n){for(var i=t.coordinateSystem,o=t.getModel("itemStyle").getItemStyle(),r=i.getCellWidth(),a=i.getCellHeight(),s=e.start.time;s<=e.end.time;s=i.getNextNDay(s,1).time){var l=i.dataToRect([s],!1).tl,c=new ja({shape:{x:l[0],y:l[1],width:r,height:a},cursor:"default",style:o});n.add(c)}},_renderLines:function(t,e,n,i){var o=this,r=t.coordinateSystem,a=t.getModel("splitLine.lineStyle").getLineStyle(),s=t.get("splitLine.show"),l=a.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var c=e.start,u=0;c.time<=e.end.time;u++){h(c.formatedDate),0===u&&(c=r.getDateInfo(e.start.y+"-"+e.start.m));var d=c.date;d.setMonth(d.getMonth()+1),c=r.getDateInfo(d)}function h(e){o._firstDayOfMonth.push(r.getDateInfo(e)),o._firstDayPoints.push(r.dataToRect([e],!1).tl);var l=o._getLinePointsOfOneWeek(t,e,n);o._tlpoints.push(l[0]),o._blpoints.push(l[l.length-1]),s&&o._drawSplitline(l,a,i)}h(r.getNextNDay(e.end.time,1).formatedDate),s&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,l,n),a,i),s&&this._drawSplitline(o._getEdgesPoints(o._blpoints,l,n),a,i)},_getEdgesPoints:function(t,e,n){var i=[t[0].slice(),t[t.length-1].slice()],o="horizontal"===n?0:1;return i[0][o]=i[0][o]-e/2,i[1][o]=i[1][o]+e/2,i},_drawSplitline:function(t,e,n){var i=new Va({z2:20,shape:{points:t},style:e});n.add(i)},_getLinePointsOfOneWeek:function(t,e,n){var i=t.coordinateSystem;e=i.getDateInfo(e);for(var o=[],r=0;r<7;r++){var a=i.getNextNDay(e.time,r),s=i.dataToRect([a.time],!1);o[2*a.day]=s.tl,o[2*a.day+1]=s["horizontal"===n?"bl":"tr"]}return o},_formatterLabel:function(t,e){return"string"==typeof t&&t?ql(t,e):"function"==typeof t?t(e):e.nameMap},_yearTextPositionControl:function(t,e,n,i,o){e=e.slice();var r=["center","bottom"];"bottom"===i?(e[1]+=o,r=["center","top"]):"left"===i?e[0]-=o:"right"===i?(e[0]+=o,r=["center","top"]):e[1]-=o;var a=0;return"left"!==i&&"right"!==i||(a=Math.PI/2),{rotation:a,position:e,style:{textAlign:r[0],textVerticalAlign:r[1]}}},_renderYearText:function(t,e,n,i){var o=t.getModel("yearLabel");if(o.get("show")){var r=o.get("margin"),a=o.get("position");a=a||("horizontal"!==n?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],l=(s[0][0]+s[1][0])/2,c=(s[0][1]+s[1][1])/2,u="horizontal"===n?0:1,d={top:[l,s[u][1]],bottom:[l,s[1-u][1]],left:[s[1-u][0],c],right:[s[u][0],c]},h=e.start.y;+e.end.y>+e.start.y&&(h=h+"-"+e.end.y);var f=o.get("formatter"),p=this._formatterLabel(f,{start:e.start.y,end:e.end.y,nameMap:h}),g=new Da({z2:30});Hs(g.style,o,{text:p}),g.attr(this._yearTextPositionControl(g,d[a],n,a,r)),i.add(g)}},_monthTextPositionControl:function(t,e,n,i,o){var r="left",a="top",s=t[0],l=t[1];return"horizontal"===n?(l+=o,e&&(r="center"),"start"===i&&(a="bottom")):(s+=o,e&&(a="middle"),"start"===i&&(r="right")),{x:s,y:l,textAlign:r,textVerticalAlign:a}},_renderMonthText:function(t,e,n){var i=t.getModel("monthLabel");if(i.get("show")){var o=i.get("nameMap"),r=i.get("margin"),a=i.get("position"),s=i.get("align"),l=[this._tlpoints,this._blpoints];O(o)&&(o=uT[o.toUpperCase()]||[]);var c="start"===a?0:1,u="horizontal"===e?0:1;r="start"===a?-r:r;for(var d="center"===s,h=0;h<l[c].length-1;h++){var f=l[c][h].slice(),p=this._firstDayOfMonth[h];d&&(f[u]=(this._firstDayPoints[h][u]+l[0][h+1][u])/2);var g=i.get("formatter"),m=o[+p.m-1],v={yyyy:p.y,yy:(p.y+"").slice(2),MM:p.m,M:+p.m,nameMap:m},y=this._formatterLabel(g,v),b=new Da({z2:30});x(Hs(b.style,i,{text:y}),this._monthTextPositionControl(f,d,e,a,r)),n.add(b)}}},_weekTextPositionControl:function(t,e,n,i,o){var r="center",a="middle",s=t[0],l=t[1],c="start"===n;return"horizontal"===e?(s=s+i+(c?1:-1)*o[0]/2,r=c?"right":"left"):(l=l+i+(c?1:-1)*o[1]/2,a=c?"bottom":"top"),{x:s,y:l,textAlign:r,textVerticalAlign:a}},_renderWeekText:function(t,e,n,i){var o=t.getModel("dayLabel");if(o.get("show")){var r=t.coordinateSystem,a=o.get("position"),s=o.get("nameMap"),l=o.get("margin"),c=r.getFirstDayOfWeek();O(s)&&(s=dT[s.toUpperCase()]||[]);var u=r.getNextNDay(e.end.time,7-e.lweek).time,d=[r.getCellWidth(),r.getCellHeight()];l=bl(l,d["horizontal"===n?0:1]),"start"===a&&(u=r.getNextNDay(e.start.time,-(7+e.fweek)).time,l=-l);for(var h=0;h<7;h++){var f,p=r.getNextNDay(u,h),g=r.dataToRect([p.time],!1).center;f=Math.abs((h+c)%7);var m=new Da({z2:30});x(Hs(m.style,o,{text:s[f]}),this._weekTextPositionControl(g,n,a,l,d)),i.add(m)}}}});var hT={path:null,compoundPath:null,group:Cn,image:Wi,text:Da};Jh(function(t){var e=t.graphic;L(e)?t.graphic=e[0]&&e[0].elements?[t.graphic[0]]:[{elements:e}]:e&&!e.elements&&(t.graphic=[{elements:[e]}])});var fT=sf({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(t){var e=this.option.elements;this.option.elements=null,fT.superApply(this,"mergeOption",arguments),this.option.elements=e},optionUpdated:function(t,e){var n=this.option,i=(e?n:t).elements,o=n.elements=e?[]:n.elements,r=[];this._flatten(i,r);var a=Po(o,r);Eo(a);var s=this._elOptionsToUpdate=[];k(a,function(t,e){var n=t.option;n&&(s.push(n),function(t,e){var n=t.exist;if(e.id=t.keyInfo.id,!e.type&&n&&(e.type=n.type),null==e.parentId){var i=e.parentOption;i?e.parentId=i.id:n&&(e.parentId=n.parentId)}e.parentOption=null}(t,n),function(t,e,n){var i=x({},n),o=t[e],r=n.$action||"merge";"merge"===r?o?(v(o,i,!0),lc(o,i,{ignoreSize:!0}),uc(n,o)):t[e]=i:"replace"===r?t[e]=i:"remove"===r&&o&&(t[e]=null)}(o,e,n),function(t,e){t&&(t.hv=e.hv=[mT(e,["left","right"]),mT(e,["top","bottom"])],"group"===t.type&&(null==t.width&&(t.width=e.width=0),null==t.height&&(t.height=e.height=0)))}(o[e],n))},this);for(var l=o.length-1;0<=l;l--)null==o[l]?o.splice(l,1):delete o[l].$action},_flatten:function(t,e,n){k(t,function(t){if(t){n&&(t.parentOption=n),e.push(t);var i=t.children;"group"===t.type&&i&&this._flatten(i,e,t),delete t.children}},this)},useElOptionsToUpdate:function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t}});function pT(t,e,n,i){var o=n.type,r=new(hT.hasOwnProperty(o)?hT[o]:gs(o))(n);e.add(r),i.set(t,r),r.__ecGraphicId=t}function gT(t,e){var n=t&&t.parent;n&&("group"===t.type&&t.traverse(function(t){gT(t,e)}),e.removeKey(t.__ecGraphicId),n.remove(t))}function mT(t,e){var n;return k(e,function(e){null!=t[e]&&"auto"!==t[e]&&(n=!0)}),n}lf({type:"graphic",init:function(t,e){this._elMap=Q()},render:function(t,e,n){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,n)},_updateElements:function(t){var e=t.useElOptionsToUpdate();if(e){var n=this._elMap,i=this.group;k(e,function(e){var o=e.$action,r=e.id,a=n.get(r),s=e.parentId,l=null!=s?n.get(s):i,c=e.style;"text"===e.type&&c&&(e.hv&&e.hv[1]&&(c.textVerticalAlign=c.textBaseline=null),!c.hasOwnProperty("textFill")&&c.fill&&(c.textFill=c.fill),!c.hasOwnProperty("textStroke")&&c.stroke&&(c.textStroke=c.stroke));var u=function(t){return t=x({},t),k(["id","parentId","$action","hv","bounding"].concat(nc),function(e){delete t[e]}),t}(e);o&&"merge"!==o?"replace"===o?(gT(a,n),pT(r,l,u,n)):"remove"===o&&gT(a,n):a?a.attr(u):pT(r,l,u,n);var d=n.get(r);d&&(d.__ecGraphicWidthOption=e.width,d.__ecGraphicHeightOption=e.height,function(t,e){var n=t.eventData;t.silent||t.ignore||n||(n=t.eventData={componentType:"graphic",componentIndex:e.componentIndex,name:t.name}),n&&(n.info=t.info)}(d,t))})}},_relocate:function(t,e){for(var n=t.option.elements,i=this.group,o=this._elMap,r=e.getWidth(),a=e.getHeight(),s=0;s<n.length;s++){var l=n[s];if((u=o.get(l.id))&&u.isGroup){var c=(d=u.parent)===i;u.__ecGraphicWidth=bl(u.__ecGraphicWidthOption,c?r:d.__ecGraphicWidth)||0,u.__ecGraphicHeight=bl(u.__ecGraphicHeightOption,c?a:d.__ecGraphicHeight)||0}}for(s=n.length-1;0<=s;s--){var u,d;(u=o.get((l=n[s]).id))&&sc(u,l,(d=u.parent)===i?{width:r,height:a}:{width:d.__ecGraphicWidth,height:d.__ecGraphicHeight},null,{hv:l.hv,boundingMode:l.bounding})}},_clear:function(){var t=this._elMap;t.each(function(e){gT(e,t)}),this._elMap=Q()},dispose:function(){this._clear()}});var vT={};function yT(t,e){vT[t]=e}function xT(t){return vT[t]}var bT=sf({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){bT.superApply(this,"optionUpdated",arguments),k(this.option.feature,function(t,e){var n=xT(e);n&&v(t,n.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1}}});function _T(t,e){var n=Fl(e.get("padding")),i=e.getItemStyle(["color","opacity"]);return i.fill=e.get("backgroundColor"),new ja({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:i,silent:!0,z2:-1})}lf({type:"toolbox",render:function(t,e,n,i){var o=this.group;if(o.removeAll(),t.get("show")){var r=+t.get("itemSize"),a=t.get("feature")||{},s=this._features||(this._features={}),l=[];k(a,function(t,e){l.push(e)}),new hf(this._featureNames||[],l).add(c).update(c).remove(N(c,null)).execute(),this._featureNames=l,function(t,e,n){var i=e.getBoxLayoutParams(),o=e.get("padding"),r={width:n.getWidth(),height:n.getHeight()},a=ac(i,r,o);rc(e.get("orient"),t,e.get("itemGap"),a.width,a.height),sc(t,i,r,o)}(o,t,n),o.add(_T(o.getBoundingRect(),t)),o.eachChild(function(t){var e=t.__title,i=t.hoverStyle;if(i&&e){var a=oi(e,mi(i)),s=t.position[0]+o.position[0],l=!1;t.position[1]+o.position[1]+r+a.height>n.getHeight()&&(i.textPosition="top",l=!0);var c=l?-5-a.height:r+8;s+a.width/2>n.getWidth()?(i.textPosition=["100%",c],i.textAlign="right"):s-a.width/2<0&&(i.textPosition=[0,c],i.textAlign="left")}})}function c(c,u){var d,h=l[c],f=l[u],p=a[h],g=new fl(p,t,t.ecModel);if(i&&null!=i.newTitle&&i.featureName===h&&(p.title=i.newTitle),h&&!f){if(function(t){return 0===t.indexOf("my")}(h))d={model:g,onclick:g.option.onclick,featureName:h};else{var m=xT(h);if(!m)return;d=new m(g,e,n)}s[h]=d}else{if(!(d=s[f]))return;d.model=g,d.ecModel=e,d.api=n}h||!f?g.get("show")&&!d.unusable?(function(i,a,s){var l=i.getModel("iconStyle"),c=i.getModel("emphasis.iconStyle"),u=a.getIcons?a.getIcons():i.get("icon"),d=i.get("title")||{};if("string"==typeof u){var h=u,f=d;d={},(u={})[s]=h,d[s]=f}var p=i.iconPaths={};k(u,function(s,u){var h=nl(s,{},{x:-r/2,y:-r/2,width:r,height:r});h.setStyle(l.getItemStyle()),h.hoverStyle=c.getItemStyle(),h.setStyle({text:d[u],textAlign:c.get("textAlign"),textBorderRadius:c.get("textBorderRadius"),textPadding:c.get("textPadding"),textFill:null});var f=t.getModel("tooltip");f&&f.get("show")&&h.attr("tooltip",x({content:d[u],formatter:f.get("formatter",!0)||function(){return d[u]},formatterParams:{componentType:"toolbox",name:u,title:d[u],$vars:["name","title"]},position:f.get("position",!0)||"bottom"},f.option)),Rs(h),t.get("showTitle")&&(h.__title=d[u],h.on("mouseover",function(){var e=c.getItemStyle(),n="vertical"===t.get("orient")?null==t.get("right")?"right":"left":null==t.get("bottom")?"bottom":"top";h.setStyle({textFill:c.get("textFill")||e.fill||e.stroke||"#000",textBackgroundColor:c.get("textBackgroundColor"),textPosition:c.get("textPosition")||n})}).on("mouseout",function(){h.setStyle({textFill:null,textBackgroundColor:null})})),h.trigger(i.get("iconStatus."+u)||"normal"),o.add(h),h.on("click",E(a.onclick,a,e,n,u)),p[u]=h})}(g,d,h),g.setIconStatus=function(t,e){var n=this.option,i=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[t]=e,i[t]&&i[t].trigger(e)},d.render&&d.render(g,e,n,i)):d.remove&&d.remove(e,n):d.dispose&&d.dispose(e,n)}},updateView:function(t,e,n,i){k(this._features,function(t){t.updateView&&t.updateView(t.model,e,n,i)})},remove:function(t,e){k(this._features,function(n){n.remove&&n.remove(t,e)}),this.group.removeAll()},dispose:function(t,e){k(this._features,function(n){n.dispose&&n.dispose(t,e)})}});var wT=md.toolbox.saveAsImage;function ST(t){this.model=t}ST.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:wT.title,type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:wT.lang.slice()},ST.prototype.unusable=!o.canvasSupported,ST.prototype.onclick=function(t,e){var n=this.model,i=n.get("name")||t.get("title.0.text")||"echarts",r="svg"===e.getZr().painter.getType()?"svg":n.get("type",!0)||"png",a=e.getConnectedDataURL({type:r,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")});if("function"!=typeof MouseEvent||o.browser.ie||o.browser.edge)if(window.navigator.msSaveOrOpenBlob){for(var s=atob(a.split(",")[1]),l=s.length,c=new Uint8Array(l);l--;)c[l]=s.charCodeAt(l);var u=new Blob([c]);window.navigator.msSaveOrOpenBlob(u,i+"."+r)}else{var d=n.get("lang"),h='<body style="margin:0;"><img src="'+a+'" style="max-width:100%;" title="'+(d&&d[0]||"")+'" /></body>';window.open().document.write(h)}else{var f=document.createElement("a");f.download=i+"."+r,f.target="_blank",f.href=a;var p=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});f.dispatchEvent(p)}},yT("saveAsImage",ST);var CT=md.toolbox.magicType,MT="__ec_magicType_stack__";function TT(t){this.model=t}TT.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:m(CT.title),option:{},seriesIndex:{}};var kT=TT.prototype;kT.getIcons=function(){var t=this.model,e=t.get("icon"),n={};return k(t.get("type"),function(t){e[t]&&(n[t]=e[t])}),n};var AT={line:function(t,e,n,i){if("bar"===t)return v({id:e,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get("option.line")||{},!0)},bar:function(t,e,n,i){if("line"===t)return v({id:e,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get("option.bar")||{},!0)},stack:function(t,e,n,i){var o=n.get("stack")===MT;if("line"===t||"bar"===t)return i.setIconStatus("stack",o?"normal":"emphasis"),v({id:e,stack:o?"":MT},i.get("option.stack")||{},!0)}},IT=[["line","bar"],["stack"]];kT.onclick=function(t,e,n){var i=this.model,o=i.get("seriesIndex."+n);if(AT[n]){var r,a={series:[]};k(IT,function(t){0<=S(t,n)&&k(t,function(t){i.setIconStatus(t,"normal")})}),i.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:null==o?null:{seriesIndex:o}},function(e){var o=AT[n](e.subType,e.id,e,i);o&&(b(o,e.option),a.series.push(o));var r=e.coordinateSystem;if(r&&"cartesian2d"===r.type&&("line"===n||"bar"===n)){var s=r.getAxesByScale("ordinal")[0];if(s){var l=s.dim+"Axis",c=t.queryComponents({mainType:l,index:e.get(name+"Index"),id:e.get(name+"Id")})[0].componentIndex;a[l]=a[l]||[];for(var u=0;u<=c;u++)a[l][c]=a[l][c]||{};a[l][c].boundaryGap="bar"===n}}}),"stack"===n&&(r=a.series&&a.series[0]&&a.series[0].stack===MT?v({stack:CT.title.tiled},CT.title):m(CT.title)),e.dispatchAction({type:"changeMagicType",currentType:n,newOption:a,newTitle:r,featureName:"magicType"})}},tf({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)}),yT("magicType",TT);var DT=md.toolbox.dataView,PT=new Array(60).join("-"),ET="\t";function NT(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var LT=new RegExp("[\t]+","g");function RT(t){this._dom=null,this.model=t}RT.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:m(DT.title),lang:m(DT.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},RT.prototype.onclick=function(t,e){var n=e.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",o.style.backgroundColor=i.get("backgroundColor")||"#fff";var r=document.createElement("h4"),a=i.get("lang")||[];r.innerHTML=a[0]||i.get("title"),r.style.cssText="margin: 10px 20px;",r.style.color=i.get("textColor");var s=document.createElement("div"),l=document.createElement("textarea");s.style.cssText="display:block;width:100%;overflow:auto;";var c=i.get("optionToContent"),u=i.get("contentToOption"),d=function(t){var e=function(t){var e={},n=[],i=[];return t.eachRawSeries(function(t){var o=t.coordinateSystem;if(!o||"cartesian2d"!==o.type&&"polar"!==o.type)n.push(t);else{var r=o.getBaseAxis();if("category"===r.type){var a=r.dim+"_"+r.index;e[a]||(e[a]={categoryAxis:r,valueAxis:o.getOtherAxis(r),series:[]},i.push({axisDim:r.dim,axisIndex:r.index})),e[a].series.push(t)}else n.push(t)}}),{seriesGroupByCategoryAxis:e,other:n,meta:i}}(t);return{value:D([function(t){var e=[];return k(t,function(t,n){var i=t.categoryAxis,o=t.valueAxis.dim,r=[" "].concat(A(t.series,function(t){return t.name})),a=[i.model.getCategories()];k(t.series,function(t){var e=t.getRawData();a.push(t.getRawData().mapArray(e.mapDimension(o),function(t){return t}))});for(var s=[r.join(ET)],l=0;l<a[0].length;l++){for(var c=[],u=0;u<a.length;u++)c.push(a[u][l]);s.push(c.join(ET))}e.push(s.join("\n"))}),e.join("\n\n"+PT+"\n\n")}(e.seriesGroupByCategoryAxis),function(t){return A(t,function(t){var e=t.getRawData(),n=[t.name],i=[];return e.each(e.dimensions,function(){for(var t=arguments.length,o=e.getName(arguments[t-1]),r=0;r<t-1;r++)i[r]=arguments[r];n.push((o?o+ET:"")+i.join(ET))}),n.join("\n")}).join("\n\n"+PT+"\n\n")}(e.other)],function(t){return t.replace(/[\n\t\s]/g,"")}).join("\n\n"+PT+"\n\n"),meta:e.meta}}(t);if("function"==typeof c){var h=c(e.getOption());"string"==typeof h?s.innerHTML=h:F(h)&&s.appendChild(h)}else s.appendChild(l),l.readOnly=i.get("readOnly"),l.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",l.style.color=i.get("textColor"),l.style.borderColor=i.get("textareaBorderColor"),l.style.backgroundColor=i.get("textareaColor"),l.value=d.value;var f=d.meta,p=document.createElement("div");p.style.cssText="position:absolute;bottom:0;left:0;right:0;";var g="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",m=document.createElement("div"),v=document.createElement("div");g+=";background-color:"+i.get("buttonColor"),g+=";color:"+i.get("buttonTextColor");var y=this;function x(){n.removeChild(o),y._dom=null}Gt(m,"click",x),Gt(v,"click",function(){var t;try{t="function"==typeof u?u(s,e.getOption()):function(t,e){var n=t.split(new RegExp("\n*"+PT+"\n*","g")),i={series:[]};return k(n,function(t,n){if(function(t){if(0<=t.slice(0,t.indexOf("\n")).indexOf(ET))return!0}(t)){var o=function(t){for(var e=t.split(/\n+/g),n=[],i=A(NT(e.shift()).split(LT),function(t){return{name:t,data:[]}}),o=0;o<e.length;o++){var r=NT(e[o]).split(LT);n.push(r.shift());for(var a=0;a<r.length;a++)i[a]&&(i[a].data[o]=r[a])}return{series:i,categories:n}}(t),r=e[n],a=r.axisDim+"Axis";r&&(i[a]=i[a]||[],i[a][r.axisIndex]={data:o.categories},i.series=i.series.concat(o.series))}else o=function(t){for(var e=t.split(/\n+/g),n=NT(e.shift()),i=[],o=0;o<e.length;o++){var r=NT(e[o]);if(r){var a,s=r.split(LT),l="",c=!1;a=isNaN(s[0])?(c=!0,l=s[0],s=s.slice(1),i[o]={name:l,value:[]},i[o].value):i[o]=[];for(var u=0;u<s.length;u++)a.push(+s[u]);1===a.length&&(c?i[o].value=a[0]:i[o]=a[0])}}return{name:n,data:i}}(t),i.series.push(o)}),i}(l.value,f)}catch(t){throw x(),new Error("Data view format error "+t)}t&&e.dispatchAction({type:"changeDataView",newOption:t}),x()}),m.innerHTML=a[1],v.innerHTML=a[2],v.style.cssText=g,m.style.cssText=g,i.get("readOnly")||p.appendChild(v),p.appendChild(m),o.appendChild(r),o.appendChild(s),o.appendChild(p),s.style.height=n.clientHeight-80+"px",n.appendChild(o),this._dom=o},RT.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)},RT.prototype.dispose=function(t,e){this.remove(t,e)},yT("dataView",RT),tf({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var n=[];k(t.newOption.series,function(t){var i=e.getSeriesByName(t.name)[0];if(i){var o=i.get("data");n.push({name:t.name,data:function(t,e){return A(t,function(t,n){var i=e&&e[n];if(!B(i)||L(i))return t;B(t)&&!L(t)||(t={value:t});var o=null!=i.name&&null==t.name;return t=b(t,i),o&&delete t.name,t})}(t.data,o)})}else n.push(x({type:"scatter"},t))}),e.mergeOption(b({series:n},t.newOption))});var OT=k,BT=S,zT=N,VT=["dataToPoint","pointToData"],FT=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function HT(t,e,n){var i=this._targetInfoList=[],o={},r=UT(e,t);OT(jT,function(t,e){n&&n.include&&!(0<=BT(n.include,e))||t(r,i,o)})}var WT=HT.prototype;function GT(t){return t[0]>t[1]&&t.reverse(),t}function UT(t,e){return zo(t,e,{includeMainTypes:FT})}WT.setOutputRanges=function(t,e){this.matchOutputRanges(t,e,function(t,e,n){if((t.coordRanges||(t.coordRanges=[])).push(e),!t.coordRange){t.coordRange=e;var i=YT[t.brushType](0,n,e);t.__rangeOffset={offset:ZT[t.brushType](i.values,t.range,[1,1]),xyMinMax:i.xyMinMax}}})},WT.matchOutputRanges=function(t,e,n){OT(t,function(t){var i=this.findTargetInfo(t,e);i&&!0!==i&&k(i.coordSyses,function(i){var o=YT[t.brushType](1,i,t.range);n(t,o.values,i,e)})},this)},WT.setInputRanges=function(t,e){OT(t,function(t){var n=this.findTargetInfo(t,e);if(t.range=t.range||[],n&&!0!==n){t.panelId=n.panelId;var i=YT[t.brushType](0,n.coordSys,t.coordRange),o=t.__rangeOffset;t.range=o?ZT[t.brushType](i.values,o.offset,function(t,e){var n=JT(t),i=JT(e),o=[n[0]/i[0],n[1]/i[1]];return isNaN(o[0])&&(o[0]=1),isNaN(o[1])&&(o[1]=1),o}(i.xyMinMax,o.xyMinMax)):i.values}},this)},WT.makePanelOpts=function(t,e){return A(this._targetInfoList,function(n){var i=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:e&&e(n),clipPath:Sw(i),isTargetByCursor:Mw(i,t,n.coordSysModel),getLinearBrushOtherExtent:Cw(i)}})},WT.controlSeries=function(t,e,n){var i=this.findTargetInfo(t,n);return!0===i||i&&0<=BT(i.coordSyses,e.coordinateSystem)},WT.findTargetInfo=function(t,e){for(var n=this._targetInfoList,i=UT(e,t),o=0;o<n.length;o++){var r=n[o],a=t.panelId;if(a){if(r.panelId===a)return r}else for(o=0;o<$T.length;o++)if($T[o](i,r))return r}return!0};var jT={grid:function(t,e){var n=t.xAxisModels,i=t.yAxisModels,o=t.gridModels,r=Q(),a={},s={};(n||i||o)&&(OT(n,function(t){var e=t.axis.grid.model;r.set(e.id,e),a[e.id]=!0}),OT(i,function(t){var e=t.axis.grid.model;r.set(e.id,e),s[e.id]=!0}),OT(o,function(t){r.set(t.id,t),a[t.id]=!0,s[t.id]=!0}),r.each(function(t){var o=[];OT(t.coordinateSystem.getCartesians(),function(t,e){(0<=BT(n,t.getAxis("x").model)||0<=BT(i,t.getAxis("y").model))&&o.push(t)}),e.push({panelId:"grid--"+t.id,gridModel:t,coordSysModel:t,coordSys:o[0],coordSyses:o,getPanelRect:qT.grid,xAxisDeclared:a[t.id],yAxisDeclared:s[t.id]})}))},geo:function(t,e){OT(t.geoModels,function(t){var n=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:qT.geo})})}},$T=[function(t,e){var n=t.xAxisModel,i=t.yAxisModel,o=t.gridModel;return!o&&n&&(o=n.axis.grid.model),!o&&i&&(o=i.axis.grid.model),o&&o===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],qT={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(Ks(t)),e}},YT={lineX:zT(XT,0),lineY:zT(XT,1),rect:function(t,e,n){var i=e[VT[t]]([n[0][0],n[1][0]]),o=e[VT[t]]([n[0][1],n[1][1]]),r=[GT([i[0],o[0]]),GT([i[1],o[1]])];return{values:r,xyMinMax:r}},polygon:function(t,e,n){var i=[[1/0,-1/0],[1/0,-1/0]];return{values:A(n,function(n){var o=e[VT[t]](n);return i[0][0]=Math.min(i[0][0],o[0]),i[1][0]=Math.min(i[1][0],o[1]),i[0][1]=Math.max(i[0][1],o[0]),i[1][1]=Math.max(i[1][1],o[1]),o}),xyMinMax:i}}};function XT(t,e,n,i){var o=n.getAxis(["x","y"][t]),r=GT(A([0,1],function(t){return e?o.coordToData(o.toLocalCoord(i[t])):o.toGlobalCoord(o.dataToCoord(i[t]))})),a=[];return a[t]=r,a[1-t]=[NaN,NaN],{values:r,xyMinMax:a}}var ZT={lineX:zT(KT,0),lineY:zT(KT,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return A(t,function(t,i){return[t[0]-n[0]*e[i][0],t[1]-n[1]*e[i][1]]})}};function KT(t,e,n,i){return[e[0]-i[t]*n[0],e[1]-i[t]*n[1]]}function JT(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var QT=k,tk="\0_ec_hist_store";function ek(t){return t[tk]||(t[tk]=[{}])}gc.registerSubTypeDefaulter("dataZoom",function(){return"slider"});var nk,ik,ok,rk,ak=["cartesian2d","polar","singleAxis"],sk=(ik=["axisIndex","axis","index","id"],ok=A(nk=(nk=["x","y","z","radius","angle","single"]).slice(),Kl),rk=A(ik=(ik||[]).slice(),Kl),function(t,e){k(nk,function(n,i){for(var o={name:n,capital:ok[i]},r=0;r<ik.length;r++)o[ik[r]]=n+rk[r];t.call(e,o)})});function lk(t,e,n,i){this._dimName=t,this._axisIndex=e,this.ecModel=i,this._dataZoomModel=n}var ck=k,uk=wl;function dk(t,e){var n=t.getAxisModel(),i=t._percentWindow,o=t._valueWindow;if(i){var r=Ml(o,[0,500]);r=Math.min(r,20);var a=e||0===i[0]&&100===i[1];n.setRange(a?null:+o[0].toFixed(r),a?null:+o[1].toFixed(r))}}lk.prototype={constructor:lk,hostedBy:function(t){return this._dataZoomModel===t},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var t=[],e=this.ecModel;return e.eachSeries(function(n){if(function(t){return 0<=S(ak,t)}(n.get("coordinateSystem"))){var i=this._dimName,o=e.queryComponents({mainType:i+"Axis",index:n.get(i+"AxisIndex"),id:n.get(i+"AxisId")})[0];this._axisIndex===(o&&o.componentIndex)&&t.push(n)}},this),t},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var t,e,n,i=this._dimName,o=this.ecModel,r=this.getAxisModel();return t="x"===i||"y"===i?(e="gridIndex","x"===i?"y":"x"):(e="polarIndex","angle"===i?"radius":"angle"),o.eachComponent(t+"Axis",function(t){(t.get(e)||0)===(r.get(e)||0)&&(n=t)}),n},getMinMaxSpan:function(){return m(this._minMaxSpan)},calculateDataWindow:function(t){var e,n=this._dataExtent,i=this.getAxisModel().axis.scale,o=this._dataZoomModel.getRangePropMode(),r=[0,100],a=[],s=[];ck(["start","end"],function(l,c){var u=t[l],d=t[l+"Value"];"percent"===o[c]?(null==u&&(u=r[c]),d=i.parse(xl(u,r,n))):(e=!0,u=xl(d=null==d?n[c]:i.parse(d),n,r)),s[c]=d,a[c]=u}),uk(s),uk(a);var l=this._minMaxSpan;function c(t,e,n,o,r){var a=r?"Span":"ValueSpan";C_(0,t,n,"all",l["min"+a],l["max"+a]);for(var s=0;s<2;s++)e[s]=xl(t[s],n,o,!0),r&&(e[s]=i.parse(e[s]))}return e?c(s,a,n,r,!1):c(a,s,r,n,!0),{valueWindow:s,percentWindow:a}},reset:function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=function(t,e,n){var i=[1/0,-1/0];return ck(n,function(t){var n=t.getData();n&&ck(n.mapDimension(e,!0),function(t){var e=n.getApproximateExtent(t);e[0]<i[0]&&(i[0]=e[0]),e[1]>i[1]&&(i[1]=e[1])})}),i[1]<i[0]&&(i=[NaN,NaN]),function(t,e){var n=t.getAxisModel(),i=n.getMin(!0),o="category"===n.get("type"),r=o&&n.getCategories().length;null!=i&&"dataMin"!==i&&"function"!=typeof i?e[0]=i:o&&(e[0]=0<r?0:NaN);var a=n.getMax(!0);null!=a&&"dataMax"!==a&&"function"!=typeof a?e[1]=a:o&&(e[1]=0<r?r-1:NaN),n.get("scale",!0)||(0<e[0]&&(e[0]=0),e[1]<0&&(e[1]=0))}(t,i),i}(this,this._dimName,e),function(t){var e=t._minMaxSpan={},n=t._dataZoomModel,i=t._dataExtent;ck(["min","max"],function(o){var r=n.get(o+"Span"),a=n.get(o+"ValueSpan");null!=a&&(a=t.getAxisModel().axis.scale.parse(a)),null!=a?r=xl(i[0]+a,i,[0,100],!0):null!=r&&(a=xl(r,[0,100],i,!0)-i[0]),e[o+"Span"]=r,e[o+"ValueSpan"]=a})}(this);var n=this.calculateDataWindow(t.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,dk(this)}},restore:function(t){t===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,dk(this,!0))},filterData:function(t,e){if(t===this._dataZoomModel){var n=this._dimName,i=this.getTargetSeriesModels(),o=t.get("filterMode"),r=this._valueWindow;"none"!==o&&ck(i,function(t){var e=t.getData(),i=e.mapDimension(n,!0);i.length&&("weakFilter"===o?e.filterSelf(function(t){for(var n,o,a,s=0;s<i.length;s++){var l=e.get(i[s],t),c=!isNaN(l),u=l<r[0],d=l>r[1];if(c&&!u&&!d)return!0;c&&(a=!0),u&&(n=!0),d&&(o=!0)}return a&&n&&o}):ck(i,function(n){if("empty"===o)t.setData(e=e.map(n,function(t){return function(t){return t>=r[0]&&t<=r[1]}(t)?t:NaN}));else{var i={};i[n]=r,e.selectRange(i)}}),ck(i,function(t){e.setApproximateExtent(r,t)}))})}}};var hk=k,fk=sk,pk=sf({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(t,e,n){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var i=gk(t);this.settledOption=i,this.mergeDefaultAndTheme(t,n),this.doInit(i)},mergeOption:function(t){var e=gk(t);v(this.option,t,!0),v(this.settledOption,e,!0),this.doInit(e)},doInit:function(t){var e=this.option;o.canvasSupported||(e.realtime=!1),this._setDefaultThrottle(t),mk(this,t);var n=this.settledOption;hk([["start","startValue"],["end","endValue"]],function(t,i){"value"===this._rangePropMode[i]&&(e[t[0]]=n[t[0]]=null)},this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var t=this._axisProxies;this.eachTargetAxis(function(e,n,i,o){var r=this.dependentModels[e.axis][n],a=r.__dzAxisProxy||(r.__dzAxisProxy=new lk(e.name,n,this,o));t[e.name+"_"+n]=a},this)},_resetTarget:function(){var t=this.option,e=this._judgeAutoMode();fk(function(e){var n=e.axisIndex;t[n]=ko(t[n])},this),"axisIndex"===e?this._autoSetAxisIndex():"orient"===e&&this._autoSetOrient()},_judgeAutoMode:function(){var t=this.option,e=!1;fk(function(n){null!=t[n.axisIndex]&&(e=!0)},this);var n=t.orient;return null==n&&e?"orient":e?void 0:(null==n&&(t.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var t=!0,e=this.get("orient",!0),n=this.option,i=this.dependentModels;if(t){var o="vertical"===e?"y":"x";i[o+"Axis"].length?(n[o+"AxisIndex"]=[0],t=!1):hk(i.singleAxis,function(i){t&&i.get("orient",!0)===e&&(n.singleAxisIndex=[i.componentIndex],t=!1)})}t&&fk(function(e){if(t){var i=[],o=this.dependentModels[e.axis];if(o.length&&!i.length)for(var r=0,a=o.length;r<a;r++)"category"===o[r].get("type")&&i.push(r);(n[e.axisIndex]=i).length&&(t=!1)}},this),t&&this.ecModel.eachSeries(function(t){this._isSeriesHasAllAxesTypeOf(t,"value")&&fk(function(e){var i=n[e.axisIndex],o=t.get(e.axisIndex),r=t.get(e.axisId);S(i,o=t.ecModel.queryComponents({mainType:e.axis,index:o,id:r})[0].componentIndex)<0&&i.push(o)})},this)},_autoSetOrient:function(){var t;this.eachTargetAxis(function(e){t=t||e.name},this),this.option.orient="y"===t?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(t,e){var n=!0;return fk(function(i){var o=t.get(i.axisIndex),r=this.dependentModels[i.axis][o];r&&r.get("type")===e||(n=!1)},this),n},_setDefaultThrottle:function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&0<e.animationDurationUpdate?100:20}},getFirstTargetAxisModel:function(){var t;return fk(function(e){if(null==t){var n=this.get(e.axisIndex);n.length&&(t=this.dependentModels[e.axis][n[0]])}},this),t},eachTargetAxis:function(t,e){var n=this.ecModel;fk(function(i){hk(this.get(i.axisIndex),function(o){t.call(e,i,o,this,n)},this)},this)},getAxisProxy:function(t,e){return this._axisProxies[t+"_"+e]},getAxisModel:function(t,e){var n=this.getAxisProxy(t,e);return n&&n.getAxisModel()},setRawRange:function(t){var e=this.option,n=this.settledOption;hk([["start","startValue"],["end","endValue"]],function(i){null==t[i[0]]&&null==t[i[1]]||(e[i[0]]=n[i[0]]=t[i[0]],e[i[1]]=n[i[1]]=t[i[1]])},this),mk(this,t)},setCalculatedRange:function(t){var e=this.option;hk(["start","startValue","end","endValue"],function(n){e[n]=t[n]})},getPercentRange:function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},getValueRange:function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(t){if(t)return t.__dzAxisProxy;var e=this._axisProxies;for(var n in e)if(e.hasOwnProperty(n)&&e[n].hostedBy(this))return e[n];for(var n in e)if(e.hasOwnProperty(n)&&!e[n].hostedBy(this))return e[n]},getRangePropMode:function(){return this._rangePropMode.slice()}});function gk(t){var e={};return hk(["start","end","startValue","endValue","throttle"],function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}function mk(t,e){var n=t._rangePropMode,i=t.get("rangeMode");hk([["start","startValue"],["end","endValue"]],function(t,o){var r=null!=e[t[0]],a=null!=e[t[1]];r&&!a?n[o]="percent":!r&&a?n[o]="value":i?n[o]=i[o]:r&&(n[o]="percent")})}var vk=Ku.extend({type:"dataZoom",render:function(t,e,n,i){this.dataZoomModel=t,this.ecModel=e,this.api=n},getTargetCoordInfo:function(){var t=this.ecModel,e={};return this.dataZoomModel.eachTargetAxis(function(n,i){var o=t.getComponent(n.axis,i);if(o){var r=o.getCoordSysModel();r&&function(t,e,n,i){for(var o,r=0;r<n.length;r++)if(n[r].model===t){o=n[r];break}o||n.push(o={model:t,axisModels:[],coordIndex:i}),o.axisModels.push(e)}(r,o,e[r.mainType]||(e[r.mainType]=[]),r.componentIndex)}},this),e}});pk.extend({type:"dataZoom.select"}),vk.extend({type:"dataZoom.select"}),Qh({getTargetSeries:function(t){var e=Q();return t.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(t,n,i){k(i.getAxisProxy(t.name,n).getTargetSeriesModels(),function(t){e.set(t.uid,t)})})}),e},modifyOutputEnd:!0,overallReset:function(t,e){t.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(t,n,i){i.getAxisProxy(t.name,n).reset(i,e)}),t.eachTargetAxis(function(t,n,i){i.getAxisProxy(t.name,n).filterData(i,e)})}),t.eachComponent("dataZoom",function(t){var e=t.findRepresentativeAxisProxy(),n=e.getDataPercentWindow(),i=e.getDataValueWindow();t.setCalculatedRange({start:n[0],end:n[1],startValue:i[0],endValue:i[1]})})}}),tf("dataZoom",function(t,e){var n=function(t,e,n){return function(o){var r,a={nodes:[],records:{}};if(e(function(t){a.records[t.name]={}}),!o)return a;for(i(o,a);r=!1,t(s),r;);function s(t){!function(t,e){return 0<=S(e.nodes,t)}(t,a)&&function(t,i){var o=!1;return e(function(e){k(n(t,e)||[],function(t){i.records[e.name][t]&&(o=!0)})}),o}(t,a)&&(i(t,a),r=!0)}return a};function i(t,i){i.nodes.push(t),e(function(e){k(n(t,e)||[],function(t){i.records[e.name][t]=!0})})}}(E(e.eachComponent,e,"dataZoom"),sk,function(t,e){return t.get(e.axisIndex)}),i=[];e.eachComponent({mainType:"dataZoom",query:t},function(t,e){i.push.apply(i,n(t).nodes)}),k(i,function(e,n){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})});var yk=k;function xk(t,e,n){(this._brushController=new q_(n.getZr())).on("brush",E(this._onBrush,this)).mount()}xk.defaultOption={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:m(md.toolbox.dataZoom.title),brushStyle:{borderWidth:0,color:"rgba(0,0,0,0.2)"}};var bk=xk.prototype;bk.render=function(t,e,n,i){this.model=t,this.ecModel=e,this.api=n,function(t,e,n,i,o){var r=n._isZoomActive;i&&"takeGlobalCursor"===i.type&&(r="dataZoomSelect"===i.key&&i.dataZoomSelectActive),n._isZoomActive=r,t.setIconStatus("zoom",r?"emphasis":"normal");var a=new HT(wk(t.option),e,{include:["grid"]});n._brushController.setPanels(a.makePanelOpts(o,function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"})).enableBrush(!!r&&{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()})}(t,e,this,i,n),function(t,e){t.setIconStatus("back",1<function(t){return ek(t).length}(e)?"emphasis":"normal")}(t,e)},bk.onclick=function(t,e,n){_k[n].call(this)},bk.remove=function(t,e){this._brushController.unmount()},bk.dispose=function(t,e){this._brushController.dispose()};var _k={zoom:function(){this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!this._isZoomActive})},back:function(){this._dispatchZoomAction(function(t){var e=ek(t),n=e[e.length-1];1<e.length&&e.pop();var i={};return QT(n,function(t,n){for(var o=e.length-1;0<=o;o--)if(t=e[o][n]){i[n]=t;break}}),i}(this.ecModel))}};function wk(t){var e={};return k(["xAxisIndex","yAxisIndex"],function(n){e[n]=t[n],null==e[n]&&(e[n]="all"),!1!==e[n]&&"none"!==e[n]||(e[n]=[])}),e}function Sk(t){this.model=t}bk._onBrush=function(t,e){if(e.isEnd&&t.length){var n={},i=this.ecModel;this._brushController.updateCovers([]),new HT(wk(this.model.option),i,{include:["grid"]}).matchOutputRanges(t,i,function(t,e,n){if("cartesian2d"===n.type){var i=t.brushType;"rect"===i?(o("x",n,e[0]),o("y",n,e[1])):o({lineX:"x",lineY:"y"}[i],n,e)}}),function(t,e){var n=ek(t);QT(e,function(e,i){for(var o=n.length-1;0<=o&&!n[o][i];o--);if(o<0){var r=t.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(r){var a=r.getPercentRange();n[0][i]={dataZoomId:i,start:a[0],end:a[1]}}}}),n.push(e)}(i,n),this._dispatchZoomAction(n)}function o(t,e,o){var r=e.getAxis(t),a=r.model,s=function(t,e,n){var i;return n.eachComponent({mainType:"dataZoom",subType:"select"},function(n){n.getAxisModel(t,e.componentIndex)&&(i=n)}),i}(t,a,i),l=s.findRepresentativeAxisProxy(a).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(o=C_(0,o.slice(),r.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:o[0],endValue:o[1]})}},bk._dispatchZoomAction=function(t){var e=[];yk(t,function(t,n){e.push(m(t))}),e.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:e})},yT("dataZoom",xk),Jh(function(t){if(t){var e=t.dataZoom||(t.dataZoom=[]);L(e)||(t.dataZoom=e=[e]);var n=t.toolbox;if(n&&(L(n)&&(n=n[0]),n&&n.feature)){var i=n.feature.dataZoom;o("xAxis",i),o("yAxis",i)}}function o(n,i){if(i){var o=n+"Index",r=i[o];null==r||"all"===r||L(r)||(r=!1===r||"none"===r?[]:[r]),function(a,s){var l=t[a];L(l)||(l=l?[l]:[]),yk(l,function(t,a){if(null==r||"all"===r||-1!==S(r,a)){var s={type:"select",$fromToolbox:!0,filterMode:i.filterMode||"filter",id:"\0_ec_\0toolbox-dataZoom_"+n+a};s[o]=a,e.push(s)}})}(n)}}}),Sk.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:md.toolbox.restore.title},Sk.prototype.onclick=function(t,e,n){!function(t){t[tk]=null}(t),e.dispatchAction({type:"restore",from:this.uid})},yT("restore",Sk),tf({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")}),sf({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});var Ck=k,Mk=Vl,Tk=["","-webkit-","-moz-","-o-"];function kk(t,e,n,i,o){var r=e&&e.painter;if(n){var a=r&&r.getViewportRoot();a&&function(t,e,n,i,o){Lt(Nt,e,i,o,!0)&&Lt(t,n,Nt[0],Nt[1])}(t,a,document.body,i,o)}else{t[0]=i,t[1]=o;var s=r&&r.getViewportRootOffset();s&&(t[0]+=s.offsetLeft,t[1]+=s.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}function Ak(t,e,n){if(o.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var r=this._zr=e.getZr(),a=this._appendToBody=n&&n.appendToBody;this._styleCoord=[0,0,0,0],kk(this._styleCoord,r,a,e.getWidth()/2,e.getHeight()/2),a?document.body.appendChild(i):t.appendChild(i),this._container=t,this._show=!1;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(t){if(t=t||window.event,!s._enterable){var e=r.handler;Wt(r.painter.getViewportRoot(),t,!0),e.dispatch("mousemove",t)}},i.onmouseleave=function(){s._enterable&&s._show&&s.hideLater(s._hideDelay),s._inContent=!1}}function Ik(t,e,n,i){t[0]=n,t[1]=i,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}function Dk(t){var e=this._zr=t.getZr();this._styleCoord=[0,0,0,0],Ik(this._styleCoord,e,t.getWidth()/2,t.getHeight()/2),this._show=!1}Ak.prototype={constructor:Ak,_enterable:!0,update:function(t){var e=this._container,n=e.currentStyle||document.defaultView.getComputedStyle(e),i=e.style;"absolute"!==i.position&&"absolute"!==n.position&&(i.position="relative"),t.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var t=this._styleCoord[3],e=this._styleCoord[2]*this._zr.getWidth(),n=t*this._zr.getHeight();this.moveTo(e,n)},show:function(t){clearTimeout(this._hideTimeout);var e=this.el,n=this._styleCoord;e.style.cssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+function(t){var e=[],n=t.get("transitionDuration"),i=t.get("backgroundColor"),r=t.getModel("textStyle"),a=t.get("padding");return n&&e.push(function(t){var e="cubic-bezier(0.23, 1, 0.32, 1)",n="left "+t+"s "+e+",top "+t+"s "+e;return A(Tk,function(t){return t+"transition:"+n}).join(";")}(n)),i&&(o.canvasSupported?e.push("background-Color:"+i):(e.push("background-Color:#"+We(i)),e.push("filter:alpha(opacity=70)"))),Ck(["width","color","radius"],function(n){var i="border-"+n,o=Mk(i),r=t.get(o);null!=r&&e.push(i+":"+r+("color"===n?"":"px"))}),e.push(function(t){var e=[],n=t.get("fontSize"),i=t.getTextColor();i&&e.push("color:"+i),e.push("font:"+t.getFont());var o=t.get("lineHeight");null==o&&(o=Math.round(3*n/2)),n&&e.push("line-height:"+o+"px");var r=t.get("textShadowColor"),a=t.get("textShadowBlur")||0,s=t.get("textShadowOffsetX")||0,l=t.get("textShadowOffsetY")||0;return a&&e.push("text-shadow:"+s+"px "+l+"px "+a+"px "+r),Ck(["decoration","align"],function(n){var i=t.get(n);i&&e.push("text-"+n+":"+i)}),e.join(";")}(r)),null!=a&&e.push("padding:"+Fl(a).join("px ")+"px"),e.join(";")+";"}(t)+";left:"+n[0]+"px;top:"+n[1]+"px;"+(t.get("extraCssText")||""),e.style.display=e.innerHTML?"block":"none",e.style.pointerEvents=this._enterable?"auto":"none",this._show=!0},setContent:function(t){this.el.innerHTML=null==t?"":t},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el;return[t.clientWidth,t.clientHeight]},moveTo:function(t,e){var n=this._styleCoord;kk(n,this._zr,this._appendToBody,t,e);var i=this.el.style;i.left=n[0]+"px",i.top=n[1]+"px"},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(E(this.hide,this),t)):this.hide())},isShow:function(){return this._show},dispose:function(){this.el.parentNode.removeChild(this.el)},getOuterSize:function(){var t=this.el.clientWidth,e=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var n=document.defaultView.getComputedStyle(this.el);n&&(t+=parseInt(n.borderLeftWidth,10)+parseInt(n.borderRightWidth,10),e+=parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10))}return{width:t,height:e}}},Dk.prototype={constructor:Dk,_enterable:!0,update:function(t){t.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var t=this._styleCoord[3],e=this._styleCoord[2]*this._zr.getWidth(),n=t*this._zr.getHeight();this.moveTo(e,n)},show:function(t){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr("show",!0),this._show=!0},setContent:function(t,e,n){this.el&&this._zr.remove(this.el);for(var i={},o=t,r="{marker",a=o.indexOf(r);0<=a;){var s=o.indexOf("|}"),l=o.substr(a+r.length,s-a-r.length);i["marker"+l]=-1<l.indexOf("sub")?{textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:e[l],textOffset:[3,0]}:{textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:e[l]},a=(o=o.substr(s+1)).indexOf("{marker")}var c=n.getModel("textStyle"),u=c.get("fontSize"),d=n.get("textLineHeight");null==d&&(d=Math.round(3*u/2)),this.el=new Da({style:Hs({},c,{rich:i,text:t,textBackgroundColor:n.get("backgroundColor"),textBorderRadius:n.get("borderRadius"),textFill:n.get("textStyle.color"),textPadding:n.get("padding"),textLineHeight:d}),z:n.get("z")}),this._zr.add(this.el);var h=this;this.el.on("mouseover",function(){h._enterable&&(clearTimeout(h._hideTimeout),h._show=!0),h._inContent=!0}),this.el.on("mouseout",function(){h._enterable&&h._show&&h.hideLater(h._hideDelay),h._inContent=!1})},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el.getBoundingRect();return[t.width,t.height]},moveTo:function(t,e){if(this.el){var n=this._styleCoord;Ik(n,this._zr,t,e),this.el.attr("position",[n[0],n[1]])}},hide:function(){this.el&&this.el.hide(),this._show=!1},hideLater:function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(E(this.hide,this),t)):this.hide())},isShow:function(){return this._show},dispose:function(){clearTimeout(this._hideTimeout),this.el&&this._zr.remove(this.el)},getOuterSize:function(){var t=this.getSize();return{width:t[0],height:t[1]}}};var Pk=E,Ek=k,Nk=bl,Lk=new ja({shape:{x:-1,y:-1,width:2,height:2}});function Rk(t){for(var e=t.pop();t.length;){var n=t.pop();n&&(fl.isInstance(n)&&(n=n.get("tooltip",!0)),"string"==typeof n&&(n={formatter:n}),e=new fl(n,e,e.ecModel))}return e}function Ok(t,e){return t.dispatchAction||E(e.dispatchAction,e)}function Bk(t){return"center"===t||"middle"===t}lf({type:"tooltip",init:function(t,e){if(!o.node){var n,i=t.getComponent("tooltip"),r=i.get("renderMode");this._renderMode=Ho(r),"html"===this._renderMode?(n=new Ak(e.getDom(),e,{appendToBody:i.get("appendToBody",!0)}),this._newLine="<br/>"):(n=new Dk(e),this._newLine="\n"),this._tooltipContent=n}},render:function(t,e,n){if(!o.node){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=n,this._lastDataByCoordSys=null,this._alwaysShowContent=t.get("alwaysShowContent");var i=this._tooltipContent;i.update(t),i.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var t=this._tooltipModel.get("triggerOn");RC("itemTooltip",this._api,Pk(function(e,n,i){"none"!==t&&(0<=t.indexOf(e)?this._tryShow(n,i):"leave"===e&&this._hide(i))},this))},_keepShow:function(){var t=this._tooltipModel,e=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==t.get("triggerOn")){var i=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){n.isDisposed()||i.manuallyShowTip(t,e,n,{x:i._lastX,y:i._lastY})})}},manuallyShowTip:function(t,e,n,i){if(i.from!==this.uid&&!o.node){var r=Ok(i,n);this._ticket="";var a=i.dataByCoordSys;if(i.tooltip&&null!=i.x&&null!=i.y){var s=Lk;s.position=[i.x,i.y],s.update(),s.tooltip=i.tooltip,this._tryShow({offsetX:i.x,offsetY:i.y,target:s},r)}else if(a)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:i.dataByCoordSys,tooltipOption:i.tooltipOption},r);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(t,e,n,i))return;var l=CC(i,e),c=l.point[0],u=l.point[1];null!=c&&null!=u&&this._tryShow({offsetX:c,offsetY:u,position:i.position,target:l.el},r)}else null!=i.x&&null!=i.y&&(n.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:n.getZr().findHover(i.x,i.y).target},r))}},manuallyHideTip:function(t,e,n,i){!this._alwaysShowContent&&this._tooltipModel&&this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,i.from!==this.uid&&this._hide(Ok(i,n))},_manuallyAxisShowTip:function(t,e,n,i){var o=i.seriesIndex,r=i.dataIndex,a=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=o&&null!=r&&null!=a){var s=e.getSeriesByIndex(o);if(s&&"axis"===(t=Rk([s.getData().getItemModel(r),s,(s.coordinateSystem||{}).model,t])).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:r,position:i.position}),!0}},_tryShow:function(t,e){var n=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var i=t.dataByCoordSys;i&&i.length?this._showAxisTooltip(i,t):n&&null!=n.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(t,n,e)):n&&n.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(t,n,e)):(this._lastDataByCoordSys=null,this._hide(e))}},_showOrMove:function(t,e){var n=t.get("showDelay");e=E(e,this),clearTimeout(this._showTimout),0<n?this._showTimout=setTimeout(e,n):e()},_showAxisTooltip:function(t,e){var n=this._ecModel,i=[e.offsetX,e.offsetY],o=[],r=[],a=Rk([e.tooltipOption,this._tooltipModel]),s=this._renderMode,l=this._newLine,c={};Ek(t,function(t){Ek(t.dataByAxis,function(t){var e=n.getComponent(t.axisDim+"Axis",t.axisIndex),i=t.value,a=[];if(e&&null!=i){var u=ZC(i,e.axis,n,t.seriesDataIndices,t.valueLabelOpt);k(t.seriesDataIndices,function(o){var l=n.getSeriesByIndex(o.seriesIndex),d=o.dataIndexInside,h=l&&l.getDataParams(d);if(h.axisDim=t.axisDim,h.axisIndex=t.axisIndex,h.axisType=t.axisType,h.axisId=t.axisId,h.axisValue=Gp(e.axis,i),h.axisValueLabel=u,h){r.push(h);var f,p=l.formatTooltip(d,!0,null,s);B(p)?(f=p.html,v(c,p.markers)):f=p,a.push(f)}});var d=u;o.push("html"!==s?a.join(l):(d?Gl(d)+l:"")+a.join(l))}})},this),o.reverse(),o=o.join(this._newLine+this._newLine);var u=e.position;this._showOrMove(a,function(){this._updateContentNotChangedOnAxis(t)?this._updatePosition(a,u,i[0],i[1],this._tooltipContent,r):this._showTooltipContent(a,o,r,Math.random(),i[0],i[1],u,void 0,c)})},_showSeriesItemTooltip:function(t,e,n){var i=e.seriesIndex,o=this._ecModel.getSeriesByIndex(i),r=e.dataModel||o,a=e.dataIndex,s=e.dataType,l=r.getData(s),c=Rk([l.getItemModel(a),r,o&&(o.coordinateSystem||{}).model,this._tooltipModel]),u=c.get("trigger");if(null==u||"item"===u){var d,h,f=r.getDataParams(a,s),p=r.formatTooltip(a,!1,s,this._renderMode);h=B(p)?(d=p.html,p.markers):(d=p,null);var g="item_"+r.name+"_"+a;this._showOrMove(c,function(){this._showTooltipContent(c,d,f,g,t.offsetX,t.offsetY,t.position,t.target,h)}),n({type:"showTip",dataIndexInside:a,dataIndex:l.getRawIndex(a),seriesIndex:i,from:this.uid})}},_showComponentItemTooltip:function(t,e,n){var i=e.tooltip;"string"==typeof i&&(i={content:i,formatter:i});var o=new fl(i,this._tooltipModel,this._ecModel),r=o.get("content"),a=Math.random();this._showOrMove(o,function(){this._showTooltipContent(o,r,o.get("formatterParams")||{},a,t.offsetX,t.offsetY,t.position,e)}),n({type:"showTip",from:this.uid})},_showTooltipContent:function(t,e,n,i,o,r,a,s,l){if(this._ticket="",t.get("showContent")&&t.get("show")){var c=this._tooltipContent,u=t.get("formatter");a=a||t.get("position");var d=e;if(u&&"string"==typeof u)d=$l(u,n,!0);else if("function"==typeof u){var h=Pk(function(e,i){e===this._ticket&&(c.setContent(i,l,t),this._updatePosition(t,a,o,r,c,n,s))},this);this._ticket=i,d=u(n,i,h)}c.setContent(d,l,t),c.show(t),this._updatePosition(t,a,o,r,c,n,s)}},_updatePosition:function(t,e,n,i,o,r,a){var s=this._api.getWidth(),l=this._api.getHeight();e=e||t.get("position");var c=o.getSize(),u=t.get("align"),d=t.get("verticalAlign"),h=a&&a.getBoundingRect().clone();if(a&&h.applyTransform(a.transform),"function"==typeof e&&(e=e([n,i],r,o.el,h,{viewSize:[s,l],contentSize:c.slice()})),L(e))n=Nk(e[0],s),i=Nk(e[1],l);else if(B(e)){e.width=c[0],e.height=c[1];var f=ac(e,{width:s,height:l});n=f.x,i=f.y,d=u=null}else if("string"==typeof e&&a)n=(p=function(t,e,n){var i=n[0],o=n[1],r=0,a=0,s=e.width,l=e.height;switch(t){case"inside":r=e.x+s/2-i/2,a=e.y+l/2-o/2;break;case"top":r=e.x+s/2-i/2,a=e.y-o-5;break;case"bottom":r=e.x+s/2-i/2,a=e.y+l+5;break;case"left":r=e.x-i-5,a=e.y+l/2-o/2;break;case"right":r=e.x+s+5,a=e.y+l/2-o/2}return[r,a]}(e,h,c))[0],i=p[1];else{var p;n=(p=function(t,e,n,i,o,r,a){var s=n.getOuterSize(),l=s.width,c=s.height;return null!=r&&(i<t+l+r?t-=l+r:t+=r),null!=a&&(o<e+c+a?e-=c+a:e+=a),[t,e]}(n,i,o,s,l,u?null:20,d?null:20))[0],i=p[1]}u&&(n-=Bk(u)?c[0]/2:"right"===u?c[0]:0),d&&(i-=Bk(d)?c[1]/2:"bottom"===d?c[1]:0),t.get("confine")&&(n=(p=function(t,e,n,i,o){var r=n.getOuterSize(),a=r.width,s=r.height;return t=Math.min(t+a,i)-a,e=Math.min(e+s,o)-s,[t=Math.max(t,0),e=Math.max(e,0)]}(n,i,o,s,l))[0],i=p[1]),o.moveTo(n,i)},_updateContentNotChangedOnAxis:function(t){var e=this._lastDataByCoordSys,n=!!e&&e.length===t.length;return n&&Ek(e,function(e,i){var o=e.dataByAxis||{},r=(t[i]||{}).dataByAxis||[];(n&=o.length===r.length)&&Ek(o,function(t,e){var i=r[e]||{},o=t.seriesDataIndices||[],a=i.seriesDataIndices||[];(n&=t.value===i.value&&t.axisType===i.axisType&&t.axisId===i.axisId&&o.length===a.length)&&Ek(o,function(t,e){var i=a[e];n&=t.seriesIndex===i.seriesIndex&&t.dataIndex===i.dataIndex})})}),this._lastDataByCoordSys=t,!!n},_hide:function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},dispose:function(t,e){o.node||(this._tooltipContent.dispose(),zC("itemTooltip",e))}}),tf({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),tf({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){});var zk=["rect","polygon","keep","clear"],Vk=k;function Fk(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!0}function Hk(t,e,n){var i={};return Vk(e,function(e){var o=i[e]=function(){function t(){}return t.prototype.__hidden=t.prototype,new t}();Vk(t[e],function(t,i){if(zx.isValidType(i)){var r={type:i,visual:t};n&&n(r,e),o[i]=new zx(r),"opacity"===i&&((r=m(r)).type="colorAlpha",o.__hidden.__alphaForOpacity=new zx(r))}})}),i}function Wk(t,e,n){var i;k(n,function(t){e.hasOwnProperty(t)&&Fk(e[t])&&(i=!0)}),i&&k(n,function(n){e.hasOwnProperty(n)&&Fk(e[n])?t[n]=m(e[n]):delete t[n]})}var Gk={lineX:Uk(0),lineY:Uk(1),rect:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])},rect:function(t,e,n){return t&&n.boundingRect.intersect(t)}},polygon:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])&&og(n.range,t[0],t[1])},rect:function(t,e,n){var i=n.range;if(!t||i.length<=1)return!1;var o=t.x,r=t.y,a=t.width,s=t.height,l=i[0];return!!(og(i,o,r)||og(i,o+a,r)||og(i,o,r+s)||og(i,o+a,r+s)||Sn.create(t).contain(l[0],l[1])||il(o,r,o+a,r,i)||il(o,r,o,r+s,i)||il(o+a,r,o+a,r+s,i)||il(o,r+s,o+a,r+s,i))||void 0}}};function Uk(t){var e=["x","y"],n=["width","height"];return{point:function(e,n,i){if(e)return jk(e[t],i.range)},rect:function(i,o,r){if(i){var a=r.range,s=[i[e[t]],i[e[t]]+i[n[t]]];return s[1]<s[0]&&s.reverse(),jk(s[0],a)||jk(s[1],a)||jk(a[0],s)||jk(a[1],s)}}}}function jk(t,e){return e[0]<=t&&t<=e[1]}var $k=["inBrush","outOfBrush"],qk="__ecBrushSelect",Yk="__ecInBrushSelectEvent",Xk=dh.VISUAL.BRUSH;function Zk(t){t.eachComponent({mainType:"brush"},function(e){(e.brushTargetManager=new HT(e.option,t)).setInputRanges(e.areas,t)})}function Kk(t,e){if(!t.isDisposed()){var n=t.getZr();n[Yk]=!0,t.dispatchAction({type:"brushSelect",batch:e}),n[Yk]=!1}}function Jk(t,e,n,i){for(var o=0,r=e.length;o<r;o++){var a=e[o];if(t[a.brushType](i,n,a.selectors,a))return!0}}function Qk(t){var e=t.brushSelector;if(O(e)){var n=[];return k(Gk,function(t,i){n[i]=function(n,i,o,r){var a=i.getItemLayout(n);return t[e](a,o,r)}}),n}if(R(e)){var i={};return k(Gk,function(t,n){i[n]=e}),i}return e}nf(Xk,function(t,e,n){t.eachComponent({mainType:"brush"},function(t){n&&"takeGlobalCursor"===n.type&&t.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1})}),Zk(t)}),of(Xk,function(t,e,n){var i,o,r=[];t.eachComponent({mainType:"brush"},function(e,n){var a={brushId:e.id,brushIndex:n,brushName:e.name,areas:m(e.areas),selected:[]};r.push(a);var s=e.option,l=s.brushLink,c=[],u=[],d=[],h=0;n||(i=s.throttleType,o=s.throttleDelay);var f=A(e.areas,function(t){return function(t){var e=t.selectors={};return k(Gk[t.brushType],function(n,i){e[i]=function(i){return n(i,e,t)}}),t}(b({boundingRect:tA[t.brushType](t)},t))}),p=Hk(e.option,$k,function(t){t.mappingMethod="fixed"});function g(t){return"all"===l||c[t]}function v(t){return!!t.length}L(l)&&k(l,function(t){c[t]=1}),t.eachSeries(function(n,i){var o=d[i]=[];"parallel"===n.subType?function(t,e){var n=t.coordinateSystem;h|=n.hasAxisBrushed(),g(e)&&n.eachActiveState(t.getData(),function(t,e){"active"===t&&(u[e]=1)})}(n,i):function(n,i,o){var r=Qk(n);if(r&&!function(t,e){var n=t.option.seriesIndex;return null!=n&&"all"!==n&&(L(n)?S(n,e)<0:e!==n)}(e,i)&&(k(f,function(i){r[i.brushType]&&e.brushTargetManager.controlSeries(i,n,t)&&o.push(i),h|=v(o)}),g(i)&&v(o))){var a=n.getData();a.each(function(t){Jk(r,o,a,t)&&(u[t]=1)})}}(n,i,o)}),t.eachSeries(function(t,e){var n={seriesId:t.id,seriesIndex:e,seriesName:t.name,dataIndex:[]};a.selected.push(n);var i=Qk(t),o=d[e],r=t.getData(),s=g(e)?function(t){return u[t]?(n.dataIndex.push(r.getRawIndex(t)),"inBrush"):"outOfBrush"}:function(t){return Jk(i,o,r,t)?(n.dataIndex.push(r.getRawIndex(t)),"inBrush"):"outOfBrush"};(g(e)?h:v(o))&&function(t,e,n,i,o,r){var a,s={};function l(t){return n.getItemVisual(a,t)}function c(t,e){n.setItemVisual(a,t,e)}k(t,function(t){var n=zx.prepareVisualTypes(e[t]);s[t]=n}),n.each(function(t,o){var r=n.getRawDataItem(a=t);if(!r||!1!==r.visualMap)for(var u=i.call(void 0,t),d=e[u],h=s[u],f=0,p=h.length;f<p;f++){var g=h[f];d[g]&&d[g].applyVisual(t,l,c)}})}($k,p,r,s)})}),function(t,e,n,i,o){if(o){var r=t.getZr();r[Yk]||(r[qk]||(r[qk]=Kk),fd(r,qk,n,e)(t,i))}}(e,i,o,r,n)});var tA={lineX:et,lineY:et,rect:function(t){return eA(t.range)},polygon:function(t){for(var e,n=t.range,i=0,o=n.length;i<o;i++){var r=n[i];r[0]<(e=e||[[1/0,-1/0],[1/0,-1/0]])[0][0]&&(e[0][0]=r[0]),r[0]>e[0][1]&&(e[0][1]=r[0]),r[1]<e[1][0]&&(e[1][0]=r[1]),r[1]>e[1][1]&&(e[1][1]=r[1])}return e&&eA(e)}};function eA(t){return new Sn(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var nA=["#ddd"];function iA(t,e){return v({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new fl(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,!0)}function oA(t,e,n,i){i&&i.$from===t.id||this._brushController.setPanels(t.brushTargetManager.makePanelOpts(n)).enableBrush(t.brushOption).updateCovers(t.areas.slice())}function rA(t,e,n){this.model=t,this.ecModel=e,this.api=n}sf({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(t,e){var n=this.option;e||Wk(n,t,["inBrush","outOfBrush"]);var i=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:nA},i.hasOwnProperty("liftZ")||(i.liftZ=5)},setAreas:function(t){t&&(this.areas=A(t,function(t){return iA(this.option,t)},this))},setBrushOption:function(t){this.brushOption=iA(this.option,t),this.brushType=this.brushOption.brushType}}),lf({type:"brush",init:function(t,e){this.ecModel=t,this.api=e,(this._brushController=new q_(e.getZr())).on("brush",E(this._onBrush,this)).mount()},render:function(t){return this.model=t,oA.apply(this,arguments)},updateTransform:function(t,e){return Zk(e),oA.apply(this,arguments)},updateView:oA,dispose:function(){this._brushController.dispose()},_onBrush:function(t,e){var n=this.model.id;this.model.brushTargetManager.setOutputRanges(t,this.ecModel),e.isEnd&&!e.removeOnClick||this.api.dispatchAction({type:"brush",brushId:n,areas:m(t),$from:n}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:m(t),$from:n})}}),tf({type:"brush",event:"brush"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(e){e.setAreas(t.areas)})}),tf({type:"brushSelect",event:"brushSelected",update:"none"},function(){}),tf({type:"brushEnd",event:"brushEnd",update:"none"},function(){}),rA.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:m(md.toolbox.brush.title)};var aA=rA.prototype;function sA(t){var e=t.itemStyle||(t.itemStyle={}),n=e.emphasis||(e.emphasis={}),i=t.label||t.label||{},o=i.normal||(i.normal={}),r={normal:1,emphasis:1};k(i,function(t,e){r[e]||lA(o,e)||(o[e]=t)}),n.label&&!lA(i,"emphasis")&&(i.emphasis=n.label,delete n.label)}function lA(t,e){return t.hasOwnProperty(e)}aA.render=aA.updateView=function(t,e,n){var i,o,r;e.eachComponent({mainType:"brush"},function(t){i=t.brushType,o=t.brushOption.brushMode||"single",r|=t.areas.length}),this._brushType=i,this._brushMode=o,k(t.get("type",!0),function(e){t.setIconStatus(e,("keep"===e?"multiple"===o:"clear"===e?r:e===i)?"emphasis":"normal")})},aA.getIcons=function(){var t=this.model,e=t.get("icon",!0),n={};return k(t.get("type",!0),function(t){e[t]&&(n[t]=e[t])}),n},aA.onclick=function(t,e,n){var i=this._brushType,o=this._brushMode;"clear"===n?(e.dispatchAction({type:"axisAreaSelect",intervals:[]}),e.dispatchAction({type:"brush",command:"clear",areas:[]})):e.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?i:i!==n&&n,brushMode:"keep"===n?"multiple"===o?"single":"multiple":o}})},yT("brush",rA),Jh(function(t,e){var n=t&&t.brush;if(L(n)||(n=n?[n]:[]),n.length){var i=[];k(n,function(t){var e=t.hasOwnProperty("toolbox")?t.toolbox:[];e instanceof Array&&(i=i.concat(e))});var o=t&&t.toolbox;L(o)&&(o=o[0]),o||(t.toolbox=[o={feature:{}}]);var r=o.feature||(o.feature={}),a=r.brush||(r.brush={}),s=a.type||(a.type=[]);s.push.apply(s,i),function(t){var e={};k(t,function(t){e[t]=1}),t.length=0,k(e,function(e,n){t.push(n)})}(s),e&&!s.length&&s.push.apply(s,zk)}}),sf({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),lf({type:"title",render:function(t,e,n){if(this.group.removeAll(),t.get("show")){var i=this.group,o=t.getModel("textStyle"),r=t.getModel("subtextStyle"),a=t.get("textAlign"),s=G(t.get("textBaseline"),t.get("textVerticalAlign")),l=new Da({style:Hs({},o,{text:t.get("text"),textFill:o.getTextColor()},{disableBox:!0}),z2:10}),c=l.getBoundingRect(),u=t.get("subtext"),d=new Da({style:Hs({},r,{text:u,textFill:r.getTextColor(),y:c.height+t.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),h=t.get("link"),f=t.get("sublink"),p=t.get("triggerEvent",!0);l.silent=!h&&!p,d.silent=!f&&!p,h&&l.on("click",function(){Ql(h,"_"+t.get("target"))}),f&&d.on("click",function(){Ql(f,"_"+t.get("subtarget"))}),l.eventData=d.eventData=p?{componentType:"title",componentIndex:t.componentIndex}:null,i.add(l),u&&i.add(d);var g=i.getBoundingRect(),m=t.getBoxLayoutParams();m.width=g.width,m.height=g.height;var v=ac(m,{width:n.getWidth(),height:n.getHeight()},t.get("padding"));a||("middle"===(a=t.get("left")||t.get("right"))&&(a="center"),"right"===a?v.x+=v.width:"center"===a&&(v.x+=v.width/2)),s||("center"===(s=t.get("top")||t.get("bottom"))&&(s="middle"),"bottom"===s?v.y+=v.height:"middle"===s&&(v.y+=v.height/2),s=s||"top"),i.attr("position",[v.x,v.y]);var y={textAlign:a,textVerticalAlign:s};l.setStyle(y),d.setStyle(y),g=i.getBoundingRect();var x=v.margin,b=t.getItemStyle(["color","opacity"]);b.fill=t.get("backgroundColor");var _=new ja({shape:{x:g.x-x[3],y:g.y-x[0],width:g.width+x[1]+x[3],height:g.height+x[0]+x[2],r:t.get("borderRadius")},style:b,subPixelOptimize:!0,silent:!0});i.add(_)}}}),gc.registerSubTypeDefaulter("timeline",function(){return"slider"}),tf({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e){var n=e.getComponent("timeline");return n&&null!=t.currentIndex&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.setPlayState(!1)),e.resetOption("timeline"),b({currentIndex:n.option.currentIndex},t)}),tf({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var n=e.getComponent("timeline");n&&null!=t.playState&&n.setPlayState(t.playState)});var cA=gc.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(t,e,n){this.mergeDefaultAndTheme(t,n),this._initData()},mergeOption:function(t){cA.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(t){null==t&&(t=this.option.currentIndex);var e=this._data.count();this.option.loop?t=(t%e+e)%e:(e<=t&&(t=e-1),t<0&&(t=0)),this.option.currentIndex=t},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(t){this.option.autoPlay=!!t},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var t=this.option,e=t.data||[],n=t.axisType,i=this._names=[];if("category"===n){var o=[];k(e,function(t,e){var n,r=Do(t);B(t)?(n=m(t)).value=e:n=e,o.push(n),O(r)||null!=r&&!isNaN(r)||(r=""),i.push(r+"")}),e=o}(this._data=new Af([{name:"value",type:{category:"ordinal",time:"time"}[n]||"number"}],this)).initData(e,i)},getData:function(){return this._data},getCategories:function(){if("category"===this.get("axisType"))return this._names.slice()}});function uA(t,e,n,i){mg.call(this,t,e,n),this.type=i||"value",this.model=null}M(cA.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}}),Au);var dA=Ku.extend({type:"timeline"});uA.prototype={constructor:uA,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return"horizontal"===this.model.get("orient")}},C(uA,mg);var hA=E,fA=k,pA=Math.PI;function gA(t,e,n,i,o,r){var a=e.get("color");o?(o.setColor(a),n.add(o),r&&r.onUpdate(o)):((o=eg(t.get("symbol"),-1,-1,2,2,a)).setStyle("strokeNoScale",!0),n.add(o),r&&r.onCreate(o));var s=e.getItemStyle(["color","symbol","symbolSize"]);o.setStyle(s),i=v({rectHover:!0,z2:100},i,!0);var l=t.get("symbolSize");(l=l instanceof Array?l.slice():[+l,+l])[0]/=2,l[1]/=2,i.scale=l;var c=t.get("symbolOffset");if(c){var u=i.position=i.position||[0,0];u[0]+=bl(c[0],l[0]),u[1]+=bl(c[1],l[1])}var d=t.get("symbolRotate");return i.rotation=(d||0)*Math.PI/180||0,o.attr(i),o.updateTransform(),o}function mA(t,e,n,i,o){if(!t.dragging){var r=i.getModel("checkpointStyle"),a=n.dataToCoord(i.getData().get(["value"],e));o||!r.get("animation",!0)?t.attr({position:[a,0]}):(t.stopAnimation(!0),t.animateTo({position:[a,0]},r.get("animationDuration",!0),r.get("animationEasing",!0)))}}dA.extend({type:"timeline.slider",init:function(t,e){this.api=e},render:function(t,e,n,i){if(this.model=t,this.api=n,this.ecModel=e,this.group.removeAll(),t.get("show",!0)){var o=this._layout(t,n),r=this._createGroup("mainGroup"),a=this._createGroup("labelGroup"),s=this._axis=this._createAxis(o,t);t.formatTooltip=function(t){return Gl(s.scale.getLabel(t))},fA(["AxisLine","AxisTick","Control","CurrentPointer"],function(e){this["_render"+e](o,r,s,t)},this),this._renderAxisLabel(o,a,s,t),this._position(o,t)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(t,e){var n=t.get("label.position"),i=t.get("orient"),o=function(t,e){return ac(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}(t,e);null==n||"auto"===n?n="horizontal"===i?o.y+o.height/2<e.getHeight()/2?"-":"+":o.x+o.width/2<e.getWidth()/2?"+":"-":isNaN(n)&&(n={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][n]);var r,a,s,l,c={horizontal:"center",vertical:0<=n||"+"===n?"left":"right"},u={horizontal:0<=n||"+"===n?"top":"bottom",vertical:"middle"},d={horizontal:0,vertical:pA/2},h="vertical"===i?o.height:o.width,f=t.getModel("controlStyle"),p=f.get("show",!0),g=p?f.get("itemSize"):0,m=p?f.get("itemGap"):0,v=g+m,y=t.get("label.rotate")||0;y=y*pA/180;var x=f.get("position",!0),b=p&&f.get("showPlayBtn",!0),_=p&&f.get("showPrevBtn",!0),w=0,S=h;return"left"===x||"bottom"===x?(b&&(r=[0,0],w+=v),_&&(a=[w,0],w+=v)):(b&&(r=[S-g,0],S-=v),_&&(a=[0,0],w+=v)),p&&f.get("showNextBtn",!0)&&(s=[S-g,0],S-=v),l=[w,S],t.get("inverse")&&l.reverse(),{viewRect:o,mainLength:h,orient:i,rotation:d[i],labelRotation:y,labelPosOpt:n,labelAlign:t.get("label.align")||c[i],labelBaseline:t.get("label.verticalAlign")||t.get("label.baseline")||u[i],playPosition:r,prevBtnPosition:a,nextBtnPosition:s,axisExtent:l,controlSize:g,controlGap:m}},_position:function(t,e){var n=this._mainGroup,i=this._labelGroup,o=t.viewRect;if("vertical"===t.orient){var r=ie(),a=o.x,s=o.y+o.height;se(r,r,[-a,-s]),le(r,r,-pA/2),se(r,r,[a,s]),(o=o.clone()).applyTransform(r)}var l=m(o),c=m(n.getBoundingRect()),u=m(i.getBoundingRect()),d=n.position,h=i.position;h[0]=d[0]=l[0][0];var f,p=t.labelPosOpt;function g(t){var e=t.position;t.origin=[l[0][0]-e[0],l[1][0]-e[1]]}function m(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function v(t,e,n,i,o){t[i]+=n[i][o]-e[i][o]}isNaN(p)?(v(d,c,l,1,f="+"===p?0:1),v(h,u,l,1,1-f)):(v(d,c,l,1,f=0<=p?0:1),h[1]=d[1]+p),n.attr("position",d),i.attr("position",h),n.rotation=i.rotation=t.rotation,g(n),g(i)},_createAxis:function(t,e){var n=e.getData(),i=e.get("axisType"),o=Hp(e,i);o.getTicks=function(){return n.mapArray(["value"],function(t){return t})};var r=n.getDataExtent("value");o.setExtent(r[0],r[1]),o.niceTicks();var a=new uA("value",o,t.axisExtent,i);return a.model=e,a},_createGroup:function(t){var e=this["_"+t]=new Cn;return this.group.add(e),e},_renderAxisLine:function(t,e,n,i){var o=n.getExtent();i.get("lineStyle.show")&&e.add(new qa({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:x({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(t,e,n,i){var o=i.getData(),r=n.scale.getTicks();fA(r,function(t){var r=n.dataToCoord(t),a=o.getItemModel(t),s=a.getModel("itemStyle"),l=a.getModel("emphasis.itemStyle"),c={position:[r,0],onclick:hA(this._changeTimeline,this,t)},u=gA(a,s,e,c);Rs(u,l.getItemStyle()),a.get("tooltip")?(u.dataIndex=t,u.dataModel=i):u.dataIndex=u.dataModel=null},this)},_renderAxisLabel:function(t,e,n,i){if(n.getLabelModel().get("show")){var o=i.getData(),r=n.getViewLabels();fA(r,function(i){var r=i.tickValue,a=o.getItemModel(r),s=a.getModel("label"),l=a.getModel("emphasis.label"),c=n.dataToCoord(i.tickValue),u=new Da({position:[c,0],rotation:t.labelRotation-t.rotation,onclick:hA(this._changeTimeline,this,r),silent:!1});Hs(u.style,s,{text:i.formattedLabel,textAlign:t.labelAlign,textVerticalAlign:t.labelBaseline}),e.add(u),Rs(u,Hs({},l))},this)}},_renderControl:function(t,e,n,i){var o=t.controlSize,r=t.rotation,a=i.getModel("controlStyle").getItemStyle(),s=i.getModel("emphasis.controlStyle").getItemStyle(),l=[0,-o/2,o,o],c=i.getPlayState(),u=i.get("inverse",!0);function d(t,n,c,u){if(t){var d=function(t,e,n,i){var o=i.style,r=nl(t.get(e),i||{},new Sn(n[0],n[1],n[2],n[3]));return o&&r.setStyle(o),r}(i,n,l,{position:t,origin:[o/2,0],rotation:u?-r:0,rectHover:!0,style:a,onclick:c});e.add(d),Rs(d,s)}}d(t.nextBtnPosition,"controlStyle.nextIcon",hA(this._changeTimeline,this,u?"-":"+")),d(t.prevBtnPosition,"controlStyle.prevIcon",hA(this._changeTimeline,this,u?"+":"-")),d(t.playPosition,"controlStyle."+(c?"stopIcon":"playIcon"),hA(this._handlePlayClick,this,!c),!0)},_renderCurrentPointer:function(t,e,n,i){var o=i.getData(),r=i.getCurrentIndex(),a=o.getItemModel(r).getModel("checkpointStyle"),s=this;this._currentPointer=gA(a,a,this._mainGroup,{},this._currentPointer,{onCreate:function(t){t.draggable=!0,t.drift=hA(s._handlePointerDrag,s),t.ondragend=hA(s._handlePointerDragend,s),mA(t,r,n,i,!0)},onUpdate:function(t){mA(t,r,n,i)}})},_handlePlayClick:function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},_handlePointerDrag:function(t,e,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},_handlePointerDragend:function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},_pointerChangeTimeline:function(t,e){var n=this._toAxisCoord(t)[0],i=wl(this._axis.getExtent().slice());n>i[1]&&(n=i[1]),n<i[0]&&(n=i[0]),this._currentPointer.position[0]=n,this._currentPointer.dirty();var o=this._findNearestTick(n),r=this.model;(e||o!==r.getCurrentIndex()&&r.get("realtime"))&&this._changeTimeline(o)},_doPlayStop:function(){this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(hA(function(){var t=this.model;this._changeTimeline(t.getCurrentIndex()+(t.get("rewind",!0)?-1:1))},this),this.model.get("playInterval")))},_toAxisCoord:function(t){return Js(t,this._mainGroup.getLocalTransform(),!0)},_findNearestTick:function(t){var e,n=this.model.getData(),i=1/0,o=this._axis;return n.each(["value"],function(n,r){var a=o.dataToCoord(n),s=Math.abs(a-t);s<i&&(i=s,e=r)}),e},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(t){var e=this.model.getCurrentIndex();"+"===t?t=e+1:"-"===t&&(t=e-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})}}),Jh(function(t){var e=t&&t.timeline;L(e)||(e=e?[e]:[]),k(e,function(t){t&&function(t){var e=t.type,n={number:"value",time:"time"};if(n[e]&&(t.axisType=n[e],delete t.type),sA(t),lA(t,"controlPosition")){var i=t.controlStyle||(t.controlStyle={});lA(i,"position")||(i.position=t.controlPosition),"none"!==i.position||lA(i,"show")||(i.show=!1,delete i.position),delete t.controlPosition}k(t.data||[],function(t){B(t)&&!L(t)&&(!lA(t,"value")&&lA(t,"name")&&(t.value=t.name),sA(t))})}(t)})});var vA=zl,yA=Gl;function xA(t){Ao(t,"label",["show"])}var bA=sf({type:"marker",dependencies:["series","grid","polar","geo"],init:function(t,e,n){this.mergeDefaultAndTheme(t,n),this._mergeOption(t,n,!1,!0)},isAnimationEnabled:function(){if(o.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},mergeOption:function(t,e){this._mergeOption(t,e,!1,!1)},_mergeOption:function(t,e,n,i){var o=this.constructor,r=this.mainType+"Model";n||e.eachSeries(function(t){var n=t.get(this.mainType,!0),a=t[r];n&&n.data?(a?a._mergeOption(n,e,!0):(i&&xA(n),k(n.data,function(t){t instanceof Array?(xA(t[0]),xA(t[1])):xA(t)}),x(a=new o(n,this,e),{mainType:this.mainType,seriesIndex:t.seriesIndex,name:t.name,createdBySelf:!0}),a.__hostSeries=t),t[r]=a):t[r]=null},this)},formatTooltip:function(t,e,n,i){var o=this.getData(),r=this.getRawValue(t),a=L(r)?A(r,vA).join(", "):vA(r),s=o.getName(t),l=yA(this.name);return null==r&&!s||(l+="html"===i?"<br/>":"\n"),s&&(l+=yA(s),null!=r&&(l+=" : ")),null!=r&&(l+=yA(a)),l},getData:function(){return this._data},setData:function(t){this._data=t}});M(bA,Au),bA.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});var _A=S;function wA(t,e,n,i,o,r){var a=[],s=qf(e,i)?e.getCalculationInfo("stackResultDimension"):i,l=IA(e,s,t),c=e.indicesOfNearest(s,l)[0];a[o]=e.get(n,c),a[r]=e.get(s,c);var u=e.get(i,c),d=Sl(e.get(i,c));return 0<=(d=Math.min(d,20))&&(a[r]=+a[r].toFixed(d)),[a,u]}var SA=N,CA={min:SA(wA,"min"),max:SA(wA,"max"),average:SA(wA,"average")};function MA(t,e){var n=t.getData(),i=t.coordinateSystem;if(e&&!function(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}(e)&&!L(e.coord)&&i){var o=i.dimensions,r=TA(e,n,i,t);if((e=m(e)).type&&CA[e.type]&&r.baseAxis&&r.valueAxis){var a=_A(o,r.baseAxis.dim),s=_A(o,r.valueAxis.dim),l=CA[e.type](n,r.baseDataDim,r.valueDataDim,a,s);e.coord=l[0],e.value=l[1]}else{for(var c=[null!=e.xAxis?e.xAxis:e.radiusAxis,null!=e.yAxis?e.yAxis:e.angleAxis],u=0;u<2;u++)CA[c[u]]&&(c[u]=IA(n,n.mapDimension(o[u]),c[u]));e.coord=c}}return e}function TA(t,e,n,i){var o={};return null!=t.valueIndex||null!=t.valueDim?(o.valueDataDim=null!=t.valueIndex?e.getDimension(t.valueIndex):t.valueDim,o.valueAxis=n.getAxis(function(t,e){var n=t.getData(),i=n.dimensions;e=n.getDimension(e);for(var o=0;o<i.length;o++){var r=n.getDimensionInfo(i[o]);if(r.name===e)return r.coordDim}}(i,o.valueDataDim)),o.baseAxis=n.getOtherAxis(o.valueAxis),o.baseDataDim=e.mapDimension(o.baseAxis.dim)):(o.baseAxis=i.getBaseAxis(),o.valueAxis=n.getOtherAxis(o.baseAxis),o.baseDataDim=e.mapDimension(o.baseAxis.dim),o.valueDataDim=e.mapDimension(o.valueAxis.dim)),o}function kA(t,e){return!(t&&t.containData&&e.coord&&!function(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}(e))||t.containData(e.coord)}function AA(t,e,n,i){return i<2?t.coord&&t.coord[i]:t.value}function IA(t,e,n){if("average"!==n)return"median"===n?t.getMedian(e):t.getDataExtent(e,!0)["max"===n?1:0];var i=0,o=0;return t.each(e,function(t,e){isNaN(t)||(i+=t,o++)}),i/o}var DA=lf({type:"marker",init:function(){this.markerGroupMap=Q()},render:function(t,e,n){var i=this.markerGroupMap;i.each(function(t){t.__keep=!1});var o=this.type+"Model";e.eachSeries(function(t){var i=t[o];i&&this.renderSeries(t,i,e,n)},this),i.each(function(t){t.__keep||this.group.remove(t.group)},this)},renderSeries:function(){}});function PA(t,e,n){var i=e.coordinateSystem;t.each(function(o){var r,a=t.getItemModel(o),s=bl(a.get("x"),n.getWidth()),l=bl(a.get("y"),n.getHeight());if(isNaN(s)||isNaN(l)){if(e.getMarkerPosition)r=e.getMarkerPosition(t.getValues(t.dimensions,o));else if(i){var c=t.get(i.dimensions[0],o),u=t.get(i.dimensions[1],o);r=i.dataToPoint([c,u])}}else r=[s,l];isNaN(s)||(r[0]=s),isNaN(l)||(r[1]=l),t.setItemLayout(o,r)})}function EA(t,e,n,i){var o=t.getData(),r=i.type;if(!L(i)&&("min"===r||"max"===r||"average"===r||"median"===r||null!=i.xAxis||null!=i.yAxis)){var a,s;if(null!=i.yAxis||null!=i.xAxis)a=e.getAxis(null!=i.yAxis?"y":"x"),s=W(i.yAxis,i.xAxis);else{var l=TA(i,o,e,t);a=l.valueAxis,s=IA(o,Yf(o,l.valueDataDim),r)}var c="x"===a.dim?0:1,u=1-c,d=m(i),h={};d.type=null,d.coord=[],h.coord=[],d.coord[u]=-1/0,h.coord[u]=1/0;var f=n.get("precision");0<=f&&"number"==typeof s&&(s=+s.toFixed(Math.min(f,20))),d.coord[c]=h.coord[c]=s,i=[d,h,{type:r,valueIndex:i.valueIndex,value:s}]}return(i=[MA(t,i[0]),MA(t,i[1]),x({},i[2])])[2].type=i[2].type||"",v(i[2],i[0]),v(i[2],i[1]),i}function NA(t){return!isNaN(t)&&!isFinite(t)}function LA(t,e,n,i){var o=1-t,r=i.dimensions[t];return NA(e[o])&&NA(n[o])&&e[t]===n[t]&&i.getAxis(r).containData(e[t])}function RA(t,e){if("cartesian2d"===t.type){var n=e[0].coord,i=e[1].coord;if(n&&i&&(LA(1,n,i,t)||LA(0,n,i,t)))return!0}return kA(t,e[0])&&kA(t,e[1])}function OA(t,e,n,i,o){var r,a=i.coordinateSystem,s=t.getItemModel(e),l=bl(s.get("x"),o.getWidth()),c=bl(s.get("y"),o.getHeight());if(isNaN(l)||isNaN(c)){if(i.getMarkerPosition)r=i.getMarkerPosition(t.getValues(t.dimensions,e));else{var u=a.dimensions,d=t.get(u[0],e),h=t.get(u[1],e);r=a.dataToPoint([d,h])}if("cartesian2d"===a.type){var f=a.getAxis("x"),p=a.getAxis("y");NA(t.get((u=a.dimensions)[0],e))?r[0]=f.toGlobalCoord(f.getExtent()[n?0:1]):NA(t.get(u[1],e))&&(r[1]=p.toGlobalCoord(p.getExtent()[n?0:1]))}isNaN(l)||(r[0]=l),isNaN(c)||(r[1]=c)}else r=[l,c];t.setItemLayout(e,r)}function BA(t,e,n,i){var o=MA(t,i[0]),r=MA(t,i[1]),a=W,s=o.coord,l=r.coord;s[0]=a(s[0],-1/0),s[1]=a(s[1],-1/0),l[0]=a(l[0],1/0),l[1]=a(l[1],1/0);var c=y([{},o,r]);return c.coord=[o.coord,r.coord],c.x0=o.x,c.y0=o.y,c.x1=r.x,c.y1=r.y,c}function zA(t){return!isNaN(t)&&!isFinite(t)}function VA(t,e,n){var i=1-t;return zA(e[i])&&zA(n[i])}function FA(t,e){var n=e.coord[0],i=e.coord[1];return!("cartesian2d"!==t.type||!n||!i||!VA(1,n,i)&&!VA(0,n,i))||kA(t,{coord:n,x:e.x0,y:e.y0})||kA(t,{coord:i,x:e.x1,y:e.y1})}function HA(t,e,n,i,o){var r,a=i.coordinateSystem,s=t.getItemModel(e),l=bl(s.get(n[0]),o.getWidth()),c=bl(s.get(n[1]),o.getHeight());if(isNaN(l)||isNaN(c)){if(i.getMarkerPosition)r=i.getMarkerPosition(t.getValues(n,e));else{var u=[f=t.get(n[0],e),p=t.get(n[1],e)];a.clampData&&a.clampData(u,u),r=a.dataToPoint(u,!0)}if("cartesian2d"===a.type){var d=a.getAxis("x"),h=a.getAxis("y"),f=t.get(n[0],e),p=t.get(n[1],e);zA(f)?r[0]=d.toGlobalCoord(d.getExtent()["x0"===n[0]?0:1]):zA(p)&&(r[1]=h.toGlobalCoord(h.getExtent()["y0"===n[1]?0:1]))}isNaN(l)||(r[0]=l),isNaN(c)||(r[1]=c)}else r=[l,c];return r}DA.extend({type:"markPoint",updateTransform:function(t,e,n){e.eachSeries(function(t){var e=t.markPointModel;e&&(PA(e.getData(),t,n),this.markerGroupMap.get(t.id).updateLayout(e))},this)},renderSeries:function(t,e,n,i){var o=t.coordinateSystem,r=t.id,a=t.getData(),s=this.markerGroupMap,l=s.get(r)||s.set(r,new Eg),c=function(t,e,n){var i;i=t?A(t&&t.dimensions,function(t){return b({name:t},e.getData().getDimensionInfo(e.getData().mapDimension(t))||{})}):[{name:"value",type:"float"}];var o=new Af(i,n),r=A(n.get("data"),N(MA,e));return t&&(r=D(r,N(kA,t))),o.initData(r,null,t?AA:function(t){return t.value}),o}(o,t,e);e.setData(c),PA(e.getData(),t,i),c.each(function(t){var n=c.getItemModel(t),i=n.getShallow("symbol"),o=n.getShallow("symbolSize"),r=n.getShallow("symbolRotate"),s=R(i),l=R(o),u=R(r);if(s||l||u){var d=e.getRawValue(t),h=e.getDataParams(t);s&&(i=i(d,h)),l&&(o=o(d,h)),u&&(r=r(d,h))}c.setItemVisual(t,{symbol:i,symbolSize:o,symbolRotate:r,color:n.get("itemStyle.color")||a.getVisual("color")})}),l.updateData(c),this.group.add(l.group),c.eachItemGraphicEl(function(t){t.traverse(function(t){t.dataModel=e})}),l.__keep=!0,l.group.silent=e.get("silent")||t.get("silent")}}),Jh(function(t){t.markPoint=t.markPoint||{}}),bA.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}}),DA.extend({type:"markLine",updateTransform:function(t,e,n){e.eachSeries(function(t){var e=t.markLineModel;if(e){var i=e.getData(),o=e.__from,r=e.__to;o.each(function(e){OA(o,e,!0,t,n),OA(r,e,!1,t,n)}),i.each(function(t){i.setItemLayout(t,[o.getItemLayout(t),r.getItemLayout(t)])}),this.markerGroupMap.get(t.id).updateLayout()}},this)},renderSeries:function(t,e,n,i){var o=t.coordinateSystem,r=t.id,a=t.getData(),s=this.markerGroupMap,l=s.get(r)||s.set(r,new Fb);this.group.add(l.group);var c=function(t,e,n){var i;i=t?A(t&&t.dimensions,function(t){return b({name:t},e.getData().getDimensionInfo(e.getData().mapDimension(t))||{})}):[{name:"value",type:"float"}];var o=new Af(i,n),r=new Af(i,n),a=new Af([],n),s=A(n.get("data"),N(EA,e,t,n));t&&(s=D(s,N(RA,t)));var l=t?AA:function(t){return t.value};return o.initData(A(s,function(t){return t[0]}),null,l),r.initData(A(s,function(t){return t[1]}),null,l),a.initData(A(s,function(t){return t[2]})),a.hasItemOption=!0,{from:o,to:r,line:a}}(o,t,e),u=c.from,d=c.to,h=c.line;e.__from=u,e.__to=d,e.setData(h);var f=e.get("symbol"),p=e.get("symbolSize");function g(e,n,o){var r=e.getItemModel(n);OA(e,n,o,t,i),e.setItemVisual(n,{symbolRotate:r.get("symbolRotate"),symbolSize:r.get("symbolSize")||p[o?0:1],symbol:r.get("symbol",!0)||f[o?0:1],color:r.get("itemStyle.color")||a.getVisual("color")})}L(f)||(f=[f,f]),"number"==typeof p&&(p=[p,p]),c.from.each(function(t){g(u,t,!0),g(d,t,!1)}),h.each(function(t){var e=h.getItemModel(t).get("lineStyle.color");h.setItemVisual(t,{color:e||u.getItemVisual(t,"color")}),h.setItemLayout(t,[u.getItemLayout(t),d.getItemLayout(t)]),h.setItemVisual(t,{fromSymbolRotate:u.getItemVisual(t,"symbolRotate"),fromSymbolSize:u.getItemVisual(t,"symbolSize"),fromSymbol:u.getItemVisual(t,"symbol"),toSymbolRotate:d.getItemVisual(t,"symbolRotate"),toSymbolSize:d.getItemVisual(t,"symbolSize"),toSymbol:d.getItemVisual(t,"symbol")})}),l.updateData(h),c.line.eachItemGraphicEl(function(t,n){t.traverse(function(t){t.dataModel=e})}),l.__keep=!0,l.group.silent=e.get("silent")||t.get("silent")}}),Jh(function(t){t.markLine=t.markLine||{}}),bA.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});var WA=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];DA.extend({type:"markArea",updateTransform:function(t,e,n){e.eachSeries(function(t){var e=t.markAreaModel;if(e){var i=e.getData();i.each(function(e){var o=A(WA,function(o){return HA(i,e,o,t,n)});i.setItemLayout(e,o),i.getItemGraphicEl(e).setShape("points",o)})}},this)},renderSeries:function(t,e,n,i){var o=t.coordinateSystem,r=t.id,a=t.getData(),s=this.markerGroupMap,l=s.get(r)||s.set(r,{group:new Cn});this.group.add(l.group),l.__keep=!0;var c=function(t,e,n){var i,o;o=t?(i=A(t&&t.dimensions,function(t){var n=e.getData();return b({name:t},n.getDimensionInfo(n.mapDimension(t))||{})}),new Af(A(["x0","y0","x1","y1"],function(t,e){return{name:t,type:i[e%2].type}}),n)):new Af(i=[{name:"value",type:"float"}],n);var r=A(n.get("data"),N(BA,e,t,n));return t&&(r=D(r,N(FA,t))),o.initData(r,null,t?function(t,e,n,i){return t.coord[Math.floor(i/2)][i%2]}:function(t){return t.value}),o.hasItemOption=!0,o}(o,t,e);e.setData(c),c.each(function(e){var n=A(WA,function(n){return HA(c,e,n,t,i)}),r=!0;k(WA,function(t){if(r){var n=c.get(t[0],e),i=c.get(t[1],e);(zA(n)||o.getAxis("x").containData(n))&&(zA(i)||o.getAxis("y").containData(i))&&(r=!1)}}),c.setItemLayout(e,{points:n,allClipped:r}),c.setItemVisual(e,{color:a.getVisual("color")})}),c.diff(l.__data).add(function(t){var e=c.getItemLayout(t);if(!e.allClipped){var n=new za({shape:{points:e.points}});c.setItemGraphicEl(t,n),l.group.add(n)}}).update(function(t,n){var i=l.__data.getItemGraphicEl(n),o=c.getItemLayout(t);o.allClipped?i&&l.group.remove(i):(i?Xs(i,{shape:{points:o.points}},e,t):i=new za({shape:{points:o.points}}),c.setItemGraphicEl(t,i),l.group.add(i))}).remove(function(t){var e=l.__data.getItemGraphicEl(t);l.group.remove(e)}).execute(),c.eachItemGraphicEl(function(t,n){var i=c.getItemModel(n),o=i.getModel("label"),r=i.getModel("emphasis.label"),a=c.getItemVisual(n,"color");t.useStyle(b(i.getModel("itemStyle").getItemStyle(),{fill:$e(a,.4),stroke:a})),t.hoverStyle=i.getModel("emphasis.itemStyle").getItemStyle(),Vs(t.style,t.hoverStyle,o,r,{labelFetcher:e,labelDataIndex:n,defaultText:c.getName(n)||"",isRectText:!0,autoColor:a}),Rs(t,{}),t.dataModel=e}),l.__data=c,l.group.silent=e.get("silent")||t.get("silent")}}),Jh(function(t){t.markArea=t.markArea||{}});var GA=md.legend.selector,UA={all:{type:"all",title:m(GA.all)},inverse:{type:"inverse",title:m(GA.inverse)}},jA=sf({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(t,e,n){this.mergeDefaultAndTheme(t,n),t.selected=t.selected||{},this._updateSelector(t)},mergeOption:function(t){jA.superCall(this,"mergeOption",t),this._updateSelector(t)},_updateSelector:function(t){var e=t.selector;!0===e&&(e=t.selector=["all","inverse"]),L(e)&&k(e,function(t,n){O(t)&&(t={type:t}),e[n]=v(t,UA[t.type])})},optionUpdated:function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,n=0;n<t.length;n++){var i=t[n].get("name");if(this.isSelected(i)){this.select(i),e=!0;break}}e||this.select(t[0].get("name"))}},_updateData:function(t){var e=[],n=[];t.eachRawSeries(function(i){var o;if(n.push(i.name),i.legendVisualProvider){var r=i.legendVisualProvider.getAllNames();t.isSeriesFiltered(i)||(n=n.concat(r)),r.length?e=e.concat(r):o=!0}else o=!0;o&&No(i)&&e.push(i.name)}),this._availableNames=n;var i=A(this.get("data")||e,function(t){return"string"!=typeof t&&"number"!=typeof t||(t={name:t}),new fl(t,this,this.ecModel)},this);this._data=i},getData:function(){return this._data},select:function(t){var e=this.option.selected;"single"===this.get("selectedMode")&&k(this._data,function(t){e[t.get("name")]=!1}),e[t]=!0},unSelect:function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},toggleSelected:function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},allSelect:function(){var t=this.option.selected;k(this._data,function(e){t[e.get("name",!0)]=!0})},inverseSelect:function(){var t=this.option.selected;k(this._data,function(e){var n=e.get("name",!0);t.hasOwnProperty(n)||(t[n]=!0),t[n]=!t[n]})},isSelected:function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&0<=S(this._availableNames,t)},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}});function $A(t,e,n){var i,o={},r="toggleSelected"===t;return n.eachComponent("legend",function(n){r&&null!=i?n[i?"select":"unSelect"](e.name):"allSelect"===t||"inverseSelect"===t?n[t]():(n[t](e.name),i=n.isSelected(e.name)),k(n.getData(),function(t){var e=t.get("name");if("\n"!==e&&""!==e){var i=n.isSelected(e);o[e]=o.hasOwnProperty(e)?o[e]&&i:i}})}),"allSelect"===t||"inverseSelect"===t?{selected:o}:{name:e.name,selected:o}}tf("legendToggleSelect","legendselectchanged",N($A,"toggleSelected")),tf("legendAllSelect","legendselectall",N($A,"allSelect")),tf("legendInverseSelect","legendinverseselect",N($A,"inverseSelect")),tf("legendSelect","legendselected",N($A,"select")),tf("legendUnSelect","legendunselected",N($A,"unSelect"));var qA=N,YA=k,XA=Cn,ZA=lf({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new XA),this.group.add(this._selectorGroup=new XA),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(t,e,n){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var o=t.get("align"),r=t.get("orient");o&&"auto"!==o||(o="right"===t.get("left")&&"vertical"===r?"right":"left");var a=t.get("selector",!0),s=t.get("selectorPosition",!0);!a||s&&"auto"!==s||(s="horizontal"===r?"end":"start"),this.renderInner(o,t,e,n,a,r,s);var l=t.getBoxLayoutParams(),c={width:n.getWidth(),height:n.getHeight()},u=t.get("padding"),d=ac(l,c,u),h=this.layoutInner(t,o,d,i,a,s),f=ac(b({width:h.width,height:h.height},l),c,u);this.group.attr("position",[f.x-h.x,f.y-h.y]),this.group.add(this._backgroundEl=_T(h,t))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(t,e,n,i,o,r,a){var s=this.getContentGroup(),l=Q(),c=e.get("selectedMode"),u=[];n.eachRawSeries(function(t){t.get("legendHoverLink")||u.push(t.id)}),YA(e.getData(),function(o,r){var a=o.get("name");if(this.newlineDisabled||""!==a&&"\n"!==a){var d=n.getSeriesByName(a)[0];if(!l.get(a))if(d){var h=d.getData(),f=h.getVisual("color"),p=h.getVisual("borderColor");"function"==typeof f&&(f=f(d.getDataParams(0))),"function"==typeof p&&(p=p(d.getDataParams(0)));var g=h.getVisual("legendSymbol")||"roundRect",m=h.getVisual("symbol");this._createItem(a,r,o,e,g,m,t,f,p,c).on("click",qA(JA,a,null,i,u)).on("mouseover",qA(QA,d.name,null,i,u)).on("mouseout",qA(tI,d.name,null,i,u)),l.set(a,!0)}else n.eachRawSeries(function(n){if(!l.get(a)&&n.legendVisualProvider){var s=n.legendVisualProvider;if(!s.containName(a))return;var d=s.indexOfName(a),h=s.getItemVisual(d,"color"),f=s.getItemVisual(d,"borderColor");this._createItem(a,r,o,e,"roundRect",null,t,h,f,c).on("click",qA(JA,null,a,i,u)).on("mouseover",qA(QA,null,a,i,u)).on("mouseout",qA(tI,null,a,i,u)),l.set(a,!0)}},this)}else s.add(new XA({newline:!0}))},this),o&&this._createSelector(o,e,i,r,a)},_createSelector:function(t,e,n,i,o){var r=this.getSelectorGroup();YA(t,function(t){!function(t){var i=t.type,o=new Da({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===i?"legendAllSelect":"legendInverseSelect"})}});r.add(o);var a=e.getModel("selectorLabel"),s=e.getModel("emphasis.selectorLabel");Vs(o.style,o.hoverStyle={},a,s,{defaultText:t.title,isRectText:!1}),Rs(o)}(t)})},_createItem:function(t,e,n,i,o,r,a,s,l,c){var u=i.get("itemWidth"),d=i.get("itemHeight"),h=i.get("inactiveColor"),f=i.get("inactiveBorderColor"),p=i.get("symbolKeepAspect"),g=i.getModel("itemStyle"),m=i.isSelected(t),v=new XA,y=n.getModel("textStyle"),b=n.get("icon"),_=n.getModel("tooltip"),w=_.parentModel,S=eg(o=b||o,0,0,u,d,m?s:h,null==p||p);if(v.add(KA(S,o,g,l,f,m)),!b&&r&&(r!==o||"none"===r)){var C=.8*d;"none"===r&&(r="circle");var M=eg(r,(u-C)/2,(d-C)/2,C,C,m?s:h,null==p||p);v.add(KA(M,r,g,l,f,m))}var T="left"===a?u+5:-5,k=a,A=i.get("formatter"),I=t;"string"==typeof A&&A?I=A.replace("{name}",null!=t?t:""):"function"==typeof A&&(I=A(t)),v.add(new Da({style:Hs({},y,{text:I,x:T,y:d/2,textFill:m?y.getTextColor():h,textAlign:k,textVerticalAlign:"middle"})}));var D=new ja({shape:v.getBoundingRect(),invisible:!0,tooltip:_.get("show")?x({content:t,formatter:w.get("formatter",!0)||function(){return t},formatterParams:{componentType:"legend",legendIndex:i.componentIndex,name:t,$vars:["name"]}},_.option):null});return v.add(D),v.eachChild(function(t){t.silent=!0}),D.silent=!c,this.getContentGroup().add(v),Rs(v),v.__legendDataIndex=e,v},layoutInner:function(t,e,n,i,o,r){var a=this.getContentGroup(),s=this.getSelectorGroup();rc(t.get("orient"),a,t.get("itemGap"),n.width,n.height);var l=a.getBoundingRect(),c=[-l.x,-l.y];if(o){rc("horizontal",s,t.get("selectorItemGap",!0));var u=s.getBoundingRect(),d=[-u.x,-u.y],h=t.get("selectorButtonGap",!0),f=t.getOrient().index,p=0===f?"width":"height",g=0===f?"height":"width",m=0===f?"y":"x";"end"===r?d[f]+=l[p]+h:c[f]+=u[p]+h,d[1-f]+=l[g]/2-u[g]/2,s.attr("position",d),a.attr("position",c);var v={x:0,y:0};return v[p]=l[p]+h+u[p],v[g]=Math.max(l[g],u[g]),v[m]=Math.min(0,u[m]+d[1-f]),v}return a.attr("position",c),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function KA(t,e,n,i,o,r){var a;return"line"!==e&&e.indexOf("empty")<0?(a=n.getItemStyle(),t.style.stroke=i,r||(a.stroke=o)):a=n.getItemStyle(["borderWidth","borderColor"]),t.setStyle(a)}function JA(t,e,n,i){tI(t,e,n,i),n.dispatchAction({type:"legendToggleSelect",name:null!=t?t:e}),QA(t,e,n,i)}function QA(t,e,n,i){var o=n.getZr().storage.getDisplayList()[0];o&&o.useHoverLayer||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:i})}function tI(t,e,n,i){var o=n.getZr().storage.getDisplayList()[0];o&&o.useHoverLayer||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:i})}Qh(dh.PROCESSOR.SERIES_FILTER,function(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(t){for(var n=0;n<e.length;n++)if(!e[n].isSelected(t.name))return!1;return!0})}),gc.registerSubTypeDefaulter("legend",function(){return"plain"});var eI=jA.extend({type:"legend.scroll",setScrollDataIndex:function(t){this.option.scrollDataIndex=t},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(t,e,n,i){var o=cc(t);eI.superCall(this,"init",t,e,n,i),nI(this,t,o)},mergeOption:function(t,e){eI.superCall(this,"mergeOption",t,e),nI(this,this.option,t)}});function nI(t,e,n){var i=[1,1];i[t.getOrient().index]=0,lc(e,n,{type:"box",ignoreSize:i})}var iI=Cn,oI=["width","height"],rI=["x","y"],aI=ZA.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){aI.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new iI),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new iI)},resetInner:function(){aI.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(t,e,n,i,o,r,a){var s=this;aI.superCall(this,"renderInner",t,e,n,i,o,r,a);var l=this._controllerGroup,c=e.get("pageIconSize",!0);L(c)||(c=[c,c]),d("pagePrev",0);var u=e.getModel("pageTextStyle");function d(t,n){var o=t+"DataIndex",r=nl(e.get("pageIcons",!0)[e.getOrient().name][n],{onclick:E(s._pageGo,s,o,e,i)},{x:-c[0]/2,y:-c[1]/2,width:c[0],height:c[1]});r.name=t,l.add(r)}l.add(new Da({name:"pageText",style:{textFill:u.getTextColor(),font:u.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),d("pageNext",1)},layoutInner:function(t,e,n,i,o,r){var a=this.getSelectorGroup(),s=t.getOrient().index,l=oI[s],c=rI[s],u=oI[1-s],d=rI[1-s];o&&rc("horizontal",a,t.get("selectorItemGap",!0));var h=t.get("selectorButtonGap",!0),f=a.getBoundingRect(),p=[-f.x,-f.y],g=m(n);o&&(g[l]=n[l]-f[l]-h);var v=this._layoutContentAndController(t,i,g,s,l,u,d);if(o){if("end"===r)p[s]+=v[l]+h;else{var y=f[l]+h;p[s]-=y,v[c]-=y}v[l]+=f[l]+h,p[1-s]+=v[d]+v[u]/2-f[u]/2,v[u]=Math.max(v[u],f[u]),v[d]=Math.min(v[d],f[d]+p[1-s]),a.attr("position",p)}return v},_layoutContentAndController:function(t,e,n,i,o,r,a){var s=this.getContentGroup(),l=this._containerGroup,c=this._controllerGroup;rc(t.get("orient"),s,t.get("itemGap"),i?n.width:null,i?null:n.height),rc("horizontal",c,t.get("pageButtonItemGap",!0));var u=s.getBoundingRect(),d=c.getBoundingRect(),h=this._showController=u[o]>n[o],f=[-u.x,-u.y];e||(f[i]=s.position[i]);var p=[0,0],g=[-d.x,-d.y],m=G(t.get("pageButtonGap",!0),t.get("itemGap",!0));h&&("end"===t.get("pageButtonPosition",!0)?g[i]+=n[o]-d[o]:p[i]+=d[o]+m),g[1-i]+=u[r]/2-d[r]/2,s.attr("position",f),l.attr("position",p),c.attr("position",g);var v={x:0,y:0};if(v[o]=h?n[o]:u[o],v[r]=Math.max(u[r],d[r]),v[a]=Math.min(0,d[a]+g[1-i]),l.__rectSize=n[o],h){var y={x:0,y:0};y[o]=Math.max(n[o]-d[o]-m,0),y[r]=v[r],l.setClipPath(new ja({shape:y})),l.__rectSize=y[o]}else c.eachChild(function(t){t.attr({invisible:!0,silent:!0})});var x=this._getPageInfo(t);return null!=x.pageIndex&&Xs(s,{position:x.contentPosition},h&&t),this._updatePageInfoView(t,x),v},_pageGo:function(t,e,n){var i=this._getPageInfo(e)[t];null!=i&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:e.id})},_updatePageInfoView:function(t,e){var n=this._controllerGroup;k(["pagePrev","pageNext"],function(i){var o=null!=e[i+"DataIndex"],r=n.childOfName(i);r&&(r.setStyle("fill",t.get(o?"pageIconColor":"pageIconInactiveColor",!0)),r.cursor=o?"pointer":"default")});var i=n.childOfName("pageText"),o=t.get("pageFormatter"),r=e.pageIndex,a=null!=r?r+1:0,s=e.pageCount;i&&o&&i.setStyle("text",O(o)?o.replace("{current}",a).replace("{total}",s):o({current:a,total:s}))},_getPageInfo:function(t){var e=t.get("scrollDataIndex",!0),n=this.getContentGroup(),i=this._containerGroup.__rectSize,o=t.getOrient().index,r=oI[o],a=rI[o],s=this._findTargetItemIndex(e),l=n.children(),c=l[s],u=l.length,d=u?1:0,h={contentPosition:n.position.slice(),pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!c)return h;var f=y(c);h.contentPosition[o]=-f.s;for(var p=s+1,g=f,m=f,v=null;p<=u;++p)(!(v=y(l[p]))&&m.e>g.s+i||v&&!x(v,g.s))&&(g=m.i>g.i?m:v)&&(null==h.pageNextDataIndex&&(h.pageNextDataIndex=g.i),++h.pageCount),m=v;for(p=s-1,g=f,m=f,v=null;-1<=p;--p)(v=y(l[p]))&&x(m,v.s)||!(g.i<m.i)||(m=g,null==h.pagePrevDataIndex&&(h.pagePrevDataIndex=g.i),++h.pageCount,++h.pageIndex),g=v;return h;function y(t){if(t){var e=t.getBoundingRect(),n=e[a]+t.position[o];return{s:n,e:n+e[r],i:t.__legendDataIndex}}}function x(t,e){return t.e>=e&&t.s<=e+i}},_findTargetItemIndex:function(t){return this._showController?(this.getContentGroup().eachChild(function(i,o){var r=i.__legendDataIndex;null==n&&null!=r&&(n=o),r===t&&(e=o)}),null!=e?e:n):0;var e,n}});tf("legendScroll","legendscroll",function(t,e){var n=t.scrollDataIndex;null!=n&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(t){t.setScrollDataIndex(n)})}),pk.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}});var sI=ja,lI=xl,cI=wl,uI=E,dI=k,hI="horizontal",fI="vertical",pI=["line","bar","candlestick","scatter"],gI=vk.extend({type:"dataZoom.slider",init:function(t,e){this._displayables={},this.api=e},render:function(t,e,n,i){gI.superApply(this,"render",arguments),fd(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=t.get("orient"),!1!==this.dataZoomModel.get("show")?(i&&"dataZoom"===i.type&&i.from===this.uid||this._buildView(),this._updateView()):this.group.removeAll()},remove:function(){gI.superApply(this,"remove",arguments),pd(this,"_dispatchZoomAction")},dispose:function(){gI.superApply(this,"dispose",arguments),pd(this,"_dispatchZoomAction")},_buildView:function(){var t=this.group;t.removeAll(),this._resetLocation(),this._resetInterval();var e=this._displayables.barGroup=new Cn;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},_resetLocation:function(){var t=this.dataZoomModel,e=this.api,n=this._findCoordRect(),i={width:e.getWidth(),height:e.getHeight()},o=this._orient===hI?{right:i.width-n.x-n.width,top:i.height-30-7,width:n.width,height:30}:{right:7,top:n.y,width:30,height:n.height},r=cc(t.option);k(["right","top","width","height"],function(t){"ph"===r[t]&&(r[t]=o[t])});var a=ac(r,i,t.padding);this._location={x:a.x,y:a.y},this._size=[a.width,a.height],this._orient===fI&&this._size.reverse()},_positionGroup:function(){var t=this.group,e=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),o=i&&i.get("inverse"),r=this._displayables.barGroup,a=(this._dataShadowInfo||{}).otherAxisInverse;r.attr(n!==hI||o?n===hI&&o?{scale:a?[-1,1]:[-1,-1]}:n!==fI||o?{scale:a?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:a?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:a?[1,1]:[1,-1]});var s=t.getBoundingRect([r]);t.attr("position",[e.x-s.x,e.y-s.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var t=this._size,e=this._displayables.barGroup;e.add(new sI({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:this.dataZoomModel.get("backgroundColor")},z2:-40})),e.add(new sI({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:E(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(t){var e=this._size,n=t.series,i=n.getRawData(),o=n.getShadowDim?n.getShadowDim():t.otherDim;if(null!=o){var r=i.getDataExtent(o),a=.3*(r[1]-r[0]);r=[r[0]-a,r[1]+a];var s,l=[0,e[1]],c=[[e[0],0],[0,0]],u=[],d=e[0]/(i.count()-1),h=0,f=Math.round(i.count()/e[0]);i.each([o],function(t,e){if(0<f&&e%f)h+=d;else{var n=null==t||isNaN(t)||""===t,i=n?0:lI(t,r,l,!0);n&&!s&&e?(c.push([c[c.length-1][0],0]),u.push([u[u.length-1][0],0])):!n&&s&&(c.push([h,0]),u.push([h,0])),c.push([h,i]),u.push([h,i]),h+=d,s=n}});var p=this.dataZoomModel;this._displayables.barGroup.add(new za({shape:{points:c},style:b({fill:p.get("dataBackgroundColor")},p.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new Va({shape:{points:u},style:p.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(!1!==e){var n,i=this.ecModel;return t.eachTargetAxis(function(o,r){k(t.getAxisProxy(o.name,r).getTargetSeriesModels(),function(t){if(!(n||!0!==e&&S(pI,t.get("type"))<0)){var a,s=i.getComponent(o.axis,r).axis,l=function(t){return{x:"y",y:"x",radius:"angle",angle:"radius"}[t]}(o.name),c=t.coordinateSystem;null!=l&&c.getOtherAxis&&(a=c.getOtherAxis(s).inverse),l=t.getData().mapDimension(l),n={thisAxis:s,series:t,thisDim:o.name,otherDim:l,otherAxisInverse:a}}},this)},this),n}},_renderHandle:function(){var t=this._displayables,e=t.handles=[],n=t.handleLabels=[],i=this._displayables.barGroup,o=this._size,r=this.dataZoomModel;i.add(t.filler=new sI({draggable:!0,cursor:mI(this._orient),drift:uI(this._onDragMove,this,"all"),ondragstart:uI(this._showDataInfo,this,!0),ondragend:uI(this._onDragEnd,this),onmouseover:uI(this._showDataInfo,this,!0),onmouseout:uI(this._showDataInfo,this,!1),style:{fill:r.get("fillerColor"),textPosition:"inside"}})),i.add(new sI({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:o[0],height:o[1]},style:{stroke:r.get("dataBackgroundColor")||r.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),dI([0,1],function(t){var o=nl(r.get("handleIcon"),{cursor:mI(this._orient),draggable:!0,drift:uI(this._onDragMove,this,t),ondragend:uI(this._onDragEnd,this),onmouseover:uI(this._showDataInfo,this,!0),onmouseout:uI(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),a=o.getBoundingRect();this._handleHeight=bl(r.get("handleSize"),this._size[1]),this._handleWidth=a.width/a.height*this._handleHeight,o.setStyle(r.getModel("handleStyle").getItemStyle());var s=r.get("handleColor");null!=s&&(o.style.fill=s),i.add(e[t]=o);var l=r.textStyleModel;this.group.add(n[t]=new Da({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:l.getTextColor(),textFont:l.getFont()},z2:10}))},this)},_resetInterval:function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[lI(t[0],[0,100],e,!0),lI(t[1],[0,100],e,!0)]},_updateInterval:function(t,e){var n=this.dataZoomModel,i=this._handleEnds,o=this._getViewExtent(),r=n.findRepresentativeAxisProxy().getMinMaxSpan(),a=[0,100];C_(e,i,o,n.get("zoomLock")?"all":t,null!=r.minSpan?lI(r.minSpan,a,o,!0):null,null!=r.maxSpan?lI(r.maxSpan,a,o,!0):null);var s=this._range,l=this._range=cI([lI(i[0],o,a,!0),lI(i[1],o,a,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},_updateView:function(t){var e=this._displayables,n=this._handleEnds,i=cI(n.slice()),o=this._size;dI([0,1],function(t){var i=this._handleHeight;e.handles[t].attr({scale:[i/2,i/2],position:[n[t],o[1]/2-i/2]})},this),e.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:o[1]}),this._updateDataInfo(t)},_updateDataInfo:function(t){var e=this.dataZoomModel,n=this._displayables,i=n.handleLabels,o=this._orient,r=["",""];if(e.get("showDetail")){var a=e.findRepresentativeAxisProxy();if(a){var s=a.getAxisModel().axis,l=this._range,c=t?a.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:a.getDataValueWindow();r=[this._formatLabel(c[0],s),this._formatLabel(c[1],s)]}}var u=cI(this._handleEnds.slice());function d(t){var e=Ks(n.handles[t].parent,this.group),a=Qs(0===t?"right":"left",e),s=this._handleWidth/2+5,l=Js([u[t]+(0===t?-s:s),this._size[1]/2],e);i[t].setStyle({x:l[0],y:l[1],textVerticalAlign:o===hI?"middle":a,textAlign:o===hI?a:"center",text:r[t]})}d.call(this,0),d.call(this,1)},_formatLabel:function(t,e){var n=this.dataZoomModel,i=n.get("labelFormatter"),o=n.get("labelPrecision");null!=o&&"auto"!==o||(o=e.getPixelPrecision());var r=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel(Math.round(t)):t.toFixed(Math.min(o,20));return R(i)?i(t,r):O(i)?i.replace("{value}",r):r},_showDataInfo:function(t){var e=this._displayables.handleLabels;e[0].attr("invisible",!(t=this._dragging||t)),e[1].attr("invisible",!t)},_onDragMove:function(t,e,n,i){this._dragging=!0,Ut(i.event);var o=Js([e,n],this._displayables.barGroup.getLocalTransform(),!0),r=this._updateInterval(t,o[0]),a=this.dataZoomModel.get("realtime");this._updateView(!a),r&&a&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),this.dataZoomModel.get("realtime")||this._dispatchZoomAction()},_onClickPanelClick:function(t){var e=this._size,n=this._displayables.barGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>e[0]||n[1]<0||n[1]>e[1])){var i=this._handleEnds,o=this._updateInterval("all",n[0]-(i[0]+i[1])/2);this._updateView(),o&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:t[0],end:t[1]})},_findCoordRect:function(){var t;if(dI(this.getTargetCoordInfo(),function(e){if(!t&&e.length){var n=e[0].model.coordinateSystem;t=n.getRect&&n.getRect()}}),!t){var e=this.api.getWidth(),n=this.api.getHeight();t={x:.2*e,y:.2*n,width:.6*e,height:.6*n}}return t}});function mI(t){return"vertical"===t?"ns-resize":"ew-resize"}pk.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}});var vI="\0_ec_dataZoom_roams";function yI(t,e){var n=bI(t),i=e.dataZoomId,o=e.coordId;k(n,function(t,n){var r=t.dataZoomInfos;r[i]&&S(e.allCoordIds,o)<0&&(delete r[i],t.count--)}),_I(n);var r=n[o];r||((r=n[o]={coordId:o,dataZoomInfos:{},count:0}).controller=function(t,e){var n=new hy(t.getZr());return k(["pan","zoom","scrollMove"],function(t){n.on(t,function(n){var i=[];k(e.dataZoomInfos,function(o){if(n.isAvailableBehavior(o.dataZoomModel.option)){var r=(o.getRange||{})[t],a=r&&r(e.controller,n);!o.dataZoomModel.get("disabled",!0)&&a&&i.push({dataZoomId:o.dataZoomId,start:a[0],end:a[1]})}}),i.length&&e.dispatchAction(i)})}),n}(t,r),r.dispatchAction=N(wI,t)),r.dataZoomInfos[i]||r.count++,r.dataZoomInfos[i]=e;var a=function(t){var e,n={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return k(t,function(t){var o=t.dataZoomModel,r=!o.get("disabled",!0)&&(!o.get("zoomLock",!0)||"move");n["type_"+e]<n["type_"+r]&&(e=r),i&=o.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}(r.dataZoomInfos);r.controller.enable(a.controlType,a.opt),r.controller.setPointerChecker(e.containsPoint),fd(r,"dispatchAction",e.dataZoomModel.get("throttle",!0),"fixRate")}function xI(t){return t.type+"\0_"+t.id}function bI(t){var e=t.getZr();return e[vI]||(e[vI]={})}function _I(t){k(t,function(e,n){e.count||(e.controller.dispose(),delete t[n])})}function wI(t,e){t.dispatchAction({type:"dataZoom",batch:e})}var SI=E,CI=vk.extend({type:"dataZoom.inside",init:function(t,e){},render:function(t,e,n,i){CI.superApply(this,"render",arguments),this._range=t.getPercentRange(),k(this.getTargetCoordInfo(),function(e,i){var o=A(e,function(t){return xI(t.model)});k(e,function(e){var r=e.model,a={};k(["pan","zoom","scrollMove"],function(t){a[t]=SI(MI[t],this,e,i)},this),yI(n,{coordId:xI(r),allCoordIds:o,containsPoint:function(t,e,n){return r.coordinateSystem.containPoint([e,n])},dataZoomId:t.id,dataZoomModel:t,getRange:a})},this)},this)},dispose:function(){!function(t,e){var n=bI(t);k(n,function(t){t.controller.dispose();var n=t.dataZoomInfos;n[e]&&(delete n[e],t.count--)}),_I(n)}(this.api,this.dataZoomModel.id),CI.superApply(this,"dispose",arguments),this._range=null}}),MI={zoom:function(t,e,n,i){var o=this._range,r=o.slice(),a=t.axisModels[0];if(a){var s=AI[e](null,[i.originX,i.originY],a,n,t),l=(0<s.signal?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(r[1]-r[0])+r[0],c=Math.max(1/i.scale,0);r[0]=(r[0]-l)*c+l,r[1]=(r[1]-l)*c+l;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return C_(0,r,[0,100],0,u.minSpan,u.maxSpan),this._range=r,o[0]!==r[0]||o[1]!==r[1]?r:void 0}},pan:TI(function(t,e,n,i,o,r){var a=AI[i]([r.oldX,r.oldY],[r.newX,r.newY],e,o,n);return a.signal*(t[1]-t[0])*a.pixel/a.pixelLength}),scrollMove:TI(function(t,e,n,i,o,r){return AI[i]([0,0],[r.scrollDelta,r.scrollDelta],e,o,n).signal*(t[1]-t[0])*r.scrollDelta})};function TI(t){return function(e,n,i,o){var r=this._range,a=r.slice(),s=e.axisModels[0];if(s)return C_(t(a,s,e,n,i,o),a,[0,100],"all"),this._range=a,r[0]!==a[0]||r[1]!==a[1]?a:void 0}}function kI(t){var e=t&&t.visualMap;L(e)||(e=e?[e]:[]),II(e,function(t){if(t){DI(t,"splitList")&&!DI(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&L(e)&&II(e,function(t){B(t)&&(DI(t,"start")&&!DI(t,"min")&&(t.min=t.start),DI(t,"end")&&!DI(t,"max")&&(t.max=t.end))})}})}var AI={grid:function(t,e,n,i,o){var r=n.axis,a={},s=o.model.coordinateSystem.getRect();return t=t||[0,0],"x"===r.dim?(a.pixel=e[0]-t[0],a.pixelLength=s.width,a.pixelStart=s.x,a.signal=r.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=s.height,a.pixelStart=s.y,a.signal=r.inverse?-1:1),a},polar:function(t,e,n,i,o){var r=n.axis,a={},s=o.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),c=s.getAngleAxis().getExtent();return t=t?s.pointToCoord(t):[0,0],e=s.pointToCoord(e),"radiusAxis"===n.mainType?(a.pixel=e[0]-t[0],a.pixelLength=l[1]-l[0],a.pixelStart=l[0],a.signal=r.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=c[1]-c[0],a.pixelStart=c[0],a.signal=r.inverse?-1:1),a},singleAxis:function(t,e,n,i,o){var r=n.axis,a=o.model.coordinateSystem.getRect(),s={};return t=t||[0,0],"horizontal"===r.orient?(s.pixel=e[0]-t[0],s.pixelLength=a.width,s.pixelStart=a.x,s.signal=r.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=a.height,s.pixelStart=a.y,s.signal=r.inverse?-1:1),s}},II=k;function DI(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}gc.registerSubTypeDefaulter("visualMap",function(t){return t.categories||(t.pieces?0<t.pieces.length:0<t.splitNumber)&&!t.calculable?"piecewise":"continuous"});var PI=dh.VISUAL.COMPONENT;function EI(t,e,n,i){for(var o=e.targetVisuals[i],r=zx.prepareVisualTypes(o),a={color:t.getData().getVisual("color")},s=0,l=r.length;s<l;s++){var c=r[s],u=o["opacity"===c?"__alphaForOpacity":c];u&&u.applyVisual(n,d,h)}return a.color;function d(t){return a[t]}function h(t,e){a[t]=e}}of(PI,{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",function(e){var i=t.pipelineContext;!e.isTargetSeries(t)||i&&i.large||n.push(function(t,e,n,i){var o={};return k(t,function(t){var n=zx.prepareVisualTypes(e[t]);o[t]=n}),{progress:function(t,r){function a(t){return r.getItemVisual(l,t)}function s(t,e){r.setItemVisual(l,t,e)}var l;for(null!=i&&(i=r.getDimension(i));null!=(l=t.next());){var c=r.getRawDataItem(l);if(!c||!1!==c.visualMap)for(var u=null!=i?r.get(i,l,!0):l,d=n(u),h=e[d],f=o[d],p=0,g=f.length;p<g;p++){var m=f[p];h[m]&&h[m].applyVisual(u,a,s)}}}}}(e.stateList,e.targetVisuals,E(e.getValueState,e),e.getDataDimension(t.getData())))}),n}}),of(PI,{createOnAllSeries:!0,reset:function(t,e){var n=t.getData(),i=[];e.eachComponent("visualMap",function(e){if(e.isTargetSeries(t)){var o=e.getVisualMeta(E(EI,null,t,e))||{stops:[],outerColors:[]},r=e.getDataDimension(n),a=n.getDimensionInfo(r);null!=a&&(o.dimension=a.index,i.push(o))}}),t.getData().setVisual("visualMeta",i)}});var NI=function(t,e,n){var i=m((LI[t]||{})[e]);return n&&L(i)?i[i.length-1]:i},LI={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},RI=zx.mapVisual,OI=zx.eachVisual,BI=L,zI=k,VI=wl,FI=xl,HI=sf({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(t,e,n){this.targetVisuals={},this.controllerVisuals={},this.mergeDefaultAndTheme(t,n)},optionUpdated:function(t,e){var n=this.option;o.canvasSupported||(n.realtime=!1),e||Wk(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(t){var e=this.stateList;t=E(t,this),this.controllerVisuals=Hk(this.option.controller,e,t),this.targetVisuals=Hk(this.option.target,e,t)},getTargetSeriesIndices:function(){var t=this.option.seriesIndex,e=[];return null==t||"all"===t?this.ecModel.eachSeries(function(t,n){e.push(n)}):e=ko(t),e},eachTargetSeries:function(t,e){k(this.getTargetSeriesIndices(),function(n){t.call(e,this.ecModel.getSeriesByIndex(n))},this)},isTargetSeries:function(t){var e=!1;return this.eachTargetSeries(function(n){n===t&&(e=!0)}),e},formatValueText:function(t,e,n){var i,o,r=this.option,a=r.precision,s=this.dataBound,l=r.formatter;return n=n||["<",">"],L(t)&&(t=t.slice(),i=!0),o=e?t:i?[c(t[0]),c(t[1])]:c(t),O(l)?l.replace("{value}",i?o[0]:o).replace("{value2}",i?o[1]:o):R(l)?i?l(t[0],t[1]):l(t):i?t[0]===s[0]?n[0]+" "+o[1]:t[1]===s[1]?n[1]+" "+o[0]:o[0]+" - "+o[1]:o;function c(t){return t===s[0]?"min":t===s[1]?"max":(+t).toFixed(Math.min(a,20))}},resetExtent:function(){var t=this.option,e=VI([t.min,t.max]);this._dataExtent=e},getDataDimension:function(t){var e=this.option.dimension;if(null!=e||t.dimensions.length){if(null!=e)return t.getDimension(e);for(var n=t.dimensions,i=n.length-1;0<=i;i--){var o=n[i];if(!t.getDimensionInfo(o).isCalculationCoord)return o}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var t=this.ecModel,e=this.option,n={inRange:e.inRange,outOfRange:e.outOfRange},i=e.target||(e.target={}),o=e.controller||(e.controller={});v(i,n),v(o,n);var r=this.isCategory();function a(n){BI(e.color)&&!n.inRange&&(n.inRange={color:e.color.slice().reverse()}),n.inRange=n.inRange||{color:t.get("gradientColor")},zI(this.stateList,function(t){var e=n[t];if(O(e)){var i=NI(e,"active",r);i?(n[t]={},n[t][e]=i):delete n[t]}},this)}a.call(this,i),a.call(this,o),(function(t,e,n){var i=t[e],o=t[n];i&&!o&&(o=t[n]={},zI(i,function(t,e){if(zx.isValidType(e)){var n=NI(e,"inactive",r);null!=n&&(o[e]=n,"color"!==e||o.hasOwnProperty("opacity")||o.hasOwnProperty("colorAlpha")||(o.opacity=[0,0]))}}))}).call(this,i,"inRange","outOfRange"),(function(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,n=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,i=this.get("inactiveColor");zI(this.stateList,function(o){var a=this.itemSize,s=t[o];null==(s=s||(t[o]={color:r?i:[i]})).symbol&&(s.symbol=e&&m(e)||(r?"roundRect":["roundRect"])),null==s.symbolSize&&(s.symbolSize=n&&m(n)||(r?a[0]:[a[0],a[0]])),s.symbol=RI(s.symbol,function(t){return"none"===t||"square"===t?"roundRect":t});var l=s.symbolSize;if(null!=l){var c=-1/0;OI(l,function(t){c<t&&(c=t)}),s.symbolSize=RI(l,function(t){return FI(t,[0,c],[0,a[0]],!0)})}},this)}).call(this,o)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:et,getValueState:et,getVisualMeta:et}),WI=[20,140],GI=HI.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(t,e){GI.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual(function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()}),this._resetRange()},resetItemSize:function(){GI.superApply(this,"resetItemSize",arguments);var t=this.itemSize;"horizontal"===this._orient&&t.reverse(),null!=t[0]&&!isNaN(t[0])||(t[0]=WI[0]),null!=t[1]&&!isNaN(t[1])||(t[1]=WI[1])},_resetRange:function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):L(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},completeVisualOption:function(){HI.prototype.completeVisualOption.apply(this,arguments),k(this.stateList,function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=0)},this)},setSelected:function(t){this.option.range=t.slice(),this._resetRange()},getSelected:function(){var t=this.getExtent(),e=wl((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},getValueState:function(t){var e=this.option.range,n=this.getExtent();return(e[0]<=n[0]||e[0]<=t)&&(e[1]>=n[1]||t<=e[1])?"inRange":"outOfRange"},findTargetDataIndices:function(t){var e=[];return this.eachTargetSeries(function(n){var i=[],o=n.getData();o.each(this.getDataDimension(o),function(e,n){t[0]<=e&&e<=t[1]&&i.push(n)},this),e.push({seriesId:n.id,dataIndex:i})},this),e},getVisualMeta:function(t){var e=UI(0,0,this.getExtent()),n=UI(0,0,this.option.range.slice()),i=[];function o(e,n){i.push({value:e,color:t(e,n)})}for(var r=0,a=0,s=n.length,l=e.length;a<l&&(!n.length||e[a]<=n[0]);a++)e[a]<n[r]&&o(e[a],"outOfRange");for(var c=1;r<s;r++,c=0)c&&i.length&&o(n[r],"outOfRange"),o(n[r],"inRange");for(c=1;a<l;a++)(!n.length||n[n.length-1]<e[a])&&(c&&(i.length&&o(i[i.length-1].value,"outOfRange"),c=0),o(e[a],"outOfRange"));var u=i.length;return{stops:i,outerColors:[u?i[0].color:"transparent",u?i[u-1].color:"transparent"]}}});function UI(t,e,n){if(n[0]===n[1])return n.slice();for(var i=(n[1]-n[0])/200,o=n[0],r=[],a=0;a<=200&&o<n[1];a++)r.push(o),o+=i;return r.push(n[1]),r}var jI=lf({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(t,e){this.ecModel=t,this.api=e},render:function(t,e,n,i){!1!==(this.visualMapModel=t).get("show")?this.doRender.apply(this,arguments):this.group.removeAll()},renderBackground:function(t){var e=this.visualMapModel,n=Fl(e.get("padding")||0),i=t.getBoundingRect();t.add(new ja({z2:-1,silent:!0,shape:{x:i.x-n[3],y:i.y-n[0],width:i.width+n[3]+n[1],height:i.height+n[0]+n[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},getControllerVisual:function(t,e,n){var i=(n=n||{}).forceState,o=this.visualMapModel,r={};if("symbol"===e&&(r.symbol=o.get("itemSymbol")),"color"===e){var a=o.get("contentColor");r.color=a}function s(t){return r[t]}function l(t,e){r[t]=e}var c=o.controllerVisuals[i||o.getValueState(t)];return k(zx.prepareVisualTypes(c),function(i){var o=c[i];n.convertOpacityToAlpha&&"opacity"===i&&(i="colorAlpha",o=c.__alphaForOpacity),zx.dependsOn(i,e)&&o&&o.applyVisual(t,s,l)}),r[e]},positionGroup:function(t){var e=this.api;sc(t,this.visualMapModel.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})},doRender:et});function $I(t,e,n){var i=t.option,o=i.align;if(null!=o&&"auto"!==o)return o;for(var r={width:e.getWidth(),height:e.getHeight()},a="horizontal"===i.orient?1:0,s=[["left","right","width"],["top","bottom","height"]],l=s[a],c=[0,null,10],u={},d=0;d<3;d++)u[s[1-a][d]]=c[d],u[l[d]]=2===d?n[0]:i[l[d]];var h=[["x","width",3],["y","height",0]][a],f=ac(u,r,i.padding);return l[(f.margin[h[2]]||0)+f[h[0]]+.5*f[h[1]]<.5*r[h[1]]?0:1]}function qI(t,e){return k(t||[],function(t){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")}),t}var YI=xl,XI=k,ZI=Math.min,KI=Math.max,JI=jI.extend({type:"visualMap.continuous",init:function(){JI.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._hoverLinkDataIndices=[]},doRender:function(t,e,n,i){i&&"selectDataRange"===i.type&&i.from===this.uid||this._buildView()},_buildView:function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var n=t.get("text");this._renderEndsText(e,n,0),this._renderEndsText(e,n,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},_renderEndsText:function(t,e,n){if(e){var i=e[1-n];i=null!=i?i+"":"";var o=this.visualMapModel,r=o.get("textGap"),a=o.itemSize,s=this._shapes.barGroup,l=this._applyTransform([a[0]/2,0===n?-r:a[1]+r],s),c=this._applyTransform(0===n?"bottom":"top",s),u=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new Da({style:{x:l[0],y:l[1],textVerticalAlign:"horizontal"===u?"middle":c,textAlign:"horizontal"===u?c:"center",text:i,textFont:d.getFont(),textFill:d.getTextColor()}}))}},_renderBar:function(t){var e=this.visualMapModel,n=this._shapes,i=e.itemSize,o=this._orient,r=this._useHandle,a=$I(e,this.api,i),s=n.barGroup=this._createBarGroup(a);s.add(n.outOfRange=QI()),s.add(n.inRange=QI(null,r?eD(this._orient):null,E(this._dragHandle,this,"all",!1),E(this._dragHandle,this,"all",!0)));var l=e.textStyleModel.getTextRect("国"),c=KI(l.width,l.height);r&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(s,0,i,c,o,a),this._createHandle(s,1,i,c,o,a)),this._createIndicator(s,i,c,o),t.add(s)},_createHandle:function(t,e,n,i,o){var r=E(this._dragHandle,this,e,!1),a=E(this._dragHandle,this,e,!0),s=QI(function(t,e){return 0===t?[[0,0],[e,0],[e,-e]]:[[0,0],[e,0],[e,e]]}(e,i),eD(this._orient),r,a);s.position[0]=n[0],t.add(s);var l=this.visualMapModel.textStyleModel,c=new Da({draggable:!0,drift:r,onmousemove:function(t){Ut(t.event)},ondragend:a,style:{x:0,y:0,text:"",textFont:l.getFont(),textFill:l.getTextColor()}});this.group.add(c);var u=["horizontal"===o?i/2:1.5*i,"horizontal"===o?0===e?-1.5*i:1.5*i:0===e?-i/2:i/2],d=this._shapes;d.handleThumbs[e]=s,d.handleLabelPoints[e]=u,d.handleLabels[e]=c},_createIndicator:function(t,e,n,i){var o=QI([[0,0]],"move");o.position[0]=e[0],o.attr({invisible:!0,silent:!0}),t.add(o);var r=this.visualMapModel.textStyleModel,a=new Da({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:r.getFont(),textFill:r.getTextColor()}});this.group.add(a);var s=["horizontal"===i?n/2:9,0],l=this._shapes;l.indicator=o,l.indicatorLabel=a,l.indicatorLabelPoint=s},_dragHandle:function(t,e,n,i){if(this._useHandle){if(this._dragging=!e,!e){var o=this._applyTransform([n,i],this._shapes.barGroup,!0);this._updateInterval(t,o[1]),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?this._hovering||this._clearHoverLinkToSeries():tD(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},_resetInterval:function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),n=t.getExtent(),i=[0,t.itemSize[1]];this._handleEnds=[YI(e[0],n,i,!0),YI(e[1],n,i,!0)]},_updateInterval:function(t,e){var n=this.visualMapModel,i=this._handleEnds,o=[0,n.itemSize[1]];C_(e=e||0,i,o,t,0);var r=n.getExtent();this._dataInterval=[YI(i[0],o,r,!0),YI(i[1],o,r,!0)]},_updateView:function(t){var e=this.visualMapModel,n=e.getExtent(),i=this._shapes,o=[0,e.itemSize[1]],r=t?o:this._handleEnds,a=this._createBarVisual(this._dataInterval,n,r,"inRange"),s=this._createBarVisual(n,n,o,"outOfRange");i.inRange.setStyle({fill:a.barColor,opacity:a.opacity}).setShape("points",a.barPoints),i.outOfRange.setStyle({fill:s.barColor,opacity:s.opacity}).setShape("points",s.barPoints),this._updateHandle(r,a)},_createBarVisual:function(t,e,n,i){var o={forceState:i,convertOpacityToAlpha:!0},r=this._makeColorGradient(t,o),a=[this.getControllerVisual(t[0],"symbolSize",o),this.getControllerVisual(t[1],"symbolSize",o)],s=this._createBarPoints(n,a);return{barColor:new ts(0,0,0,1,r),barPoints:s,handlesColor:[r[0].color,r[r.length-1].color]}},_makeColorGradient:function(t,e){var n=[],i=(t[1]-t[0])/100;n.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var o=1;o<100;o++){var r=t[0]+i*o;if(r>t[1])break;n.push({color:this.getControllerVisual(r,"color",e),offset:o/100})}return n.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),n},_createBarPoints:function(t,e){var n=this.visualMapModel.itemSize;return[[n[0]-e[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-e[1],t[1]]]},_createBarGroup:function(t){var e=this._orient,n=this.visualMapModel.get("inverse");return new Cn("horizontal"!==e||n?"horizontal"===e&&n?{scale:"bottom"===t?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==e||n?{scale:"left"===t?[1,1]:[-1,1]}:{scale:"left"===t?[1,-1]:[-1,-1]}:{scale:"bottom"===t?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(t,e){if(this._useHandle){var n=this._shapes,i=this.visualMapModel,o=n.handleThumbs,r=n.handleLabels;XI([0,1],function(a){var s=o[a];s.setStyle("fill",e.handlesColor[a]),s.position[1]=t[a];var l=Js(n.handleLabelPoints[a],Ks(s,this.group));r[a].setStyle({x:l[0],y:l[1],text:i.formatValueText(this._dataInterval[a]),textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===a?"bottom":"top":"left",n.barGroup)})},this)}},_showIndicator:function(t,e,n,i){var o=this.visualMapModel,r=o.getExtent(),a=o.itemSize,s=YI(t,r,[0,a[1]],!0),l=this._shapes,c=l.indicator;if(c){c.position[1]=s,c.attr("invisible",!1),c.setShape("points",function(t,e,n,i){return t?[[0,-ZI(e,KI(n,0))],[6,0],[0,ZI(e,KI(i-n,0))]]:[[0,0],[5,-5],[5,5]]}(!!n,i,s,a[1]));var u=this.getControllerVisual(t,"color",{convertOpacityToAlpha:!0});c.setStyle("fill",u);var d=Js(l.indicatorLabelPoint,Ks(c,this.group)),h=l.indicatorLabel;h.attr("invisible",!1);var f=this._applyTransform("left",l.barGroup),p=this._orient;h.setStyle({text:(n||"")+o.formatValueText(e),textVerticalAlign:"horizontal"===p?f:"middle",textAlign:"horizontal"===p?"center":f,x:d[0],y:d[1]})}},_enableHoverLinkToSeries:function(){var t=this;this._shapes.barGroup.on("mousemove",function(e){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,i=t._applyTransform([e.offsetX,e.offsetY],t._shapes.barGroup,!0,!0);i[1]=ZI(KI(0,i[1]),n[1]),t._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=n[0])}}).on("mouseout",function(){t._hovering=!1,t._dragging||t._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(t,e){var n=this.visualMapModel;if(n.option.hoverLink){var i=[0,n.itemSize[1]],o=n.getExtent();t=ZI(KI(i[0],t),i[1]);var r=function(t,e,n){var i=6,o=t.get("hoverLinkDataSize");return o&&(i=YI(o,e,n,!0)/2),i}(n,o,i),a=[t-r,t+r],s=YI(t,i,o,!0),l=[YI(a[0],i,o,!0),YI(a[1],i,o,!0)];a[0]<i[0]&&(l[0]=-1/0),i[1]<a[1]&&(l[1]=1/0),e&&(l[0]===-1/0?this._showIndicator(s,l[1],"< ",r):l[1]===1/0?this._showIndicator(s,l[0],"> ",r):this._showIndicator(s,s,"≈ ",r));var c=this._hoverLinkDataIndices,u=[];(e||tD(n))&&(u=this._hoverLinkDataIndices=n.findTargetDataIndices(l));var d=function(t,e){var n={},i={};return o(t||[],n),o(e||[],i,n),[r(n),r(i)];function o(t,e,n){for(var i=0,o=t.length;i<o;i++)for(var r=t[i].seriesId,a=ko(t[i].dataIndex),s=n&&n[r],l=0,c=a.length;l<c;l++){var u=a[l];s&&s[u]?s[u]=null:(e[r]||(e[r]={}))[u]=1}}function r(t,e){var n=[];for(var i in t)if(t.hasOwnProperty(i)&&null!=t[i])if(e)n.push(+i);else{var o=r(t[i],!0);o.length&&n.push({seriesId:i,dataIndex:o})}return n}}(c,u);this._dispatchHighDown("downplay",qI(d[0],n)),this._dispatchHighDown("highlight",qI(d[1],n))}},_hoverLinkFromSeriesMouseOver:function(t){var e=t.target,n=this.visualMapModel;if(e&&null!=e.dataIndex){var i=this.ecModel.getSeriesByIndex(e.seriesIndex);if(n.isTargetSeries(i)){var o=i.getData(e.dataType),r=o.get(n.getDataDimension(o),e.dataIndex,!0);isNaN(r)||this._showIndicator(r,r)}}},_hideIndicator:function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",qI(t,this.visualMapModel)),t.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},_applyTransform:function(t,e,n,i){var o=Ks(e,i?null:this.group);return al[L(t)?"applyTransform":"transformDirection"](t,o,n)},_dispatchHighDown:function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});function QI(t,e,n,i){return new za({shape:{points:t},draggable:!!n,cursor:e,drift:n,onmousemove:function(t){Ut(t.event)},ondragend:i})}function tD(t){var e=t.get("hoverLinkOnHandle");return!!(null==e?t.get("realtime"):e)}function eD(t){return"vertical"===t?"ns-resize":"ew-resize"}tf({type:"selectDataRange",event:"dataRangeSelected",update:"update"},function(t,e){e.eachComponent({mainType:"visualMap",query:t},function(e){e.setSelected(t.selected)})}),Jh(kI);var nD=HI.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(t,e){nD.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent();var n=this._mode=this._determineMode();iD[this._mode].call(this),this._resetSelected(t,e);var i=this.option.categories;this.resetVisual(function(t,e){"categories"===n?(t.mappingMethod="category",t.categories=m(i)):(t.dataExtent=this.getExtent(),t.mappingMethod="piecewise",t.pieceList=A(this._pieceList,function(t){return t=m(t),"inRange"!==e&&(t.visual=null),t}))})},completeVisualOption:function(){var t=this.option,e={},n=zx.listVisualTypes(),i=this.isCategory();function o(t,e,n){return t&&t[e]&&(B(t[e])?t[e].hasOwnProperty(n):t[e]===n)}k(t.pieces,function(t){k(n,function(n){t.hasOwnProperty(n)&&(e[n]=1)})}),k(e,function(e,n){var r=0;k(this.stateList,function(e){r|=o(t,e,n)||o(t.target,e,n)},this),r||k(this.stateList,function(e){(t[e]||(t[e]={}))[n]=NI(n,"inRange"===e?"active":"inactive",i)})},this),HI.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(t,e){var n=this.option,i=this._pieceList,o=(e?n:t).selected||{};if(n.selected=o,k(i,function(t,e){var n=this.getSelectedMapKey(t);o.hasOwnProperty(n)||(o[n]=!0)},this),"single"===n.selectedMode){var r=!1;k(i,function(t,e){var n=this.getSelectedMapKey(t);o[n]&&(r?o[n]=!1:r=!0)},this)}},getSelectedMapKey:function(t){return"categories"===this._mode?t.value+"":t.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var t=this.option;return t.pieces&&0<t.pieces.length?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(t){this.option.selected=m(t)},getValueState:function(t){var e=zx.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},findTargetDataIndices:function(t){var e=[];return this.eachTargetSeries(function(n){var i=[],o=n.getData();o.each(this.getDataDimension(o),function(e,n){zx.findPieceIndex(e,this._pieceList)===t&&i.push(n)},this),e.push({seriesId:n.id,dataIndex:i})},this),e},getRepresentValue:function(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var n=t.interval||[];e=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return e},getVisualMeta:function(t){if(!this.isCategory()){var e=[],n=[],i=this,o=this._pieceList.slice();if(o.length){var r=o[0].interval[0];r!==-1/0&&o.unshift({interval:[-1/0,r]}),(r=o[o.length-1].interval[1])!==1/0&&o.push({interval:[r,1/0]})}else o.push({interval:[-1/0,1/0]});var a=-1/0;return k(o,function(t){var e=t.interval;e&&(e[0]>a&&s([a,e[0]],"outOfRange"),s(e.slice()),a=e[1])},this),{stops:e,outerColors:n}}function s(o,r){var a=i.getRepresentValue({interval:o});r=r||i.getValueState(a);var s=t(a,r);o[0]===-1/0?n[0]=s:o[1]===1/0?n[1]=s:e.push({value:o[0],color:s},{value:o[1],color:s})}}}),iD={splitNumber:function(){var t=this.option,e=this._pieceList,n=Math.min(t.precision,20),i=this.getExtent(),o=t.splitNumber;o=Math.max(parseInt(o,10),1),t.splitNumber=o;for(var r=(i[1]-i[0])/o;+r.toFixed(n)!==r&&n<5;)n++;t.precision=n,r=+r.toFixed(n),t.minOpen&&e.push({interval:[-1/0,i[0]],close:[0,0]});for(var a=0,s=i[0];a<o;s+=r,a++)e.push({interval:[s,a===o-1?i[1]:s+r],close:[1,1]});t.maxOpen&&e.push({interval:[i[1],1/0],close:[0,0]}),Rl(e),k(e,function(t,e){t.index=e,t.text=this.formatValueText(t.interval)},this)},categories:function(){var t=this.option;k(t.categories,function(t){this._pieceList.push({text:this.formatValueText(t,!0),value:t})},this),oD(t,this._pieceList)},pieces:function(){var t=this.option,e=this._pieceList;k(t.pieces,function(t,n){B(t)||(t={value:t});var i={text:"",index:n};if(null!=t.label&&(i.text=t.label),t.hasOwnProperty("value")){var o=i.value=t.value;i.interval=[o,o],i.close=[1,1]}else{for(var r=i.interval=[],a=i.close=[0,0],s=[1,0,1],l=[-1/0,1/0],c=[],u=0;u<2;u++){for(var d=[["gte","gt","min"],["lte","lt","max"]][u],h=0;h<3&&null==r[u];h++)r[u]=t[d[h]],a[u]=s[h],c[u]=2===h;null==r[u]&&(r[u]=l[u])}c[0]&&r[1]===1/0&&(a[0]=0),c[1]&&r[0]===-1/0&&(a[1]=0),r[0]===r[1]&&a[0]&&a[1]&&(i.value=r[0])}i.visual=zx.retrieveVisuals(t),e.push(i)},this),oD(t,e),Rl(e),k(e,function(t){var e=t.close;t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,[["<","≤"][e[1]],[">","≥"][e[0]]])},this)}};function oD(t,e){var n=t.inverse;("vertical"===t.orient?!n:n)&&e.reverse()}jI.extend({type:"visualMap.piecewise",doRender:function(){var t=this.group;t.removeAll();var e=this.visualMapModel,n=e.get("textGap"),i=e.textStyleModel,o=i.getFont(),r=i.getTextColor(),a=this._getItemAlign(),s=e.itemSize,l=this._getViewData(),c=l.endsText,u=W(e.get("showLabel",!0),!c);c&&this._renderEndsText(t,c[0],s,u,a),k(l.viewPieceList,function(i){var l=i.piece,c=new Cn;c.onclick=E(this._onItemClick,this,l),this._enableHoverLink(c,i.indexInModelPieceList);var d=e.getRepresentValue(l);if(this._createItemSymbol(c,d,[0,0,s[0],s[1]]),u){var h=this.visualMapModel.getValueState(d);c.add(new Da({style:{x:"right"===a?-n:s[0]+n,y:s[1]/2,text:l.text,textVerticalAlign:"middle",textAlign:a,textFont:o,textFill:r,opacity:"outOfRange"===h?.5:1}}))}t.add(c)},this),c&&this._renderEndsText(t,c[1],s,u,a),rc(e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},_enableHoverLink:function(t,e){function n(t){var n=this.visualMapModel;n.option.hoverLink&&this.api.dispatchAction({type:t,batch:qI(n.findTargetDataIndices(e),n)})}t.on("mouseover",E(n,this,"highlight")).on("mouseout",E(n,this,"downplay"))},_getItemAlign:function(){var t=this.visualMapModel,e=t.option;if("vertical"===e.orient)return $I(t,this.api,t.itemSize);var n=e.align;return n&&"auto"!==n||(n="left"),n},_renderEndsText:function(t,e,n,i,o){if(e){var r=new Cn,a=this.visualMapModel.textStyleModel;r.add(new Da({style:{x:i?"right"===o?n[0]:0:n[0]/2,y:n[1]/2,textVerticalAlign:"middle",textAlign:i?o:"center",text:e,textFont:a.getFont(),textFill:a.getTextColor()}})),t.add(r)}},_getViewData:function(){var t=this.visualMapModel,e=A(t.getPieceList(),function(t,e){return{piece:t,indexInModelPieceList:e}}),n=t.get("text"),i=t.get("orient"),o=t.get("inverse");return("horizontal"===i?o:!o)?e.reverse():n=n&&n.slice().reverse(),{viewPieceList:e,endsText:n}},_createItemSymbol:function(t,e,n){t.add(eg(this.getControllerVisual(e,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(e,"color")))},_onItemClick:function(t){var e=this.visualMapModel,n=e.option,i=m(n.selected),o=e.getSelectedMapKey(t);"single"===n.selectedMode?(i[o]=!0,k(i,function(t,e){i[e]=e===o})):i[o]=!i[o],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:i})}}),Jh(kI);var rD,aD="urn:schemas-microsoft-com:vml",sD="undefined"==typeof window?null:window,lD=!1,cD=sD&&sD.document;function uD(t){return rD(t)}if(cD&&!o.canvasSupported)try{cD.namespaces.zrvml||cD.namespaces.add("zrvml",aD),rD=function(t){return cD.createElement("<zrvml:"+t+' class="zrvml">')}}catch(t){rD=function(t){return cD.createElement("<"+t+' xmlns="'+aD+'" class="zrvml">')}}var dD=qr.CMD,hD=Math.round,fD=Math.sqrt,pD=Math.abs,gD=Math.cos,mD=Math.sin,vD=Math.max;if(!o.canvasSupported){var yD=",",xD="progid:DXImageTransform.Microsoft",bD=21600,_D=bD/2,wD=function(t){t.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",t.coordsize=bD+","+bD,t.coordorigin="0,0"},SD=function(t,e,n){return"rgb("+[t,e,n].join(",")+")"},CD=function(t,e){e&&t&&e.parentNode!==t&&t.appendChild(e)},MD=function(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)},TD=function(t,e,n){return 1e5*(parseFloat(t)||0)+1e3*(parseFloat(e)||0)+n},kD=Oi,AD=function(t,e,n){var i=Ve(e);n=+n,isNaN(n)&&(n=1),i&&(t.color=SD(i[0],i[1],i[2]),t.opacity=n*i[3])},ID=function(t,e,n,i){var o="fill"===e,r=t.getElementsByTagName(e)[0];null!=n[e]&&"none"!==n[e]&&(o||!o&&n.lineWidth)?(t[o?"filled":"stroked"]="true",n[e]instanceof Za&&MD(t,r),r=r||uD(e),o?function(t,e,n){var i,o=e.fill;if(null!=o)if(o instanceof Za){var r,a=0,s=[0,0],l=0,c=1,u=n.getBoundingRect(),d=u.width,h=u.height;if("linear"===o.type){r="gradient";var f=n.transform,p=[o.x*d,o.y*h],g=[o.x2*d,o.y2*h];f&&(bt(p,p,f),bt(g,g,f)),(a=180*Math.atan2(g[0]-p[0],g[1]-p[1])/Math.PI)<0&&(a+=360),a<1e-6&&(a=0)}else{r="gradientradial";var m=n.scale,v=d,y=h;s=[((p=[o.x*d,o.y*h])[0]-u.x)/v,(p[1]-u.y)/y],(f=n.transform)&&bt(p,p,f);var x=vD(v/=m[0]*bD,y/=m[1]*bD);c=2*o.r/x-(l=0/x)}var b=o.colorStops.slice();b.sort(function(t,e){return t.offset-e.offset});for(var _=b.length,w=[],S=[],C=0;C<_;C++){var M=b[C],T=(i=Ve(M.color),[SD(i[0],i[1],i[2]),i[3]]);S.push(M.offset*c+l+" "+T[0]),0!==C&&C!==_-1||w.push(T)}if(2<=_){var k=w[0][0],A=w[1][0],I=w[0][1]*e.opacity,D=w[1][1]*e.opacity;t.type=r,t.method="none",t.focus="100%",t.angle=a,t.color=k,t.color2=A,t.colors=S.join(","),t.opacity=D,t.opacity2=I}"radial"===r&&(t.focusposition=s.join(","))}else AD(t,o,e.opacity)}(r,n,i):function(t,e){e.lineDash&&(t.dashstyle=e.lineDash.join(" ")),null==e.stroke||e.stroke instanceof Za||AD(t,e.stroke,e.opacity)}(r,n),CD(t,r)):(t[o?"filled":"stroked"]="false",MD(t,r))},DD=[[],[],[]];fa.prototype.brushVML=function(t){var e=this.style,n=this._vmlEl;n||(n=uD("shape"),wD(n),this._vmlEl=n),ID(n,"fill",e,this),ID(n,"stroke",e,this);var i=this.transform,o=null!=i,r=n.getElementsByTagName("stroke")[0];if(r){var a=e.lineWidth;o&&!e.strokeNoScale&&(a*=fD(pD(i[0]*i[3]-i[1]*i[2]))),r.weight=a+"px"}var s=this.path||(this.path=new qr);this.__dirtyPath&&(s.beginPath(),s.subPixelOptimize=!1,this.buildPath(s,this.shape),s.toStatic(),this.__dirtyPath=!1),n.path=function(t,e){var n,i,o,r,a,s,l=dD.M,c=dD.C,u=dD.L,d=dD.A,h=dD.Q,f=[],p=t.data,g=t.len();for(r=0;r<g;){switch(i="",n=0,o=p[r++]){case l:i=" m ",n=1,a=p[r++],s=p[r++],DD[0][0]=a,DD[0][1]=s;break;case u:i=" l ",n=1,a=p[r++],s=p[r++],DD[0][0]=a,DD[0][1]=s;break;case h:case c:i=" c ",n=3;var m,v,y=p[r++],x=p[r++],b=p[r++],_=p[r++];o===h?(b=((m=b)+2*y)/3,_=((v=_)+2*x)/3,y=(a+2*y)/3,x=(s+2*x)/3):(m=p[r++],v=p[r++]),DD[0][0]=y,DD[0][1]=x,DD[1][0]=b,DD[1][1]=_,a=DD[2][0]=m,s=DD[2][1]=v;break;case d:var w=0,S=0,C=1,M=1,T=0;e&&(w=e[4],S=e[5],C=fD(e[0]*e[0]+e[1]*e[1]),M=fD(e[2]*e[2]+e[3]*e[3]),T=Math.atan2(-e[1]/M,e[0]/C));var k=p[r++],A=p[r++],I=p[r++],D=p[r++],P=p[r++]+T,E=p[r++]+P+T;r++;var N=p[r++],L=k+gD(P)*I,R=A+mD(P)*D,O=(y=k+gD(E)*I,x=A+mD(E)*D,N?" wa ":" at ");Math.abs(L-y)<1e-4&&(.01<Math.abs(E-P)?N&&(L+=.0125):Math.abs(R-A)<1e-4?N&&L<k||!N&&k<L?x-=.0125:x+=.0125:N&&R<A||!N&&A<R?y+=.0125:y-=.0125),f.push(O,hD(((k-I)*C+w)*bD-_D),yD,hD(((A-D)*M+S)*bD-_D),yD,hD(((k+I)*C+w)*bD-_D),yD,hD(((A+D)*M+S)*bD-_D),yD,hD((L*C+w)*bD-_D),yD,hD((R*M+S)*bD-_D),yD,hD((y*C+w)*bD-_D),yD,hD((x*M+S)*bD-_D)),a=y,s=x;break;case dD.R:var B=DD[0],z=DD[1];B[0]=p[r++],B[1]=p[r++],z[0]=B[0]+p[r++],z[1]=B[1]+p[r++],e&&(bt(B,B,e),bt(z,z,e)),B[0]=hD(B[0]*bD-_D),z[0]=hD(z[0]*bD-_D),B[1]=hD(B[1]*bD-_D),z[1]=hD(z[1]*bD-_D),f.push(" m ",B[0],yD,B[1]," l ",z[0],yD,B[1]," l ",z[0],yD,z[1]," l ",B[0],yD,z[1]);break;case dD.Z:f.push(" x ")}if(0<n){f.push(i);for(var V=0;V<n;V++){var F=DD[V];e&&bt(F,F,e),f.push(hD(F[0]*bD-_D),yD,hD(F[1]*bD-_D),V<n-1?yD:"")}}}return f.join("")}(s,this.transform),n.style.zIndex=TD(this.zlevel,this.z,this.z2),CD(t,n),null!=e.text?this.drawRectText(t,this.getBoundingRect()):this.removeRectText(t)},fa.prototype.onRemove=function(t){MD(t,this._vmlEl),this.removeRectText(t)},fa.prototype.onAdd=function(t){CD(t,this._vmlEl),this.appendRectText(t)},Wi.prototype.brushVML=function(t){var e,n,i=this.style,o=i.image;if(function(t){return"object"==typeof t&&t.tagName&&"IMG"===t.tagName.toUpperCase()}(o)){var r=o.src;if(r===this._imageSrc)e=this._imageWidth,n=this._imageHeight;else{var a=o.runtimeStyle,s=a.width,l=a.height;a.width="auto",a.height="auto",e=o.width,n=o.height,a.width=s,a.height=l,this._imageSrc=r,this._imageWidth=e,this._imageHeight=n}o=r}else o===this._imageSrc&&(e=this._imageWidth,n=this._imageHeight);if(o){var c=i.x||0,u=i.y||0,d=i.width,h=i.height,f=i.sWidth,p=i.sHeight,g=i.sx||0,m=i.sy||0,v=f&&p,y=this._vmlEl;y||(y=cD.createElement("div"),wD(y),this._vmlEl=y);var x,b=y.style,_=!1,w=1,S=1;if(this.transform&&(w=fD((x=this.transform)[0]*x[0]+x[1]*x[1]),S=fD(x[2]*x[2]+x[3]*x[3]),_=x[1]||x[2]),_){var C=[c,u],M=[c+d,u],T=[c,u+h],k=[c+d,u+h];bt(C,C,x),bt(M,M,x),bt(T,T,x),bt(k,k,x);var A=vD(C[0],M[0],T[0],k[0]),I=vD(C[1],M[1],T[1],k[1]),D=[];D.push("M11=",x[0]/w,yD,"M12=",x[2]/S,yD,"M21=",x[1]/w,yD,"M22=",x[3]/S,yD,"Dx=",hD(c*w+x[4]),yD,"Dy=",hD(u*S+x[5])),b.padding="0 "+hD(A)+"px "+hD(I)+"px 0",b.filter=xD+".Matrix("+D.join("")+", SizingMethod=clip)"}else x&&(c=c*w+x[4],u=u*S+x[5]),b.filter="",b.left=hD(c)+"px",b.top=hD(u)+"px";var P=this._imageEl,E=this._cropEl;P||(P=cD.createElement("div"),this._imageEl=P);var N=P.style;if(v){if(e&&n)N.width=hD(w*e*d/f)+"px",N.height=hD(S*n*h/p)+"px";else{var L=new Image,R=this;L.onload=function(){L.onload=null,n=L.height,N.width=hD(w*(e=L.width)*d/f)+"px",N.height=hD(S*n*h/p)+"px",R._imageWidth=e,R._imageHeight=n,R._imageSrc=o},L.src=o}E||((E=cD.createElement("div")).style.overflow="hidden",this._cropEl=E);var O=E.style;O.width=hD((d+g*d/f)*w),O.height=hD((h+m*h/p)*S),O.filter=xD+".Matrix(Dx="+-g*d/f*w+",Dy="+-m*h/p*S+")",E.parentNode||y.appendChild(E),P.parentNode!==E&&E.appendChild(P)}else N.width=hD(w*d)+"px",N.height=hD(S*h)+"px",y.appendChild(P),E&&E.parentNode&&(y.removeChild(E),this._cropEl=null);var B="",z=i.opacity;z<1&&(B+=".Alpha(opacity="+hD(100*z)+") "),N.filter=B+=xD+".AlphaImageLoader(src="+o+", SizingMethod=scale)",y.style.zIndex=TD(this.zlevel,this.z,this.z2),CD(t,y),null!=i.text&&this.drawRectText(t,this.getBoundingRect())}},Wi.prototype.onRemove=function(t){MD(t,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(t)},Wi.prototype.onAdd=function(t){CD(t,this._vmlEl),this.appendRectText(t)};var PD,ED="normal",ND={},LD=0,RD=document.createElement("div");ni.measureText=function(t,e){var n=cD;PD||((PD=n.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",cD.body.appendChild(PD));try{PD.style.font=e}catch(t){}return PD.innerHTML="",PD.appendChild(n.createTextNode(t)),{width:PD.offsetWidth}};for(var OD=new Sn,BD=function(t,e,n,i){var o=this.style;this.__dirty&&Ci(o);var r=o.text;if(null!=r&&(r+=""),r){if(o.rich){var a=pi(r,o);r=[];for(var s=0;s<a.lines.length;s++){for(var l=a.lines[s].tokens,c=[],u=0;u<l.length;u++)c.push(l[u].text);r.push(c.join(""))}r=r.join("\n")}var d,h,f=o.textAlign,p=o.textVerticalAlign,g=function(t){var e=ND[t];if(!e){100<LD&&(LD=0,ND={});var n,i=RD.style;try{i.font=t,n=i.fontFamily.split(",")[0]}catch(t){}e={style:i.fontStyle||ED,variant:i.fontVariant||ED,weight:i.fontWeight||ED,size:0|parseFloat(i.fontSize||12),family:n||"Microsoft YaHei"},ND[t]=e,LD++}return e}(o.font),m=g.style+" "+g.variant+" "+g.weight+" "+g.size+'px "'+g.family+'"';n=n||oi(r,m,f,p,o.textPadding,o.textLineHeight);var v=this.transform;if(v&&!i&&(OD.copy(e),OD.applyTransform(v),e=OD),i)d=e.x,h=e.y;else{var y=o.textPosition;if(y instanceof Array)d=e.x+kD(y[0],e.width),h=e.y+kD(y[1],e.height),f=f||"left";else{var x=this.calculateTextPosition?this.calculateTextPosition({},o,e):si({},o,e);d=x.x,h=x.y,f=f||x.textAlign,p=p||x.textVerticalAlign}}d=ri(d,n.width,f),h=ai(h,n.height,p),h+=n.height/2;var b,_,w,S=uD,C=this._textVmlEl;C?_=(b=(w=C.firstChild).nextSibling).nextSibling:(C=S("line"),b=S("path"),_=S("textpath"),w=S("skew"),_.style["v-text-align"]="left",wD(C),b.textpathok=!0,_.on=!0,C.from="0 0",C.to="1000 0.05",CD(C,w),CD(C,b),CD(C,_),this._textVmlEl=C);var M=[d,h],T=C.style;v&&i?(bt(M,M,v),w.on=!0,w.matrix=v[0].toFixed(3)+yD+v[2].toFixed(3)+yD+v[1].toFixed(3)+yD+v[3].toFixed(3)+",0,0",w.offset=(hD(M[0])||0)+","+(hD(M[1])||0),w.origin="0 0",T.left="0px",T.top="0px"):(w.on=!1,T.left=hD(d)+"px",T.top=hD(h)+"px"),_.string=function(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}(r);try{_.style.font=m}catch(t){}ID(C,"fill",{fill:o.textFill,opacity:o.opacity},this),ID(C,"stroke",{stroke:o.textStroke,opacity:o.opacity,lineDash:o.lineDash||null},this),C.style.zIndex=TD(this.zlevel,this.z,this.z2),CD(t,C)}},zD=function(t){MD(t,this._textVmlEl),this._textVmlEl=null},VD=function(t){CD(t,this._textVmlEl)},FD=[Vi,Hi,Wi,fa,Da],HD=0;HD<FD.length;HD++){var WD=FD[HD].prototype;WD.drawRectText=BD,WD.removeRectText=zD,WD.appendRectText=VD}Da.prototype.brushVML=function(t){var e=this.style;null!=e.text?this.drawRectText(t,{x:e.x||0,y:e.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(t)},Da.prototype.onRemove=function(t){this.removeRectText(t)},Da.prototype.onAdd=function(t){this.appendRectText(t)}}function GD(t){return parseInt(t,10)}function UD(t,e){!function(){if(!lD&&cD){lD=!0;var t=cD.styleSheets;t.length<31?cD.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):t[0].addRule(".zrvml","behavior:url(#default#VML)")}}(),this.root=t,this.storage=e;var n=document.createElement("div"),i=document.createElement("div");n.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",i.style.cssText="position:absolute;left:0;top:0;",t.appendChild(n),this._vmlRoot=i,this._vmlViewport=n,this.resize();var o=e.delFromStorage,r=e.addToStorage;e.delFromStorage=function(t){o.call(e,t),t&&t.onRemove&&t.onRemove(i)},e.addToStorage=function(t){t.onAdd&&t.onAdd(i),r.call(e,t)},this._firstPaint=!0}function jD(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}UD.prototype={constructor:UD,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0,!0);this._paintList(t)},_paintList:function(t){for(var e=this._vmlRoot,n=0;n<t.length;n++){var i=t[n];i.invisible||i.ignore?(i.__alreadyNotVisible||i.onRemove(e),i.__alreadyNotVisible=!0):(i.__alreadyNotVisible&&i.onAdd(e),i.__alreadyNotVisible=!1,i.__dirty&&(i.beforeBrush&&i.beforeBrush(),(i.brushVML||i.brush).call(i,e),i.afterBrush&&i.afterBrush())),i.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(e),this._firstPaint=!1)},resize:function(t,e){if(t=null==t?this._getWidth():t,e=null==e?this._getHeight():e,this._width!==t||this._height!==e){this._width=t,this._height=e;var n=this._vmlViewport.style;n.width=t+"px",n.height=e+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var t=this.root,e=t.currentStyle;return(t.clientWidth||GD(e.width))-GD(e.paddingLeft)-GD(e.paddingRight)|0},_getHeight:function(){var t=this.root,e=t.currentStyle;return(t.clientHeight||GD(e.height))-GD(e.paddingTop)-GD(e.paddingBottom)|0}},k(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(t){UD.prototype[t]=function(){}}),bo("vml",UD);var $D=qr.CMD,qD=Array.prototype.join,YD="none",XD=Math.round,ZD=Math.sin,KD=Math.cos,JD=Math.PI,QD=2*Math.PI,tP=180/JD,eP=1e-4;function nP(t){return XD(1e4*t)/1e4}function iP(t){return t<eP&&-eP<t}function oP(t,e){e&&rP(t,"transform","matrix("+qD.call(e,",")+")")}function rP(t,e,n){n&&("linear"===n.type||"radial"===n.type)||t.setAttribute(e,n)}function aP(t,e,n,i){if(function(t,e){var n=e?t.textFill:t.fill;return null!=n&&n!==YD}(e,n)){var o=n?e.textFill:e.fill;rP(t,"fill",o="transparent"===o?YD:o),rP(t,"fill-opacity",null!=e.fillOpacity?e.fillOpacity*e.opacity:e.opacity)}else rP(t,"fill",YD);if(function(t,e){var n=e?t.textStroke:t.stroke;return null!=n&&n!==YD}(e,n)){var r=n?e.textStroke:e.stroke;rP(t,"stroke",r="transparent"===r?YD:r),rP(t,"stroke-width",(n?e.textStrokeWidth:e.lineWidth)/(!n&&e.strokeNoScale?i.getLineScale():1)),rP(t,"paint-order",n?"stroke":"fill"),rP(t,"stroke-opacity",null!=e.strokeOpacity?e.strokeOpacity:e.opacity),e.lineDash?(rP(t,"stroke-dasharray",e.lineDash.join(",")),rP(t,"stroke-dashoffset",XD(e.lineDashOffset||0))):rP(t,"stroke-dasharray",""),e.lineCap&&rP(t,"stroke-linecap",e.lineCap),e.lineJoin&&rP(t,"stroke-linejoin",e.lineJoin),e.miterLimit&&rP(t,"stroke-miterlimit",e.miterLimit)}else rP(t,"stroke",YD)}var sP={brush:function(t){var e=t.style,n=t.__svgEl;n||(n=jD("path"),t.__svgEl=n),t.path||t.createPathProxy();var i=t.path;if(t.__dirtyPath){i.beginPath(),i.subPixelOptimize=!1,t.buildPath(i,t.shape),t.__dirtyPath=!1;var o=function(t){for(var e=[],n=t.data,i=t.len(),o=0;o<i;){var r="",a=0;switch(n[o++]){case $D.M:r="M",a=2;break;case $D.L:r="L",a=2;break;case $D.Q:r="Q",a=4;break;case $D.C:r="C",a=6;break;case $D.A:var s=n[o++],l=n[o++],c=n[o++],u=n[o++],d=n[o++],h=n[o++],f=n[o++],p=n[o++],g=Math.abs(h),m=iP(g-QD)||(p?QD<=h:QD<=-h),v=0<h?h%QD:h%QD+QD,y=!1;y=!!m||!iP(g)&&JD<=v==!!p;var x=nP(s+c*KD(d)),b=nP(l+u*ZD(d));m&&(h=p?QD-1e-4:1e-4-QD,y=!0,9===o&&e.push("M",x,b));var _=nP(s+c*KD(d+h)),w=nP(l+u*ZD(d+h));e.push("A",nP(c),nP(u),XD(f*tP),+y,+p,_,w);break;case $D.Z:r="Z";break;case $D.R:_=nP(n[o++]),w=nP(n[o++]);var S=nP(n[o++]),C=nP(n[o++]);e.push("M",_,w,"L",_+S,w,"L",_+S,w+C,"L",_,w+C,"L",_,w)}r&&e.push(r);for(var M=0;M<a;M++)e.push(nP(n[o++]))}return e.join(" ")}(i);o.indexOf("NaN")<0&&rP(n,"d",o)}aP(n,e,!1,t),oP(n,t.transform),null!=e.text?pP(t,t.getBoundingRect()):mP(t)}},lP={brush:function(t){var e=t.style,n=e.image;if(n instanceof HTMLImageElement&&(n=n.src),n){var i=e.x||0,o=e.y||0,r=e.width,a=e.height,s=t.__svgEl;s||(s=jD("image"),t.__svgEl=s),n!==t.__imageSrc&&(function(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink","href",n)}(s,0,n),t.__imageSrc=n),rP(s,"width",r),rP(s,"height",a),rP(s,"x",i),rP(s,"y",o),oP(s,t.transform),null!=e.text?pP(t,t.getBoundingRect()):mP(t)}}},cP={},uP=new Sn,dP={},hP=[],fP={left:"start",right:"end",center:"middle",middle:"middle"},pP=function(t,e){var n=t.style,i=t.transform,o=t instanceof Da||n.transformText;t.__dirty&&Ci(n);var r=n.text;if(null!=r&&(r+=""),zi(r,n)){null==r&&(r=""),!o&&i&&(uP.copy(e),uP.applyTransform(i),e=uP);var a=t.__textSvgEl;a||(a=jD("text"),t.__textSvgEl=a);var s=a.style,l=n.font||ei,c=a.__computedFont;l!==a.__styleFont&&(s.font=a.__styleFont=l,c=a.__computedFont=s.font);var u=n.textPadding,d=t.__textCotentBlock;d&&!t.__dirtyText||(d=t.__textCotentBlock=fi(r,c,u,n.textLineHeight,n.truncate));var h=d.outerHeight,f=d.lineHeight;Ei(dP,t,n,e);var p=dP.baseX,g=dP.baseY,m=dP.textAlign||"left",v=dP.textVerticalAlign;!function(t,e,n,i,o,r,a){oe(hP),e&&n&&re(hP,n);var s=i.textRotation;if(o&&s){var l=i.textOrigin;"center"===l?(r=o.width/2+o.x,a=o.height/2+o.y):l&&(r=l[0]+o.x,a=l[1]+o.y),hP[4]-=r,hP[5]-=a,le(hP,hP,s),hP[4]+=r,hP[5]+=a}oP(t,hP)}(a,o,i,n,e,p,g);var y=p,x=ai(g,h,v);u&&(y=function(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}(p,m,u),x+=u[0]),x+=f/2,aP(a,n,!0,t);var b=d.canCacheByTextString,_=t.__tspanList||(t.__tspanList=[]),w=_.length;if(b&&t.__canCacheByTextString&&t.__text===r){if(t.__dirtyText&&w)for(var S=0;S<w;++S)gP(_[S],m,y,x+S*f)}else{t.__text=r,t.__canCacheByTextString=b;var C=d.lines,M=C.length;for(S=0;S<M;S++){var T=_[S],k=C[S];T?T.__zrText!==k&&(T.innerHTML="",T.appendChild(document.createTextNode(k))):(T=_[S]=jD("tspan"),a.appendChild(T),T.appendChild(document.createTextNode(k))),gP(T,m,y,x+S*f)}if(M<w){for(;S<w;S++)a.removeChild(_[S]);_.length=M}}}};function gP(t,e,n,i){rP(t,"dominant-baseline","middle"),rP(t,"text-anchor",fP[e]),rP(t,"x",n),rP(t,"y",i)}function mP(t){t&&t.__textSvgEl&&(t.__textSvgEl.parentNode&&t.__textSvgEl.parentNode.removeChild(t.__textSvgEl),t.__textSvgEl=null,t.__tspanList=[],t.__text=null)}function vP(){}function yP(t,e){for(var n=0,i=e.length,o=0,r=0;n<i;n++){var a=e[n];if(a.removed){for(s=[],l=r;l<r+a.count;l++)s.push(l);a.indices=s,r+=a.count}else{for(var s=[],l=o;l<o+a.count;l++)s.push(l);a.indices=s,o+=a.count,a.added||(r+=a.count)}}return e}cP.drawRectText=pP,cP.brush=function(t){null!=t.style.text?pP(t,!1):mP(t)},vP.prototype={diff:function(t,e,n){this.equals=n=n||function(t,e){return t===e};var i=this;t=t.slice();var o=(e=e.slice()).length,r=t.length,a=1,s=o+r,l=[{newPos:-1,components:[]}],c=this.extractCommon(l[0],e,t,0);if(l[0].newPos+1>=o&&r<=c+1){for(var u=[],d=0;d<e.length;d++)u.push(d);return[{indices:u,count:e.length}]}function h(){for(var n=-1*a;n<=a;n+=2){var s,c=l[n-1],u=l[n+1],d=(u?u.newPos:0)-n;c&&(l[n-1]=void 0);var h=c&&c.newPos+1<o,f=u&&0<=d&&d<r;if(h||f){if(!h||f&&c.newPos<u.newPos?(s={newPos:(p=u).newPos,components:p.components.slice(0)},i.pushComponent(s.components,void 0,!0)):((s=c).newPos++,i.pushComponent(s.components,!0,void 0)),d=i.extractCommon(s,e,t,n),s.newPos+1>=o&&r<=d+1)return yP(0,s.components);l[n]=s}else l[n]=void 0}var p;a++}for(;a<=s;){var f=h();if(f)return f}},pushComponent:function(t,e,n){var i=t[t.length-1];i&&i.added===e&&i.removed===n?t[t.length-1]={count:i.count+1,added:e,removed:n}:t.push({count:1,added:e,removed:n})},extractCommon:function(t,e,n,i){for(var o=e.length,r=n.length,a=t.newPos,s=a-i,l=0;a+1<o&&s+1<r&&this.equals(e[a+1],n[s+1]);)a++,s++,l++;return l&&t.components.push({count:l}),t.newPos=a,s},tokenize:function(t){return t.slice()},join:function(t){return t.slice()}};var xP=new vP;function bP(t,e,n,i,o){this._zrId=t,this._svgRoot=e,this._tagNames="string"==typeof n?[n]:n,this._markLabel=i,this._domName=o||"_dom",this.nextId=0}function _P(t,e){bP.call(this,t,e,["linearGradient","radialGradient"],"__gradient_in_use__")}function wP(t,e){bP.call(this,t,e,"clipPath","__clippath_in_use__")}function SP(t,e){bP.call(this,t,e,["filter"],"__filter_in_use__","_shadowDom")}function CP(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY||t.textShadowBlur||t.textShadowOffsetX||t.textShadowOffsetY)}function MP(t){return parseInt(t,10)}function TP(t,e){return e&&t&&e.parentNode!==t}function kP(t,e,n){if(TP(t,e)&&n){var i=n.nextSibling;i?t.insertBefore(e,i):t.appendChild(e)}}function AP(t,e){if(TP(t,e)){var n=t.firstChild;n?t.insertBefore(e,n):t.appendChild(e)}}function IP(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)}function DP(t){return t.__textSvgEl}function PP(t){return t.__svgEl}function EP(t,e,n,i){this.root=t,this.storage=e,this._opts=n=x({},n||{});var o=jD("svg");o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("version","1.1"),o.setAttribute("baseProfile","full"),o.style.cssText="user-select:none;position:absolute;left:0;top:0;";var r=jD("g");o.appendChild(r);var a=jD("g");o.appendChild(a),this.gradientManager=new _P(i,a),this.clipPathManager=new wP(i,a),this.shadowManager=new SP(i,a);var s=document.createElement("div");s.style.cssText="overflow:hidden;position:relative",this._svgDom=o,this._svgRoot=a,this._backgroundRoot=r,this._viewport=s,t.appendChild(s),s.appendChild(o),this.resize(n.width,n.height),this._visibleList=[]}bP.prototype.createElement=jD,bP.prototype.getDefs=function(t){var e=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");return 0===n.length?t?((n=e.insertBefore(this.createElement("defs"),e.firstChild)).contains||(n.contains=function(t){var e=n.children;if(!e)return!1;for(var i=e.length-1;0<=i;--i)if(e[i]===t)return!0;return!1}),n):null:n[0]},bP.prototype.update=function(t,e){if(t){var n=this.getDefs(!1);if(t[this._domName]&&n.contains(t[this._domName]))"function"==typeof e&&e(t);else{var i=this.add(t);i&&(t[this._domName]=i)}}},bP.prototype.addDom=function(t){this.getDefs(!0).appendChild(t)},bP.prototype.removeDom=function(t){var e=this.getDefs(!1);e&&t[this._domName]&&(e.removeChild(t[this._domName]),t[this._domName]=null)},bP.prototype.getDoms=function(){var t=this.getDefs(!1);if(!t)return[];var e=[];return k(this._tagNames,function(n){var i=t.getElementsByTagName(n);e=e.concat([].slice.call(i))}),e},bP.prototype.markAllUnused=function(){var t=this.getDoms(),e=this;k(t,function(t){t[e._markLabel]="0"})},bP.prototype.markUsed=function(t){t&&(t[this._markLabel]="1")},bP.prototype.removeUnused=function(){var t=this.getDefs(!1);if(t){var e=this.getDoms(),n=this;k(e,function(e){"1"!==e[n._markLabel]&&t.removeChild(e)})}},bP.prototype.getSvgProxy=function(t){return t instanceof fa?sP:t instanceof Wi?lP:t instanceof Da?cP:sP},bP.prototype.getTextSvgElement=function(t){return t.__textSvgEl},bP.prototype.getSvgElement=function(t){return t.__svgEl},C(_P,bP),_P.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var n=this;k(["fill","stroke"],function(i){if(e.style[i]&&("linear"===e.style[i].type||"radial"===e.style[i].type)){var o,r=e.style[i],a=n.getDefs(!0);r._dom?(o=r._dom,a.contains(r._dom)||n.addDom(o)):o=n.add(r),n.markUsed(e);var s=o.getAttribute("id");t.setAttribute(i,"url(#"+s+")")}})}},_P.prototype.add=function(t){var e;if("linear"===t.type)e=this.createElement("linearGradient");else{if("radial"!==t.type)return null;e=this.createElement("radialGradient")}return t.id=t.id||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-gradient-"+t.id),this.updateDom(t,e),this.addDom(e),e},_P.prototype.update=function(t){var e=this;bP.prototype.update.call(this,t,function(){var n=t.type,i=t._dom.tagName;"linear"===n&&"linearGradient"===i||"radial"===n&&"radialGradient"===i?e.updateDom(t,t._dom):(e.removeDom(t),e.add(t))})},_P.prototype.updateDom=function(t,e){if("linear"===t.type)e.setAttribute("x1",t.x),e.setAttribute("y1",t.y),e.setAttribute("x2",t.x2),e.setAttribute("y2",t.y2);else{if("radial"!==t.type)return;e.setAttribute("cx",t.x),e.setAttribute("cy",t.y),e.setAttribute("r",t.r)}e.setAttribute("gradientUnits",t.global?"userSpaceOnUse":"objectBoundingBox"),e.innerHTML="";for(var n=t.colorStops,i=0,o=n.length;i<o;++i){var r=this.createElement("stop");r.setAttribute("offset",100*n[i].offset+"%");var a=n[i].color;if(-1<a.indexOf("rgba")){var s=Ve(a)[3],l=We(a);r.setAttribute("stop-color","#"+l),r.setAttribute("stop-opacity",s)}else r.setAttribute("stop-color",n[i].color);e.appendChild(r)}t._dom=e},_P.prototype.markUsed=function(t){if(t.style){var e=t.style.fill;e&&e._dom&&bP.prototype.markUsed.call(this,e._dom),(e=t.style.stroke)&&e._dom&&bP.prototype.markUsed.call(this,e._dom)}},C(wP,bP),wP.prototype.update=function(t){var e=this.getSvgElement(t);e&&this.updateDom(e,t.__clipPaths,!1);var n=this.getTextSvgElement(t);n&&this.updateDom(n,t.__clipPaths,!0),this.markUsed(t)},wP.prototype.updateDom=function(t,e,n){if(e&&0<e.length){var i,o,r=this.getDefs(!0),a=e[0],s=n?"_textDom":"_dom";a[s]?(o=a[s].getAttribute("id"),r.contains(i=a[s])||r.appendChild(i)):(o="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(i=this.createElement("clipPath")).setAttribute("id",o),r.appendChild(i),a[s]=i);var l=this.getSvgProxy(a);if(a.transform&&a.parent.invTransform&&!n){var c=Array.prototype.slice.call(a.transform);ae(a.transform,a.parent.invTransform,a.transform),l.brush(a),a.transform=c}else l.brush(a);var u=this.getSvgElement(a);i.innerHTML="",i.appendChild(u.cloneNode()),t.setAttribute("clip-path","url(#"+o+")"),1<e.length&&this.updateDom(i,e.slice(1),n)}else t&&t.setAttribute("clip-path","none")},wP.prototype.markUsed=function(t){var e=this;t.__clipPaths&&k(t.__clipPaths,function(t){t._dom&&bP.prototype.markUsed.call(e,t._dom),t._textDom&&bP.prototype.markUsed.call(e,t._textDom)})},C(SP,bP),SP.prototype.addWithoutUpdate=function(t,e){if(e&&CP(e.style)){var n;e._shadowDom?(n=e._shadowDom,this.getDefs(!0).contains(e._shadowDom)||this.addDom(n)):n=this.add(e),this.markUsed(e);var i=n.getAttribute("id");t.style.filter="url(#"+i+")"}},SP.prototype.add=function(t){var e=this.createElement("filter");return t._shadowDomId=t._shadowDomId||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-shadow-"+t._shadowDomId),this.updateDom(t,e),this.addDom(e),e},SP.prototype.update=function(t,e){if(CP(e.style)){var n=this;bP.prototype.update.call(this,e,function(){n.updateDom(e,e._shadowDom)})}else this.remove(t,e)},SP.prototype.remove=function(t,e){null!=e._shadowDomId&&(this.removeDom(t),t.style.filter="")},SP.prototype.updateDom=function(t,e){var n=e.getElementsByTagName("feDropShadow");n=0===n.length?this.createElement("feDropShadow"):n[0];var i,o,r,a,s=t.style,l=t.scale&&t.scale[0]||1,c=t.scale&&t.scale[1]||1;if(s.shadowBlur||s.shadowOffsetX||s.shadowOffsetY)i=s.shadowOffsetX||0,o=s.shadowOffsetY||0,r=s.shadowBlur,a=s.shadowColor;else{if(!s.textShadowBlur)return void this.removeDom(e,s);i=s.textShadowOffsetX||0,o=s.textShadowOffsetY||0,r=s.textShadowBlur,a=s.textShadowColor}n.setAttribute("dx",i/l),n.setAttribute("dy",o/c),n.setAttribute("flood-color",a),n.setAttribute("stdDeviation",r/2/l+" "+r/2/c),e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width",Math.ceil(r/2*200)+"%"),e.setAttribute("height",Math.ceil(r/2*200)+"%"),e.appendChild(n),t._shadowDom=e},SP.prototype.markUsed=function(t){t._shadowDom&&bP.prototype.markUsed.call(this,t._shadowDom)},EP.prototype={constructor:EP,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getSvgDom:function(){return this._svgDom},getSvgRoot:function(){return this._svgRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0);this._paintList(t)},setBackgroundColor:function(t){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var e=jD("rect");e.setAttribute("width",this.getWidth()),e.setAttribute("height",this.getHeight()),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("id",0),e.style.fill=t,this._backgroundRoot.appendChild(e),this._backgroundNode=e},_paintList:function(t){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var e,n,i=this._svgRoot,o=this._visibleList,r=t.length,a=[];for(e=0;e<r;e++){var s=t[e],l=(n=s)instanceof fa?sP:n instanceof Wi?lP:n instanceof Da?cP:sP,c=PP(s)||DP(s);s.invisible||(s.__dirty&&(l&&l.brush(s),this.clipPathManager.update(s),s.style&&(this.gradientManager.update(s.style.fill),this.gradientManager.update(s.style.stroke),this.shadowManager.update(c,s)),s.__dirty=!1),a.push(s))}var u,d=function(t,e,n){return xP.diff(t,e,void 0)}(o,a);for(e=0;e<d.length;e++)if((p=d[e]).removed)for(var h=0;h<p.count;h++){c=PP(s=o[p.indices[h]]);var f=DP(s);IP(i,c),IP(i,f)}for(e=0;e<d.length;e++){var p;if((p=d[e]).added)for(h=0;h<p.count;h++)c=PP(s=a[p.indices[h]]),f=DP(s),u?kP(i,c,u):AP(i,c),c?kP(i,f,c):u?kP(i,f,u):AP(i,f),kP(i,f,c),u=f||c||u,this.gradientManager.addWithoutUpdate(c||f,s),this.shadowManager.addWithoutUpdate(c||f,s),this.clipPathManager.markUsed(s);else if(!p.removed)for(h=0;h<p.count;h++)c=PP(s=a[p.indices[h]]),f=DP(s),c=PP(s),f=DP(s),this.gradientManager.markUsed(s),this.gradientManager.addWithoutUpdate(c||f,s),this.shadowManager.markUsed(s),this.shadowManager.addWithoutUpdate(c||f,s),this.clipPathManager.markUsed(s),f&&kP(i,f,c),u=c||f||u}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=a},_getDefs:function(t){var e,n=this._svgDom;return 0!==(e=n.getElementsByTagName("defs")).length?e[0]:t?((e=n.insertBefore(jD("defs"),n.firstChild)).contains||(e.contains=function(t){var n=e.children;if(!n)return!1;for(var i=n.length-1;0<=i;--i)if(n[i]===t)return!0;return!1}),e):null},resize:function(t,e){var n=this._viewport;n.style.display="none";var i=this._opts;if(null!=t&&(i.width=t),null!=e&&(i.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||this._height!==e){this._width=t,this._height=e;var o=n.style;o.width=t+"px",o.height=e+"px";var r=this._svgDom;r.setAttribute("width",t),r.setAttribute("height",e)}this._backgroundNode&&(this._backgroundNode.setAttribute("width",t),this._backgroundNode.setAttribute("height",e))},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],i=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],r=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var a=this.root,s=document.defaultView.getComputedStyle(a);return(a[i]||MP(s[n])||MP(a.style[n]))-(MP(s[o])||0)-(MP(s[r])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},toDataURL:function(){return this.refresh(),"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(this._svgDom.outerHTML.replace(/></g,">\n\r<"))}},k(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","pathToImage"],function(t){EP.prototype[t]=function(){}}),bo("svg",EP),t.version="4.9.0",t.dependencies={zrender:"4.3.2"},t.PRIORITY=dh,t.init=function(t,e,n){var i=Zh(t);if(i)return i;var o=new vh(t,e,n);return o.id="ec_"+jh++,Gh[o.id]=o,Fo(t,qh,o.id),function(t){var e="__connectUpdateStatus";function n(t,n){for(var i=0;i<t.length;i++)t[i][e]=n}sh(Oh,function(i,o){t._messageCenter.on(o,function(i){if(Uh[t.group]&&0!==t[e]){if(i&&i.escapeConnect)return;var o=t.makeActionFromEvent(i),r=[];sh(Gh,function(e){e!==t&&e.group===t.group&&r.push(e)}),n(r,0),sh(r,function(t){1!==t[e]&&t.dispatchAction(o)}),n(r,2)}})})}(o),o},t.connect=function(t){if(L(t)){var e=t;t=null,sh(e,function(e){null!=e.group&&(t=e.group)}),t=t||"g_"+$h++,sh(e,function(e){e.group=t})}return Uh[t]=!0,t},t.disConnect=Yh,t.disconnect=Xh,t.dispose=function(t){"string"==typeof t?t=Gh[t]:t instanceof vh||(t=Zh(t)),t instanceof vh&&!t.isDisposed()&&t.dispose()},t.getInstanceByDom=Zh,t.getInstanceById=function(t){return Gh[t]},t.registerTheme=Kh,t.registerPreprocessor=Jh,t.registerProcessor=Qh,t.registerPostUpdate=function(t){Vh.push(t)},t.registerAction=tf,t.registerCoordinateSystem=ef,t.getCoordinateSystemDimensions=function(t){var e=jc.get(t);if(e)return e.getDimensionsInfo?e.getDimensionsInfo():e.dimensions.slice()},t.registerLayout=nf,t.registerVisual=of,t.registerLoading=af,t.extendComponentModel=sf,t.extendComponentView=lf,t.extendSeriesModel=cf,t.extendChartView=uf,t.setCanvasCreator=function(t){g("createCanvas",t)},t.registerMap=function(t,e,n){!function(t,e,n){var i;k(i=L(e)?e:e.svg?[{type:"svg",source:e.svg,specialAreas:e.specialAreas}]:(e.geoJson&&!e.features&&(n=e.specialAreas,e=e.geoJson),[{type:"geoJSON",source:e,specialAreas:n}]),function(t){var e=t.type;"geoJson"===e&&(e=t.type="geoJSON"),(0,rh[e])(t)}),ih.set(t,i)}(t,e,n)},t.getMap=function(t){var e=oh(t);return e&&e[0]&&{geoJson:e[0].geoJSON,specialAreas:e[0].specialAreas}},t.dataTool={},t.zrender=wo,t.number=Bl,t.format=tc,t.throttle=hd,t.helper=ng,t.matrix=he,t.vector=St,t.color=Ye,t.parseGeoJSON=sg,t.parseGeoJson=yg,t.util=xg,t.graphic=bg,t.List=Af,t.Model=fl,t.Axis=mg,t.env=o}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("echarts")):"function"==typeof define&&define.amd?define(["exports","echarts"],e):e(t.bmap={},t.echarts)}(this,function(t,e){"use strict";function n(t,e){this._bmap=t,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=e,this._projection=new BMap.MercatorProjection}function i(t,n){return n=n||[0,0],e.util.map([0,1],function(e){var i=n[e],o=t[e]/2,r=[],a=[];return r[e]=i-o,a[e]=i+o,r[1-e]=a[1-e]=n[1-e],Math.abs(this.dataToPoint(r)[e]-this.dataToPoint(a)[e])},this)}var o;function r(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}n.prototype.dimensions=["lng","lat"],n.prototype.setZoom=function(t){this._zoom=t},n.prototype.setCenter=function(t){this._center=this._projection.lngLatToPoint(new BMap.Point(t[0],t[1]))},n.prototype.setMapOffset=function(t){this._mapOffset=t},n.prototype.getBMap=function(){return this._bmap},n.prototype.dataToPoint=function(t){var e=new BMap.Point(t[0],t[1]),n=this._bmap.pointToOverlayPixel(e),i=this._mapOffset;return[n.x-i[0],n.y-i[1]]},n.prototype.pointToData=function(t){var e=this._mapOffset;return[(t=this._bmap.overlayPixelToPoint({x:t[0]+e[0],y:t[1]+e[1]})).lng,t.lat]},n.prototype.getViewRect=function(){var t=this._api;return new e.graphic.BoundingRect(0,0,t.getWidth(),t.getHeight())},n.prototype.getRoamTransform=function(){return e.matrix.create()},n.prototype.prepareCustoms=function(t){var n=this.getViewRect();return{coordSys:{type:"bmap",x:n.x,y:n.y,width:n.width,height:n.height},api:{coord:e.util.bind(this.dataToPoint,this),size:e.util.bind(i,this)}}},n.dimensions=n.prototype.dimensions,n.create=function(t,e){var i,r=e.getDom();t.eachComponent("bmap",function(t){var a=e.getZr().painter,s=a.getViewportRoot();if("undefined"==typeof BMap)throw new Error("BMap api is not loaded");if(o=o||function(){function t(t){this._root=t}return(t.prototype=new BMap.Overlay).initialize=function(t){return t.getPanes().labelPane.appendChild(this._root),this._root},t.prototype.draw=function(){},t}(),i)throw new Error("Only one bmap component can exist");if(!t.__bmap){var l=r.querySelector(".ec-extension-bmap");l&&(s.style.left="0px",s.style.top="0px",r.removeChild(l)),(l=document.createElement("div")).style.cssText="width:100%;height:100%",l.classList.add("ec-extension-bmap"),r.appendChild(l);var c=t.get("mapOptions")||{};delete c.mapType;var u=t.__bmap=new BMap.Map(l,c),d=new o(s);u.addOverlay(d),a.getViewportRootOffset=function(){return{offsetLeft:0,offsetTop:0}}}u=t.__bmap;var h=t.get("center"),f=t.get("zoom");if(h&&f){var p=u.getCenter(),g=u.getZoom();if(t.centerOrZoomChanged([p.lng,p.lat],g)){var m=new BMap.Point(h[0],h[1]);u.centerAndZoom(m,f)}}(i=new n(u,e)).setMapOffset(t.__mapOffset||[0,0]),i.setZoom(f),i.setCenter(h),t.coordinateSystem=i}),t.eachSeries(function(t){"bmap"===t.get("coordinateSystem")&&(t.coordinateSystem=i)})},e.extendComponentModel({type:"bmap",getBMap:function(){return this.__bmap},setCenterAndZoom:function(t,e){this.option.center=t,this.option.zoom=e},centerOrZoomChanged:function(t,e){var n=this.option;return!(function(t,e){return t&&e&&t[0]===e[0]&&t[1]===e[1]}(t,n.center)&&e===n.zoom)},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},mapStyleV2:{},mapOptions:{},roam:!1}}),e.extendComponentView({type:"bmap",render:function(t,n,i){function o(e,n){if(!a){var o=l.parentNode.parentNode.parentNode,r=[-parseInt(o.style.left,10)||0,-parseInt(o.style.top,10)||0];l.style.left=r[0]+"px",l.style.top=r[1]+"px",c.setMapOffset(r),t.__mapOffset=r,i.dispatchAction({type:"bmapRoam"})}}var a=!0,s=t.getBMap(),l=i.getZr().painter.getViewportRoot(),c=t.coordinateSystem;function u(){a||i.dispatchAction({type:"bmapRoam"})}s.removeEventListener("moving",this._oldMoveHandler),s.removeEventListener("moveend",this._oldMoveHandler),s.removeEventListener("zoomend",this._oldZoomEndHandler),s.addEventListener("moving",o),s.addEventListener("moveend",o),s.addEventListener("zoomend",u),this._oldMoveHandler=o,this._oldZoomEndHandler=u;var d=t.get("roam");d&&"scale"!==d?s.enableDragging():s.disableDragging(),d&&"move"!==d?(s.enableScrollWheelZoom(),s.enableDoubleClickZoom(),s.enablePinchToZoom()):(s.disableScrollWheelZoom(),s.disableDoubleClickZoom(),s.disablePinchToZoom());var h=t.__mapStyle,f=t.get("mapStyle")||{},p=JSON.stringify(f);JSON.stringify(h)!==p&&(r(m)||s.setMapStyle(e.util.clone(f)),t.__mapStyle=JSON.parse(p));var g=t.__mapStyle2,m=t.get("mapStyleV2")||{},v=JSON.stringify(m);JSON.stringify(g)!==v&&(r(m)||s.setMapStyleV2(e.util.clone(m)),t.__mapStyle2=JSON.parse(v)),a=!1}}),e.registerCoordinateSystem("bmap",n),e.registerAction({type:"bmapRoam",event:"bmapRoam",update:"updateLayout"},function(t,e){e.eachComponent("bmap",function(t){var e=t.getBMap(),n=e.getCenter();t.setCenterAndZoom([n.lng,n.lat],e.getZoom())})}),t.version="1.0.0"}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Chart=e()}(this,function(){"use strict";function t(){}const e=function(){let t=0;return function(){return t++}}();function n(t){return null==t}function i(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function o(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}const r=t=>("number"==typeof t||t instanceof Number)&&isFinite(+t);function a(t,e){return r(t)?t:e}function s(t,e){return void 0===t?e:t}const l=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100:t/e,c=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function u(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function d(t,e,n,r){let a,s,l;if(i(t))if(s=t.length,r)for(a=s-1;a>=0;a--)e.call(n,t[a],a);else for(a=0;a<s;a++)e.call(n,t[a],a);else if(o(t))for(l=Object.keys(t),s=l.length,a=0;a<s;a++)e.call(n,t[l[a]],l[a])}function h(t,e){let n,i,o,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(o=t[n],r=e[n],o.datasetIndex!==r.datasetIndex||o.index!==r.index)return!1;return!0}function f(t){if(i(t))return t.map(f);if(o(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let o=0;for(;o<i;++o)e[n[o]]=f(t[n[o]]);return e}return t}function p(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function g(t,e,n,i){if(!p(t))return;const r=e[t],a=n[t];o(r)&&o(a)?m(r,a,i):e[t]=f(a)}function m(t,e,n){const r=i(e)?e:[e],a=r.length;if(!o(t))return t;const s=(n=n||{}).merger||g;for(let i=0;i<a;++i){if(!o(e=r[i]))continue;const a=Object.keys(e);for(let i=0,o=a.length;i<o;++i)s(a[i],t,e,n)}return t}function v(t,e){return m(t,e,{merger:y})}function y(t,e,n){if(!p(t))return;const i=e[t],r=n[t];o(i)&&o(r)?v(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=f(r))}const x={"":t=>t,x:t=>t.x,y:t=>t.y};function b(t,e){return(x[e]||(x[e]=function(t){const e=_(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e)))(t)}function _(t){const e=t.split("."),n=[];let i="";for(const o of e)i+=o,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function w(t){return t.charAt(0).toUpperCase()+t.slice(1)}const S=t=>void 0!==t,C=t=>"function"==typeof t,M=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function T(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}const k=Math.PI,A=2*k,I=A+k,D=Number.POSITIVE_INFINITY,P=k/180,E=k/2,N=k/4,L=2*k/3,R=Math.log10,O=Math.sign;function B(t){const e=Math.round(t);t=F(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(R(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function z(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i==0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort((t,e)=>t-e).pop(),e}function V(t){return!isNaN(parseFloat(t))&&isFinite(t)}function F(t,e,n){return Math.abs(t-e)<n}function H(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function W(t,e,n){let i,o,r;for(i=0,o=t.length;i<o;i++)r=t[i][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function G(t){return t*(k/180)}function U(t){return t*(180/k)}function j(t){if(!r(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function $(t,e){const n=e.x-t.x,i=e.y-t.y,o=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*k&&(r+=A),{angle:r,distance:o}}function q(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Y(t,e){return(t-e+I)%A-k}function X(t){return(t%A+A)%A}function Z(t,e,n,i){const o=X(t),r=X(e),a=X(n),s=X(r-o),l=X(a-o),c=X(o-r),u=X(o-a);return o===r||o===a||i&&r===a||s>l&&c<u}function K(t,e,n){return Math.max(e,Math.min(n,t))}function J(t){return K(t,-32768,32767)}function Q(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function tt(t,e,n){n=n||(n=>t[n]<e);let i,o=t.length-1,r=0;for(;o-r>1;)i=r+o>>1,n(i)?r=i:o=i;return{lo:r,hi:o}}const et=(t,e,n,i)=>tt(t,n,i?i=>t[i][e]<=n:i=>t[i][e]<n),nt=(t,e,n)=>tt(t,n,i=>t[i][e]>=n);function it(t,e,n){let i=0,o=t.length;for(;i<o&&t[i]<e;)i++;for(;o>i&&t[o-1]>n;)o--;return i>0||o<t.length?t.slice(i,o):t}const ot=["push","pop","shift","splice","unshift"];function rt(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ot.forEach(e=>{const n="_onData"+w(e),i=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(...e){const o=i.apply(this,e);return t._chartjs.listeners.forEach(t=>{"function"==typeof t[n]&&t[n](...e)}),o}})}))}function at(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,o=i.indexOf(e);-1!==o&&i.splice(o,1),i.length>0||(ot.forEach(e=>{delete t[e]}),delete t._chartjs)}function st(t){const e=new Set;let n,i;for(n=0,i=t.length;n<i;++n)e.add(t[n]);return e.size===i?t:Array.from(e)}const lt="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function ct(t,e,n){const i=n||(t=>Array.prototype.slice.call(t));let o=!1,r=[];return function(...n){r=i(n),o||(o=!0,lt.call(window,()=>{o=!1,t.apply(e,r)}))}}function ut(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const dt=t=>"start"===t?"left":"end"===t?"right":"center",ht=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2,ft=(t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e;function pt(t,e,n){const i=e.length;let o=0,r=i;if(t._sorted){const{iScale:a,_parsed:s}=t,l=a.axis,{min:c,max:u,minDefined:d,maxDefined:h}=a.getUserBounds();d&&(o=K(Math.min(et(s,a.axis,c).lo,n?i:et(e,l,a.getPixelForValue(c)).lo),0,i-1)),r=h?K(Math.max(et(s,a.axis,u,!0).hi+1,n?0:et(e,l,a.getPixelForValue(u),!0).hi+1),o,i)-o:i-o}return{start:o,count:r}}function gt(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,o={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=o,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,o),r}var mt=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const o=e.duration;e.listeners[i].forEach(i=>i({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=lt.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const o=n.items;let r,a=o.length-1,s=!1;for(;a>=0;--a)r=o[a],r._active?(r._total>n.duration&&(n.duration=r._total),r.tick(t),s=!0):(o[a]=o[o.length-1],o.pop());s&&(i.draw(),this._notify(i,n,t,"progress")),o.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=o.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};function vt(t){return t+.5|0}const yt=(t,e,n)=>Math.max(Math.min(t,n),e);function xt(t){return yt(vt(2.55*t),0,255)}function bt(t){return yt(vt(255*t),0,255)}function _t(t){return yt(vt(t/2.55)/100,0,1)}function wt(t){return yt(vt(100*t),0,100)}const St={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ct=[..."0123456789ABCDEF"],Mt=t=>Ct[15&t],Tt=t=>Ct[(240&t)>>4]+Ct[15&t],kt=t=>(240&t)>>4==(15&t),At=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function It(t,e,n){const i=e*Math.min(n,1-n),o=(e,o=(e+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[o(0),o(8),o(4)]}function Dt(t,e,n){const i=(i,o=(i+t/60)%6)=>n-n*e*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function Pt(t,e,n){const i=It(t,1,.5);let o;for(e+n>1&&(o=1/(e+n),e*=o,n*=o),o=0;o<3;o++)i[o]*=1-e-n,i[o]+=e;return i}function Et(t){const e=t.r/255,n=t.g/255,i=t.b/255,o=Math.max(e,n,i),r=Math.min(e,n,i),a=(o+r)/2;let s,l,c;return o!==r&&(c=o-r,l=a>.5?c/(2-o-r):c/(o+r),s=function(t,e,n,i,o){return t===o?(e-n)/i+(e<n?6:0):e===o?(n-t)/i+2:(t-e)/i+4}(e,n,i,c,o),s=60*s+.5),[0|s,l||0,a]}function Nt(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(bt)}function Lt(t,e,n){return Nt(It,t,e,n)}function Rt(t){return(t%360+360)%360}const Ot={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Bt={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let zt;const Vt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,Ft=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,Ht=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Wt(t,e,n){if(t){let i=Et(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=Lt(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Gt(t,e){return t?Object.assign(e||{},t):t}function Ut(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=bt(t[3]))):(e=Gt(t,{r:0,g:0,b:0,a:1})).a=bt(e.a),e}class jt{constructor(t){if(t instanceof jt)return t;const e=typeof t;let n;var i,o,r;"object"===e?n=Ut(t):"string"===e&&(r=(i=t).length,"#"===i[0]&&(4===r||5===r?o={r:255&17*St[i[1]],g:255&17*St[i[2]],b:255&17*St[i[3]],a:5===r?17*St[i[4]]:255}:7!==r&&9!==r||(o={r:St[i[1]]<<4|St[i[2]],g:St[i[3]]<<4|St[i[4]],b:St[i[5]]<<4|St[i[6]],a:9===r?St[i[7]]<<4|St[i[8]]:255})),n=o||function(t){zt||(zt=function(){const t={},e=Object.keys(Bt),n=Object.keys(Ot);let i,o,r,a,s;for(i=0;i<e.length;i++){for(a=s=e[i],o=0;o<n.length;o++)r=n[o],s=s.replace(r,Ot[r]);r=parseInt(Bt[a],16),t[s]=[r>>16&255,r>>8&255,255&r]}return t}(),zt.transparent=[0,0,0,0]);const e=zt[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(t)||function(t){return"r"===t.charAt(0)?function(t){const e=Vt.exec(t);let n,i,o,r=255;if(e){if(e[7]!==n){const t=+e[7];r=e[8]?xt(t):yt(255*t,0,255)}return n=+e[1],i=+e[3],o=+e[5],n=255&(e[2]?xt(n):yt(n,0,255)),i=255&(e[4]?xt(i):yt(i,0,255)),o=255&(e[6]?xt(o):yt(o,0,255)),{r:n,g:i,b:o,a:r}}}(t):function(t){const e=At.exec(t);let n,i=255;if(!e)return;e[5]!==n&&(i=e[6]?xt(+e[5]):bt(+e[5]));const o=Rt(+e[2]),r=+e[3]/100,a=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return Nt(Pt,t,e,n)}(o,r,a):"hsv"===e[1]?function(t,e,n){return Nt(Dt,t,e,n)}(o,r,a):Lt(o,r,a),{r:n[0],g:n[1],b:n[2],a:i}}(t)}(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Gt(this._rgb);return t&&(t.a=_t(t.a)),t}set rgb(t){this._rgb=Ut(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${_t(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?function(t){var e=(t=>kt(t.r)&&kt(t.g)&&kt(t.b)&&kt(t.a))(t)?Mt:Tt;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=Et(t),n=e[0],i=wt(e[1]),o=wt(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${o}%, ${_t(t.a)})`:`hsl(${n}, ${i}%, ${o}%)`}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,i=t.rgb;let o;const r=e===o?.5:e,a=2*r-1,s=n.a-i.a,l=((a*s==-1?a:(a+s)/(1+a*s))+1)/2;o=1-l,n.r=255&l*n.r+o*i.r+.5,n.g=255&l*n.g+o*i.g+.5,n.b=255&l*n.b+o*i.b+.5,n.a=r*n.a+(1-r)*i.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const i=Ht(_t(t.r)),o=Ht(_t(t.g)),r=Ht(_t(t.b));return{r:bt(Ft(i+n*(Ht(_t(e.r))-i))),g:bt(Ft(o+n*(Ht(_t(e.g))-o))),b:bt(Ft(r+n*(Ht(_t(e.b))-r))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new jt(this.rgb)}alpha(t){return this._rgb.a=bt(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=vt(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Wt(this._rgb,2,t),this}darken(t){return Wt(this._rgb,2,-t),this}saturate(t){return Wt(this._rgb,1,t),this}desaturate(t){return Wt(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=Et(t);n[0]=Rt(n[0]+e),n=Lt(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}function $t(t){return new jt(t)}function qt(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function Yt(t){return qt(t)?t:$t(t)}function Xt(t){return qt(t)?t:$t(t).saturate(.5).darken(.1).hexString()}const Zt=Object.create(null),Kt=Object.create(null);function Jt(t,e){if(!e)return t;const n=e.split(".");for(let i=0,o=n.length;i<o;++i){const e=n[i];t=t[e]||(t[e]=Object.create(null))}return t}function Qt(t,e,n){return"string"==typeof e?m(Jt(t,e),n):m(Jt(t,""),e)}var te=new class{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>Xt(e.backgroundColor),this.hoverBorderColor=(t,e)=>Xt(e.borderColor),this.hoverColor=(t,e)=>Xt(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return Qt(this,t,e)}get(t){return Jt(this,t)}describe(t,e){return Qt(Kt,t,e)}override(t,e){return Qt(Zt,t,e)}route(t,e,n,i){const r=Jt(this,t),a=Jt(this,n),l="_"+e;Object.defineProperties(r,{[l]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[l],e=a[i];return o(t)?Object.assign({},e,t):s(t,e)},set(t){this[l]=t}}})}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function ee(){return"undefined"!=typeof window&&"undefined"!=typeof document}function ne(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function ie(t,e,n){let i;return"string"==typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const oe=t=>window.getComputedStyle(t,null);function re(t,e){return oe(t).getPropertyValue(e)}const ae=["top","right","bottom","left"];function se(t,e,n){const i={};n=n?"-"+n:"";for(let o=0;o<4;o++){const r=ae[o];i[r]=parseFloat(t[e+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function le(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,o=oe(n),r="border-box"===o.boxSizing,a=se(o,"padding"),s=se(o,"border","width"),{x:l,y:c,box:u}=function(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:o,offsetY:r}=i;let a,s,l=!1;if(((t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot))(o,r,t.target))a=o,s=r;else{const t=e.getBoundingClientRect();a=i.clientX-t.left,s=i.clientY-t.top,l=!0}return{x:a,y:s,box:l}}(t,n),d=a.left+(u&&s.left),h=a.top+(u&&s.top);let{width:f,height:p}=e;return r&&(f-=a.width+s.width,p-=a.height+s.height),{x:Math.round((l-d)/f*n.width/i),y:Math.round((c-h)/p*n.height/i)}}const ce=t=>Math.round(10*t)/10;function ue(t,e,n,i){const o=oe(t),r=se(o,"margin"),a=ie(o.maxWidth,t,"clientWidth")||D,s=ie(o.maxHeight,t,"clientHeight")||D,l=function(t,e,n){let i,o;if(void 0===e||void 0===n){const r=ne(t);if(r){const t=r.getBoundingClientRect(),a=oe(r),s=se(a,"border","width"),l=se(a,"padding");e=t.width-l.width-s.width,n=t.height-l.height-s.height,i=ie(a.maxWidth,r,"clientWidth"),o=ie(a.maxHeight,r,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||D,maxHeight:o||D}}(t,e,n);let{width:c,height:u}=l;if("content-box"===o.boxSizing){const t=se(o,"border","width"),e=se(o,"padding");c-=e.width+t.width,u-=e.height+t.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?Math.floor(c/i):u-r.height),c=ce(Math.min(c,a,l.maxWidth)),u=ce(Math.min(u,s,l.maxHeight)),c&&!u&&(u=ce(c/2)),{width:c,height:u}}function de(t,e,n){const i=e||1,o=Math.floor(t.height*i),r=Math.floor(t.width*i);t.height=o/i,t.width=r/i;const a=t.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==i||a.height!==o||a.width!==r)&&(t.currentDevicePixelRatio=i,a.height=o,a.width=r,t.ctx.setTransform(i,0,0,i,0,0),!0)}const he=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function fe(t,e){const n=re(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function pe(t){return!t||n(t.size)||n(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function ge(t,e,n,i,o){let r=e[o];return r||(r=e[o]=t.measureText(o).width,n.push(o)),r>i&&(i=r),i}function me(t,e,n,o){let r=(o=o||{}).data=o.data||{},a=o.garbageCollect=o.garbageCollect||[];o.font!==e&&(r=o.data={},a=o.garbageCollect=[],o.font=e),t.save(),t.font=e;let s=0;const l=n.length;let c,u,d,h,f;for(c=0;c<l;c++)if(h=n[c],null!=h&&!0!==i(h))s=ge(t,r,a,s,h);else if(i(h))for(u=0,d=h.length;u<d;u++)f=h[u],null==f||i(f)||(s=ge(t,r,a,s,f));t.restore();const p=a.length/2;if(p>n.length){for(c=0;c<p;c++)delete r[a[c]];a.splice(0,p)}return s}function ve(t,e,n){const i=t.currentDevicePixelRatio,o=0!==n?Math.max(n/2,.5):0;return Math.round((e-o)*i)/i+o}function ye(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function xe(t,e,n,i){be(t,e,n,i,null)}function be(t,e,n,i,o){let r,a,s,l,c,u;const d=e.pointStyle,h=e.rotation,f=e.radius;let p=(h||0)*P;if(d&&"object"==typeof d&&(r=d.toString(),"[object HTMLImageElement]"===r||"[object HTMLCanvasElement]"===r))return t.save(),t.translate(n,i),t.rotate(p),t.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),void t.restore();if(!(isNaN(f)||f<=0)){switch(t.beginPath(),d){default:o?t.ellipse(n,i,o/2,f,0,0,A):t.arc(n,i,f,0,A),t.closePath();break;case"triangle":t.moveTo(n+Math.sin(p)*f,i-Math.cos(p)*f),p+=L,t.lineTo(n+Math.sin(p)*f,i-Math.cos(p)*f),p+=L,t.lineTo(n+Math.sin(p)*f,i-Math.cos(p)*f),t.closePath();break;case"rectRounded":c=.516*f,l=f-c,a=Math.cos(p+N)*l,s=Math.sin(p+N)*l,t.arc(n-a,i-s,c,p-k,p-E),t.arc(n+s,i-a,c,p-E,p),t.arc(n+a,i+s,c,p,p+E),t.arc(n-s,i+a,c,p+E,p+k),t.closePath();break;case"rect":if(!h){l=Math.SQRT1_2*f,u=o?o/2:l,t.rect(n-u,i-l,2*u,2*l);break}p+=N;case"rectRot":a=Math.cos(p)*f,s=Math.sin(p)*f,t.moveTo(n-a,i-s),t.lineTo(n+s,i-a),t.lineTo(n+a,i+s),t.lineTo(n-s,i+a),t.closePath();break;case"crossRot":p+=N;case"cross":a=Math.cos(p)*f,s=Math.sin(p)*f,t.moveTo(n-a,i-s),t.lineTo(n+a,i+s),t.moveTo(n+s,i-a),t.lineTo(n-s,i+a);break;case"star":a=Math.cos(p)*f,s=Math.sin(p)*f,t.moveTo(n-a,i-s),t.lineTo(n+a,i+s),t.moveTo(n+s,i-a),t.lineTo(n-s,i+a),p+=N,a=Math.cos(p)*f,s=Math.sin(p)*f,t.moveTo(n-a,i-s),t.lineTo(n+a,i+s),t.moveTo(n+s,i-a),t.lineTo(n-s,i+a);break;case"line":a=o?o/2:Math.cos(p)*f,s=Math.sin(p)*f,t.moveTo(n-a,i-s),t.lineTo(n+a,i+s);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(p)*f,i+Math.sin(p)*f)}t.fill(),e.borderWidth>0&&t.stroke()}}function _e(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function we(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Se(t){t.restore()}function Ce(t,e,n,i,o){if(!e)return t.lineTo(n.x,n.y);if("middle"===o){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else"after"===o!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Me(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Te(t,e,o,r,a,s={}){const l=i(e)?e:[e],c=s.strokeWidth>0&&""!==s.strokeColor;let u,d;for(t.save(),t.font=a.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),n(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,s),u=0;u<l.length;++u)d=l[u],c&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),n(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(d,o,r,s.maxWidth)),t.fillText(d,o,r,s.maxWidth),ke(t,o,r,d,s),r+=a.lineHeight;t.restore()}function ke(t,e,n,i,o){if(o.strikethrough||o.underline){const r=t.measureText(i),a=e-r.actualBoundingBoxLeft,s=e+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=o.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=o.decorationWidth||2,t.moveTo(a,u),t.lineTo(s,u),t.stroke()}}function Ae(t,e){const{x:n,y:i,w:o,h:r,radius:a}=e;t.arc(n+a.topLeft,i+a.topLeft,a.topLeft,-E,k,!0),t.lineTo(n,i+r-a.bottomLeft),t.arc(n+a.bottomLeft,i+r-a.bottomLeft,a.bottomLeft,k,E,!0),t.lineTo(n+o-a.bottomRight,i+r),t.arc(n+o-a.bottomRight,i+r-a.bottomRight,a.bottomRight,E,0,!0),t.lineTo(n+o,i+a.topRight),t.arc(n+o-a.topRight,i+a.topRight,a.topRight,0,-E,!0),t.lineTo(n+a.topLeft,i)}function Ie(t,e=[""],n=t,i,o=(()=>t[0])){S(i)||(i=Fe("_fallback",t));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:i,_getTarget:o,override:o=>Ie([o,...t],e,n,i)};return new Proxy(r,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,i)=>Le(n,i,()=>function(t,e,n,i){let o;for(const r of e)if(o=Fe(Ee(r,t),n),S(o))return Ne(t,o)?ze(n,i,t,o):o}(i,e,t,n)),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>He(t).includes(e),ownKeys:t=>He(t),set(t,e,n){const i=t._storage||(t._storage=o());return t[e]=i[e]=n,delete t._keys,!0}})}function De(t,e,n,r){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Pe(t,r),setContext:e=>De(t,e,n,r),override:i=>De(t.override(i),e,n,r)};return new Proxy(a,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>Le(t,e,()=>function(t,e,n){const{_proxy:r,_context:a,_subProxy:s,_descriptors:l}=t;let c=r[e];return C(c)&&l.isScriptable(e)&&(c=function(t,e,n,i){const{_proxy:o,_context:r,_subProxy:a,_stack:s}=n;if(s.has(t))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+t);return s.add(t),e=e(r,a||i),s.delete(t),Ne(t,e)&&(e=ze(o._scopes,o,t,e)),e}(e,c,t,n)),i(c)&&c.length&&(c=function(t,e,n,i){const{_proxy:r,_context:a,_subProxy:s,_descriptors:l}=n;if(S(a.index)&&i(t))e=e[a.index%e.length];else if(o(e[0])){const n=e,i=r._scopes.filter(t=>t!==n);e=[];for(const o of n){const n=ze(i,r,t,o);e.push(De(n,a,s&&s[t],l))}}return e}(e,c,t,l.isIndexable)),Ne(e,c)&&(c=De(c,a,s&&s[e],l)),c}(t,e,n)),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,i)=>(t[n]=i,delete e[n],!0)})}function Pe(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:o=e.allKeys}=t;return{allKeys:o,scriptable:n,indexable:i,isScriptable:C(n)?n:()=>n,isIndexable:C(i)?i:()=>i}}const Ee=(t,e)=>t?t+w(e):e,Ne=(t,e)=>o(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Le(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function Re(t,e,n){return C(t)?t(e,n):t}const Oe=(t,e)=>!0===t?e:"string"==typeof t?b(e,t):void 0;function Be(t,e,n,i,o){for(const r of e){const e=Oe(n,r);if(e){t.add(e);const r=Re(e._fallback,n,o);if(S(r)&&r!==n&&r!==i)return r}else if(!1===e&&S(i)&&n!==i)return null}return!1}function ze(t,e,n,r){const a=e._rootScopes,s=Re(e._fallback,n,r),l=[...t,...a],c=new Set;c.add(r);let u=Ve(c,l,n,s||n,r);return null!==u&&(!S(s)||s===n||(u=Ve(c,l,s,u,r),null!==u))&&Ie(Array.from(c),[""],a,s,()=>function(t,e,n){const r=t._getTarget();e in r||(r[e]={});const a=r[e];return i(a)&&o(n)?n:a}(e,n,r))}function Ve(t,e,n,i,o){for(;n;)n=Be(t,e,n,i,o);return n}function Fe(t,e){for(const n of e){if(!n)continue;const e=n[t];if(S(e))return e}}function He(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter(t=>!t.startsWith("_")))e.add(t);return Array.from(e)}(t._scopes)),e}function We(t,e,n,i){const{iScale:o}=t,{key:r="r"}=this._parsing,a=new Array(i);let s,l,c,u;for(s=0,l=i;s<l;++s)c=s+n,u=e[c],a[s]={r:o.parse(b(u,r),c)};return a}const Ge=Number.EPSILON||1e-14,Ue=(t,e)=>e<t.length&&!t[e].skip&&t[e],je=t=>"x"===t?"y":"x";function $e(t,e,n,i){const o=t.skip?e:t,r=e,a=n.skip?e:n,s=q(r,o),l=q(a,r);let c=s/(s+l),u=l/(s+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=i*c,h=i*u;return{previous:{x:r.x-d*(a.x-o.x),y:r.y-d*(a.y-o.y)},next:{x:r.x+h*(a.x-o.x),y:r.y+h*(a.y-o.y)}}}function qe(t,e="x"){const n=je(e),i=t.length,o=Array(i).fill(0),r=Array(i);let a,s,l,c=Ue(t,0);for(a=0;a<i;++a)if(s=l,l=c,c=Ue(t,a+1),l){if(c){const t=c[e]-l[e];o[a]=0!==t?(c[n]-l[n])/t:0}r[a]=s?c?O(o[a-1])!==O(o[a])?0:(o[a-1]+o[a])/2:o[a-1]:o[a]}!function(t,e,n){const i=t.length;let o,r,a,s,l,c=Ue(t,0);for(let u=0;u<i-1;++u)l=c,c=Ue(t,u+1),l&&c&&(F(e[u],0,Ge)?n[u]=n[u+1]=0:(o=n[u]/e[u],r=n[u+1]/e[u],s=Math.pow(o,2)+Math.pow(r,2),s<=9||(a=3/Math.sqrt(s),n[u]=o*a*e[u],n[u+1]=r*a*e[u])))}(t,o,r),function(t,e,n="x"){const i=je(n),o=t.length;let r,a,s,l=Ue(t,0);for(let c=0;c<o;++c){if(a=s,s=l,l=Ue(t,c+1),!s)continue;const o=s[n],u=s[i];a&&(r=(o-a[n])/3,s[`cp1${n}`]=o-r,s[`cp1${i}`]=u-r*e[c]),l&&(r=(l[n]-o)/3,s[`cp2${n}`]=o+r,s[`cp2${i}`]=u+r*e[c])}}(t,r,e)}function Ye(t,e,n){return Math.max(Math.min(t,n),e)}function Xe(t,e,n,i,o){let r,a,s,l;if(e.spanGaps&&(t=t.filter(t=>!t.skip)),"monotone"===e.cubicInterpolationMode)qe(t,o);else{let n=i?t[t.length-1]:t[0];for(r=0,a=t.length;r<a;++r)s=t[r],l=$e(n,s,t[Math.min(r+1,a-(i?0:1))%a],e.tension),s.cp1x=l.previous.x,s.cp1y=l.previous.y,s.cp2x=l.next.x,s.cp2y=l.next.y,n=s}e.capBezierPoints&&function(t,e){let n,i,o,r,a,s=_e(t[0],e);for(n=0,i=t.length;n<i;++n)a=r,r=s,s=n<i-1&&_e(t[n+1],e),r&&(o=t[n],a&&(o.cp1x=Ye(o.cp1x,e.left,e.right),o.cp1y=Ye(o.cp1y,e.top,e.bottom)),s&&(o.cp2x=Ye(o.cp2x,e.left,e.right),o.cp2y=Ye(o.cp2y,e.top,e.bottom)))}(t,n)}const Ze=t=>0===t||1===t,Ke=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*A/n),Je=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*A/n)+1,Qe={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*E),easeOutSine:t=>Math.sin(t*E),easeInOutSine:t=>-.5*(Math.cos(k*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Ze(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ze(t)?t:Ke(t,.075,.3),easeOutElastic:t=>Ze(t)?t:Je(t,.075,.3),easeInOutElastic(t){const e=.1125;return Ze(t)?t:t<.5?.5*Ke(2*t,e,.45):.5+.5*Je(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-Qe.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*Qe.easeInBounce(2*t):.5*Qe.easeOutBounce(2*t-1)+.5};function tn(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function en(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function nn(t,e,n,i){const o={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},a=tn(t,o,n),s=tn(o,r,n),l=tn(r,e,n),c=tn(a,s,n),u=tn(s,l,n);return tn(c,u,n)}const on=new Map;function rn(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let i=on.get(n);return i||(i=new Intl.NumberFormat(t,e),on.set(n,i)),i}(e,n).format(t)}const an=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),sn=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function ln(t,e){const n=(""+t).match(an);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}function cn(t,e){const n={},i=o(e),r=i?Object.keys(e):e,a=o(t)?i?n=>s(t[n],t[e[n]]):e=>t[e]:()=>t;for(const o of r)n[o]=+a(o)||0;return n}function un(t){return cn(t,{top:"y",right:"x",bottom:"y",left:"x"})}function dn(t){return cn(t,["topLeft","topRight","bottomLeft","bottomRight"])}function hn(t){const e=un(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function fn(t,e){let n=s((t=t||{}).size,(e=e||te.font).size);"string"==typeof n&&(n=parseInt(n,10));let i=s(t.style,e.style);i&&!(""+i).match(sn)&&(console.warn('Invalid font style specified: "'+i+'"'),i="");const o={family:s(t.family,e.family),lineHeight:ln(s(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:s(t.weight,e.weight),string:""};return o.string=pe(o),o}function pn(t,e,n,o){let r,a,s,l=!0;for(r=0,a=t.length;r<a;++r)if(s=t[r],void 0!==s&&(void 0!==e&&"function"==typeof s&&(s=s(e),l=!1),void 0!==n&&i(s)&&(s=s[n%s.length],l=!1),void 0!==s))return o&&!l&&(o.cacheable=!1),s}function gn(t,e,n){const{min:i,max:o}=t,r=c(e,(o-i)/2),a=(t,e)=>n&&0===t?0:t+e;return{min:a(i,-Math.abs(r)),max:a(o,r)}}function mn(t,e){return Object.assign(Object.create(t),e)}function vn(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function yn(t,e){let n,i;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function xn(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function bn(t){return"angle"===t?{between:Z,compare:Y,normalize:X}:{between:Q,compare:(t,e)=>t-e,normalize:t=>t}}function _n({start:t,end:e,count:n,loop:i,style:o}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n==0,style:o}}function wn(t,e,n){if(!n)return[t];const{property:i,start:o,end:r}=n,a=e.length,{compare:s,between:l,normalize:c}=bn(i),{start:u,end:d,loop:h,style:f}=function(t,e,n){const{property:i,start:o,end:r}=n,{between:a,normalize:s}=bn(i),l=e.length;let c,u,{start:d,end:h,loop:f}=t;if(f){for(d+=l,h+=l,c=0,u=l;c<u&&a(s(e[d%l][i]),o,r);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:f,style:t.style}}(t,e,n),p=[];let g,m,v,y=!1,x=null;for(let b=u,_=u;b<=d;++b)m=e[b%a],m.skip||(g=c(m[i]),g!==v&&(y=l(g,o,r),null===x&&(y||l(o,v,g)&&0!==s(o,v))&&(x=0===s(g,o)?b:_),null!==x&&(!y||0===s(r,g)||l(r,v,g))&&(p.push(_n({start:x,end:b,loop:h,count:a,style:f})),x=null),_=b,v=g));return null!==x&&p.push(_n({start:x,end:d,loop:h,count:a,style:f})),p}function Sn(t,e){const n=[],i=t.segments;for(let o=0;o<i.length;o++){const r=wn(i[o],t.points,e);r.length&&n.push(...r)}return n}function Cn(t,e){const n=t.points,i=t.options.spanGaps,o=n.length;if(!o)return[];const r=!!t._loop,{start:a,end:s}=function(t,e,n,i){let o=0,r=e-1;if(n&&!i)for(;o<e&&!t[o].skip;)o++;for(;o<e&&t[o].skip;)o++;for(o%=e,n&&(r+=o);r>o&&t[r%e].skip;)r--;return r%=e,{start:o,end:r}}(n,o,r,i);return function(t,e,n,i){return i&&i.setContext&&n?function(t,e,n,i){const o=t._chart.getContext(),r=Mn(t.options),{_datasetIndex:a,options:{spanGaps:s}}=t,l=n.length,c=[];let u=r,d=e[0].start,h=d;function f(t,e,i,o){const r=s?-1:1;if(t!==e){for(t+=l;n[t%l].skip;)t-=r;for(;n[e%l].skip;)e+=r;t%l!=e%l&&(c.push({start:t%l,end:e%l,loop:i,style:o}),u=o,d=e%l)}}for(const p of e){d=s?d:p.start;let t,e=n[d%l];for(h=d+1;h<=p.end;h++){const r=n[h%l];t=Mn(i.setContext(mn(o,{type:"segment",p0:e,p1:r,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),Tn(t,u)&&f(d,h-1,p.loop,u),e=r,u=t}d<h-1&&f(d,h-1,p.loop,u)}return c}(t,e,n,i):e}(t,!0===i?[{start:a,end:s,loop:r}]:function(t,e,n,i){const o=t.length,r=[];let a,s=e,l=t[e];for(a=e+1;a<=n;++a){const n=t[a%o];n.skip||n.stop?l.skip||(r.push({start:e%o,end:(a-1)%o,loop:i=!1}),e=s=n.stop?a:null):(s=a,l.skip&&(e=a)),l=n}return null!==s&&r.push({start:e%o,end:s%o,loop:i}),r}(n,a,s<a?s+o:s,!!t._fullLoop&&0===a&&s===o-1),n,e)}function Mn(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Tn(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}var kn=Object.freeze({__proto__:null,easingEffects:Qe,isPatternOrGradient:qt,color:Yt,getHoverColor:Xt,noop:t,uid:e,isNullOrUndef:n,isArray:i,isObject:o,isFinite:r,finiteOrDefault:a,valueOrDefault:s,toPercentage:l,toDimension:c,callback:u,each:d,_elementsEqual:h,clone:f,_merger:g,merge:m,mergeIf:v,_mergerIf:y,_deprecated:function(t,e,n,i){void 0!==e&&console.warn(t+': "'+n+'" is deprecated. Please use "'+i+'" instead')},resolveObjectKey:b,_splitKey:_,_capitalize:w,defined:S,isFunction:C,setsEqual:M,_isClickEvent:T,toFontString:pe,_measureText:ge,_longestText:me,_alignPixel:ve,clearCanvas:ye,drawPoint:xe,drawPointLegend:be,_isPointInArea:_e,clipArea:we,unclipArea:Se,_steppedLineTo:Ce,_bezierCurveTo:Me,renderText:Te,addRoundedRectPath:Ae,_lookup:tt,_lookupByKey:et,_rlookupByKey:nt,_filterBetween:it,listenArrayEvents:rt,unlistenArrayEvents:at,_arrayUnique:st,_createResolver:Ie,_attachContext:De,_descriptors:Pe,_parseObjectDataRadialScale:We,splineCurve:$e,splineCurveMonotone:qe,_updateBezierControlPoints:Xe,_isDomSupported:ee,_getParentNode:ne,getStyle:re,getRelativePosition:le,getMaximumSize:ue,retinaScale:de,supportsEventListenerOptions:he,readUsedSize:fe,fontString:function(t,e,n){return e+" "+t+"px "+n},requestAnimFrame:lt,throttled:ct,debounce:ut,_toLeftRightCenter:dt,_alignStartEnd:ht,_textX:ft,_getStartAndCountOfVisiblePoints:pt,_scaleRangesChanged:gt,_pointInLine:tn,_steppedInterpolation:en,_bezierInterpolation:nn,formatNumber:rn,toLineHeight:ln,_readValueToProps:cn,toTRBL:un,toTRBLCorners:dn,toPadding:hn,toFont:fn,resolve:pn,_addGrace:gn,createContext:mn,PI:k,TAU:A,PITAU:I,INFINITY:D,RAD_PER_DEG:P,HALF_PI:E,QUARTER_PI:N,TWO_THIRDS_PI:L,log10:R,sign:O,niceNum:B,_factorize:z,isNumber:V,almostEquals:F,almostWhole:H,_setMinAndMaxByKey:W,toRadians:G,toDegrees:U,_decimalPlaces:j,getAngleFromPoint:$,distanceBetweenPoints:q,_angleDiff:Y,_normalizeAngle:X,_angleBetween:Z,_limitValue:K,_int16Range:J,_isBetween:Q,getRtlAdapter:vn,overrideTextDirection:yn,restoreTextDirection:xn,_boundSegment:wn,_boundSegments:Sn,_computeSegments:Cn});function An(t,e,n,i){const{controller:o,data:r,_sorted:a}=t,s=o._cachedMeta.iScale;if(s&&e===s.axis&&"r"!==e&&a&&r.length){const t=s._reversePixels?nt:et;if(!i)return t(r,e,n);if(o._sharedOptions){const i=r[0],o="function"==typeof i.getRange&&i.getRange(e);if(o){const i=t(r,e,n-o),a=t(r,e,n+o);return{lo:i.lo,hi:a.hi}}}}return{lo:0,hi:r.length-1}}function In(t,e,n,i,o){const r=t.getSortedVisibleDatasetMetas(),a=n[e];for(let s=0,l=r.length;s<l;++s){const{index:t,data:n}=r[s],{lo:l,hi:c}=An(r[s],e,a,o);for(let e=l;e<=c;++e){const o=n[e];o.skip||i(o,t,e)}}}function Dn(t,e,n,i,o){const r=[];return o||t.isPointInArea(e)?(In(t,n,e,function(n,a,s){(o||_e(n,t.chartArea,0))&&n.inRange(e.x,e.y,i)&&r.push({element:n,datasetIndex:a,index:s})},!0),r):r}function Pn(t,e,n,i,o,r){return r||t.isPointInArea(e)?"r"!==n||i?function(t,e,n,i,o,r){let a=[];const s=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const o=e?Math.abs(t.x-i.x):0,r=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}(n);let l=Number.POSITIVE_INFINITY;return In(t,n,e,function(n,c,u){const d=n.inRange(e.x,e.y,o);if(i&&!d)return;const h=n.getCenterPoint(o);if(!r&&!t.isPointInArea(h)&&!d)return;const f=s(e,h);f<l?(a=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&a.push({element:n,datasetIndex:c,index:u})}),a}(t,e,n,i,o,r):function(t,e,n,i){let o=[];return In(t,n,e,function(t,n,r){const{startAngle:a,endAngle:s}=t.getProps(["startAngle","endAngle"],i),{angle:l}=$(t,{x:e.x,y:e.y});Z(l,a,s)&&o.push({element:t,datasetIndex:n,index:r})}),o}(t,e,n,o):[]}function En(t,e,n,i,o){const r=[],a="x"===n?"inXRange":"inYRange";let s=!1;return In(t,n,e,(t,i,l)=>{t[a](e[n],o)&&(r.push({element:t,datasetIndex:i,index:l}),s=s||t.inRange(e.x,e.y,o))}),i&&!s?[]:r}var Nn={evaluateInteractionItems:In,modes:{index(t,e,n,i){const o=le(e,t),r=n.axis||"x",a=n.includeInvisible||!1,s=n.intersect?Dn(t,o,r,i,a):Pn(t,o,r,!1,i,a),l=[];return s.length?(t.getSortedVisibleDatasetMetas().forEach(t=>{const e=s[0].index,n=t.data[e];n&&!n.skip&&l.push({element:n,datasetIndex:t.index,index:e})}),l):[]},dataset(t,e,n,i){const o=le(e,t),r=n.axis||"xy",a=n.includeInvisible||!1;let s=n.intersect?Dn(t,o,r,i,a):Pn(t,o,r,!1,i,a);if(s.length>0){const e=s[0].datasetIndex,n=t.getDatasetMeta(e).data;s=[];for(let t=0;t<n.length;++t)s.push({element:n[t],datasetIndex:e,index:t})}return s},point:(t,e,n,i)=>Dn(t,le(e,t),n.axis||"xy",i,n.includeInvisible||!1),nearest:(t,e,n,i)=>Pn(t,le(e,t),n.axis||"xy",n.intersect,i,n.includeInvisible||!1),x:(t,e,n,i)=>En(t,le(e,t),"x",n.intersect,i),y:(t,e,n,i)=>En(t,le(e,t),"y",n.intersect,i)}};const Ln=["left","top","right","bottom"];function Rn(t,e){return t.filter(t=>t.pos===e)}function On(t,e){return t.filter(t=>-1===Ln.indexOf(t.pos)&&t.box.axis===e)}function Bn(t,e){return t.sort((t,n)=>{const i=e?n:t,o=e?t:n;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function zn(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Vn(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Fn(t,e,n,i){const{pos:r,box:a}=n,s=t.maxPadding;if(!o(r)){n.size&&(t[r]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?a.height:a.width),n.size=e.size/e.count,t[r]+=n.size}a.getPadding&&Vn(s,a.getPadding());const l=Math.max(0,e.outerWidth-zn(s,t,"left","right")),c=Math.max(0,e.outerHeight-zn(s,t,"top","bottom")),u=l!==t.w,d=c!==t.h;return t.w=l,t.h=c,n.horizontal?{same:u,other:d}:{same:d,other:u}}function Hn(t,e){const n=e.maxPadding;return function(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach(t=>{i[t]=Math.max(e[t],n[t])}),i}(t?["left","right"]:["top","bottom"])}function Wn(t,e,n,i){const o=[];let r,a,s,l,c,u;for(r=0,a=t.length,c=0;r<a;++r){s=t[r],l=s.box,l.update(s.width||e.w,s.height||e.h,Hn(s.horizontal,e));const{same:a,other:d}=Fn(e,n,s,i);c|=a&&o.length,u=u||d,l.fullSize||o.push(s)}return c&&Wn(o,e,n,i)||u}function Gn(t,e,n,i,o){t.top=n,t.left=e,t.right=e+i,t.bottom=n+o,t.width=i,t.height=o}function Un(t,e,n,i){const o=n.padding;let{x:r,y:a}=e;for(const s of t){const t=s.box,l=i[s.stack]||{count:1,placed:0,weight:1},c=s.stackWeight/l.weight||1;if(s.horizontal){const i=e.w*c,r=l.size||t.height;S(l.start)&&(a=l.start),t.fullSize?Gn(t,o.left,a,n.outerWidth-o.right-o.left,r):Gn(t,e.left+l.placed,a,i,r),l.start=a,l.placed+=i,a=t.bottom}else{const i=e.h*c,a=l.size||t.width;S(l.start)&&(r=l.start),t.fullSize?Gn(t,r,o.top,a,n.outerHeight-o.bottom-o.top):Gn(t,r,e.top+l.placed,a,i),l.start=r,l.placed+=i,r=t.right}}e.x=r,e.y=a}te.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var jn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const o=hn(t.options.layout.padding),r=Math.max(e-o.width,0),a=Math.max(n-o.height,0),s=function(t){const e=function(t){const e=[];let n,i,o,r,a,s;for(n=0,i=(t||[]).length;n<i;++n)o=t[n],({position:r,options:{stack:a,stackWeight:s=1}}=o),e.push({index:n,box:o,pos:r,horizontal:o.isHorizontal(),weight:o.weight,stack:a&&r+a,stackWeight:s});return e}(t),n=Bn(e.filter(t=>t.box.fullSize),!0),i=Bn(Rn(e,"left"),!0),o=Bn(Rn(e,"right")),r=Bn(Rn(e,"top"),!0),a=Bn(Rn(e,"bottom")),s=On(e,"x"),l=On(e,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:o.concat(l).concat(a).concat(s),chartArea:Rn(e,"chartArea"),vertical:i.concat(o).concat(l),horizontal:r.concat(a).concat(s)}}(t.boxes),l=s.vertical,c=s.horizontal;d(t.boxes,t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()});const u=l.reduce((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:o,availableWidth:r,availableHeight:a,vBoxMaxWidth:r/2/u,hBoxMaxHeight:a/2}),f=Object.assign({},o);Vn(f,hn(i));const p=Object.assign({maxPadding:f,w:r,h:a,x:o.left,y:o.top},o),g=function(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:o}=n;if(!t||!Ln.includes(i))continue;const r=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:o}=e;let r,a,s;for(r=0,a=t.length;r<a;++r){s=t[r];const{fullSize:a}=s.box,l=n[s.stack],c=l&&s.stackWeight/l.weight;s.horizontal?(s.width=c?c*i:a&&e.availableWidth,s.height=o):(s.width=i,s.height=c?c*o:a&&e.availableHeight)}return n}(l.concat(c),h);Wn(s.fullSize,p,h,g),Wn(l,p,h,g),Wn(c,p,h,g)&&Wn(l,p,h,g),function(t){const e=t.maxPadding;function n(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(p),Un(s.leftAndTop,p,h,g),p.x+=p.w,p.y+=p.h,Un(s.rightAndBottom,p,h,g),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},d(s.chartArea,e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class $n{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class qn extends $n{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Yn={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Xn=t=>null===t||""===t,Zn=!!he&&{passive:!0};function Kn(t,e,n){t.canvas.removeEventListener(e,n,Zn)}function Jn(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Qn(t,e,n){const i=t.canvas,o=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||Jn(n.addedNodes,i),e=e&&!Jn(n.removedNodes,i);e&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}function ti(t,e,n){const i=t.canvas,o=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||Jn(n.removedNodes,i),e=e&&!Jn(n.addedNodes,i);e&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}const ei=new Map;let ni=0;function ii(){const t=window.devicePixelRatio;t!==ni&&(ni=t,ei.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function oi(t,e,n){const i=t.canvas,o=i&&ne(i);if(!o)return;const r=ct((t,e)=>{const i=o.clientWidth;n(t,e),i<o.clientWidth&&n()},window),a=new ResizeObserver(t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||r(n,i)});return a.observe(o),function(t,e){ei.size||window.addEventListener("resize",ii),ei.set(t,e)}(t,r),a}function ri(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){ei.delete(t),ei.size||window.removeEventListener("resize",ii)}(t)}function ai(t,e,n){const i=t.canvas,o=ct(e=>{null!==t.ctx&&n(function(t,e){const n=Yn[t.type]||t.type,{x:i,y:o}=le(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==o?o:null}}(e,t))},t,t=>{const e=t[0];return[e,e.offsetX,e.offsetY]});return function(t,e,n){t.addEventListener(e,n,Zn)}(i,e,o),o}class si extends $n{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,i=t.getAttribute("height"),o=t.getAttribute("width");if(t.$chartjs={initial:{height:i,width:o,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Xn(o)){const e=fe(t,"width");void 0!==e&&(t.width=e)}if(Xn(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=fe(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e.$chartjs)return!1;const i=e.$chartjs.initial;["height","width"].forEach(t=>{const o=i[t];n(o)?e.removeAttribute(t):e.setAttribute(t,o)});const o=i.style||{};return Object.keys(o).forEach(t=>{e.style[t]=o[t]}),e.width=e.width,delete e.$chartjs,!0}addEventListener(t,e,n){this.removeEventListener(t,e),(t.$proxies||(t.$proxies={}))[e]=({attach:Qn,detach:ti,resize:oi}[e]||ai)(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];i&&(({attach:ri,detach:ri,resize:ri}[e]||Kn)(t,e,i),n[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return ue(t,e,n,i)}isAttached(t){const e=ne(t);return!(!e||!e.isConnected)}}function li(t){return!ee()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?qn:si}var ci=Object.freeze({__proto__:null,_detectPlatform:li,BasePlatform:$n,BasicPlatform:qn,DomPlatform:si});const ui="transparent",di={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=Yt(t||ui),o=i.valid&&Yt(e||ui);return o&&o.valid?o.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class hi{constructor(t,e,n,i){const o=e[n];i=pn([t.to,i,o,t.from]);const r=pn([t.from,o,i]);this._active=!0,this._fn=t.fn||di[t.type||typeof r],this._easing=Qe[t.easing]||Qe.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=r,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=pn([t.to,e,i,t.from]),this._from=pn([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,o=this._from,r=this._loop,a=this._to;let s;if(this._active=o!==a&&(r||e<n),!this._active)return this._target[i]=a,void this._notify(!0);e<0?this._target[i]=o:(s=e/n%2,s=r&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[i]=this._fn(o,a,s))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][e]()}}te.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const fi=Object.keys(te.animation);te.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),te.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),te.describe("animations",{_fallback:"animation"}),te.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}});class pi{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!o(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const r=t[n];if(!o(r))return;const a={};for(const t of fi)a[t]=r[t];(i(r.properties)&&r.properties||[n]).forEach(t=>{t!==n&&e.has(t)||e.set(t,a)})})}_animateOptions(t,e){const n=e.options,i=function(t,e){if(!e)return;let n=t.options;if(n)return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n;t.options=e}(t,n);if(!i)return[];const o=this._createAnimations(i,n);return n.$shared&&function(t,e){const n=[],i=Object.keys(e);for(let o=0;o<i.length;o++){const e=t[i[o]];e&&e.active()&&n.push(e.wait())}return Promise.all(n)}(t.options.$animations,n).then(()=>{t.options=n},()=>{}),o}_createAnimations(t,e){const n=this._properties,i=[],o=t.$animations||(t.$animations={}),r=Object.keys(e),a=Date.now();let s;for(s=r.length-1;s>=0;--s){const l=r[s];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(t,e));continue}const c=e[l];let u=o[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,a);continue}u.cancel()}d&&d.duration?(o[l]=u=new hi(d,t,l,c),i.push(u)):t[l]=c}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(mt.add(this._chart,n),!0):void 0}}function gi(t,e){const n=t&&t.options||{},i=n.reverse,o=void 0===n.min?e:0,r=void 0===n.max?e:0;return{start:i?r:o,end:i?o:r}}function mi(t,e){const n=[],i=t._getSortedDatasetMetas(e);let o,r;for(o=0,r=i.length;o<r;++o)n.push(i[o].index);return n}function vi(t,e,n,i={}){const o=t.keys,a="single"===i.mode;let s,l,c,u;if(null!==e){for(s=0,l=o.length;s<l;++s){if(c=+o[s],c===n){if(i.all)continue;break}u=t.values[c],r(u)&&(a||0===e||O(e)===O(u))&&(e+=u)}return e}}function yi(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function xi(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function bi(t,e,n,i){for(const o of e.getMatchingVisibleMetas(i).reverse()){const e=t[o.index];if(n&&e>0||!n&&e<0)return o.index}return null}function _i(t,e){const{chart:n,_cachedMeta:i}=t,o=n._stacks||(n._stacks={}),{iScale:r,vScale:a,index:s}=i,l=r.axis,c=a.axis,u=function(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(r,a,i),d=e.length;let h;for(let f=0;f<d;++f){const t=e[f],{[l]:n,[c]:r}=t;h=(t._stacks||(t._stacks={}))[c]=xi(o,u,n),h[s]=r,h._top=bi(h,a,!0,i.type),h._bottom=bi(h,a,!1,i.type)}}function wi(t,e){const n=t.scales;return Object.keys(n).filter(t=>n[t].axis===e).shift()}function Si(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n]}}}const Ci=t=>"reset"===t||"none"===t,Mi=(t,e)=>e?t:Object.assign({},t);class Ti{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=yi(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&Si(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,o=e.xAxisID=s(n.xAxisID,wi(t,"x")),r=e.yAxisID=s(n.yAxisID,wi(t,"y")),a=e.rAxisID=s(n.rAxisID,wi(t,"r")),l=e.indexAxis,c=e.iAxisID=i(l,o,r,a),u=e.vAxisID=i(l,r,o,a);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(r),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&at(this._data,this),t._stacked&&Si(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(o(e))this._data=function(t){const e=Object.keys(t),n=new Array(e.length);let i,o,r;for(i=0,o=e.length;i<o;++i)r=e[i],n[i]={x:r,y:t[r]};return n}(e);else if(n!==e){if(n){at(n,this);const t=this._cachedMeta;Si(t),t._parsed=[]}e&&Object.isExtensible(e)&&rt(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const o=e._stacked;e._stacked=yi(e.vScale,e),e.stack!==n.stack&&(i=!0,Si(e),e.stack=n.stack),this._resyncElements(t),(i||o!==e._stacked)&&_i(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:r}=this,{iScale:a,_stacked:s}=n,l=a.axis;let c,u,d,h=0===t&&e===r.length||n._sorted,f=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,d=r;else{d=i(r[t])?this.parseArrayData(n,r,t,e):o(r[t])?this.parseObjectData(n,r,t,e):this.parsePrimitiveData(n,r,t,e);const a=()=>null===u[l]||f&&u[l]<f[l];for(c=0;c<e;++c)n._parsed[c+t]=u=d[c],h&&(a()&&(h=!1),f=u);n._sorted=h}s&&_i(this,d)}parsePrimitiveData(t,e,n,i){const{iScale:o,vScale:r}=t,a=o.axis,s=r.axis,l=o.getLabels(),c=o===r,u=new Array(i);let d,h,f;for(d=0,h=i;d<h;++d)f=d+n,u[d]={[a]:c||o.parse(l[f],f),[s]:r.parse(e[f],f)};return u}parseArrayData(t,e,n,i){const{xScale:o,yScale:r}=t,a=new Array(i);let s,l,c,u;for(s=0,l=i;s<l;++s)c=s+n,u=e[c],a[s]={x:o.parse(u[0],c),y:r.parse(u[1],c)};return a}parseObjectData(t,e,n,i){const{xScale:o,yScale:r}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,l=new Array(i);let c,u,d,h;for(c=0,u=i;c<u;++c)d=c+n,h=e[d],l[c]={x:o.parse(b(h,a),d),y:r.parse(b(h,s),d)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this._cachedMeta,o=e[t.axis];return vi({keys:mi(this.chart,!0),values:e._stacks[t.axis]},o,i.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const o=n[e.axis];let r=null===o?NaN:o;const a=i&&n._stacks[e.axis];i&&a&&(i.values=a,r=vi(i,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,o=n._sorted&&t===n.iScale,a=i.length,s=this._getOtherScale(t),l=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:mi(this.chart,!0),values:null})(e,n),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=function(t){const{min:e,max:n,minDefined:i,maxDefined:o}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:o?n:Number.POSITIVE_INFINITY}}(s);let h,f;function p(){f=i[h];const e=f[s.axis];return!r(f[t.axis])||u>e||d<e}for(h=0;h<a&&(p()||(this.updateRangeFromParsed(c,t,f,l),!o));++h);if(o)for(h=a-1;h>=0;--h)if(!p()){this.updateRangeFromParsed(c,t,f,l);break}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,o,a;for(i=0,o=e.length;i<o;++i)a=e[i][t.axis],r(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,o=this.getParsed(t);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:i?""+i.getLabelForValue(o[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,i,r;return o(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:!1===t}}(s(this.options.clip,function(t,e,n){if(!1===n)return!1;const i=gi(t,n),o=gi(e,n);return{top:o.end,right:i.end,bottom:o.start,left:i.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this._cachedMeta,n=e.data||[],i=this.chart.chartArea,o=[],r=this._drawStart||0,a=this._drawCount||n.length-r,s=this.options.drawActiveElementsOnTop;let l;for(e.dataset&&e.dataset.draw(t,i,r,a),l=r;l<r+a;++l){const e=n[l];e.hidden||(e.active&&s?o.push(e):e.draw(t,i))}for(l=0;l<o.length;++l)o[l].draw(t,i)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];o=e.$context||(e.$context=function(t,e,n){return mn(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),o.parsed=this.getParsed(t),o.raw=i.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=function(t,e){return mn(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=n,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const i="active"===e,o=this._cachedDataOpts,r=t+"-"+e,a=o[r],s=this.enableOptionSharing&&S(n);if(a)return Mi(a,s);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),u=i?[`${t}Hover`,"hover",t,""]:[t,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(te.elements[t]),f=l.resolveNamedOptions(d,h,()=>this.getContext(n,i),u);return f.$shared&&(f.$shared=s,o[r]=Object.freeze(Mi(f,s))),f}_resolveAnimations(t,e,n){const i=this.chart,o=this._cachedDataOpts,r=`animation-${e}`,a=o[r];if(a)return a;let s;if(!1!==i.options.animation){const i=this.chart.config,o=i.datasetAnimationScopeKeys(this._type,e),r=i.getOptionScopes(this.getDataset(),o);s=i.createResolver(r,this.getContext(t,n,e))}const l=new pi(i,s&&s.animations);return s&&s._cacheable&&(o[r]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Ci(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),i=this._sharedOptions,o=this.getSharedOptions(n),r=this.includeOptions(e,o)||o!==i;return this.updateSharedOptions(o,e,n),{sharedOptions:o,includeOptions:r}}updateElement(t,e,n,i){Ci(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!Ci(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const o=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[a,s,l]of this._syncList)this[a](s,l);this._syncList=[];const i=n.length,o=e.length,r=Math.min(o,i);r&&this.parse(0,r),o>i?this._insertElements(i,o-i,t):o<i&&this._removeElements(o,i-o)}_insertElements(t,e,n=!0){const i=this._cachedMeta,o=i.data,r=t+e;let a;const s=t=>{for(t.length+=e,a=t.length-1;a>=r;a--)t[a]=t[a-e]};for(s(o),a=t;a<r;++a)o[a]=new this.dataElementType;this._parsing&&s(i._parsed),this.parse(t,e),n&&this.updateElements(o,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&Si(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ti.defaults={},Ti.prototype.datasetElementType=null,Ti.prototype.dataElementType=null;class ki{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return V(this.x)&&V(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach(t=>{i[t]=n[t]&&n[t].active()?n[t]._to:this[t]}),i}}ki.defaults={},ki.defaultRoutes=void 0;const Ai={values:t=>i(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let o,r=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(o="scientific"),r=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}(t,n)}const a=R(Math.abs(r)),s=Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:o,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(l,this.options.ticks.format),rn(t,i,l)},logarithmic(t,e,n){if(0===t)return"0";const i=t/Math.pow(10,Math.floor(R(t)));return 1===i||2===i||5===i?Ai.numeric.call(this,t,e,n):""}};var Ii={formatters:Ai};function Di(t,e){const i=t.options.ticks,o=i.maxTicksLimit||function(t){const e=t.options.offset,n=t._tickSize();return Math.floor(Math.min(t._length/n+(e?0:1),t._maxLength/n))}(t),r=i.major.enabled?function(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],a=r.length,s=r[0],l=r[a-1],c=[];if(a>o)return function(t,e,n,i){let o,r=0,a=n[0];for(i=Math.ceil(i),o=0;o<t.length;o++)o===a&&(e.push(t[o]),r++,a=n[r*i])}(e,c,r,a/o),c;const u=function(t,e,n){const i=function(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),o=e.length/n;if(!i)return Math.max(o,1);const r=z(i);for(let a=0,s=r.length-1;a<s;a++){const t=r[a];if(t>o)return t}return Math.max(o,1)}(r,e,o);if(a>0){let t,i;const o=a>1?Math.round((l-s)/(a-1)):null;for(Pi(e,c,u,n(o)?0:s-o,s),t=0,i=a-1;t<i;t++)Pi(e,c,u,r[t],r[t+1]);return Pi(e,c,u,l,n(o)?e.length:l+o),c}return Pi(e,c,u),c}function Pi(t,e,n,i,o){const r=s(i,0),a=Math.min(s(o,t.length),t.length);let l,c,u,d=0;for(n=Math.ceil(n),o&&(l=o-i,n=l/Math.floor(l/n)),u=r;u<0;)d++,u=Math.round(r+d*n);for(c=Math.max(r,0);c<a;c++)c===u&&(e.push(t[c]),d++,u=Math.round(r+d*n))}te.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ii.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),te.route("scale.ticks","color","","color"),te.route("scale.grid","color","","borderColor"),te.route("scale.grid","borderColor","","borderColor"),te.route("scale.title","color","","color"),te.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t}),te.describe("scales",{_fallback:"scale"}),te.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t});const Ei=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n;function Ni(t,e){const n=[],i=t.length/e,o=t.length;let r=0;for(;r<o;r+=i)n.push(t[Math.floor(r)]);return n}function Li(t,e,n){const i=t.ticks.length,o=Math.min(e,i-1),r=t._startPixel,a=t._endPixel,s=1e-6;let l,c=t.getPixelForTick(o);if(!(n&&(l=1===i?Math.max(c-r,a-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(o-1))/2,c+=o<e?l:-l,c<r-s||c>a+s)))return c}function Ri(t){return t.drawTicks?t.tickLength:0}function Oi(t,e){if(!t.display)return 0;const n=fn(t.font,e),o=hn(t.padding);return(i(t.text)?t.text.length:1)*n.lineHeight+o.height}function Bi(t,e,n){let i=dt(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=(t=>"left"===t?"right":"right"===t?"left":t)(i)),i}class zi extends ki{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=a(t,Number.POSITIVE_INFINITY),e=a(e,Number.NEGATIVE_INFINITY),n=a(n,Number.POSITIVE_INFINITY),i=a(i,Number.NEGATIVE_INFINITY),{min:a(t,n),max:a(e,i),minDefined:r(t),maxDefined:r(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:o,maxDefined:r}=this.getUserBounds();if(o&&r)return{min:n,max:i};const s=this.getMatchingVisibleMetas();for(let a=0,l=s.length;a<l;++a)e=s[a].controller.getMinMax(this,t),o||(n=Math.min(n,e.min)),r||(i=Math.max(i,e.max));return n=r&&n>i?i:n,i=o&&n>i?n:i,{min:a(n,a(i,n)),max:a(i,a(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){u(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=gn(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const s=a<this.ticks.length;this._convertTicksToLabels(s?Ni(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||"auto"===r.source)&&(this.ticks=Di(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){u(this.options.afterUpdate,[this])}beforeSetDimensions(){u(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){u(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),u(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){u(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,o;for(n=0,i=t.length;n<i;n++)o=t[n],o.label=u(e.callback,[o.value,n,t],this)}afterTickToLabelConversion(){u(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){u(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=this.ticks.length,i=e.minRotation||0,o=e.maxRotation;let r,a,s,l=i;if(!this._isVisible()||!e.display||i>=o||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=K(this.chart.width-u,0,this.maxWidth);r=t.offset?this.maxWidth/n:h/(n-1),u+6>r&&(r=h/(n-(t.offset?.5:1)),a=this.maxHeight-Ri(t.grid)-e.padding-Oi(t.title,this.chart.options.font),s=Math.sqrt(u*u+d*d),l=U(Math.min(Math.asin(K((c.highest.height+6)/r,-1,1)),Math.asin(K(a/s,-1,1))-Math.asin(K(d/s,-1,1)))),l=Math.max(i,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){u(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){u(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const r=Oi(i,e.options.font);if(a?(t.width=this.maxWidth,t.height=Ri(o)+r):(t.height=this.maxHeight,t.width=Ri(o)+r),n.display&&this.ticks.length){const{first:e,last:i,widest:o,highest:r}=this._getLabelSizes(),s=2*n.padding,l=G(this.labelRotation),c=Math.cos(l),u=Math.sin(l);a?t.height=Math.min(this.maxHeight,t.height+(n.mirror?0:u*o.width+c*r.height)+s):t.width=Math.min(this.maxWidth,t.width+(n.mirror?0:c*o.width+u*r.height)+s),this._calculatePadding(e,i,u,c)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:o,padding:r},position:a}=this.options,s=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;s?l?(u=i*t.width,d=n*e.height):(u=n*t.height,d=i*e.width):"start"===o?d=e.width:"end"===o?u=t.width:"inner"!==o&&(u=t.width/2,d=e.width/2),this.paddingLeft=Math.max((u-a+r)*this.width/(this.width-a),0),this.paddingRight=Math.max((d-c+r)*this.width/(this.width-c),0)}else{let n=e.height/2,i=t.height/2;"start"===o?(n=0,i=t.height):"end"===o&&(n=e.height,i=0),this.paddingTop=n+r,this.paddingBottom=i+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){u(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)n(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=Ni(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length)}return t}_computeLabelSizes(t,e){const{ctx:o,_longestTextCache:r}=this,a=[],s=[];let l,c,u,h,f,p,g,m,v,y,x,b=0,_=0;for(l=0;l<e;++l){if(h=t[l].label,f=this._resolveTickFontOptions(l),o.font=p=f.string,g=r[p]=r[p]||{data:{},gc:[]},m=f.lineHeight,v=y=0,n(h)||i(h)){if(i(h))for(c=0,u=h.length;c<u;++c)x=h[c],n(x)||i(x)||(v=ge(o,g.data,g.gc,v,x),y+=m)}else v=ge(o,g.data,g.gc,v,h),y=m;a.push(v),s.push(y),b=Math.max(v,b),_=Math.max(y,_)}!function(t,e){d(t,t=>{const n=t.gc,i=n.length/2;let o;if(i>e){for(o=0;o<i;++o)delete t.data[n[o]];n.splice(0,i)}})}(r,e);const w=a.indexOf(b),S=s.indexOf(_),C=t=>({width:a[t]||0,height:s[t]||0});return{first:C(0),last:C(e-1),widest:C(w),highest:C(S),widths:a,heights:s}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return J(this._alignToPixels?ve(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return mn(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=mn(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=G(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,s=o?o.highest.height+r:0;return this.isHorizontal()?s*n>a*i?a/n:s/i:s*i<a*n?s/n:a/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:r,position:a}=i,l=r.offset,c=this.isHorizontal(),u=this.ticks.length+(l?1:0),d=Ri(r),h=[],f=r.setContext(this.getContext()),p=f.drawBorder?f.borderWidth:0,g=p/2,m=function(t){return ve(n,t,p)};let v,y,x,b,_,w,S,C,M,T,k,A;if("top"===a)v=m(this.bottom),w=this.bottom-d,C=v-g,T=m(t.top)+g,A=t.bottom;else if("bottom"===a)v=m(this.top),T=t.top,A=m(t.bottom)-g,w=v+g,C=this.top+d;else if("left"===a)v=m(this.right),_=this.right-d,S=v-g,M=m(t.left)+g,k=t.right;else if("right"===a)v=m(this.left),M=t.left,k=m(t.right)-g,_=v+g,S=this.left+d;else if("x"===e){if("center"===a)v=m((t.top+t.bottom)/2+.5);else if(o(a)){const t=Object.keys(a)[0];v=m(this.chart.scales[t].getPixelForValue(a[t]))}T=t.top,A=t.bottom,w=v+g,C=w+d}else if("y"===e){if("center"===a)v=m((t.left+t.right)/2);else if(o(a)){const t=Object.keys(a)[0];v=m(this.chart.scales[t].getPixelForValue(a[t]))}_=v-g,S=_-d,M=t.left,k=t.right}const I=s(i.ticks.maxTicksLimit,u),D=Math.max(1,Math.ceil(u/I));for(y=0;y<u;y+=D){const t=r.setContext(this.getContext(y)),e=t.lineWidth,i=t.color,o=t.borderDash||[],a=t.borderDashOffset,s=t.tickWidth,u=t.tickColor,d=t.tickBorderDash||[],f=t.tickBorderDashOffset;x=Li(this,y,l),void 0!==x&&(b=ve(n,x,e),c?_=S=M=k=b:w=C=T=A=b,h.push({tx1:_,ty1:w,tx2:S,ty2:C,x1:M,y1:T,x2:k,y2:A,width:e,color:i,borderDash:o,borderDashOffset:a,tickWidth:s,tickColor:u,tickBorderDash:d,tickBorderDashOffset:f}))}return this._ticksLength=u,this._borderValue=v,h}_computeLabelItems(t){const e=this.axis,n=this.options,{position:r,ticks:a}=n,s=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:h}=a,f=Ri(n.grid),p=f+d,g=h?-d:p,m=-G(this.labelRotation),v=[];let y,x,b,_,w,S,C,M,T,k,A,I,D="middle";if("top"===r)S=this.bottom-g,C=this._getXAxisLabelAlignment();else if("bottom"===r)S=this.top+g,C=this._getXAxisLabelAlignment();else if("left"===r){const t=this._getYAxisLabelAlignment(f);C=t.textAlign,w=t.x}else if("right"===r){const t=this._getYAxisLabelAlignment(f);C=t.textAlign,w=t.x}else if("x"===e){if("center"===r)S=(t.top+t.bottom)/2+p;else if(o(r)){const t=Object.keys(r)[0];S=this.chart.scales[t].getPixelForValue(r[t])+p}C=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)w=(t.left+t.right)/2-p;else if(o(r)){const t=Object.keys(r)[0];w=this.chart.scales[t].getPixelForValue(r[t])}C=this._getYAxisLabelAlignment(f).textAlign}"y"===e&&("start"===c?D="top":"end"===c&&(D="bottom"));const P=this._getLabelSizes();for(y=0,x=l.length;y<x;++y){b=l[y],_=b.label;const t=a.setContext(this.getContext(y));M=this.getPixelForTick(y)+a.labelOffset,T=this._resolveTickFontOptions(y),k=T.lineHeight,A=i(_)?_.length:1;const e=A/2,n=t.color,o=t.textStrokeColor,c=t.textStrokeWidth;let d,f=C;if(s?(w=M,"inner"===C&&(f=y===x-1?this.options.reverse?"left":"right":0===y?this.options.reverse?"right":"left":"center"),I="top"===r?"near"===u||0!==m?-A*k+k/2:"center"===u?-P.highest.height/2-e*k+k:k/2-P.highest.height:"near"===u||0!==m?k/2:"center"===u?P.highest.height/2-e*k:P.highest.height-A*k,h&&(I*=-1)):(S=M,I=(1-A)*k/2),t.showLabelBackdrop){const e=hn(t.backdropPadding),n=P.heights[y],i=P.widths[y];let o=S+I-e.top,r=w-e.left;switch(D){case"middle":o-=n/2;break;case"bottom":o-=n}switch(C){case"center":r-=i/2;break;case"right":r-=i}d={left:r,top:o,width:i+e.width,height:n+e.height,color:t.backdropColor}}v.push({rotation:m,label:_,font:T,color:n,strokeColor:o,strokeWidth:c,textOffset:I,textAlign:f,textBaseline:D,translation:[w,S],backdrop:d})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-G(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:o}}=this.options,r=t+o,a=this._getLabelSizes().widest.width;let s,l;return"left"===e?i?(l=this.right+o,"near"===n?s="left":"center"===n?(s="center",l+=a/2):(s="right",l+=a)):(l=this.right-r,"near"===n?s="right":"center"===n?(s="center",l-=a/2):(s="left",l=this.left)):"right"===e?i?(l=this.left+o,"near"===n?s="right":"center"===n?(s="center",l-=a/2):(s="left",l-=a)):(l=this.left+r,"near"===n?s="left":"center"===n?(s="center",l+=a/2):(s="right",l=this.right)):s="right",{textAlign:s,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:o,height:r}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,o,r),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex(e=>e.value===t);return n>=0?e.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const a=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(o=0,r=i.length;o<r;++o){const t=i[o];e.drawOnChartArea&&a({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&a({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:n}}=this,i=n.setContext(this.getContext()),o=n.drawBorder?i.borderWidth:0;if(!o)return;const r=n.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let s,l,c,u;this.isHorizontal()?(s=ve(t,this.left,o)-o/2,l=ve(t,this.right,r)+r/2,c=u=a):(c=ve(t,this.top,o)-o/2,u=ve(t,this.bottom,r)+r/2,s=l=a),e.save(),e.lineWidth=i.borderWidth,e.strokeStyle=i.borderColor,e.beginPath(),e.moveTo(s,c),e.lineTo(l,u),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&we(e,n);const i=this._labelItems||(this._labelItems=this._computeLabelItems(t));let o,r;for(o=0,r=i.length;o<r;++o){const t=i[o],n=t.font,r=t.label;t.backdrop&&(e.fillStyle=t.backdrop.color,e.fillRect(t.backdrop.left,t.backdrop.top,t.backdrop.width,t.backdrop.height)),Te(e,r,0,t.textOffset,n,t)}n&&Se(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;const a=fn(n.font),s=hn(n.padding),l=n.align;let c=a.lineHeight/2;"bottom"===e||"center"===e||o(e)?(c+=s.bottom,i(n.text)&&(c+=a.lineHeight*(n.text.length-1))):c+=s.top;const{titleX:u,titleY:d,maxWidth:h,rotation:f}=function(t,e,n,i){const{top:r,left:a,bottom:s,right:l,chart:c}=t,{chartArea:u,scales:d}=c;let h,f,p,g=0;const m=s-r,v=l-a;if(t.isHorizontal()){if(f=ht(i,a,l),o(n)){const t=Object.keys(n)[0];p=d[t].getPixelForValue(n[t])+m-e}else p="center"===n?(u.bottom+u.top)/2+m-e:Ei(t,n,e);h=l-a}else{if(o(n)){const t=Object.keys(n)[0];f=d[t].getPixelForValue(n[t])-v+e}else f="center"===n?(u.left+u.right)/2-v+e:Ei(t,n,e);p=ht(i,s,r),g="left"===n?-E:E}return{titleX:f,titleY:p,maxWidth:h,rotation:g}}(this,c,e,l);Te(t,n.text,0,0,a,{color:n.color,maxWidth:h,rotation:f,textAlign:Bi(l,e,r),textBaseline:"middle",translation:[u,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=s(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===zi.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let o,r;for(o=0,r=e.length;o<r;++o){const r=e[o];r[n]!==this.id||t&&r.type!==t||i.push(r)}return i}_resolveTickFontOptions(t){return fn(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Vi{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const i=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in i||(i[o]=t,function(t,e,n){const i=m(Object.create(null),[n?te.get(n):{},te.get(e),t.defaults]);te.set(e,i),t.defaultRoutes&&function(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),o=i.pop(),r=[t].concat(i).join("."),a=e[n].split("."),s=a.pop(),l=a.join(".");te.route(r,o,l,s)})}(e,t.defaultRoutes),t.descriptors&&te.describe(e,t.descriptors)}(t,r,n),this.override&&te.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in te[i]&&(delete te[i][n],this.override&&delete Zt[n])}}var Fi=new class{constructor(){this.controllers=new Vi(Ti,"datasets",!0),this.elements=new Vi(ki,"elements"),this.plugins=new Vi(Object,"plugins"),this.scales=new Vi(zi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):d(e,e=>{const i=n||this._getRegistryForType(e);this._exec(t,i,e)})})}_exec(t,e,n){const i=w(t);u(n["before"+i],[],n),e[t](n),u(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}};class Hi{constructor(){this._init=[]}notify(t,e,n,i){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=i?this._descriptors(t).filter(i):this._descriptors(t),r=this._notify(o,t,e,n);return"afterDestroy"===e&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,e,n,i){i=i||{};for(const o of t){const t=o.plugin;if(!1===u(t[n],[e,i,o.options],t)&&i.cancelable)return!1}return!0}invalidate(){n(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=s(n.options&&n.options.plugins,{}),o=function(t){const e={},n=[],i=Object.keys(Fi.plugins.items);for(let r=0;r<i.length;r++)n.push(Fi.getPlugin(i[r]));const o=t.plugins||[];for(let r=0;r<o.length;r++){const t=o[r];-1===n.indexOf(t)&&(n.push(t),e[t.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==i||e?function(t,{plugins:e,localIds:n},i,o){const r=[],a=t.getContext();for(const s of e){const e=s.id,l=Wi(i[e],o);null!==l&&r.push({plugin:s,options:Gi(t.config,{plugin:s,local:n[e]},l,a)})}return r}(t,o,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter(t=>!e.some(e=>t.plugin.id===e.plugin.id));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function Wi(t,e){return e||!1!==t?!0===t?{}:t:null}function Gi(t,{plugin:e,local:n},i,o){const r=t.pluginScopeKeys(e),a=t.getOptionScopes(i,r);return n&&e.defaults&&a.push(e.defaults),t.createResolver(a,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ui(t,e){return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||(te.datasets[t]||{}).indexAxis||"x"}function ji(t,e){return"x"===t||"y"===t?t:e.axis||("top"===(n=e.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||t.charAt(0).toLowerCase();var n}function $i(t){const e=t.options||(t.options={});e.plugins=s(e.plugins,{}),e.scales=function(t,e){const n=Zt[t.type]||{scales:{}},i=e.scales||{},r=Ui(t.type,e),a=Object.create(null),s=Object.create(null);return Object.keys(i).forEach(t=>{const e=i[t];if(!o(e))return console.error(`Invalid scale configuration for scale: ${t}`);if(e._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const l=ji(t,e),c=function(t,e){return t===e?"_index_":"_value_"}(l,r),u=n.scales||{};a[l]=a[l]||t,s[t]=v(Object.create(null),[{axis:l},e,u[l],u[c]])}),t.data.datasets.forEach(n=>{const o=n.type||t.type,r=n.indexAxis||Ui(o,e),l=(Zt[o]||{}).scales||{};Object.keys(l).forEach(t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,r),o=n[e+"AxisID"]||a[e]||e;s[o]=s[o]||Object.create(null),v(s[o],[{axis:e},i[o],l[t]])})}),Object.keys(s).forEach(t=>{const e=s[t];v(e,[te.scales[e.type],te.scale])}),s}(t,e)}function qi(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Yi=new Map,Xi=new Set;function Zi(t,e){let n=Yi.get(t);return n||(n=e(),Yi.set(t,n),Xi.add(n)),n}const Ki=(t,e,n)=>{const i=b(e,n);void 0!==i&&t.add(i)};class Ji{constructor(t){this._config=function(t){return(t=t||{}).data=qi(t.data),$i(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=qi(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),$i(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Zi(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Zi(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Zi(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return Zi(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:o}=this,r=this._cachedScopes(t,n),a=r.get(e);if(a)return a;const s=new Set;e.forEach(e=>{t&&(s.add(t),e.forEach(e=>Ki(s,t,e))),e.forEach(t=>Ki(s,i,t)),e.forEach(t=>Ki(s,Zt[o]||{},t)),e.forEach(t=>Ki(s,te,t)),e.forEach(t=>Ki(s,Kt,t))});const l=Array.from(s);return 0===l.length&&l.push(Object.create(null)),Xi.has(e)&&r.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,Zt[e]||{},te.datasets[e]||{},{type:e},te,Kt]}resolveNamedOptions(t,e,n,o=[""]){const r={$shared:!0},{resolver:a,subPrefixes:s}=Qi(this._resolverCache,t,o);let l=a;(function(t,e){const{isScriptable:n,isIndexable:o}=Pe(t);for(const r of e){const e=n(r),a=o(r),s=(a||e)&&t[r];if(e&&(C(s)||to(s))||a&&i(s))return!0}return!1})(a,e)&&(r.$shared=!1,l=De(a,n=C(n)?n():n,this.createResolver(t,n,s)));for(const i of e)r[i]=l[i];return r}createResolver(t,e,n=[""],i){const{resolver:r}=Qi(this._resolverCache,t,n);return o(e)?De(r,e,void 0,i):r}}function Qi(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const o=n.join();let r=i.get(o);return r||(r={resolver:Ie(e,n),subPrefixes:n.filter(t=>!t.toLowerCase().includes("hover"))},i.set(o,r)),r}const to=t=>o(t)&&Object.getOwnPropertyNames(t).reduce((e,n)=>e||C(t[n]),!1),eo=["top","bottom","left","right","chartArea"];function no(t,e){return"top"===t||"bottom"===t||-1===eo.indexOf(t)&&"x"===e}function io(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function oo(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),u(n&&n.onComplete,[t],e)}function ro(t){const e=t.chart,n=e.options.animation;u(n&&n.onProgress,[t],e)}function ao(t){return ee()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const so={},lo=t=>{const e=ao(t);return Object.values(so).filter(t=>t.canvas===e).pop()};function co(t,e,n){const i=Object.keys(t);for(const o of i){const i=+o;if(i>=e){const r=t[o];delete t[o],(n>0||i>e)&&(t[i+n]=r)}}}class uo{constructor(t,n){const i=this.config=new Ji(n),o=ao(t),r=lo(o);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||li(o)),this.platform.updateConfig(i);const s=this.platform.acquireContext(o,a.aspectRatio),l=s&&s.canvas,c=l&&l.height,u=l&&l.width;this.id=e(),this.ctx=s,this.canvas=l,this.width=u,this.height=c,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Hi,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ut(t=>this.update(t),a.resizeDelay||0),this._dataChanges=[],so[this.id]=this,s&&l?(mt.listen(this,"complete",oo),mt.listen(this,"progress",ro),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:o,_aspectRatio:r}=this;return n(t)?e&&r?r:o?i/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():de(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ye(this.canvas,this.ctx),this}stop(){return mt.stop(this),this}resize(t,e){mt.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.platform.getMaximumSize(this.canvas,t,e,n.maintainAspectRatio&&this.aspectRatio),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),r=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,de(this,o,!0)&&(this.notifyPlugins("resize",{size:i}),u(n.onResize,[this,i],this),this.attached&&this._doResize(r)&&this.render())}ensureScalesHaveIDs(){d(this.options.scales||{},(t,e)=>{t.id=e})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce((t,e)=>(t[e]=!1,t),{});let o=[];e&&(o=o.concat(Object.keys(e).map(t=>{const n=e[t],i=ji(t,n),o="r"===i,r="x"===i;return{options:n,dposition:o?"chartArea":r?"bottom":"left",dtype:o?"radialLinear":r?"category":"linear"}}))),d(o,e=>{const o=e.options,r=o.id,a=ji(r,o),l=s(o.type,e.dtype);void 0!==o.position&&no(o.position,a)===no(e.dposition)||(o.position=e.dposition),i[r]=!0;let c=null;r in n&&n[r].type===l?c=n[r]:(c=new(Fi.getScale(l))({id:r,type:l,ctx:this.ctx,chart:this}),n[c.id]=c),c.init(o,t)}),d(i,(t,e)=>{t||delete n[e]}),d(n,t=>{jn.configure(this,t,t.options),jn.addBox(this,t)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((t,e)=>t.index-e.index),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(io("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((t,n)=>{0===e.filter(e=>e===t._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let o=this.getDatasetMeta(n);const r=i.type||this.config.type;if(o.type&&o.type!==r&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=r,o.indexAxis=i.indexAxis||Ui(r,this.options),o.order=i.order||0,o.index=n,o.label=""+i.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const e=Fi.getController(r),{datasetElementType:i,dataElementType:a}=te.datasets[r];Object.assign(e.prototype,{dataElementType:Fi.getElement(a),datasetElementType:i&&Fi.getElement(i)}),o.controller=new e(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){d(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:t}=this.getDatasetMeta(l),e=!i&&-1===o.indexOf(t);t.buildOrUpdateElements(e),r=Math.max(+t.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),i||d(o,t=>{t.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(io("z","_idx"));const{_active:a,_lastEvent:s}=this;s?this._eventHandler(s,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){d(this.scales,t=>{jn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);M(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:o}of e)co(t,i,"_removeElements"===n?-o:o)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter(t=>t[0]===e).map((t,e)=>e+","+t.splice(1).join(","))),i=n(0);for(let o=1;o<e;o++)if(!M(i,n(o)))return;return Array.from(i).map(t=>t.split(",")).map(t=>({method:t[1],start:+t[2],count:+t[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;jn.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],d(this.boxes,t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))},this),this._layers.forEach((t,e)=>{t._idx=e}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,C(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(mt.has(this)?this.attached&&!mt.running(this)&&mt.start(this):(this.draw(),oo({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,o;for(i=0,o=e.length;i<o;++i){const o=e[i];t&&!o.visible||n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,i=!n.disabled,o=this.chartArea,r={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",r)&&(i&&we(e,{left:!1===n.left?0:o.left-n.left,right:!1===n.right?this.width:o.right+n.right,top:!1===n.top?0:o.top-n.top,bottom:!1===n.bottom?this.height:o.bottom+n.bottom}),t.controller.draw(),i&&Se(e),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return _e(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,i){const o=Nn.modes[e];return"function"==typeof o?o(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter(t=>t&&t._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=mn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,i);S(e)?(o.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),r.update(o,{visible:n}),this.update(e=>e.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),mt.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),ye(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete so[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};d(this.options.events,t=>n(t,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(n,i)=>{t[n]&&(e.removeEventListener(this,n,i),delete t[n])},o=(t,e)=>{this.canvas&&this.resize(t,e)};let r;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",o),n("detach",r)};r=()=>{this.attached=!1,i("resize",o),this._stop(),this._resize(0,0),n("attach",a)},e.isAttached(this.canvas)?a():r()}unbindEvents(){d(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},d(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let o,r,a,s;for("dataset"===e&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+i+"DatasetHoverStyle"]()),a=0,s=t.length;a<s;++a){r=t[a];const e=r&&this.getDatasetMeta(r.datasetIndex).controller;e&&e[i+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}});!h(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}_updateHoverStyles(t,e,n){const i=this.options.hover,o=(t,e)=>t.filter(t=>!e.some(e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)),r=o(e,t),a=n?t:o(t,e);r.length&&this.updateHoverStyle(r,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const o=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(o||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:o}=this,r=this._getActiveElements(t,i,n,e),a=T(t),s=function(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}(t,this._lastEvent,n,a);n&&(this._lastEvent=null,u(o.onHover,[t,r,this],this),a&&u(o.onClick,[t,r,this],this));const l=!h(r,i);return(l||e)&&(this._active=r,this._updateHoverStyles(r,i,e)),this._lastEvent=s,l}_getActiveElements(t,e,n,i){if("mouseout"===t.type)return[];if(!n)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,i)}}const ho=()=>d(uo.instances,t=>t._plugins.invalidate()),fo=!0;function po(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}Object.defineProperties(uo,{defaults:{enumerable:fo,value:te},instances:{enumerable:fo,value:so},overrides:{enumerable:fo,value:Zt},registry:{enumerable:fo,value:Fi},version:{enumerable:fo,value:"3.9.1"},getChart:{enumerable:fo,value:lo},register:{enumerable:fo,value:(...t)=>{Fi.add(...t),ho()}},unregister:{enumerable:fo,value:(...t)=>{Fi.remove(...t),ho()}}});class go{constructor(t){this.options=t||{}}init(t){}formats(){return po()}parse(t,e){return po()}format(t,e){return po()}add(t,e,n){return po()}diff(t,e,n){return po()}startOf(t,e,n){return po()}endOf(t,e){return po()}}go.override=function(t){Object.assign(go.prototype,t)};var mo={_date:go};function vo(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,o=n.length;e<o;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=st(i.sort((t,e)=>t-e))}return t._cache.$bar}(e,t.type);let i,o,r,a,s=e._length;const l=()=>{32767!==r&&-32768!==r&&(S(a)&&(s=Math.min(s,Math.abs(r-a)||s)),a=r)};for(i=0,o=n.length;i<o;++i)r=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,o=e.ticks.length;i<o;++i)r=e.getPixelForTick(i),l();return s}function yo(t,e,n,o){return i(t)?function(t,e,n,i){const o=n.parse(t[0],i),r=n.parse(t[1],i),a=Math.min(o,r),s=Math.max(o,r);let l=a,c=s;Math.abs(a)>Math.abs(s)&&(l=s,c=a),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:o,end:r,min:a,max:s}}(t,e,n,o):e[n.axis]=n.parse(t,o),e}function xo(t,e,n,i){const o=t.iScale,r=t.vScale,a=o.getLabels(),s=o===r,l=[];let c,u,d,h;for(c=n,u=n+i;c<u;++c)h=e[c],d={},d[o.axis]=s||o.parse(a[c],c),l.push(yo(h,d,r,c));return l}function bo(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function _o(t,e,n,i){let o=e.borderSkipped;const r={};if(!o)return void(t.borderSkipped=r);if(!0===o)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:s,reverse:l,top:c,bottom:u}=function(t){let e,n,i,o,r;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(o="end",r="start"):(o="start",r="end"),{start:n,end:i,reverse:e,top:o,bottom:r}}(t);"middle"===o&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?o=c:(n._bottom||0)===i?o=u:(r[wo(u,a,s,l)]=!0,o=c)),r[wo(o,a,s,l)]=!0,t.borderSkipped=r}function wo(t,e,n,i){var o,r,a;return i?(a=n,t=So(t=(o=t)===(r=e)?a:o===a?r:o,n,e)):t=So(t,e,n),t}function So(t,e,n){return"start"===t?e:"end"===t?n:t}function Co(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}class Mo extends Ti{parsePrimitiveData(t,e,n,i){return xo(t,e,n,i)}parseArrayData(t,e,n,i){return xo(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:o,vScale:r}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,l="x"===o.axis?a:s,c="x"===r.axis?a:s,u=[];let d,h,f,p;for(d=n,h=n+i;d<h;++d)p=e[d],f={},f[o.axis]=o.parse(b(p,l),d),u.push(yo(b(p,c),f,r,d));return u}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const o=n._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,o=this.getParsed(t),r=o._custom,a=bo(r)?"["+r.start+", "+r.end+"]":""+i.getLabelForValue(o[i.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,o){const r="reset"===o,{index:a,_cachedMeta:{vScale:s}}=this,l=s.getBasePixel(),c=s.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(e,o);for(let f=e;f<e+i;f++){const e=this.getParsed(f),i=r||n(e[s.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),p=this._calculateBarIndexPixels(f,u),g=(e._stacks||{})[s.axis],m={horizontal:c,base:i.base,enableBorderRadius:!g||bo(e._custom)||a===g._top||a===g._bottom,x:c?i.head:p.center,y:c?p.center:i.head,height:c?p.size:Math.abs(i.size),width:c?Math.abs(i.size):p.size};h&&(m.options=d||this.resolveDataElementOptions(f,t[f].active?"active":o));const v=m.options||t[f].options;_o(m,v,g,a),Co(m,v,u.ratio),this.updateElement(t[f],f,m,o)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,o=i.getMatchingVisibleMetas(this._type).filter(t=>t.controller.options.grouped),r=i.options.stacked,a=[],s=t=>{const i=t.controller.getParsed(e),o=i&&i[t.vScale.axis];if(n(o)||isNaN(o))return!0};for(const n of o)if((void 0===e||!s(n))&&((!1===r||-1===a.indexOf(n.stack)||void 0===r&&void 0===n.stack)&&a.push(n.stack),n.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const i=this._getStacks(t,n),o=void 0!==e?i.indexOf(e):-1;return-1===o?i.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let o,r;for(o=0,r=e.data.length;o<r;++o)i.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const a=t.barThickness;return{min:a||vo(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i},options:{base:o,minBarLength:r}}=this,a=o||0,s=this.getParsed(t),l=s._custom,c=bo(l);let u,d,h=s[e.axis],f=0,p=i?this.applyStack(e,s,i):h;p!==h&&(f=p-h,p=h),c&&(h=l.barStart,p=l.barEnd-l.barStart,0!==h&&O(h)!==O(l.barEnd)&&(f=0),f+=h);const g=n(o)||c?f:o;let m=e.getPixelForValue(g);if(u=this.chart.getDataVisibility(t)?e.getPixelForValue(f+p):m,d=u-m,Math.abs(d)<r){d=function(t,e,n){return 0!==t?O(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(d,e,a)*r,h===a&&(m-=d/2);const t=e.getPixelForDecimal(0),n=e.getPixelForDecimal(1),i=Math.min(t,n),o=Math.max(t,n);m=Math.max(Math.min(m,o),i),u=m+d}if(m===e.getPixelForValue(a)){const t=O(d)*e.getLineWidthForValue(a)/2;m+=t,d-=t}return{size:d,base:m,head:u,center:u+d/2}}_calculateBarIndexPixels(t,e){const i=e.scale,o=this.options,r=o.skipNull,a=s(o.maxBarThickness,1/0);let l,c;if(e.grouped){const i=r?this._getStackCount(t):e.stackCount,s="flex"===o.barThickness?function(t,e,n,i){const o=e.pixels,r=o[t];let a=t>0?o[t-1]:null,s=t<o.length-1?o[t+1]:null;const l=n.categoryPercentage;null===a&&(a=r-(null===s?e.end-e.start:s-r)),null===s&&(s=r+r-a);const c=r-(r-Math.min(a,s))/2*l;return{chunk:Math.abs(s-a)/2*l/i,ratio:n.barPercentage,start:c}}(t,e,o,i):function(t,e,i,o){const r=i.barThickness;let a,s;return n(r)?(a=e.min*i.categoryPercentage,s=i.barPercentage):(a=r*o,s=1),{chunk:a/o,ratio:s,start:e.pixels[t]-a/2}}(t,e,o,i),u=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);l=s.start+s.chunk*u+s.chunk/2,c=Math.min(a,s.chunk*s.ratio)}else l=i.getPixelForValue(this.getParsed(t)[i.axis],t),c=Math.min(a,e.min*e.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let o=0;for(;o<i;++o)null!==this.getParsed(o)[e.axis]&&n[o].draw(this._ctx)}}Mo.id="bar",Mo.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},Mo.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class To extends Ti{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const o=super.parsePrimitiveData(t,e,n,i);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+n).radius;return o}parseArrayData(t,e,n,i){const o=super.parseArrayData(t,e,n,i);for(let r=0;r<o.length;r++)o[r]._custom=s(e[n+r][2],this.resolveDataElementOptions(r+n).radius);return o}parseObjectData(t,e,n,i){const o=super.parseObjectData(t,e,n,i);for(let r=0;r<o.length;r++){const t=e[n+r];o[r]._custom=s(t&&t.r&&+t.r,this.resolveDataElementOptions(r+n).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,{xScale:n,yScale:i}=e,o=this.getParsed(t),r=n.getLabelForValue(o.x),a=i.getLabelForValue(o.y),s=o._custom;return{label:e.label,value:"("+r+", "+a+(s?", "+s:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const o="reset"===i,{iScale:r,vScale:a}=this._cachedMeta,{sharedOptions:s,includeOptions:l}=this._getSharedOptions(e,i),c=r.axis,u=a.axis;for(let d=e;d<e+n;d++){const e=t[d],n=!o&&this.getParsed(d),h={},f=h[c]=o?r.getPixelForDecimal(.5):r.getPixelForValue(n[c]),p=h[u]=o?a.getBasePixel():a.getPixelForValue(n[u]);h.skip=isNaN(f)||isNaN(p),l&&(h.options=s||this.resolveDataElementOptions(d,e.active?"active":i),o&&(h.options.radius=0)),this.updateElement(e,d,h,i)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const o=i.radius;return"active"!==e&&(i.radius=0),i.radius+=s(n&&n._custom,o),i}}To.id="bubble",To.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},To.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class ko extends Ti{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,a,s=t=>+n[t];if(o(n[t])){const{key:t="value"}=this._parsing;s=e=>+b(n[e],t)}for(r=t,a=t+e;r<a;++r)i._parsed[r]=s(r)}}_getRotation(){return G(this.options.rotation-90)}_getCircumference(){return G(this.options.circumference)}_getRotationExtents(){let t=A,e=-A;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){const i=this.chart.getDatasetMeta(n).controller,o=i._getRotation(),r=i._getCircumference();t=Math.min(t,o),e=Math.max(e,o+r)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,o=i.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-r)/2,0),s=Math.min(l(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(t,e,n){let i=1,o=1,r=0,a=0;if(e<A){const s=t,l=s+e,c=Math.cos(s),u=Math.sin(s),d=Math.cos(l),h=Math.sin(l),f=(t,e,i)=>Z(t,s,l,!0)?1:Math.max(e,e*n,i,i*n),p=(t,e,i)=>Z(t,s,l,!0)?-1:Math.min(e,e*n,i,i*n),g=f(0,c,d),m=f(E,u,h),v=p(k,c,d),y=p(k+E,u,h);i=(g-v)/2,o=(m-y)/2,r=-(g+v)/2,a=-(m+y)/2}return{ratioX:i,ratioY:o,offsetX:r,offsetY:a}}(h,d,s),v=Math.max(Math.min((n.width-r)/f,(n.height-r)/p)/2,0),y=c(this.options.radius,v),x=(y-Math.max(y*s,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*y,this.offsetY=m*y,i.total=this.calculateTotal(),this.outerRadius=y-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*u,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,o=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*o/A)}updateElements(t,e,n,i){const o="reset"===i,r=this.chart,a=r.chartArea,s=(a.left+a.right)/2,l=(a.top+a.bottom)/2,c=o&&r.options.animation.animateScale,u=c?0:this.innerRadius,d=c?0:this.outerRadius,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(e,i);let p,g=this._getRotation();for(p=0;p<e;++p)g+=this._circumference(p,o);for(p=e;p<e+n;++p){const e=this._circumference(p,o),n=t[p],r={x:s+this.offsetX,y:l+this.offsetY,startAngle:g,endAngle:g+e,circumference:e,outerRadius:d,innerRadius:u};f&&(r.options=h||this.resolveDataElementOptions(p,n.active?"active":i)),g+=e,this.updateElement(n,p,r,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const o=t._parsed[n];null===o||isNaN(o)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(o))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?A*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this.chart,n=e.data.labels||[],i=rn(this._cachedMeta._parsed[t],e.options.locale);return{label:n[t]||"",value:i}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,o,r,a,s;if(!t)for(i=0,o=n.data.datasets.length;i<o;++i)if(n.isDatasetVisible(i)){r=n.getDatasetMeta(i),t=r.data,a=r.controller;break}if(!t)return 0;for(i=0,o=t.length;i<o;++i)s=a.resolveDataElementOptions(i),"inner"!==s.borderAlign&&(e=Math.max(e,s.borderWidth||0,s.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(s(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ko.id="doughnut",ko.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},ko.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},ko.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map((e,i)=>{const o=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const n=": "+t.formattedValue;return i(e)?(e=e.slice(),e[0]+=n):e+=n,e}}}}};class Ao extends Ti{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:o}=e,r=this.chart._animationsDisabled;let{start:a,count:s}=pt(e,i,r);this._drawStart=a,this._drawCount=s,gt(e)&&(a=0,s=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=i;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:l},t),this.updateElements(i,a,s,t)}updateElements(t,e,i,o){const r="reset"===o,{iScale:a,vScale:s,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(e,o),h=a.axis,f=s.axis,{spanGaps:p,segment:g}=this.options,m=V(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||"none"===o;let y=e>0&&this.getParsed(e-1);for(let x=e;x<e+i;++x){const e=t[x],i=this.getParsed(x),p=v?e:{},b=n(i[f]),_=p[h]=a.getPixelForValue(i[h],x),w=p[f]=r||b?s.getBasePixel():s.getPixelForValue(l?this.applyStack(s,i,l):i[f],x);p.skip=isNaN(_)||isNaN(w)||b,p.stop=x>0&&Math.abs(i[h]-y[h])>m,g&&(p.parsed=i,p.raw=c.data[x]),d&&(p.options=u||this.resolveDataElementOptions(x,e.active?"active":o)),v||this.updateElement(e,x,p,o),y=i}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const o=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,o,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Ao.id="line",Ao.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},Ao.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class Io extends Ti{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this.chart,n=e.data.labels||[],i=rn(this._cachedMeta._parsed[t].r,e.options.locale);return{label:n[t]||"",value:i}}parseObjectData(t,e,n,i){return We.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((e,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<t.min&&(t.min=i),i>t.max&&(t.max=i))}),t}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),o=Math.max(i/2,0),r=(o-Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=o-r*this.index,this.innerRadius=this.outerRadius-r}updateElements(t,e,n,i){const o="reset"===i,r=this.chart,a=r.options.animation,s=this._cachedMeta.rScale,l=s.xCenter,c=s.yCenter,u=s.getIndexAngle(0)-.5*k;let d,h=u;const f=360/this.countVisibleElements();for(d=0;d<e;++d)h+=this._computeAngle(d,i,f);for(d=e;d<e+n;d++){const e=t[d];let n=h,p=h+this._computeAngle(d,i,f),g=r.getDataVisibility(d)?s.getDistanceFromCenterForValue(this.getParsed(d).r):0;h=p,o&&(a.animateScale&&(g=0),a.animateRotate&&(n=p=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(d,e.active?"active":i)};this.updateElement(e,d,m,i)}}countVisibleElements(){let t=0;return this._cachedMeta.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?G(this.resolveDataElementOptions(t,e).angle||n):0}}Io.id="polarArea",Io.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},Io.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map((e,i)=>{const o=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class Do extends ko{}Do.id="pie",Do.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class Po extends Ti{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,i){return We.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],o=e.iScale.getLabels();if(n.points=i,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0),this.updateElement(n,void 0,{_loop:!0,_fullLoop:o.length===i.length,options:e},t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const o=this._cachedMeta.rScale,r="reset"===i;for(let a=e;a<e+n;a++){const e=t[a],n=this.resolveDataElementOptions(a,e.active?"active":i),s=o.getPointPositionForValue(a,this.getParsed(a).r),l=r?o.xCenter:s.x,c=r?o.yCenter:s.y,u={x:l,y:c,angle:s.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(e,a,u,i)}}}Po.id="radar",Po.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},Po.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class Eo extends Ti{update(t){const e=this._cachedMeta,{data:n=[]}=e,i=this.chart._animationsDisabled;let{start:o,count:r}=pt(e,n,i);if(this._drawStart=o,this._drawCount=r,gt(e)&&(o=0,r=n.length),this.options.showLine){const{dataset:o,_dataset:r}=e;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!r._decimated,o.points=n;const a=this.resolveDatasetElementOptions(t);a.segment=this.options.segment,this.updateElement(o,void 0,{animated:!i,options:a},t)}this.updateElements(n,o,r,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=Fi.getElement("line")),super.addElements()}updateElements(t,e,i,o){const r="reset"===o,{iScale:a,vScale:s,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(e,o),d=this.getSharedOptions(u),h=this.includeOptions(o,d),f=a.axis,p=s.axis,{spanGaps:g,segment:m}=this.options,v=V(g)?g:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||"none"===o;let x=e>0&&this.getParsed(e-1);for(let b=e;b<e+i;++b){const e=t[b],i=this.getParsed(b),u=y?e:{},g=n(i[p]),_=u[f]=a.getPixelForValue(i[f],b),w=u[p]=r||g?s.getBasePixel():s.getPixelForValue(l?this.applyStack(s,i,l):i[p],b);u.skip=isNaN(_)||isNaN(w)||g,u.stop=b>0&&Math.abs(i[f]-x[f])>v,m&&(u.parsed=i,u.raw=c.data[b]),h&&(u.options=d||this.resolveDataElementOptions(b,e.active?"active":o)),y||this.updateElement(e,b,u,o),x=i}this.updateSharedOptions(d,o,u)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!e.length)return i;const o=e[0].size(this.resolveDataElementOptions(0)),r=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,o,r)/2}}Eo.id="scatter",Eo.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},Eo.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var No=Object.freeze({__proto__:null,BarController:Mo,BubbleController:To,DoughnutController:ko,LineController:Ao,PolarAreaController:Io,PieController:Do,RadarController:Po,ScatterController:Eo});function Lo(t,e,n){const{startAngle:i,pixelMargin:o,x:r,y:a,outerRadius:s,innerRadius:l}=e;let c=o/s;t.beginPath(),t.arc(r,a,s,i-c,n+c),l>o?(c=o/l,t.arc(r,a,l,n+c,i-c,!0)):t.arc(r,a,o,n+E,i-E),t.closePath(),t.clip()}function Ro(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Oo(t,e,n,i,o,r){const{x:a,y:s,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+i+n-c,0),h=u>0?u+i+n+c:0;let f=0;const p=o-l;if(i){const t=((u>0?u-i:0)+(d>0?d-i:0))/2;f=(p-(0!==t?p*t/(t+i):p))/2}const g=(p-Math.max(.001,p*d-n/k)/d)/2,m=l+g+f,v=o-g-f,{outerStart:y,outerEnd:x,innerStart:b,innerEnd:_}=function(t,e,n,i){const o=cn(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),r=(n-e)/2,a=Math.min(r,i*e/2),s=t=>{const e=(n-Math.min(r,t))*i/2;return K(t,0,Math.min(r,e))};return{outerStart:s(o.outerStart),outerEnd:s(o.outerEnd),innerStart:K(o.innerStart,0,a),innerEnd:K(o.innerEnd,0,a)}}(e,h,d,v-m),w=d-y,S=d-x,C=m+y/w,M=v-x/S,T=h+b,A=h+_,I=m+b/T,D=v-_/A;if(t.beginPath(),r){if(t.arc(a,s,d,C,M),x>0){const e=Ro(S,M,a,s);t.arc(e.x,e.y,x,M,v+E)}const e=Ro(A,v,a,s);if(t.lineTo(e.x,e.y),_>0){const e=Ro(A,D,a,s);t.arc(e.x,e.y,_,v+E,D+Math.PI)}if(t.arc(a,s,h,v-_/h,m+b/h,!0),b>0){const e=Ro(T,I,a,s);t.arc(e.x,e.y,b,I+Math.PI,m-E)}const n=Ro(w,m,a,s);if(t.lineTo(n.x,n.y),y>0){const e=Ro(w,C,a,s);t.arc(e.x,e.y,y,m-E,C)}}else{t.moveTo(a,s);const e=Math.cos(C)*d+a,n=Math.sin(C)*d+s;t.lineTo(e,n);const i=Math.cos(M)*d+a,o=Math.sin(M)*d+s;t.lineTo(i,o)}t.closePath()}class Bo extends ki{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:o,distance:r}=$(i,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=this.options.spacing/2,f=s(d,l-a)>=A||Z(o,a,l),p=Q(r,c+h,u+h);return f&&p}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:o,innerRadius:r,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:s,spacing:l}=this.options,c=(i+o)/2,u=(r+a+l+s)/2;return{x:e+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/2,o=(e.spacing||0)/2,r=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>A?Math.floor(n/A):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();let a=0;if(i){a=i/2;const e=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(e)*a,Math.sin(e)*a),this.circumference>=k&&(a=i)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const s=function(t,e,n,i,o){const{fullCircles:r,startAngle:a,circumference:s}=e;let l=e.endAngle;if(r){Oo(t,e,n,i,a+A,o);for(let e=0;e<r;++e)t.fill();isNaN(s)||(l=a+s%A,s%A==0&&(l+=A))}return Oo(t,e,n,i,l,o),t.fill(),l}(t,this,a,o,r);(function(t,e,n,i,o,r){const{options:a}=e,{borderWidth:s,borderJoinStyle:l}=a,c="inner"===a.borderAlign;s&&(c?(t.lineWidth=2*s,t.lineJoin=l||"round"):(t.lineWidth=s,t.lineJoin=l||"bevel"),e.fullCircles&&function(t,e,n){const{x:i,y:o,startAngle:r,pixelMargin:a,fullCircles:s}=e,l=Math.max(e.outerRadius-a,0),c=e.innerRadius+a;let u;for(n&&Lo(t,e,r+A),t.beginPath(),t.arc(i,o,c,r+A,r,!0),u=0;u<s;++u)t.stroke();for(t.beginPath(),t.arc(i,o,l,r,r+A),u=0;u<s;++u)t.stroke()}(t,e,c),c&&Lo(t,e,o),Oo(t,e,n,i,o,r),t.stroke())})(t,this,a,o,s,r),t.restore()}}function zo(t,e,n=e){t.lineCap=s(n.borderCapStyle,e.borderCapStyle),t.setLineDash(s(n.borderDash,e.borderDash)),t.lineDashOffset=s(n.borderDashOffset,e.borderDashOffset),t.lineJoin=s(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=s(n.borderWidth,e.borderWidth),t.strokeStyle=s(n.borderColor,e.borderColor)}function Vo(t,e,n){t.lineTo(n.x,n.y)}function Fo(t,e,n={}){const i=t.length,{start:o=0,end:r=i-1}=n,{start:a,end:s}=e,l=Math.max(o,a),c=Math.min(r,s);return{count:i,start:l,loop:e.loop,ilen:c<l&&!(o<a&&r<a||o>s&&r>s)?i+c-l:c-l}}function Ho(t,e,n,i){const{points:o,options:r}=e,{count:a,start:s,loop:l,ilen:c}=Fo(o,n,i),u=function(t){return t.stepped?Ce:t.tension||"monotone"===t.cubicInterpolationMode?Me:Vo}(r);let d,h,f,{move:p=!0,reverse:g}=i||{};for(d=0;d<=c;++d)h=o[(s+(g?c-d:d))%a],h.skip||(p?(t.moveTo(h.x,h.y),p=!1):u(t,f,h,g,r.stepped),f=h);return l&&(h=o[(s+(g?c:0))%a],u(t,f,h,g,r.stepped)),!!l}function Wo(t,e,n,i){const o=e.points,{count:r,start:a,ilen:s}=Fo(o,n,i),{move:l=!0,reverse:c}=i||{};let u,d,h,f,p,g,m=0,v=0;const y=t=>(a+(c?s-t:t))%r,x=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(l&&(d=o[y(0)],t.moveTo(d.x,d.y)),u=0;u<=s;++u){if(d=o[y(u)],d.skip)continue;const e=d.x,n=d.y,i=0|e;i===h?(n<f?f=n:n>p&&(p=n),m=(v*m+e)/++v):(x(),t.lineTo(e,n),h=i,v=0,f=p=n),g=n}x()}function Go(t){const e=t.options;return t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||e.borderDash&&e.borderDash.length?Ho:Wo}Bo.id="arc",Bo.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},Bo.defaultRoutes={backgroundColor:"backgroundColor"};const Uo="function"==typeof Path2D;class jo extends ki{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;!n.tension&&"monotone"!==n.cubicInterpolationMode||n.stepped||this._pointsUpdated||(Xe(this._points,n,t,n.spanGaps?this._loop:this._fullLoop,e),this._pointsUpdated=!0)}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Cn(this,this.options.segment))}first(){const t=this.segments;return t.length&&this.points[t[0].start]}last(){const t=this.segments,e=t.length;return e&&this.points[t[e-1].end]}interpolate(t,e){const n=this.options,i=t[e],o=this.points,r=Sn(this,{property:e,start:i,end:i});if(!r.length)return;const a=[],s=function(t){return t.stepped?en:t.tension||"monotone"===t.cubicInterpolationMode?nn:tn}(n);let l,c;for(l=0,c=r.length;l<c;++l){const{start:c,end:u}=r[l],d=o[c],h=o[u];if(d===h){a.push(d);continue}const f=s(d,h,Math.abs((i-d[e])/(h[e]-d[e])),n.stepped);f[e]=t[e],a.push(f)}return 1===a.length?a[0]:a}pathSegment(t,e,n){return Go(this)(t,this,e,n)}path(t,e,n){const i=this.segments,o=Go(this);let r=this._loop;e=e||0,n=n||this.points.length-e;for(const a of i)r&=o(t,this,a,{start:e,end:e+n-1});return!!r}draw(t,e,n,i){(this.points||[]).length&&(this.options||{}).borderWidth&&(t.save(),function(t,e,n,i){Uo&&!e.options.segment?function(t,e,n,i){let o=e._path;o||(o=e._path=new Path2D,e.path(o,n,i)&&o.closePath()),zo(t,e.options),t.stroke(o)}(t,e,n,i):function(t,e,n,i){const{segments:o,options:r}=e,a=Go(e);for(const s of o)zo(t,r,s.style),t.beginPath(),a(t,e,s,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function $o(t,e,n,i){const o=t.options,{[n]:r}=t.getProps([n],i);return Math.abs(e-r)<o.radius+o.hitRadius}jo.id="line",jo.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},jo.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},jo.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};class qo extends ki{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:o,y:r}=this.getProps(["x","y"],n);return Math.pow(t-o,2)+Math.pow(e-r,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return $o(this,t,"x",e)}inYRange(t,e){return $o(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;return e=Math.max(e,e&&t.hoverRadius||0),2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!_e(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,xe(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Yo(t,e){const{x:n,y:i,base:o,width:r,height:a}=t.getProps(["x","y","base","width","height"],e);let s,l,c,u,d;return t.horizontal?(d=a/2,s=Math.min(n,o),l=Math.max(n,o),c=i-d,u=i+d):(d=r/2,s=n-d,l=n+d,c=Math.min(i,o),u=Math.max(i,o)),{left:s,top:c,right:l,bottom:u}}function Xo(t,e,n,i){return t?0:K(e,n,i)}function Zo(t){const e=Yo(t),n=e.right-e.left,i=e.bottom-e.top,r=function(t,e,n){const i=t.borderSkipped,o=un(t.options.borderWidth);return{t:Xo(i.top,o.top,0,n),r:Xo(i.right,o.right,0,e),b:Xo(i.bottom,o.bottom,0,n),l:Xo(i.left,o.left,0,e)}}(t,n/2,i/2),a=function(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,a=dn(r),s=Math.min(e,n),l=t.borderSkipped,c=i||o(r);return{topLeft:Xo(!c||l.top||l.left,a.topLeft,0,s),topRight:Xo(!c||l.top||l.right,a.topRight,0,s),bottomLeft:Xo(!c||l.bottom||l.left,a.bottomLeft,0,s),bottomRight:Xo(!c||l.bottom||l.right,a.bottomRight,0,s)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:a},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,a.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(r.b,r.r))}}}}function Ko(t,e,n,i){const o=null===e,r=null===n,a=t&&!(o&&r)&&Yo(t,i);return a&&(o||Q(e,a.left,a.right))&&(r||Q(n,a.top,a.bottom))}function Jo(t,e){t.rect(e.x,e.y,e.w,e.h)}function Qo(t,e,n={}){const i=t.x!==n.x?-e:0,o=t.y!==n.y?-e:0;return{x:t.x+i,y:t.y+o,w:t.w+((t.x+t.w!==n.x+n.w?e:0)-i),h:t.h+((t.y+t.h!==n.y+n.h?e:0)-o),radius:t.radius}}qo.id="point",qo.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},qo.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class tr extends ki{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:o,outer:r}=Zo(this),a=(s=r.radius).topLeft||s.topRight||s.bottomLeft||s.bottomRight?Ae:Jo;var s;t.save(),r.w===o.w&&r.h===o.h||(t.beginPath(),a(t,Qo(r,e,o)),t.clip(),a(t,Qo(o,-e,r)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,Qo(o,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return Ko(this,t,e,n)}inXRange(t,e){return Ko(this,t,null,e)}inYRange(t,e){return Ko(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+i)/2:e,y:o?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}tr.id="bar",tr.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},tr.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var er=Object.freeze({__proto__:null,ArcElement:Bo,LineElement:jo,PointElement:qo,BarElement:tr});function nr(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function ir(t){t.data.datasets.forEach(t=>{nr(t)})}var or={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,i)=>{if(!i.enabled)return void ir(t);const o=t.width;t.data.datasets.forEach((e,r)=>{const{_data:a,indexAxis:s}=e,l=t.getDatasetMeta(r),c=a||e.data;if("y"===pn([s,t.options.indexAxis]))return;if(!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if("linear"!==u.type&&"time"!==u.type)return;if(t.options.parsing)return;let d,{start:h,count:f}=function(t,e){const n=e.length;let i,o=0;const{iScale:r}=t,{min:a,max:s,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(o=K(et(e,r.axis,a).lo,0,n-1)),i=c?K(et(e,r.axis,s).hi+1,o,n)-o:n-o,{start:o,count:i}}(l,c);if(f<=(i.threshold||4*o))nr(e);else{switch(n(a)&&(e._data=c,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),i.algorithm){case"lttb":d=function(t,e,n,i,o){const r=o.samples||i;if(r>=n)return t.slice(e,e+n);const a=[],s=(n-2)/(r-2);let l=0;const c=e+n-1;let u,d,h,f,p,g=e;for(a[l++]=t[g],u=0;u<r-2;u++){let i,o=0,r=0;const c=Math.floor((u+1)*s)+1+e,m=Math.min(Math.floor((u+2)*s)+1,n)+e,v=m-c;for(i=c;i<m;i++)o+=t[i].x,r+=t[i].y;o/=v,r/=v;const y=Math.floor(u*s)+1+e,x=Math.min(Math.floor((u+1)*s)+1,n)+e,{x:b,y:_}=t[g];for(h=f=-1,i=y;i<x;i++)f=.5*Math.abs((b-o)*(t[i].y-_)-(b-t[i].x)*(r-_)),f>h&&(h=f,d=t[i],p=i);a[l++]=d,g=p}return a[l++]=t[c],a}(c,h,f,o,i);break;case"min-max":d=function(t,e,i,o){let r,a,s,l,c,u,d,h,f,p,g=0,m=0;const v=[],y=t[e].x,x=t[e+i-1].x-y;for(r=e;r<e+i;++r){a=t[r],s=(a.x-y)/x*o,l=a.y;const e=0|s;if(e===c)l<f?(f=l,u=r):l>p&&(p=l,d=r),g=(m*g+a.x)/++m;else{const i=r-1;if(!n(u)&&!n(d)){const e=Math.min(u,d),n=Math.max(u,d);e!==h&&e!==i&&v.push({...t[e],x:g}),n!==h&&n!==i&&v.push({...t[n],x:g})}r>0&&i!==h&&v.push(t[i]),v.push(a),c=e,m=0,f=p=l,u=d=h=r}}return v}(c,h,f,o);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}e._decimated=d}})},destroy(t){ir(t)}};function rr(t,e,n,i){if(i)return;let o=e[t],r=n[t];return"angle"===t&&(o=X(o),r=X(r)),{property:t,start:o,end:r}}function ar(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function sr(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function lr(t,e){let n=[],o=!1;return i(t)?(o=!0,n=t):n=function(t,e){const{x:n=null,y:i=null}=t||{},o=e.points,r=[];return e.segments.forEach(({start:t,end:e})=>{e=ar(t,e,o);const a=o[t],s=o[e];null!==i?(r.push({x:a.x,y:i}),r.push({x:s.x,y:i})):null!==n&&(r.push({x:n,y:a.y}),r.push({x:n,y:s.y}))}),r}(t,e),n.length?new jo({points:n,options:{tension:0},_loop:o,_fullLoop:o}):null}function cr(t){return t&&!1!==t.fill}function ur(t,e,n){let i=t[e].fill;const o=[e];let a;if(!n)return i;for(;!1!==i&&-1===o.indexOf(i);){if(!r(i))return i;if(a=t[i],!a)return!1;if(a.visible)return i;o.push(i),i=a.fill}return!1}function dr(t,e,n){const i=function(t){const e=t.options,n=e.fill;let i=s(n&&n.target,n);return void 0===i&&(i=!!e.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(t);if(o(i))return!isNaN(i.value)&&i;let a=parseFloat(i);return r(a)&&Math.floor(a)===a?function(t,e,n,i){return"-"!==t&&"+"!==t||(n=e+n),!(n===e||n<0||n>=i)&&n}(i[0],e,a,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function hr(t,e,n){const i=[];for(let o=0;o<n.length;o++){const r=n[o],{first:a,last:s,point:l}=fr(r,e,"x");if(!(!l||a&&s))if(a)i.unshift(l);else if(t.push(l),!s)break}t.push(...i)}function fr(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const o=i[n],r=t.segments,a=t.points;let s=!1,l=!1;for(let c=0;c<r.length;c++){const t=r[c],e=a[t.start][n],i=a[t.end][n];if(Q(o,e,i)){s=o===e,l=o===i;break}}return{first:s,last:l,point:i}}class pr{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:i,y:o,radius:r}=this;return t.arc(i,o,r,(e=e||{start:0,end:A}).end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:i}=this,o=t.angle;return{x:e+Math.cos(o)*i,y:n+Math.sin(o)*i,angle:o}}}function gr(t){const{chart:e,fill:n,line:i}=t;if(r(n))return function(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:i}=t,o=[],r=i.segments,a=i.points,s=function(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let o=0;o<i.length;o++){const t=i[o];if(t.index===e)break;t.hidden||n.unshift(t.dataset)}return n}(e,n);s.push(lr({x:null,y:e.bottom},i));for(let l=0;l<r.length;l++){const t=r[l];for(let e=t.start;e<=t.end;e++)hr(o,a[e],s)}return new jo({points:o,options:{}})}(t);if("shape"===n)return!0;const a=function(t){return(t.scale||{}).getPointPositionForValue?function(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,a=i.reverse?e.max:e.min,s=function(t,e,n){let i;return i="start"===t?n:"end"===t?e.options.reverse?e.min:e.max:o(t)?t.value:e.getBaseValue(),i}(n,e,a),l=[];if(i.grid.circular){const t=e.getPointPositionForValue(0,a);return new pr({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(s)})}for(let o=0;o<r;++o)l.push(e.getPointPositionForValue(o,s));return l}(t):function(t){const{scale:e={},fill:n}=t,i=function(t,e){let n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:o(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(n,e);if(r(i)){const t=e.isHorizontal();return{x:t?i:null,y:t?null:i}}return null}(t)}(t);return a instanceof pr?a:lr(a,i)}function mr(t,e,n){const i=gr(e),{line:o,scale:r,axis:a}=e,s=o.options,l=s.fill,c=s.backgroundColor,{above:u=c,below:d=c}=l||{};i&&o.points.length&&(we(t,n),function(t,e){const{line:n,target:i,above:o,below:r,area:a,scale:s}=e,l=n._loop?"angle":e.axis;t.save(),"x"===l&&r!==o&&(vr(t,i,a.top),yr(t,{line:n,target:i,color:o,scale:s,property:l}),t.restore(),t.save(),vr(t,i,a.bottom)),yr(t,{line:n,target:i,color:r,scale:s,property:l}),t.restore()}(t,{line:o,target:i,above:u,below:d,area:n,scale:r,axis:a}),Se(t))}function vr(t,e,n){const{segments:i,points:o}=e;let r=!0,a=!1;t.beginPath();for(const s of i){const{start:i,end:l}=s,c=o[i],u=o[ar(i,l,o)];r?(t.moveTo(c.x,c.y),r=!1):(t.lineTo(c.x,n),t.lineTo(c.x,c.y)),a=!!e.pathSegment(t,s,{move:a}),a?t.closePath():t.lineTo(u.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function yr(t,e){const{line:n,target:i,property:o,color:r,scale:a}=e,s=function(t,e,n){const i=t.segments,o=t.points,r=e.points,a=[];for(const s of i){let{start:t,end:i}=s;i=ar(t,i,o);const l=rr(n,o[t],o[i],s.loop);if(!e.segments){a.push({source:s,target:l,start:o[t],end:o[i]});continue}const c=Sn(e,l);for(const e of c){const t=rr(n,r[e.start],r[e.end],e.loop),i=wn(s,o,t);for(const o of i)a.push({source:o,target:e,start:{[n]:sr(l,t,"start",Math.max)},end:{[n]:sr(l,t,"end",Math.min)}})}}return a}(n,i,o);for(const{source:l,target:c,start:u,end:d}of s){const{style:{backgroundColor:e=r}={}}=l,s=!0!==i;t.save(),t.fillStyle=e,xr(t,a,s&&rr(o,u,d)),t.beginPath();const h=!!n.pathSegment(t,l);let f;if(s){h?t.closePath():br(t,i,d,o);const e=!!i.pathSegment(t,c,{move:h,reverse:!0});f=h&&e,f||br(t,i,u,o)}t.closePath(),t.fill(f?"evenodd":"nonzero"),t.restore()}}function xr(t,e,n){const{top:i,bottom:o}=e.chart.chartArea,{property:r,start:a,end:s}=n||{};"x"===r&&(t.beginPath(),t.rect(a,i,s-a,o-i),t.clip())}function br(t,e,n,i){const o=e.interpolate(n,i);o&&t.lineTo(o.x,o.y)}var _r={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,o=[];let r,a,s,l;for(a=0;a<i;++a)r=t.getDatasetMeta(a),s=r.dataset,l=null,s&&s.options&&s instanceof jo&&(l={visible:t.isDatasetVisible(a),index:a,fill:dr(s,a,i),chart:t,axis:r.controller.options.indexAxis,scale:r.vScale,line:s}),r.$filler=l,o.push(l);for(a=0;a<i;++a)l=o[a],l&&!1!==l.fill&&(l.fill=ur(o,a,n.propagate))},beforeDraw(t,e,n){const i="beforeDraw"===n.drawTime,o=t.getSortedVisibleDatasetMetas(),r=t.chartArea;for(let a=o.length-1;a>=0;--a){const e=o[a].$filler;e&&(e.line.updateControlPoints(r,e.axis),i&&e.fill&&mr(t.ctx,e,r))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=t.getSortedVisibleDatasetMetas();for(let o=i.length-1;o>=0;--o){const e=i[o].$filler;cr(e)&&mr(t.ctx,e,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;cr(i)&&"beforeDatasetDraw"===n.drawTime&&mr(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const wr=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class Sr extends ki{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=u(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(e=>t.filter(e,this.chart.data))),t.sort&&(e=e.sort((e,n)=>t.sort(e,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=fn(n.font),o=i.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:s}=wr(n,o);let l,c;e.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(r,o,a,s)+10):(c=this.maxHeight,l=this._fitCols(r,o,a,s)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+a;let u=t;o.textAlign="left",o.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach((t,f)=>{const p=n+e/2+o.measureText(t.text).width;(0===f||l[l.length-1]+p+2*a>r)&&(u+=c,l[l.length-(f>0?0:1)]=0,h+=c,d++),s[f]={left:0,top:h,row:d,width:p,height:i},l[l.length-1]+=p+a}),u}_fitCols(t,e,n,i){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],l=this.columnSizes=[],c=r-t;let u=a,d=0,h=0,f=0,p=0;return this.legendItems.forEach((t,r)=>{const g=n+e/2+o.measureText(t.text).width;r>0&&h+i+2*a>c&&(u+=d+a,l.push({width:d,height:h}),f+=d+a,p++,d=h=0),s[r]={left:f,top:h,col:p,width:g,height:i},d=Math.max(d,g),h+=i+a}),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:o}}=this,r=vn(o,this.left,this.width);if(this.isHorizontal()){let o=0,a=ht(n,this.left+i,this.right-this.lineWidths[o]);for(const s of e)o!==s.row&&(o=s.row,a=ht(n,this.left+i,this.right-this.lineWidths[o])),s.top+=this.top+t+i,s.left=r.leftForLtr(r.x(a),s.width),a+=s.width+i}else{let o=0,a=ht(n,this.top+t+i,this.bottom-this.columnSizes[o].height);for(const s of e)s.col!==o&&(o=s.col,a=ht(n,this.top+t+i,this.bottom-this.columnSizes[o].height)),s.top=a,s.left+=this.left+i,s.left=r.leftForLtr(r.x(s.left),s.width),a+=s.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;we(t,this),this._draw(),Se(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:o,labels:r}=t,a=te.color,l=vn(t.rtl,this.left,this.width),c=fn(r.font),{color:u,padding:d}=r,h=c.size,f=h/2;let p;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:g,boxHeight:m,itemHeight:v}=wr(r,h),y=this.isHorizontal(),x=this._computeTitleHeight();p=y?{x:ht(o,this.left+d,this.right-n[0]),y:this.top+d+x,line:0}:{x:this.left+d,y:ht(o,this.top+x+d,this.bottom-e[0].height),line:0},yn(this.ctx,t.textDirection);const b=v+d;this.legendItems.forEach((_,w)=>{i.strokeStyle=_.fontColor||u,i.fillStyle=_.fontColor||u;const S=i.measureText(_.text).width,C=l.textAlign(_.textAlign||(_.textAlign=r.textAlign)),M=g+f+S;let T=p.x,k=p.y;l.setWidth(this.width),y?w>0&&T+M+d>this.right&&(k=p.y+=b,p.line++,T=p.x=ht(o,this.left+d,this.right-n[p.line])):w>0&&k+b>this.bottom&&(T=p.x=T+e[p.line].width+d,p.line++,k=p.y=ht(o,this.top+x+d,this.bottom-e[p.line].height)),function(t,e,n){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;i.save();const o=s(n.lineWidth,1);if(i.fillStyle=s(n.fillStyle,a),i.lineCap=s(n.lineCap,"butt"),i.lineDashOffset=s(n.lineDashOffset,0),i.lineJoin=s(n.lineJoin,"miter"),i.lineWidth=o,i.strokeStyle=s(n.strokeStyle,a),i.setLineDash(s(n.lineDash,[])),r.usePointStyle){const a={radius:m*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:o},s=l.xPlus(t,g/2);be(i,a,s,e+f,r.pointStyleWidth&&g)}else{const r=e+Math.max((h-m)/2,0),a=l.leftForLtr(t,g),s=dn(n.borderRadius);i.beginPath(),Object.values(s).some(t=>0!==t)?Ae(i,{x:a,y:r,w:g,h:m,radius:s}):i.rect(a,r,g,m),i.fill(),0!==o&&i.stroke()}i.restore()}(l.x(T),k,_),T=ft(C,T+g+f,y?T+M:this.right,t.rtl),function(t,e,n){Te(i,n.text,t,e+v/2,c,{strikethrough:n.hidden,textAlign:l.textAlign(n.textAlign)})}(l.x(T),k,_),y?p.x+=M+d:p.y+=b}),xn(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=fn(e.font),i=hn(e.padding);if(!e.display)return;const o=vn(t.rtl,this.left,this.width),r=this.ctx,a=e.position,s=i.top+n.size/2;let l,c=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),l=this.top+s,c=ht(t.align,c,this.right-u);else{const e=this.columnSizes.reduce((t,e)=>Math.max(t,e.height),0);l=s+ht(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const d=ht(a,c,c+u);r.textAlign=o.textAlign(dt(a)),r.textBaseline="middle",r.strokeStyle=e.color,r.fillStyle=e.color,r.font=n.string,Te(r,e.text,d,l,n)}_computeTitleHeight(){const t=this.options.title,e=fn(t.font),n=hn(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,o;if(Q(t,this.left,this.right)&&Q(e,this.top,this.bottom))for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(i=o[n],Q(t,i.left,i.left+i.width)&&Q(e,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){return!("mousemove"!==t&&"mouseout"!==t||!e.onHover&&!e.onLeave)||!(!e.onClick||"click"!==t&&"mouseup"!==t)}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const r=this._hoveredItem,a=(o=n,null!==(i=r)&&null!==o&&i.datasetIndex===o.datasetIndex&&i.index===o.index);r&&!a&&u(e.onLeave,[t,r,this],this),this._hoveredItem=n,n&&!a&&u(e.onHover,[t,n,this],this)}else n&&u(e.onClick,[t,n,this],this);var i,o}}var Cr={id:"legend",_element:Sr,start(t,e,n){const i=t.legend=new Sr({ctx:t.ctx,options:n,chart:t});jn.configure(t,i,n),jn.addBox(t,i)},stop(t){jn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;jn.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,o=n.chart;o.isDatasetVisible(i)?(o.hide(i),e.hidden=!0):(o.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:o,color:r}}=t.legend.options;return t._getSortedDatasetMetas().map(t=>{const a=t.controller.getStyle(n?0:void 0),s=hn(a.borderWidth);return{text:e[t.index].label,fillStyle:a.backgroundColor,fontColor:r,hidden:!t.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(s.width+s.height)/4,strokeStyle:a.borderColor,pointStyle:i||a.pointStyle,rotation:a.rotation,textAlign:o||a.textAlign,borderRadius:0,datasetIndex:t.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Mr extends ki{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const o=i(n.text)?n.text.length:1;this._padding=hn(n.padding);const r=o*fn(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:o,options:r}=this,a=r.align;let s,l,c,u=0;return this.isHorizontal()?(l=ht(a,n,o),c=e+t,s=o-n):("left"===r.position?(l=n+t,c=ht(a,i,e),u=-.5*k):(l=o-t,c=ht(a,e,i),u=.5*k),s=i-e),{titleX:l,titleY:c,maxWidth:s,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=fn(e.font),i=n.lineHeight/2+this._padding.top,{titleX:o,titleY:r,maxWidth:a,rotation:s}=this._drawArgs(i);Te(t,e.text,0,0,n,{color:e.color,maxWidth:a,rotation:s,textAlign:dt(e.align),textBaseline:"middle",translation:[o,r]})}}var Tr={id:"title",_element:Mr,start(t,e,n){!function(t,e){const n=new Mr({ctx:t.ctx,options:e,chart:t});jn.configure(t,n,e),jn.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){jn.removeBox(t,t.titleBlock),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;jn.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const kr=new WeakMap;var Ar={id:"subtitle",start(t,e,n){const i=new Mr({ctx:t.ctx,options:n,chart:t});jn.configure(t,i,n),jn.addBox(t,i),kr.set(t,i)},stop(t){jn.removeBox(t,kr.get(t)),kr.delete(t)},beforeUpdate(t,e,n){const i=kr.get(t);jn.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ir={average(t){if(!t.length)return!1;let e,n,i=0,o=0,r=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i+=t.x,o+=t.y,++r}}return{x:i/r,y:o/r}},nearest(t,e){if(!t.length)return!1;let n,i,o,r=e.x,a=e.y,s=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=q(e,i.getCenterPoint());t<s&&(s=t,o=i)}}if(o){const t=o.tooltipPosition();r=t.x,a=t.y}return{x:r,y:a}}};function Dr(t,e){return e&&(i(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Pr(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Er(t,e){const{element:n,datasetIndex:i,index:o}=e,r=t.getDatasetMeta(i).controller,{label:a,value:s}=r.getLabelAndValue(o);return{chart:t,label:a,parsed:r.getParsed(o),raw:t.data.datasets[i].data[o],formattedValue:s,dataset:r.getDataset(),dataIndex:o,datasetIndex:i,element:n}}function Nr(t,e){const n=t.chart.ctx,{body:i,footer:o,title:r}=t,{boxWidth:a,boxHeight:s}=e,l=fn(e.bodyFont),c=fn(e.titleFont),u=fn(e.footerFont),h=r.length,f=o.length,p=i.length,g=hn(e.padding);let m=g.height,v=0,y=i.reduce((t,e)=>t+e.before.length+e.lines.length+e.after.length,0);y+=t.beforeBody.length+t.afterBody.length,h&&(m+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y&&(m+=p*(e.displayColors?Math.max(s,l.lineHeight):l.lineHeight)+(y-p)*l.lineHeight+(y-1)*e.bodySpacing),f&&(m+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let x=0;const b=function(t){v=Math.max(v,n.measureText(t).width+x)};return n.save(),n.font=c.string,d(t.title,b),n.font=l.string,d(t.beforeBody.concat(t.afterBody),b),x=e.displayColors?a+2+e.boxPadding:0,d(i,t=>{d(t.before,b),d(t.lines,b),d(t.after,b)}),x=0,n.font=u.string,d(t.footer,b),n.restore(),v+=g.width,{width:v,height:m}}function Lr(t,e,n,i){const{x:o,width:r}=n,{width:a,chartArea:{left:s,right:l}}=t;let c="center";return"center"===i?c=o<=(s+l)/2?"left":"right":o<=r/2?c="left":o>=a-r/2&&(c="right"),function(t,e,n,i){const{x:o,width:r}=i,a=n.caretSize+n.caretPadding;return"left"===t&&o+r+a>e.width||"right"===t&&o-r-a<0||void 0}(c,t,e,n)&&(c="center"),c}function Rr(t,e,n){const i=n.yAlign||e.yAlign||function(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||Lr(t,e,n,i),yAlign:i}}function Or(t,e,n,i){const{caretSize:o,caretPadding:r,cornerRadius:a}=t,{xAlign:s,yAlign:l}=n,c=o+r,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=dn(a);let p=function(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,s);const g=function(t,e,n){let{y:i,height:o}=t;return"top"===e?i+=n:i-="bottom"===e?o+n:o/2,i}(e,l,c);return"center"===l?"left"===s?p+=c:"right"===s&&(p-=c):"left"===s?p-=Math.max(u,h)+o:"right"===s&&(p+=Math.max(d,f)+o),{x:K(p,0,i.width-e.width),y:K(g,0,i.height-e.height)}}function Br(t,e,n){const i=hn(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function zr(t){return Dr([],Pr(t))}function Vr(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}class Fr extends ki{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,o=new pi(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=mn(this.chart.getContext(),{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"}))}getTitle(t,e){const{callbacks:n}=e,i=n.beforeTitle.apply(this,[t]),o=n.title.apply(this,[t]),r=n.afterTitle.apply(this,[t]);let a=[];return a=Dr(a,Pr(i)),a=Dr(a,Pr(o)),a=Dr(a,Pr(r)),a}getBeforeBody(t,e){return zr(e.callbacks.beforeBody.apply(this,[t]))}getBody(t,e){const{callbacks:n}=e,i=[];return d(t,t=>{const e={before:[],lines:[],after:[]},o=Vr(n,t);Dr(e.before,Pr(o.beforeLabel.call(this,t))),Dr(e.lines,o.label.call(this,t)),Dr(e.after,Pr(o.afterLabel.call(this,t))),i.push(e)}),i}getAfterBody(t,e){return zr(e.callbacks.afterBody.apply(this,[t]))}getFooter(t,e){const{callbacks:n}=e,i=n.beforeFooter.apply(this,[t]),o=n.footer.apply(this,[t]),r=n.afterFooter.apply(this,[t]);let a=[];return a=Dr(a,Pr(i)),a=Dr(a,Pr(o)),a=Dr(a,Pr(r)),a}_createItems(t){const e=this._active,n=this.chart.data,i=[],o=[],r=[];let a,s,l=[];for(a=0,s=e.length;a<s;++a)l.push(Er(this.chart,e[a]));return t.filter&&(l=l.filter((e,i,o)=>t.filter(e,i,o,n))),t.itemSort&&(l=l.sort((e,i)=>t.itemSort(e,i,n))),d(l,e=>{const n=Vr(t.callbacks,e);i.push(n.labelColor.call(this,e)),o.push(n.labelPointStyle.call(this,e)),r.push(n.labelTextColor.call(this,e))}),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let o,r=[];if(i.length){const t=Ir[n.position].call(this,i,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const e=this._size=Nr(this,n),a=Object.assign({},t,e),s=Rr(this.chart,n,a),l=Or(n,a,s,this.chart);this.xAlign=s.xAlign,this.yAlign=s.yAlign,o={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const o=this.getCaretPosition(t,n,i);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:o}=this,{caretSize:r,cornerRadius:a}=n,{topLeft:s,topRight:l,bottomLeft:c,bottomRight:u}=dn(a),{x:d,y:h}=t,{width:f,height:p}=e;let g,m,v,y,x,b;return"center"===o?(x=h+p/2,"left"===i?(g=d,m=g-r,y=x+r,b=x-r):(g=d+f,m=g+r,y=x-r,b=x+r),v=g):(m="left"===i?d+Math.max(s,c)+r:"right"===i?d+f-Math.max(l,u)-r:this.caretX,"top"===o?(y=h,x=y-r,g=m-r,v=m+r):(y=h+p,x=y+r,g=m+r,v=m-r),b=y),{x1:g,x2:m,x3:v,y1:y,y2:x,y3:b}}drawTitle(t,e,n){const i=this.title,o=i.length;let r,a,s;if(o){const l=vn(n.rtl,this.x,this.width);for(t.x=Br(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",r=fn(n.titleFont),a=n.titleSpacing,e.fillStyle=n.titleColor,e.font=r.string,s=0;s<o;++s)e.fillText(i[s],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+a,s+1===o&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,e,n,i,r){const a=this.labelColors[n],s=this.labelPointStyles[n],{boxHeight:l,boxWidth:c,boxPadding:u}=r,d=fn(r.bodyFont),h=Br(this,"left",r),f=i.x(h),p=e.y+(l<d.lineHeight?(d.lineHeight-l)/2:0);if(r.usePointStyle){const e={radius:Math.min(c,l)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},n=i.leftForLtr(f,c)+c/2,o=p+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,xe(t,e,n,o),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,xe(t,e,n,o)}else{t.lineWidth=o(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const e=i.leftForLtr(f,c-u),n=i.leftForLtr(i.xPlus(f,1),c-u-2),s=dn(a.borderRadius);Object.values(s).some(t=>0!==t)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Ae(t,{x:e,y:p,w:c,h:l,radius:s}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Ae(t,{x:n,y:p+1,w:c-2,h:l-2,radius:s}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(e,p,c,l),t.strokeRect(e,p,c,l),t.fillStyle=a.backgroundColor,t.fillRect(n,p+1,c-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:s,boxWidth:l,boxPadding:c}=n,u=fn(n.bodyFont);let h=u.lineHeight,f=0;const p=vn(n.rtl,this.x,this.width),g=function(n){e.fillText(n,p.x(t.x+f),t.y+h/2),t.y+=h+o},m=p.textAlign(r);let v,y,x,b,_,w,S;for(e.textAlign=r,e.textBaseline="middle",e.font=u.string,t.x=Br(this,m,n),e.fillStyle=n.bodyColor,d(this.beforeBody,g),f=a&&"right"!==m?"center"===r?l/2+c:l+2+c:0,b=0,w=i.length;b<w;++b){for(v=i[b],y=this.labelTextColors[b],e.fillStyle=y,d(v.before,g),x=v.lines,a&&x.length&&(this._drawColorBox(e,t,b,p,n),h=Math.max(u.lineHeight,s)),_=0,S=x.length;_<S;++_)g(x[_]),h=u.lineHeight;d(v.after,g)}f=0,h=u.lineHeight,d(this.afterBody,g),t.y-=o}drawFooter(t,e,n){const i=this.footer,o=i.length;let r,a;if(o){const s=vn(n.rtl,this.x,this.width);for(t.x=Br(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=s.textAlign(n.footerAlign),e.textBaseline="middle",r=fn(n.footerFont),e.fillStyle=n.footerColor,e.font=r.string,a=0;a<o;++a)e.fillText(i[a],s.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:o,yAlign:r}=this,{x:a,y:s}=t,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=dn(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(a+u,s),"top"===r&&this.drawCaret(t,e,n,i),e.lineTo(a+l-d,s),e.quadraticCurveTo(a+l,s,a+l,s+d),"center"===r&&"right"===o&&this.drawCaret(t,e,n,i),e.lineTo(a+l,s+c-f),e.quadraticCurveTo(a+l,s+c,a+l-f,s+c),"bottom"===r&&this.drawCaret(t,e,n,i),e.lineTo(a+h,s+c),e.quadraticCurveTo(a,s+c,a,s+c-h),"center"===r&&"left"===o&&this.drawCaret(t,e,n,i),e.lineTo(a,s+u),e.quadraticCurveTo(a,s,a+u,s),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,o=n&&n.y;if(i||o){const n=Ir[t.position].call(this,this._active,this._eventPosition);if(!n)return;const r=this._size=Nr(this,t),a=Object.assign({},n,this._size),s=Rr(e,t,a),l=Or(t,a,s,e);i._to===l.x&&o._to===l.y||(this.xAlign=s.xAlign,this.yAlign=s.yAlign,this.width=r.width,this.height=r.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=hn(e.padding);e.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(t.save(),t.globalAlpha=n,this.drawBackground(o,t,i,e),yn(t,e.textDirection),o.y+=r.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),xn(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map(({datasetIndex:t,index:e})=>{const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}}),o=!h(n,i),r=this._positionChanged(i,e);(o||r)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,o=this._active||[],r=this._getActiveElements(t,o,e,n),a=this._positionChanged(r,t),s=e||!h(r,o)||a;return s&&(this._active=r,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),s}_getActiveElements(t,e,n,i){const o=this.options;if("mouseout"===t.type)return[];if(!i)return e;const r=this.chart.getElementsAtEventForMode(t,o.mode,o,n);return o.reverse&&r.reverse(),r}_positionChanged(t,e){const{caretX:n,caretY:i,options:o}=this,r=Ir[o.position].call(this,t,e);return!1!==r&&(n!==r.x||i!==r.y)}}Fr.positioners=Ir;var Hr=Object.freeze({__proto__:null,Decimation:or,Filler:_r,Legend:Cr,SubTitle:Ar,Title:Tr,Tooltip:{id:"tooltip",_element:Fr,positioners:Ir,afterInit(t,e,n){n&&(t.tooltip=new Fr({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",n))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){t.tooltip&&t.tooltip.handleEvent(e.event,e.replay,e.inChartArea)&&(e.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:t,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:t,beforeBody:t,beforeLabel:t,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return n(i)||(e+=i),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:t,afterBody:t,beforeFooter:t,footer:t,afterFooter:t}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class Wr extends zi{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:i}of e)t[n]===i&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(n(t))return null;const i=this.getLabels();return((t,e)=>null===t?null:K(Math.round(t),0,e))(e=isFinite(e)&&i[e]===t?e:function(t,e,n,i){const o=t.indexOf(e);return-1===o?((t,e,n,i)=>("string"==typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,i):o!==t.lastIndexOf(e)?n:o}(i,t,s(e,t),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let o=this.getLabels();o=0===t&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let r=t;r<=e;r++)i.push({value:r});return i}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function Gr(t,e,{horizontal:n,minRotation:i}){const o=G(i),r=(n?Math.sin(o):Math.cos(o))||.001;return Math.min(e/r,.75*e*(""+t).length)}Wr.id="category",Wr.defaults={ticks:{callback:Wr.prototype.getLabelForValue}};class Ur extends zi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return n(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:o}=this;const r=t=>i=e?i:t,a=t=>o=n?o:t;if(t){const t=O(i),e=O(o);t<0&&e<0?a(0):t>0&&e>0&&r(0)}if(i===o){let e=1;(o>=Number.MAX_SAFE_INTEGER||i<=Number.MIN_SAFE_INTEGER)&&(e=Math.abs(.05*o)),a(o+e),t||r(i-e)}this.min=i,this.max=o}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:i}=t;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const o=function(t,e){const i=[],{bounds:o,step:r,min:a,max:s,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=t,f=r||1,p=u-1,{min:g,max:m}=e,v=!n(a),y=!n(s),x=!n(c),b=(m-g)/(d+1);let _,w,S,C,M=B((m-g)/p/f)*f;if(M<1e-14&&!v&&!y)return[{value:g},{value:m}];C=Math.ceil(m/M)-Math.floor(g/M),C>p&&(M=B(C*M/p/f)*f),n(l)||(_=Math.pow(10,l),M=Math.ceil(M*_)/_),"ticks"===o?(w=Math.floor(g/M)*M,S=Math.ceil(m/M)*M):(w=g,S=m),v&&y&&r&&H((s-a)/r,M/1e3)?(C=Math.round(Math.min((s-a)/M,u)),M=(s-a)/C,w=a,S=s):x?(w=v?a:w,S=y?s:S,C=c-1,M=(S-w)/C):(C=(S-w)/M,C=F(C,Math.round(C),M/1e3)?Math.round(C):Math.ceil(C));const T=Math.max(j(M),j(w));_=Math.pow(10,n(l)?T:l),w=Math.round(w*_)/_,S=Math.round(S*_)/_;let k=0;for(v&&(h&&w!==a?(i.push({value:a}),w<a&&k++,F(Math.round((w+k*M)*_)/_,a,Gr(a,b,t))&&k++):w<a&&k++);k<C;++k)i.push({value:Math.round((w+k*M)*_)/_});return y&&h&&S!==s?i.length&&F(i[i.length-1].value,s,Gr(s,b,t))?i[i.length-1].value=s:i.push({value:s}):y&&S!==s||i.push({value:S}),i}({maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&W(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return rn(t,this.chart.options.locale,this.options.ticks.format)}}class jr extends Ur{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=r(t)?t:0,this.max=r(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=G(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function $r(t){return 1==t/Math.pow(10,Math.floor(R(t)))}jr.id="linear",jr.defaults={ticks:{callback:Ii.formatters.numeric}};class qr extends zi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=Ur.prototype.parse.apply(this,[t,e]);if(0!==n)return r(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=r(t)?Math.max(0,t):null,this.max=r(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const o=e=>n=t?n:e,r=t=>i=e?i:t,a=(t,e)=>Math.pow(10,Math.floor(R(t))+e);n===i&&(n<=0?(o(1),r(10)):(o(a(n,-1)),r(a(i,1)))),n<=0&&o(a(i,-1)),i<=0&&r(a(n,1)),this._zero&&this.min!==this._suggestedMin&&n===a(this.min,0)&&o(a(n,-1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e=function(t,e){const n=Math.floor(R(e.max)),i=Math.ceil(e.max/Math.pow(10,n)),o=[];let r=a(t.min,Math.pow(10,Math.floor(R(e.min)))),s=Math.floor(R(r)),l=Math.floor(r/Math.pow(10,s)),c=s<0?Math.pow(10,Math.abs(s)):1;do{o.push({value:r,major:$r(r)}),++l,10===l&&(l=1,++s,c=s>=0?1:c),r=Math.round(l*Math.pow(10,s)*c)/c}while(s<n||s===n&&l<i);const u=a(t.max,r);return o.push({value:u,major:$r(r)}),o}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&W(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":rn(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=R(t),this._valueRange=R(this.max)-R(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(R(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function Yr(t){const e=t.ticks;if(e.display&&t.display){const t=hn(e.backdropPadding);return s(e.font&&e.font.size,te.font.size)+t.height}return 0}function Xr(t,e,n,i,o){return t===i||t===o?{start:e-n/2,end:e+n/2}:t<i||t>o?{start:e-n,end:e}:{start:e,end:e+n}}function Zr(t,e,n,i,o){const r=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let s=0,l=0;i.start<e.l?(s=(e.l-i.start)/r,t.l=Math.min(t.l,e.l-s)):i.end>e.r&&(s=(i.end-e.r)/r,t.r=Math.max(t.r,e.r+s)),o.start<e.t?(l=(e.t-o.start)/a,t.t=Math.min(t.t,e.t-l)):o.end>e.b&&(l=(o.end-e.b)/a,t.b=Math.max(t.b,e.b+l))}function Kr(t){return 0===t||180===t?"center":t<180?"left":"right"}function Jr(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function Qr(t,e,n){return 90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e),t}function ta(t,e,n,i){const{ctx:o}=t;if(n)o.arc(t.xCenter,t.yCenter,e,0,A);else{let n=t.getPointPosition(0,e);o.moveTo(n.x,n.y);for(let r=1;r<i;r++)n=t.getPointPosition(r,e),o.lineTo(n.x,n.y)}}qr.id="logarithmic",qr.defaults={ticks:{callback:Ii.formatters.logarithmic,major:{enabled:!0}}};class ea extends Ur{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=hn(Yr(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=r(t)&&!isNaN(t)?t:0,this.max=r(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Yr(this.options))}generateTickLabels(t){Ur.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((t,e)=>{const n=u(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""}).filter((t,e)=>this.chart.getDataVisibility(e))}fit(){const t=this.options;t.display&&t.pointLabels.display?function(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),o=[],r=[],a=t._pointLabels.length,s=t.options.pointLabels,l=s.centerPointLabels?k/a:0;for(let h=0;h<a;h++){const a=s.setContext(t.getPointLabelContext(h));r[h]=a.padding;const f=t.getPointPosition(h,t.drawingArea+r[h],l),p=fn(a.font),g=(c=t.ctx,u=p,d=i(d=t._pointLabels[h])?d:[d],{w:me(c,u.string,d),h:d.length*u.lineHeight});o[h]=g;const m=X(t.getIndexAngle(h)+l),v=Math.round(U(m));Zr(n,e,m,Xr(v,f.x,g.w,0,180),Xr(v,f.y,g.h,90,270))}var c,u,d;t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const i=[],o=t._pointLabels.length,r=t.options,a=Yr(r)/2,s=t.drawingArea,l=r.pointLabels.centerPointLabels?k/o:0;for(let c=0;c<o;c++){const o=t.getPointPosition(c,s+a+n[c],l),r=Math.round(U(X(o.angle+E))),u=e[c],d=Qr(o.y,u.h,r),h=Kr(r),f=Jr(o.x,u.w,h);i.push({x:o.x,y:d,textAlign:h,left:f,top:d,right:f+u.w,bottom:d+u.h})}return i}(t,o,r)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){return X(t*(A/(this._pointLabels.length||1))+G(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(n(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(n(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return mn(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const i=this.getIndexAngle(t)-E+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:o}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),ta(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:o}=e,r=this._pointLabels.length;let a,s,l;if(e.pointLabels.display&&function(t,e){const{ctx:i,options:{pointLabels:o}}=t;for(let r=e-1;r>=0;r--){const e=o.setContext(t.getPointLabelContext(r)),a=fn(e.font),{x:s,y:l,textAlign:c,left:u,top:d,right:h,bottom:f}=t._pointLabelItems[r],{backdropColor:p}=e;if(!n(p)){const t=dn(e.borderRadius),n=hn(e.backdropPadding);i.fillStyle=p;const o=u-n.left,r=d-n.top,a=h-u+n.width,s=f-d+n.height;Object.values(t).some(t=>0!==t)?(i.beginPath(),Ae(i,{x:o,y:r,w:a,h:s,radius:t}),i.fill()):i.fillRect(o,r,a,s)}Te(i,t._pointLabels[r],s,l+a.lineHeight/2,a,{color:e.color,textAlign:c,textBaseline:"middle"})}}(this,r),o.display&&this.ticks.forEach((t,e)=>{0!==e&&(s=this.getDistanceFromCenterForValue(t.value),function(t,e,n,i){const o=t.ctx,r=e.circular,{color:a,lineWidth:s}=e;!r&&!i||!a||!s||n<0||(o.save(),o.strokeStyle=a,o.lineWidth=s,o.setLineDash(e.borderDash),o.lineDashOffset=e.borderDashOffset,o.beginPath(),ta(t,n,r,i),o.closePath(),o.stroke(),o.restore())}(this,o.setContext(this.getContext(e-1)),s,r))}),i.display){for(t.save(),a=r-1;a>=0;a--){const n=i.setContext(this.getPointLabelContext(a)),{color:o,lineWidth:r}=n;r&&o&&(t.lineWidth=r,t.strokeStyle=o,t.setLineDash(n.borderDash),t.lineDashOffset=n.borderDashOffset,s=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),l=this.getPointPosition(a,s),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let o,r;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((i,a)=>{if(0===a&&!e.reverse)return;const s=n.setContext(this.getContext(a)),l=fn(s.font);if(o=this.getDistanceFromCenterForValue(this.ticks[a].value),s.showLabelBackdrop){t.font=l.string,r=t.measureText(i.label).width,t.fillStyle=s.backdropColor;const e=hn(s.backdropPadding);t.fillRect(-r/2-e.left,-o-l.size/2-e.top,r+e.width,l.size+e.height)}Te(t,i.label,0,-o,l,{color:s.color})}),t.restore()}drawTitle(){}}ea.id="radialLinear",ea.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ii.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}},ea.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},ea.descriptors={angleLines:{_fallback:"grid"}};const na={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ia=Object.keys(na);function oa(t,e){return t-e}function ra(t,e){if(n(e))return null;const i=t._adapter,{parser:o,round:a,isoWeekday:s}=t._parseOpts;let l=e;return"function"==typeof o&&(l=o(l)),r(l)||(l="string"==typeof o?i.parse(l,o):i.parse(l)),null===l?null:(a&&(l="week"!==a||!V(s)&&!0!==s?i.startOf(l,a):i.startOf(l,"isoWeek",s)),+l)}function aa(t,e,n,i){const o=ia.length;for(let r=ia.indexOf(t);r<o-1;++r){const t=na[ia[r]],o=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(o*t.size))<=i)return ia[r]}return ia[o-1]}function sa(t,e,n){if(n){if(n.length){const{lo:i,hi:o}=tt(n,e);t[n[i]>=e?n[i]:n[o]]=!0}}else t[e]=!0}function la(t,e,n){const i=[],o={},r=e.length;let a,s;for(a=0;a<r;++a)s=e[a],o[s]=a,i.push({value:s,major:!1});return 0!==r&&n?function(t,e,n,i){const o=t._adapter,r=+o.startOf(e[0].value,i),a=e[e.length-1].value;let s,l;for(s=r;s<=a;s=+o.add(s,1,i))l=n[s],l>=0&&(e[l].major=!0);return e}(t,i,o,n):i}class ca extends zi{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e){const n=t.time||(t.time={}),i=this._adapter=new mo._date(t.adapters.date);i.init(e),v(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:ra(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:o,minDefined:a,maxDefined:s}=this.getUserBounds();function l(t){a||isNaN(t.min)||(i=Math.min(i,t.min)),s||isNaN(t.max)||(o=Math.max(o,t.max))}a&&s||(l(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||l(this.getMinMax(!1))),i=r(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),o=r(o)&&!isNaN(o)?o:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const o=this.min,r=it(i,o,this.max);return this._unit=e.unit||(n.autoSkip?aa(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):function(t,e,n,i,o){for(let r=ia.length-1;r>=ia.indexOf(n);r--){const n=ia[r];if(na[n].common&&t._adapter.diff(o,i,n)>=e-1)return n}return ia[n?ia.indexOf(n):0]}(this,r.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=ia.indexOf(t)+1,n=ia.length;e<n;++e)if(na[ia[e]].common)return ia[e]}(this._unit):void 0,this.initOffsets(i),t.reverse&&r.reverse(),la(this,r,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t){let e,n,i=0,o=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),i=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),o=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;i=K(i,0,r),o=K(o,0,r),this._offsets={start:i,end:o,factor:1/(i+1+o)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,o=i.time,r=o.unit||aa(o.minUnit,e,n,this._getLabelCapacity(e)),a=s(o.stepSize,1),l="week"===r&&o.isoWeekday,c=V(l)||!0===l,u={};let d,h,f=e;if(c&&(f=+t.startOf(f,"isoWeek",l)),f=+t.startOf(f,c?"day":r),t.diff(n,e,r)>1e5*a)throw new Error(e+" and "+n+" are too far apart with stepSize of "+a+" "+r);const p="data"===i.ticks.source&&this.getDataTimestamps();for(d=f,h=0;d<n;d=+t.add(d,a,r),h++)sa(u,d,p);return d!==n&&"ticks"!==i.bounds&&1!==h||sa(u,d,p),Object.keys(u).sort((t,e)=>t-e).map(t=>+t)}getLabelForValue(t){const e=this.options.time;return this._adapter.format(t,e.tooltipFormat?e.tooltipFormat:e.displayFormats.datetime)}_tickFormatFunction(t,e,n,i){const o=this.options,r=o.time.displayFormats,a=this._unit,s=this._majorUnit,l=s&&r[s],c=n[e],d=this._adapter.format(t,i||(s&&l&&c&&c.major?l:a&&r[a])),h=o.ticks.callback;return h?u(h,[d,e,n],this):d}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=G(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(i),r=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*r,h:n*r+a*o}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,o=this._tickFormatFunction(t,0,la(this,[t],this._majorUnit),i),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,e=i.length;t<e;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(ra(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return st(t.sort(oa))}}function ua(t,e,n){let i,o,r,a,s=0,l=t.length-1;n?(e>=t[s].pos&&e<=t[l].pos&&({lo:s,hi:l}=et(t,"pos",e)),({pos:i,time:r}=t[s]),({pos:o,time:a}=t[l])):(e>=t[s].time&&e<=t[l].time&&({lo:s,hi:l}=et(t,"time",e)),({time:i,pos:r}=t[s]),({time:o,pos:a}=t[l]));const c=o-i;return c?r+(a-r)*(e-i)/c:r}ca.id="time",ca.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class da extends ca{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=ua(e,this.min),this._tableRange=ua(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],o=[];let r,a,s,l,c;for(r=0,a=t.length;r<a;++r)l=t[r],l>=e&&l<=n&&i.push(l);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(r=0,a=i.length;r<a;++r)c=i[r+1],s=i[r-1],l=i[r],Math.round((c+s)/2)!==l&&o.push({time:l,pos:r/(a-1)});return o}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(ua(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return ua(this._table,n*this._tableRange+this._minPos,!0)}}da.id="timeseries",da.defaults=ca.defaults;var ha=Object.freeze({__proto__:null,CategoryScale:Wr,LinearScale:jr,LogarithmicScale:qr,RadialLinearScale:ea,TimeScale:ca,TimeSeriesScale:da});return uo.register(No,ha,er,Hr),uo.helpers={...kn},uo._adapters=mo,uo.Animation=hi,uo.Animations=pi,uo.animator=mt,uo.controllers=Fi.controllers.items,uo.DatasetController=Ti,uo.Element=ki,uo.elements=er,uo.Interaction=Nn,uo.layouts=jn,uo.platforms=ci,uo.Scale=zi,uo.Ticks=Ii,Object.assign(uo,No,ha,er,Hr,ci),uo.Chart=uo,"undefined"!=typeof window&&(window.Chart=uo),uo});